"use strict";(self.webpackChunkmeetclone=self.webpackChunkmeetclone||[]).push([[792],{1076:(hn,at,ie)=>{ie.d(at,{Am:()=>Yt,FA:()=>Oe,Fy:()=>it,Im:()=>ut,Ku:()=>bt,T9:()=>ct,Tj:()=>xn,Uj:()=>rt,XA:()=>qe,ZQ:()=>Vt,bD:()=>Rn,c1:()=>fr,cY:()=>dt,eX:()=>ce,g:()=>ye,jZ:()=>Qt,lT:()=>cr,lV:()=>Qe,nr:()=>Dt,sr:()=>Hn,tD:()=>or,u:()=>he,yU:()=>Xt,zW:()=>Ne});const p=function(re){const ne=[];let fe=0;for(let Be=0;Be<re.length;Be++){let Me=re.charCodeAt(Be);Me<128?ne[fe++]=Me:Me<2048?(ne[fe++]=Me>>6|192,ne[fe++]=63&Me|128):55296==(64512&Me)&&Be+1<re.length&&56320==(64512&re.charCodeAt(Be+1))?(Me=65536+((1023&Me)<<10)+(1023&re.charCodeAt(++Be)),ne[fe++]=Me>>18|240,ne[fe++]=Me>>12&63|128,ne[fe++]=Me>>6&63|128,ne[fe++]=63&Me|128):(ne[fe++]=Me>>12|224,ne[fe++]=Me>>6&63|128,ne[fe++]=63&Me|128)}return ne},de={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(re,ne){if(!Array.isArray(re))throw Error("encodeByteArray takes an array as a parameter");this.init_();const fe=ne?this.byteToCharMapWebSafe_:this.byteToCharMap_,Be=[];for(let Me=0;Me<re.length;Me+=3){const mt=re[Me],Zt=Me+1<re.length,Nn=Zt?re[Me+1]:0,vr=Me+2<re.length,Bn=vr?re[Me+2]:0;let ri=(15&Nn)<<2|Bn>>6,Ni=63&Bn;vr||(Ni=64,Zt||(ri=64)),Be.push(fe[mt>>2],fe[(3&mt)<<4|Nn>>4],fe[ri],fe[Ni])}return Be.join("")},encodeString(re,ne){return this.HAS_NATIVE_SUPPORT&&!ne?btoa(re):this.encodeByteArray(p(re),ne)},decodeString(re,ne){return this.HAS_NATIVE_SUPPORT&&!ne?atob(re):function(re){const ne=[];let fe=0,Be=0;for(;fe<re.length;){const Me=re[fe++];if(Me<128)ne[Be++]=String.fromCharCode(Me);else if(Me>191&&Me<224){const mt=re[fe++];ne[Be++]=String.fromCharCode((31&Me)<<6|63&mt)}else if(Me>239&&Me<365){const vr=((7&Me)<<18|(63&re[fe++])<<12|(63&re[fe++])<<6|63&re[fe++])-65536;ne[Be++]=String.fromCharCode(55296+(vr>>10)),ne[Be++]=String.fromCharCode(56320+(1023&vr))}else{const mt=re[fe++],Zt=re[fe++];ne[Be++]=String.fromCharCode((15&Me)<<12|(63&mt)<<6|63&Zt)}}return ne.join("")}(this.decodeStringToByteArray(re,ne))},decodeStringToByteArray(re,ne){this.init_();const fe=ne?this.charToByteMapWebSafe_:this.charToByteMap_,Be=[];for(let Me=0;Me<re.length;){const mt=fe[re.charAt(Me++)],Nn=Me<re.length?fe[re.charAt(Me)]:0;++Me;const Bn=Me<re.length?fe[re.charAt(Me)]:64;++Me;const ot=Me<re.length?fe[re.charAt(Me)]:64;if(++Me,null==mt||null==Nn||null==Bn||null==ot)throw new $e;Be.push(mt<<2|Nn>>4),64!==Bn&&(Be.push(Nn<<4&240|Bn>>2),64!==ot&&Be.push(Bn<<6&192|ot))}return Be},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let re=0;re<this.ENCODED_VALS.length;re++)this.byteToCharMap_[re]=this.ENCODED_VALS.charAt(re),this.charToByteMap_[this.byteToCharMap_[re]]=re,this.byteToCharMapWebSafe_[re]=this.ENCODED_VALS_WEBSAFE.charAt(re),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[re]]=re,re>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(re)]=re,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(re)]=re)}}};class $e extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const rt=function(re){return function(re){const ne=p(re);return de.encodeByteArray(ne,!0)}(re).replace(/\./g,"")},he=function(re){try{return de.decodeString(re,!0)}catch(ne){console.error("base64Decode failed: ",ne)}return null},Bt=()=>{try{return function ft(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const re=process.env.__FIREBASE_DEFAULTS__;return re?JSON.parse(re):void 0})()||(()=>{if(typeof document>"u")return;let re;try{re=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const ne=re&&he(re[1]);return ne&&JSON.parse(ne)})()}catch(re){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${re}`)}},xn=re=>{var ne,fe;return null===(fe=null===(ne=Bt())||void 0===ne?void 0:ne.emulatorHosts)||void 0===fe?void 0:fe[re]},Xt=re=>{const ne=xn(re);if(!ne)return;const fe=ne.lastIndexOf(":");if(fe<=0||fe+1===ne.length)throw new Error(`Invalid host ${ne} with no separate hostname and port!`);const Be=parseInt(ne.substring(fe+1),10);return"["===ne[0]?[ne.substring(1,fe-1),Be]:[ne.substring(0,fe),Be]},ct=()=>{var re;return null===(re=Bt())||void 0===re?void 0:re.config},qe=re=>{var ne;return null===(ne=Bt())||void 0===ne?void 0:ne[`_${re}`]};class dt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((ne,fe)=>{this.resolve=ne,this.reject=fe})}wrapCallback(ne){return(fe,Be)=>{fe?this.reject(fe):this.resolve(Be),"function"==typeof ne&&(this.promise.catch(()=>{}),1===ne.length?ne(fe):ne(fe,Be))}}}function it(re,ne){if(re.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Be=ne||"demo-project",Me=re.iat||0,mt=re.sub||re.user_id;if(!mt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Zt=Object.assign({iss:`https://securetoken.google.com/${Be}`,aud:Be,iat:Me,exp:Me+3600,auth_time:Me,sub:mt,user_id:mt,firebase:{sign_in_provider:"custom",identities:{}}},re);return[rt(JSON.stringify({alg:"none",type:"JWT"})),rt(JSON.stringify(Zt)),""].join(".")}function Vt(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Qt(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Vt())}function fr(){return typeof navigator<"u"&&"Cloudflare-Workers"===navigator.userAgent}function Hn(){const re="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof re&&void 0!==re.id}function Qe(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function cr(){const re=Vt();return re.indexOf("MSIE ")>=0||re.indexOf("Trident/")>=0}function Dt(){return!function De(){var re;const ne=null===(re=Bt())||void 0===re?void 0:re.forceEnvironment;if("node"===ne)return!0;if("browser"===ne)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ne(){try{return"object"==typeof indexedDB}catch{return!1}}function ce(){return new Promise((re,ne)=>{try{let fe=!0;const Be="validate-browser-context-for-indexeddb-analytics-module",Me=self.indexedDB.open(Be);Me.onsuccess=()=>{Me.result.close(),fe||self.indexedDB.deleteDatabase(Be),re(!0)},Me.onupgradeneeded=()=>{fe=!1},Me.onerror=()=>{var mt;ne((null===(mt=Me.error)||void 0===mt?void 0:mt.message)||"")}}catch(fe){ne(fe)}})}class ye extends Error{constructor(ne,fe,Be){super(fe),this.code=ne,this.customData=Be,this.name="FirebaseError",Object.setPrototypeOf(this,ye.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Oe.prototype.create)}}class Oe{constructor(ne,fe,Be){this.service=ne,this.serviceName=fe,this.errors=Be}create(ne,...fe){const Be=fe[0]||{},Me=`${this.service}/${ne}`,mt=this.errors[ne],Zt=mt?function Et(re,ne){return re.replace(kt,(fe,Be)=>{const Me=ne[Be];return null!=Me?String(Me):`<${Be}?>`})}(mt,Be):"Error";return new ye(Me,`${this.serviceName}: ${Zt} (${Me}).`,Be)}}const kt=/\{\$([^}]+)}/g;function ut(re){for(const ne in re)if(Object.prototype.hasOwnProperty.call(re,ne))return!1;return!0}function Rn(re,ne){if(re===ne)return!0;const fe=Object.keys(re),Be=Object.keys(ne);for(const Me of fe){if(!Be.includes(Me))return!1;const mt=re[Me],Zt=ne[Me];if(Ct(mt)&&Ct(Zt)){if(!Rn(mt,Zt))return!1}else if(mt!==Zt)return!1}for(const Me of Be)if(!fe.includes(Me))return!1;return!0}function Ct(re){return null!==re&&"object"==typeof re}function Yt(re){const ne=[];for(const[fe,Be]of Object.entries(re))Array.isArray(Be)?Be.forEach(Me=>{ne.push(encodeURIComponent(fe)+"="+encodeURIComponent(Me))}):ne.push(encodeURIComponent(fe)+"="+encodeURIComponent(Be));return ne.length?"&"+ne.join("&"):""}function or(re,ne){const fe=new Fn(re,ne);return fe.subscribe.bind(fe)}class Fn{constructor(ne,fe){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=fe,this.task.then(()=>{ne(this)}).catch(Be=>{this.error(Be)})}next(ne){this.forEachObserver(fe=>{fe.next(ne)})}error(ne){this.forEachObserver(fe=>{fe.error(ne)}),this.close(ne)}complete(){this.forEachObserver(ne=>{ne.complete()}),this.close()}subscribe(ne,fe,Be){let Me;if(void 0===ne&&void 0===fe&&void 0===Be)throw new Error("Missing Observer.");Me=function Pr(re,ne){if("object"!=typeof re||null===re)return!1;for(const fe of ne)if(fe in re&&"function"==typeof re[fe])return!0;return!1}(ne,["next","error","complete"])?ne:{next:ne,error:fe,complete:Be},void 0===Me.next&&(Me.next=sr),void 0===Me.error&&(Me.error=sr),void 0===Me.complete&&(Me.complete=sr);const mt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Me.error(this.finalError):Me.complete()}catch{}}),this.observers.push(Me),mt}unsubscribeOne(ne){void 0===this.observers||void 0===this.observers[ne]||(delete this.observers[ne],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(ne){if(!this.finalized)for(let fe=0;fe<this.observers.length;fe++)this.sendOne(fe,ne)}sendOne(ne,fe){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[ne])try{fe(this.observers[ne])}catch(Be){typeof console<"u"&&console.error&&console.error(Be)}})}close(ne){this.finalized||(this.finalized=!0,void 0!==ne&&(this.finalError=ne),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function sr(){}function bt(re){return re&&re._delegate?re._delegate:re}},9328:(hn,at,ie)=>{ie.r(at),ie.d(at,{AppComponent:()=>Ao});var R=ie(467),J=ie(177),Se=ie(9712),p=ie(4438),Le=ie(8455),de=ie(1985),$e=ie(3073),It=ie(8750),rt=ie(3794),he=ie(4360),_e=ie(6450),Ge=ie(8496),ft=ie(1413),Tt=ie(6354);let fn=(()=>{class N{constructor(f,S){this._renderer=f,this._elementRef=S,this.onChange=F=>{},this.onTouched=()=>{}}setProperty(f,S){this._renderer.setProperty(this._elementRef.nativeElement,f,S)}registerOnTouched(f){this.onTouched=f}registerOnChange(f){this.onChange=f}setDisabledState(f){this.setProperty("disabled",f)}static{this.\u0275fac=function(S){return new(S||N)(p.rXU(p.sFG),p.rXU(p.aKT))}}static{this.\u0275dir=p.FsC({type:N})}}return N})(),nn=(()=>{class N extends fn{static{this.\u0275fac=(()=>{let f;return function(F){return(f||(f=p.xGo(N)))(F||N)}})()}static{this.\u0275dir=p.FsC({type:N,features:[p.Vt3]})}}return N})();const Bt=new p.nKC(""),ct={provide:Bt,useExisting:(0,p.Rfq)(()=>it),multi:!0},dt=new p.nKC("");let it=(()=>{class N extends fn{constructor(f,S,F){super(f,S),this._compositionMode=F,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function qe(){const N=(0,J.QT)()?(0,J.QT)().getUserAgent():"";return/android (\d+)/.test(N.toLowerCase())}())}writeValue(f){this.setProperty("value",f??"")}_handleInput(f){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(f)}_compositionStart(){this._composing=!0}_compositionEnd(f){this._composing=!1,this._compositionMode&&this.onChange(f)}static{this.\u0275fac=function(S){return new(S||N)(p.rXU(p.sFG),p.rXU(p.aKT),p.rXU(dt,8))}}static{this.\u0275dir=p.FsC({type:N,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(S,F){1&S&&p.bIt("input",function(k){return F._handleInput(k.target.value)})("blur",function(){return F.onTouched()})("compositionstart",function(){return F._compositionStart()})("compositionend",function(k){return F._compositionEnd(k.target.value)})},features:[p.Jv_([ct]),p.Vt3]})}}return N})();const De=new p.nKC(""),rn=new p.nKC("");function ce(N){return null}function W(N){return null!=N}function K(N){return(0,p.jNT)(N)?(0,Le.H)(N):N}function ye(N){let L={};return N.forEach(f=>{L=null!=f?{...L,...f}:L}),0===Object.keys(L).length?null:L}function Oe(N,L){return L.map(f=>f(N))}function kt(N){return N.map(L=>function Et(N){return!N.validate}(L)?L:f=>L.validate(f))}function Gt(N){return null!=N?function En(N){if(!N)return null;const L=N.filter(W);return 0==L.length?null:function(f){return ye(Oe(f,L))}}(kt(N)):null}function qn(N){return null!=N?function un(N){if(!N)return null;const L=N.filter(W);return 0==L.length?null:function(f){return function _t(...N){const L=(0,rt.ms)(N),{args:f,keys:S}=(0,$e.D)(N),F=new de.c(v=>{const{length:k}=f;if(!k)return void v.complete();const M=new Array(k);let j=k,ee=k;for(let Re=0;Re<k;Re++){let Ke=!1;(0,It.Tg)(f[Re]).subscribe((0,he._)(v,xt=>{Ke||(Ke=!0,ee--),M[Re]=xt},()=>j--,void 0,()=>{(!j||!Ke)&&(ee||v.next(S?(0,Ge.e)(S,M):M),v.complete())}))}});return L?F.pipe((0,_e.I)(L)):F}(Oe(f,L).map(K)).pipe((0,Tt.T)(ye))}}(kt(N)):null}function Ur(N,L){return null===N?[L]:Array.isArray(N)?[...N,L]:[N,L]}function yr(N){return N?Array.isArray(N)?N:[N]:[]}function Nt(N,L){return Array.isArray(N)?N.includes(L):N===L}function ut(N,L){const f=yr(L);return yr(N).forEach(F=>{Nt(f,F)||f.push(F)}),f}function di(N,L){return yr(L).filter(f=>!Nt(N,f))}class Rn{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(L){this._rawValidators=L||[],this._composedValidatorFn=Gt(this._rawValidators)}_setAsyncValidators(L){this._rawAsyncValidators=L||[],this._composedAsyncValidatorFn=qn(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(L){this._onDestroyCallbacks.push(L)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(L=>L()),this._onDestroyCallbacks=[]}reset(L=void 0){this.control&&this.control.reset(L)}hasError(L,f){return!!this.control&&this.control.hasError(L,f)}getError(L,f){return this.control?this.control.getError(L,f):null}}class Ct extends Rn{get formDirective(){return null}get path(){return null}}class qt extends Rn{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Yt{constructor(L){this._cd=L}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}}let lt=(()=>{class N extends Yt{constructor(f){super(f)}static{this.\u0275fac=function(S){return new(S||N)(p.rXU(qt,2))}}static{this.\u0275dir=p.FsC({type:N,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(S,F){2&S&&p.AVh("ng-untouched",F.isUntouched)("ng-touched",F.isTouched)("ng-pristine",F.isPristine)("ng-dirty",F.isDirty)("ng-valid",F.isValid)("ng-invalid",F.isInvalid)("ng-pending",F.isPending)},features:[p.Vt3]})}}return N})();const Xe="VALID",bt="INVALID",re="PENDING",ne="DISABLED";class fe{}class Be extends fe{constructor(L,f){super(),this.value=L,this.source=f}}class Me extends fe{constructor(L,f){super(),this.pristine=L,this.source=f}}class mt extends fe{constructor(L,f){super(),this.touched=L,this.source=f}}class Zt extends fe{constructor(L,f){super(),this.status=L,this.source=f}}function Ni(N){return null!=N&&!Array.isArray(N)&&"object"==typeof N}class zi{constructor(L,f){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=(0,p.EWP)(()=>this.statusReactive()),this.statusReactive=(0,p.vPA)(void 0),this._pristine=(0,p.EWP)(()=>this.pristineReactive()),this.pristineReactive=(0,p.vPA)(!0),this._touched=(0,p.EWP)(()=>this.touchedReactive()),this.touchedReactive=(0,p.vPA)(!1),this._events=new ft.B,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(L),this._assignAsyncValidators(f)}get validator(){return this._composedValidatorFn}set validator(L){this._rawValidators=this._composedValidatorFn=L}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(L){this._rawAsyncValidators=this._composedAsyncValidatorFn=L}get parent(){return this._parent}get status(){return(0,p.O8t)(this.statusReactive)}set status(L){(0,p.O8t)(()=>this.statusReactive.set(L))}get valid(){return this.status===Xe}get invalid(){return this.status===bt}get pending(){return this.status==re}get disabled(){return this.status===ne}get enabled(){return this.status!==ne}get pristine(){return(0,p.O8t)(this.pristineReactive)}set pristine(L){(0,p.O8t)(()=>this.pristineReactive.set(L))}get dirty(){return!this.pristine}get touched(){return(0,p.O8t)(this.touchedReactive)}set touched(L){(0,p.O8t)(()=>this.touchedReactive.set(L))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(L){this._assignValidators(L)}setAsyncValidators(L){this._assignAsyncValidators(L)}addValidators(L){this.setValidators(ut(L,this._rawValidators))}addAsyncValidators(L){this.setAsyncValidators(ut(L,this._rawAsyncValidators))}removeValidators(L){this.setValidators(di(L,this._rawValidators))}removeAsyncValidators(L){this.setAsyncValidators(di(L,this._rawAsyncValidators))}hasValidator(L){return Nt(this._rawValidators,L)}hasAsyncValidator(L){return Nt(this._rawAsyncValidators,L)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(L={}){const f=!1===this.touched;this.touched=!0;const S=L.sourceControl??this;this._parent&&!L.onlySelf&&this._parent.markAsTouched({...L,sourceControl:S}),f&&!1!==L.emitEvent&&this._events.next(new mt(!0,S))}markAllAsTouched(L={}){this.markAsTouched({onlySelf:!0,emitEvent:L.emitEvent,sourceControl:this}),this._forEachChild(f=>f.markAllAsTouched(L))}markAsUntouched(L={}){const f=!0===this.touched;this.touched=!1,this._pendingTouched=!1;const S=L.sourceControl??this;this._forEachChild(F=>{F.markAsUntouched({onlySelf:!0,emitEvent:L.emitEvent,sourceControl:S})}),this._parent&&!L.onlySelf&&this._parent._updateTouched(L,S),f&&!1!==L.emitEvent&&this._events.next(new mt(!1,S))}markAsDirty(L={}){const f=!0===this.pristine;this.pristine=!1;const S=L.sourceControl??this;this._parent&&!L.onlySelf&&this._parent.markAsDirty({...L,sourceControl:S}),f&&!1!==L.emitEvent&&this._events.next(new Me(!1,S))}markAsPristine(L={}){const f=!1===this.pristine;this.pristine=!0,this._pendingDirty=!1;const S=L.sourceControl??this;this._forEachChild(F=>{F.markAsPristine({onlySelf:!0,emitEvent:L.emitEvent})}),this._parent&&!L.onlySelf&&this._parent._updatePristine(L,S),f&&!1!==L.emitEvent&&this._events.next(new Me(!0,S))}markAsPending(L={}){this.status=re;const f=L.sourceControl??this;!1!==L.emitEvent&&(this._events.next(new Zt(this.status,f)),this.statusChanges.emit(this.status)),this._parent&&!L.onlySelf&&this._parent.markAsPending({...L,sourceControl:f})}disable(L={}){const f=this._parentMarkedDirty(L.onlySelf);this.status=ne,this.errors=null,this._forEachChild(F=>{F.disable({...L,onlySelf:!0})}),this._updateValue();const S=L.sourceControl??this;!1!==L.emitEvent&&(this._events.next(new Be(this.value,S)),this._events.next(new Zt(this.status,S)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...L,skipPristineCheck:f},this),this._onDisabledChange.forEach(F=>F(!0))}enable(L={}){const f=this._parentMarkedDirty(L.onlySelf);this.status=Xe,this._forEachChild(S=>{S.enable({...L,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:L.emitEvent}),this._updateAncestors({...L,skipPristineCheck:f},this),this._onDisabledChange.forEach(S=>S(!1))}_updateAncestors(L,f){this._parent&&!L.onlySelf&&(this._parent.updateValueAndValidity(L),L.skipPristineCheck||this._parent._updatePristine({},f),this._parent._updateTouched({},f))}setParent(L){this._parent=L}getRawValue(){return this.value}updateValueAndValidity(L={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){const S=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Xe||this.status===re)&&this._runAsyncValidator(S,L.emitEvent)}const f=L.sourceControl??this;!1!==L.emitEvent&&(this._events.next(new Be(this.value,f)),this._events.next(new Zt(this.status,f)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!L.onlySelf&&this._parent.updateValueAndValidity({...L,sourceControl:f})}_updateTreeValidity(L={emitEvent:!0}){this._forEachChild(f=>f._updateTreeValidity(L)),this.updateValueAndValidity({onlySelf:!0,emitEvent:L.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ne:Xe}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(L,f){if(this.asyncValidator){this.status=re,this._hasOwnPendingAsyncValidator={emitEvent:!1!==f};const S=K(this.asyncValidator(this));this._asyncValidationSubscription=S.subscribe(F=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(F,{emitEvent:f,shouldHaveEmitted:L})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();const L=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,L}return!1}setErrors(L,f={}){this.errors=L,this._updateControlsErrors(!1!==f.emitEvent,this,f.shouldHaveEmitted)}get(L){let f=L;return null==f||(Array.isArray(f)||(f=f.split(".")),0===f.length)?null:f.reduce((S,F)=>S&&S._find(F),this)}getError(L,f){const S=f?this.get(f):this;return S&&S.errors?S.errors[L]:null}hasError(L,f){return!!this.getError(L,f)}get root(){let L=this;for(;L._parent;)L=L._parent;return L}_updateControlsErrors(L,f,S){this.status=this._calculateStatus(),L&&this.statusChanges.emit(this.status),(L||S)&&this._events.next(new Zt(this.status,f)),this._parent&&this._parent._updateControlsErrors(L,f,S)}_initObservables(){this.valueChanges=new p.bkB,this.statusChanges=new p.bkB}_calculateStatus(){return this._allControlsDisabled()?ne:this.errors?bt:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(re)?re:this._anyControlsHaveStatus(bt)?bt:Xe}_anyControlsHaveStatus(L){return this._anyControls(f=>f.status===L)}_anyControlsDirty(){return this._anyControls(L=>L.dirty)}_anyControlsTouched(){return this._anyControls(L=>L.touched)}_updatePristine(L,f){const S=!this._anyControlsDirty(),F=this.pristine!==S;this.pristine=S,this._parent&&!L.onlySelf&&this._parent._updatePristine(L,f),F&&this._events.next(new Me(this.pristine,f))}_updateTouched(L={},f){this.touched=this._anyControlsTouched(),this._events.next(new mt(this.touched,f)),this._parent&&!L.onlySelf&&this._parent._updateTouched(L,f)}_registerOnCollectionChange(L){this._onCollectionChange=L}_setUpdateStrategy(L){Ni(L)&&null!=L.updateOn&&(this._updateOn=L.updateOn)}_parentMarkedDirty(L){return!L&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(L){return null}_assignValidators(L){this._rawValidators=Array.isArray(L)?L.slice():L,this._composedValidatorFn=function nr(N){return Array.isArray(N)?Gt(N):N||null}(this._rawValidators)}_assignAsyncValidators(L){this._rawAsyncValidators=Array.isArray(L)?L.slice():L,this._composedAsyncValidatorFn=function ri(N){return Array.isArray(N)?qn(N):N||null}(this._rawAsyncValidators)}}const We=new p.nKC("CallSetDisabledState",{providedIn:"root",factory:()=>wt}),wt="always";function $t(N,L,f=wt){(function Tn(N,L){const f=function zn(N){return N._rawValidators}(N);null!==L.validator?N.setValidators(Ur(f,L.validator)):"function"==typeof f&&N.setValidators([f]);const S=function Un(N){return N._rawAsyncValidators}(N);null!==L.asyncValidator?N.setAsyncValidators(Ur(S,L.asyncValidator)):"function"==typeof S&&N.setAsyncValidators([S]);const F=()=>N.updateValueAndValidity();ar(L._rawValidators,F),ar(L._rawAsyncValidators,F)})(N,L),L.valueAccessor.writeValue(N.value),(N.disabled||"always"===f)&&L.valueAccessor.setDisabledState?.(N.disabled),function Gi(N,L){L.valueAccessor.registerOnChange(f=>{N._pendingValue=f,N._pendingChange=!0,N._pendingDirty=!0,"change"===N.updateOn&&Ks(N,L)})}(N,L),function xs(N,L){const f=(S,F)=>{L.valueAccessor.writeValue(S),F&&L.viewToModelUpdate(S)};N.registerOnChange(f),L._registerOnDestroy(()=>{N._unregisterOnChange(f)})}(N,L),function ps(N,L){L.valueAccessor.registerOnTouched(()=>{N._pendingTouched=!0,"blur"===N.updateOn&&N._pendingChange&&Ks(N,L),"submit"!==N.updateOn&&N.markAsTouched()})}(N,L),function Ot(N,L){if(L.valueAccessor.setDisabledState){const f=S=>{L.valueAccessor.setDisabledState(S)};N.registerOnDisabledChange(f),L._registerOnDestroy(()=>{N._unregisterOnDisabledChange(f)})}}(N,L)}function ar(N,L){N.forEach(f=>{f.registerOnValidatorChange&&f.registerOnValidatorChange(L)})}function Ks(N,L){N._pendingDirty&&N.markAsDirty(),N.setValue(N._pendingValue,{emitModelToViewChange:!1}),L.viewToModelUpdate(N._pendingValue),N._pendingChange=!1}function lr(N,L){const f=N.indexOf(L);f>-1&&N.splice(f,1)}function Os(N){return"object"==typeof N&&null!==N&&2===Object.keys(N).length&&"value"in N&&"disabled"in N}Promise.resolve();const es=class extends zi{constructor(L=null,f,S){super(function Bn(N){return(Ni(N)?N.validators:N)||null}(f),function ot(N,L){return(Ni(L)?L.asyncValidators:N)||null}(S,f)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(L),this._setUpdateStrategy(f),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ni(f)&&(f.nonNullable||f.initialValueIsDefault)&&(this.defaultValue=Os(L)?L.value:L)}setValue(L,f={}){this.value=this._pendingValue=L,this._onChange.length&&!1!==f.emitModelToViewChange&&this._onChange.forEach(S=>S(this.value,!1!==f.emitViewToModelChange)),this.updateValueAndValidity(f)}patchValue(L,f={}){this.setValue(L,f)}reset(L=this.defaultValue,f={}){this._applyFormState(L),this.markAsPristine(f),this.markAsUntouched(f),this.setValue(this.value,f),this._pendingChange=!1}_updateValue(){}_anyControls(L){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(L){this._onChange.push(L)}_unregisterOnChange(L){lr(this._onChange,L)}registerOnDisabledChange(L){this._onDisabledChange.push(L)}_unregisterOnDisabledChange(L){lr(this._onDisabledChange,L)}_forEachChild(L){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(L){Os(L)?(this.value=this._pendingValue=L.value,L.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=L}},wo={provide:qt,useExisting:(0,p.Rfq)(()=>Wi)},_i=Promise.resolve();let Wi=(()=>{class N extends qt{constructor(f,S,F,v,k,M){super(),this._changeDetectorRef=k,this.callSetDisabledState=M,this.control=new es,this._registered=!1,this.name="",this.update=new p.bkB,this._parent=f,this._setValidators(S),this._setAsyncValidators(F),this.valueAccessor=function Kn(N,L){if(!L)return null;let f,S,F;return Array.isArray(L),L.forEach(v=>{v.constructor===it?f=v:function Lo(N){return Object.getPrototypeOf(N.constructor)===nn}(v)?S=v:F=v}),F||S||f||null}(0,v)}ngOnChanges(f){if(this._checkForErrors(),!this._registered||"name"in f){if(this._registered&&(this._checkName(),this.formDirective)){const S=f.name.previousValue;this.formDirective.removeControl({name:S,path:this._getPath(S)})}this._setUpControl()}"isDisabled"in f&&this._updateDisabled(f),function fi(N,L){if(!N.hasOwnProperty("model"))return!1;const f=N.model;return!!f.isFirstChange()||!Object.is(L,f.currentValue)}(f,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(f){this.viewModel=f,this.update.emit(f)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){$t(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(f){_i.then(()=>{this.control.setValue(f,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(f){const S=f.isDisabled.currentValue,F=0!==S&&(0,p.L39)(S);_i.then(()=>{F&&!this.control.disabled?this.control.disable():!F&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(f){return this._parent?function Jt(N,L){return[...L.path,N]}(f,this._parent):[f]}static{this.\u0275fac=function(S){return new(S||N)(p.rXU(Ct,9),p.rXU(De,10),p.rXU(rn,10),p.rXU(Bt,10),p.rXU(p.gRc,8),p.rXU(We,8))}}static{this.\u0275dir=p.FsC({type:N,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[p.Jv_([wo]),p.Vt3,p.OA$]})}}return N})();const gi={provide:Bt,useExisting:(0,p.Rfq)(()=>lo),multi:!0};function ki(N,L){return null==N?`${L}`:(L&&"object"==typeof L&&(L="Object"),`${N}: ${L}`.slice(0,50))}let lo=(()=>{class N extends nn{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(f){this._compareWith=f}writeValue(f){this.value=f;const F=ki(this._getOptionId(f),f);this.setProperty("value",F)}registerOnChange(f){this.onChange=S=>{this.value=this._getOptionValue(S),f(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(f){for(const S of this._optionMap.keys())if(this._compareWith(this._optionMap.get(S),f))return S;return null}_getOptionValue(f){const S=function Sn(N){return N.split(":")[0]}(f);return this._optionMap.has(S)?this._optionMap.get(S):f}static{this.\u0275fac=(()=>{let f;return function(F){return(f||(f=p.xGo(N)))(F||N)}})()}static{this.\u0275dir=p.FsC({type:N,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(S,F){1&S&&p.bIt("change",function(k){return F.onChange(k.target.value)})("blur",function(){return F.onTouched()})},inputs:{compareWith:"compareWith"},features:[p.Jv_([gi]),p.Vt3]})}}return N})(),rr=(()=>{class N{constructor(f,S,F){this._element=f,this._renderer=S,this._select=F,this._select&&(this.id=this._select._registerOption())}set ngValue(f){null!=this._select&&(this._select._optionMap.set(this.id,f),this._setElementValue(ki(this.id,f)),this._select.writeValue(this._select.value))}set value(f){this._setElementValue(f),this._select&&this._select.writeValue(this._select.value)}_setElementValue(f){this._renderer.setProperty(this._element.nativeElement,"value",f)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(S){return new(S||N)(p.rXU(p.aKT),p.rXU(p.sFG),p.rXU(lo,9))}}static{this.\u0275dir=p.FsC({type:N,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return N})();const Di={provide:Bt,useExisting:(0,p.Rfq)(()=>is),multi:!0};function si(N,L){return null==N?`${L}`:("string"==typeof L&&(L=`'${L}'`),L&&"object"==typeof L&&(L="Object"),`${N}: ${L}`.slice(0,50))}let is=(()=>{class N extends nn{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(f){this._compareWith=f}writeValue(f){let S;if(this.value=f,Array.isArray(f)){const F=f.map(v=>this._getOptionId(v));S=(v,k)=>{v._setSelected(F.indexOf(k.toString())>-1)}}else S=(F,v)=>{F._setSelected(!1)};this._optionMap.forEach(S)}registerOnChange(f){this.onChange=S=>{const F=[],v=S.selectedOptions;if(void 0!==v){const k=v;for(let M=0;M<k.length;M++){const ee=this._getOptionValue(k[M].value);F.push(ee)}}else{const k=S.options;for(let M=0;M<k.length;M++){const j=k[M];if(j.selected){const ee=this._getOptionValue(j.value);F.push(ee)}}}this.value=F,f(F)}}_registerOption(f){const S=(this._idCounter++).toString();return this._optionMap.set(S,f),S}_getOptionId(f){for(const S of this._optionMap.keys())if(this._compareWith(this._optionMap.get(S)._value,f))return S;return null}_getOptionValue(f){const S=function qi(N){return N.split(":")[0]}(f);return this._optionMap.has(S)?this._optionMap.get(S)._value:f}static{this.\u0275fac=(()=>{let f;return function(F){return(f||(f=p.xGo(N)))(F||N)}})()}static{this.\u0275dir=p.FsC({type:N,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(S,F){1&S&&p.bIt("change",function(k){return F.onChange(k.target)})("blur",function(){return F.onTouched()})},inputs:{compareWith:"compareWith"},features:[p.Jv_([Di]),p.Vt3]})}}return N})(),_a=(()=>{class N{constructor(f,S,F){this._element=f,this._renderer=S,this._select=F,this._select&&(this.id=this._select._registerOption(this))}set ngValue(f){null!=this._select&&(this._value=f,this._setElementValue(si(this.id,f)),this._select.writeValue(this._select.value))}set value(f){this._select?(this._value=f,this._setElementValue(si(this.id,f)),this._select.writeValue(this._select.value)):this._setElementValue(f)}_setElementValue(f){this._renderer.setProperty(this._element.nativeElement,"value",f)}_setSelected(f){this._renderer.setProperty(this._element.nativeElement,"selected",f)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(S){return new(S||N)(p.rXU(p.aKT),p.rXU(p.sFG),p.rXU(is,9))}}static{this.\u0275dir=p.FsC({type:N,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return N})();let zr=(()=>{class N{constructor(){this._validator=ce}ngOnChanges(f){if(this.inputName in f){const S=this.normalizeInput(f[this.inputName].currentValue);this._enabled=this.enabled(S),this._validator=this._enabled?this.createValidator(S):ce,this._onChange&&this._onChange()}}validate(f){return this._validator(f)}registerOnValidatorChange(f){this._onChange=f}enabled(f){return null!=f}static{this.\u0275fac=function(S){return new(S||N)}}static{this.\u0275dir=p.FsC({type:N,features:[p.OA$]})}}return N})();const _s={provide:De,useExisting:(0,p.Rfq)(()=>ya),multi:!0};let ya=(()=>{class N extends zr{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=f=>function sn(N){return"number"==typeof N?N:parseInt(N,10)}(f),this.createValidator=f=>function Dt(N){return L=>function Qt(N){return null!=N&&"number"==typeof N.length}(L.value)&&L.value.length>N?{maxlength:{requiredLength:N,actualLength:L.value.length}}:null}(f)}static{this.\u0275fac=(()=>{let f;return function(F){return(f||(f=p.xGo(N)))(F||N)}})()}static{this.\u0275dir=p.FsC({type:N,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(S,F){2&S&&p.BMQ("maxlength",F._enabled?F.maxlength:null)},inputs:{maxlength:"maxlength"},features:[p.Jv_([_s]),p.Vt3]})}}return N})(),Li=(()=>{class N{static{this.\u0275fac=function(S){return new(S||N)}}static{this.\u0275mod=p.$C({type:N})}static{this.\u0275inj=p.G2t({})}}return N})(),bo=(()=>{class N{static withConfig(f){return{ngModule:N,providers:[{provide:We,useValue:f.callSetDisabledState??wt}]}}static{this.\u0275fac=function(S){return new(S||N)}}static{this.\u0275mod=p.$C({type:N})}static{this.\u0275inj=p.G2t({imports:[Li]})}}return N})();var cs=ie(4412),us=ie(5621),Ha=ie(9579),nt=ie(4262);let fo=(()=>{class N{auth;firestore;authSubject=new cs.t(null);authState$=this.authSubject.asObservable();recaptchaVerifier=null;confirmationResult=null;currentUser=null;constructor(f,S){this.auth=f,this.firestore=S,this.initAuthListener()}initAuthListener(){var f=this;(0,us.hg)(this.auth,function(){var S=(0,R.A)(function*(F){if(F){const v=yield f.getUserData(F.uid);f.currentUser=v,f.authSubject.next(v)}else f.currentUser=null,f.authSubject.next(null)});return function(F){return S.apply(this,arguments)}}())}initRecaptcha(f){var S=this;return(0,R.A)(function*(){try{S.recaptchaVerifier=new Ha.kT(S.auth,f,{size:"normal",callback:()=>{console.log("reCAPTCHA solved")},"expired-callback":()=>{console.log("reCAPTCHA expired"),S.recaptchaVerifier=null}}),yield S.recaptchaVerifier.render()}catch(F){throw console.error("Error initializing reCAPTCHA:",F),new Error("Failed to initialize reCAPTCHA. Please refresh and try again.")}})()}sendOTP(f){var S=this;return(0,R.A)(function*(){try{if(!S.recaptchaVerifier)throw new Error("reCAPTCHA not initialized");const F=f.startsWith("+")?f:"+"+f;console.log("Sending OTP to:",F),S.confirmationResult=yield(0,us.ik)(S.auth,F,S.recaptchaVerifier),console.log("OTP sent successfully")}catch(F){throw console.error("Error sending OTP:",F),S.recaptchaVerifier&&(S.recaptchaVerifier.clear(),S.recaptchaVerifier=null),"auth/invalid-phone-number"===F.code?new Error("Invalid phone number format"):"auth/too-many-requests"===F.code?new Error("Too many attempts. Please try again later"):"auth/quota-exceeded"===F.code?new Error("SMS quota exceeded. Please try again later"):new Error("Failed to send OTP. Please try again")}})()}verifyOTP(f,S){var F=this;return(0,R.A)(function*(){try{if(!F.confirmationResult)throw new Error("No OTP session found. Please request OTP again");const k=(yield F.confirmationResult.confirm(f)).user;if(!k)throw new Error("Authentication failed");const M={uid:k.uid,phoneNumber:k.phoneNumber||"",displayName:S||k.phoneNumber?.slice(-4)||"User",isOnline:!0,lastSeen:(0,nt.O5)(),createdAt:(0,nt.O5)()};return yield F.createOrUpdateUser(M),F.confirmationResult=null,F.recaptchaVerifier&&(F.recaptchaVerifier.clear(),F.recaptchaVerifier=null),M}catch(v){throw console.error("Error verifying OTP:",v),"auth/invalid-verification-code"===v.code?new Error("Invalid OTP. Please check and try again"):"auth/code-expired"===v.code?new Error("OTP has expired. Please request a new one"):new Error("Failed to verify OTP. Please try again")}})()}createOrUpdateUser(f){var S=this;return(0,R.A)(function*(){try{const F=(0,nt.H9)(S.firestore,"users",f.uid);(yield(0,nt.x7)(F)).exists()?yield(0,nt.mZ)(F,{isOnline:!0,lastSeen:(0,nt.O5)(),displayName:f.displayName}):yield(0,nt.BN)(F,f)}catch(F){throw console.error("Error creating/updating user:",F),new Error("Failed to save user data")}})()}getUserData(f){var S=this;return(0,R.A)(function*(){try{const F=(0,nt.H9)(S.firestore,"users",f),v=yield(0,nt.x7)(F);return v.exists()?v.data():null}catch(F){return console.error("Error getting user data:",F),null}})()}getCurrentUser(){var f=this;return(0,R.A)(function*(){return new Promise(S=>{const F=(0,us.hg)(f.auth,function(){var v=(0,R.A)(function*(k){if(F(),k){const M=yield f.getUserData(k.uid);S(M)}else S(null)});return function(k){return v.apply(this,arguments)}}())})})()}setUserOnlineStatus(f){var S=this;return(0,R.A)(function*(){try{if(S.currentUser){const F=(0,nt.H9)(S.firestore,"users",S.currentUser.uid);yield(0,nt.mZ)(F,{isOnline:f,lastSeen:(0,nt.O5)()})}}catch(F){console.error("Error updating online status:",F)}})()}signOut(){var f=this;return(0,R.A)(function*(){try{yield f.setUserOnlineStatus(!1),yield(0,us.CI)(f.auth),f.currentUser=null}catch(S){throw console.error("Error signing out:",S),new Error("Failed to sign out")}})()}getOnlineUsers(){return new de.c(f=>{const S=(0,nt.rJ)(this.firestore,"users"),F=(0,nt.P)(S,(0,nt._M)("isOnline","==",!0)),v=(0,nt.aQ)(F,k=>{const M=[];k.forEach(j=>{const ee=j.data();ee.uid!==this.currentUser?.uid&&M.push(ee)}),f.next(M)},k=>{f.error(k)});return()=>v()})}cleanup(){var f=this;return(0,R.A)(function*(){yield f.setUserOnlineStatus(!1),f.recaptchaVerifier&&f.recaptchaVerifier.clear()})()}debugAuthToken(){var f=this;return(0,R.A)(function*(){try{const S=f.auth.currentUser;if(S){yield S.getIdToken();const v=yield S.getIdTokenResult();console.log("\u{1f510} Auth Token Debug:",{uid:S.uid,email:S.email,phoneNumber:S.phoneNumber,tokenClaims:v.claims,tokenExpiration:new Date(v.expirationTime),isTokenExpired:new Date>new Date(v.expirationTime)})}else console.log("\u274c No authenticated user")}catch(S){console.error("\u274c Auth token error:",S)}})()}static \u0275fac=function(S){return new(S||N)(p.KVO(us.Nj),p.KVO(nt._7))};static \u0275prov=p.jDH({token:N,factory:N.\u0275fac,providedIn:"root"})}return N})();function ls(N,L){1&N&&(p.j41(0,"span"),p.EFF(1,"Send Verification Code"),p.k0s())}function yi(N,L){1&N&&(p.j41(0,"span",26),p.nrm(1,"span",27),p.EFF(2," Sending... "),p.k0s())}function Ui(N,L){if(1&N){const f=p.RV6();p.j41(0,"div",7)(1,"h2"),p.EFF(2,"Enter Your Phone Number"),p.k0s(),p.j41(3,"p",8),p.EFF(4,"We'll send you a verification code"),p.k0s(),p.j41(5,"div",9)(6,"select",10),p.mxI("ngModelChange",function(F){p.eBV(f);const v=p.XpG();return p.DH7(v.selectedCountryCode,F)||(v.selectedCountryCode=F),p.Njj(F)}),p.j41(7,"option",11),p.EFF(8,"\u{1f1ee}\u{1f1f3} +91"),p.k0s(),p.j41(9,"option",12),p.EFF(10,"\u{1f1fa}\u{1f1f8} +1"),p.k0s(),p.j41(11,"option",13),p.EFF(12,"\u{1f1ec}\u{1f1e7} +44"),p.k0s(),p.j41(13,"option",14),p.EFF(14,"\u{1f1e8}\u{1f1f3} +86"),p.k0s(),p.j41(15,"option",15),p.EFF(16,"\u{1f1e9}\u{1f1ea} +49"),p.k0s(),p.j41(17,"option",16),p.EFF(18,"\u{1f1eb}\u{1f1f7} +33"),p.k0s(),p.j41(19,"option",17),p.EFF(20,"\u{1f1ef}\u{1f1f5} +81"),p.k0s(),p.j41(21,"option",18),p.EFF(22,"\u{1f1e7}\u{1f1f7} +55"),p.k0s(),p.j41(23,"option",19),p.EFF(24,"\u{1f1e6}\u{1f1fa} +61"),p.k0s(),p.j41(25,"option",20),p.EFF(26,"\u{1f1f7}\u{1f1fa} +7"),p.k0s()(),p.j41(27,"input",21),p.mxI("ngModelChange",function(F){p.eBV(f);const v=p.XpG();return p.DH7(v.phoneNumber,F)||(v.phoneNumber=F),p.Njj(F)}),p.bIt("keyup.enter",function(){p.eBV(f);const F=p.XpG();return p.Njj(F.sendOTP())}),p.k0s()(),p.nrm(28,"div",22),p.j41(29,"button",23),p.bIt("click",function(){p.eBV(f);const F=p.XpG();return p.Njj(F.sendOTP())}),p.DNE(30,ls,2,0,"span",24)(31,yi,3,0,"span",25),p.k0s()()}if(2&N){const f=p.XpG();p.R7$(6),p.R50("ngModel",f.selectedCountryCode),p.R7$(21),p.R50("ngModel",f.phoneNumber),p.R7$(2),p.Y8G("disabled",f.isLoading||!f.phoneNumber.trim()),p.R7$(),p.Y8G("ngIf",!f.isLoading),p.R7$(),p.Y8G("ngIf",f.isLoading)}}function Is(N,L){1&N&&(p.j41(0,"span"),p.EFF(1,"Verify & Continue"),p.k0s())}function ta(N,L){1&N&&(p.j41(0,"span",26),p.nrm(1,"span",27),p.EFF(2," Verifying... "),p.k0s())}function wn(N,L){if(1&N){const f=p.RV6();p.j41(0,"div",7)(1,"h2"),p.EFF(2,"Enter Verification Code"),p.k0s(),p.j41(3,"p",8),p.EFF(4," We sent a 6-digit code to"),p.nrm(5,"br"),p.j41(6,"strong"),p.EFF(7),p.k0s()(),p.j41(8,"div",28)(9,"input",29),p.mxI("ngModelChange",function(F){p.eBV(f);const v=p.XpG();return p.DH7(v.otpCode,F)||(v.otpCode=F),p.Njj(F)}),p.bIt("keyup.enter",function(){p.eBV(f);const F=p.XpG();return p.Njj(F.verifyOTP())}),p.k0s()(),p.j41(10,"div",30)(11,"label"),p.EFF(12,"Display Name (Optional)"),p.k0s(),p.j41(13,"input",31),p.mxI("ngModelChange",function(F){p.eBV(f);const v=p.XpG();return p.DH7(v.displayName,F)||(v.displayName=F),p.Njj(F)}),p.k0s()(),p.j41(14,"button",23),p.bIt("click",function(){p.eBV(f);const F=p.XpG();return p.Njj(F.verifyOTP())}),p.DNE(15,Is,2,0,"span",24)(16,ta,3,0,"span",25),p.k0s(),p.j41(17,"button",32),p.bIt("click",function(){p.eBV(f);const F=p.XpG();return p.Njj(F.goBack())}),p.EFF(18," \u2190 Change Phone Number "),p.k0s()()}if(2&N){const f=p.XpG();p.R7$(7),p.Lme("",f.selectedCountryCode,"",f.phoneNumber,""),p.R7$(2),p.R50("ngModel",f.otpCode),p.R7$(4),p.R50("ngModel",f.displayName),p.R7$(),p.Y8G("disabled",f.isLoading||6!==f.otpCode.length),p.R7$(),p.Y8G("ngIf",!f.isLoading),p.R7$(),p.Y8G("ngIf",f.isLoading)}}function Jn(N,L){if(1&N&&(p.j41(0,"div",33)(1,"span",34),p.EFF(2,"\u26a0\ufe0f"),p.k0s(),p.EFF(3),p.k0s()),2&N){const f=p.XpG();p.R7$(3),p.SpI(" ",f.errorMessage," ")}}function qr(N,L){if(1&N&&(p.j41(0,"div",35)(1,"span",36),p.EFF(2,"\u2705"),p.k0s(),p.EFF(3),p.k0s()),2&N){const f=p.XpG();p.R7$(3),p.SpI(" ",f.successMessage," ")}}let Mr=(()=>{class N{authService;authSuccess=new p.bkB;currentStep="phone";selectedCountryCode="+91";phoneNumber="";otpCode="";displayName="";isLoading=!1;errorMessage="";successMessage="";constructor(f){this.authService=f}ngOnInit(){var f=this;return(0,R.A)(function*(){setTimeout(()=>{f.initRecaptcha()},100)})()}ngOnDestroy(){this.authService.cleanup()}initRecaptcha(){var f=this;return(0,R.A)(function*(){try{yield f.authService.initRecaptcha("recaptcha-container")}catch(S){console.error("Error initializing reCAPTCHA:",S),f.setError("Failed to load security verification. Please refresh the page.")}})()}sendOTP(){var f=this;return(0,R.A)(function*(){if(f.phoneNumber.trim()){f.clearMessages(),f.isLoading=!0;try{const S=f.selectedCountryCode+f.phoneNumber;yield f.authService.sendOTP(S),f.setSuccess("Verification code sent! Check your messages."),f.currentStep="otp",setTimeout(()=>{const F=document.querySelector(".otp-input");F&&F.focus()},100)}catch(S){console.error("Error sending OTP:",S),f.setError(S.message||"Failed to send verification code")}finally{f.isLoading=!1}}else f.setError("Please enter a valid phone number")})()}verifyOTP(){var f=this;return(0,R.A)(function*(){if(6===f.otpCode.length){f.clearMessages(),f.isLoading=!0;try{yield f.authService.verifyOTP(f.otpCode,f.displayName||void 0),f.setSuccess("Phone verified successfully! Welcome to MeetClone."),setTimeout(()=>{f.authSuccess.emit()},1500)}catch(S){console.error("Error verifying OTP:",S),f.setError(S.message||"Failed to verify code")}finally{f.isLoading=!1}}else f.setError("Please enter the complete 6-digit code")})()}goBack(){this.currentStep="phone",this.otpCode="",this.clearMessages(),setTimeout(()=>{this.initRecaptcha()},100)}setError(f){this.errorMessage=f,this.successMessage=""}setSuccess(f){this.successMessage=f,this.errorMessage=""}clearMessages(){this.errorMessage="",this.successMessage=""}static \u0275fac=function(S){return new(S||N)(p.rXU(fo))};static \u0275cmp=p.VBU({type:N,selectors:[["app-auth"]],outputs:{authSuccess:"authSuccess"},standalone:!0,features:[p.aNF],decls:14,vars:4,consts:[[1,"auth-container"],[1,"auth-card"],[1,"auth-header"],["class","auth-step",4,"ngIf"],["class","error-message",4,"ngIf"],["class","success-message",4,"ngIf"],[1,"auth-footer"],[1,"auth-step"],[1,"subtitle"],[1,"phone-input-group"],[1,"country-select",3,"ngModelChange","ngModel"],["value","+91"],["value","+1"],["value","+44"],["value","+86"],["value","+49"],["value","+33"],["value","+81"],["value","+55"],["value","+61"],["value","+7"],["type","tel","placeholder","Phone number","maxlength","15",1,"phone-input",3,"ngModelChange","keyup.enter","ngModel"],["id","recaptcha-container",1,"recaptcha-container"],[1,"btn-primary",3,"click","disabled"],[4,"ngIf"],["class","loading-text",4,"ngIf"],[1,"loading-text"],[1,"spinner-small"],[1,"otp-input-container"],["type","text","placeholder","000000","maxlength","6",1,"otp-input",3,"ngModelChange","keyup.enter","ngModel"],[1,"name-input-group"],["type","text","placeholder","Enter your name","maxlength","30",1,"name-input",3,"ngModelChange","ngModel"],[1,"btn-secondary",3,"click"],[1,"error-message"],[1,"error-icon"],[1,"success-message"],[1,"success-icon"]],template:function(S,F){1&S&&(p.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),p.EFF(4,"\u{1f4f9}TripXL Meet"),p.k0s(),p.j41(5,"p"),p.EFF(6,"Secure video calling with phone verification"),p.k0s()(),p.DNE(7,Ui,32,5,"div",3)(8,wn,19,7,"div",3)(9,Jn,4,1,"div",4)(10,qr,4,1,"div",5),p.k0s(),p.j41(11,"div",6)(12,"p"),p.EFF(13,"By continuing, you agree to our Terms of Service and Privacy Policy"),p.k0s()()()),2&S&&(p.R7$(7),p.Y8G("ngIf","phone"===F.currentStep),p.R7$(),p.Y8G("ngIf","otp"===F.currentStep),p.R7$(),p.Y8G("ngIf",F.errorMessage),p.R7$(),p.Y8G("ngIf",F.successMessage))},dependencies:[J.MD,J.bT,bo,rr,_a,it,lo,lt,ya,Wi],styles:[".auth-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;flex-direction:column;justify-content:center;align-items:center;background:linear-gradient(135deg,#667eea,#764ba2);padding:10px}.auth-card[_ngcontent-%COMP%]{background:#fff;border-radius:20px;box-shadow:0 20px 40px #0000001a;padding:40px;max-width:500px;width:100%;text-align:center}.auth-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5rem;margin:0 0 10px;color:#333;font-weight:700}.auth-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;margin-bottom:30px;font-size:1.1rem}.auth-step[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#333;margin-bottom:10px;font-size:1.8rem}.subtitle[_ngcontent-%COMP%]{color:#666;margin-bottom:30px;line-height:1.5}.method-buttons[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px;margin-bottom:20px}.method-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px;padding:20px;border:2px solid #e1e5e9;border-radius:15px;background:#fff;cursor:pointer;transition:all .3s ease;text-align:left;width:100%}.method-btn[_ngcontent-%COMP%]:hover{border-color:#667eea;background:#f8f9ff;transform:translateY(-2px);box-shadow:0 8px 25px #667eea26}.method-icon[_ngcontent-%COMP%]{font-size:2.5rem;flex-shrink:0}.method-content[_ngcontent-%COMP%]{flex:1}.method-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 5px;color:#333;font-size:1.2rem;font-weight:600}.method-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#666;font-size:.9rem}.password-input-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}.password-input[_ngcontent-%COMP%]{padding-right:50px!important}.password-toggle[_ngcontent-%COMP%]{position:absolute;right:12px;background:none;border:none;cursor:pointer;font-size:1.2rem;color:#666;padding:5px;border-radius:4px;transition:all .2s}.password-toggle[_ngcontent-%COMP%]:hover{background:#f8f9fa;color:#333}.auth-switch[_ngcontent-%COMP%]{text-align:center;margin:15px 0}.auth-switch[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;margin:0;font-size:.9rem}.link-btn[_ngcontent-%COMP%]{background:none;border:none;color:#667eea;cursor:pointer;font-weight:600;text-decoration:underline;font-size:inherit;transition:color .2s;margin-left:5px}.link-btn[_ngcontent-%COMP%]:hover{color:#5a67d8}.phone-input-group[_ngcontent-%COMP%]{display:flex;gap:10px;margin-bottom:20px}.country-select[_ngcontent-%COMP%]{flex:0 0 100px;padding:15px 10px;border:2px solid #e1e5e9;border-radius:10px;font-size:14px;background:#fff;cursor:pointer;transition:border-color .3s}.country-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea}.phone-input[_ngcontent-%COMP%]{flex:1;padding:15px;border:2px solid #e1e5e9;border-radius:10px;font-size:16px;transition:border-color .3s}.phone-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea}.recaptcha-container[_ngcontent-%COMP%]{margin:20px 0;display:flex;justify-content:center}.otp-input-container[_ngcontent-%COMP%]{margin-bottom:20px}.otp-input[_ngcontent-%COMP%]{width:100%;padding:20px;border:2px solid #e1e5e9;border-radius:10px;font-size:24px;font-weight:700;text-align:center;letter-spacing:8px;transition:border-color .3s}.otp-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea}.name-input-group[_ngcontent-%COMP%]{margin-bottom:20px;text-align:left}.name-input-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;color:#333;font-weight:500;font-size:.95rem}.name-input[_ngcontent-%COMP%]{width:100%;padding:15px;border:2px solid #e1e5e9;border-radius:10px;font-size:16px;transition:all .3s;box-sizing:border-box}.name-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 3px #667eea1a}.btn-primary[_ngcontent-%COMP%]{width:100%;padding:15px;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;border-radius:10px;font-size:16px;font-weight:700;cursor:pointer;transition:all .3s;margin-bottom:15px}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 8px 25px #667eea4d}.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}.btn-secondary[_ngcontent-%COMP%]{width:100%;padding:15px;background:transparent;color:#667eea;border:2px solid #667eea;border-radius:10px;font-size:16px;font-weight:700;cursor:pointer;transition:all .3s}.btn-secondary[_ngcontent-%COMP%]:hover{background:#667eea;color:#fff;transform:translateY(-1px)}.loading-text[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:10px}.spinner-small[_ngcontent-%COMP%]{width:16px;height:16px;border:2px solid rgba(255,255,255,.3);border-top:2px solid white;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.error-message[_ngcontent-%COMP%]{background:#fee;color:#c33;padding:15px;border-radius:10px;margin-top:20px;display:flex;align-items:center;gap:10px;text-align:left;border-left:4px solid #dc3545}.success-message[_ngcontent-%COMP%]{background:#efe;color:#3c3;padding:15px;border-radius:10px;margin-top:20px;display:flex;align-items:center;gap:10px;text-align:left;border-left:4px solid #28a745}.auth-footer[_ngcontent-%COMP%]{margin-top:30px;text-align:center}.auth-footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fffc;font-size:14px;max-width:300px;line-height:1.4;margin:0}.auth-step[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideIn .3s ease-out}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 480px){.auth-container[_ngcontent-%COMP%]{padding:15px}.auth-card[_ngcontent-%COMP%]{padding:30px 20px;margin:0}.auth-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}.method-btn[_ngcontent-%COMP%]{padding:15px;gap:15px}.method-icon[_ngcontent-%COMP%]{font-size:2rem}.phone-input-group[_ngcontent-%COMP%]{flex-direction:column}.country-select[_ngcontent-%COMP%]{flex:none}}@media (prefers-color-scheme: dark){.auth-card[_ngcontent-%COMP%]{background:#1a1a1a;color:#fff}.auth-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .auth-step[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .name-input-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .method-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#fff}.subtitle[_ngcontent-%COMP%], .method-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .auth-switch[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#ccc}.name-input[_ngcontent-%COMP%], .country-select[_ngcontent-%COMP%], .phone-input[_ngcontent-%COMP%], .otp-input[_ngcontent-%COMP%]{background:#2d2d2d;border-color:#444;color:#fff}.method-btn[_ngcontent-%COMP%]{background:#2d2d2d;border-color:#444}.method-btn[_ngcontent-%COMP%]:hover{background:#3a3a3a;border-color:#667eea}.password-toggle[_ngcontent-%COMP%]{color:#ccc}.password-toggle[_ngcontent-%COMP%]:hover{background:#3a3a3a;color:#fff}}"]})}return N})(),ci=(()=>{class N{firestore;authService;incomingInvitationSubject=new cs.t(null);incomingInvitation$=this.incomingInvitationSubject.asObservable();responseSubject=new cs.t(null);invitationResponse$=this.responseSubject.asObservable();constructor(f,S){this.firestore=f,this.authService=S,this.setupInvitationListener(),this.cleanupExpiredInvitations()}sendInvitation(f,S){var F=this;return(0,R.A)(function*(){const v=F.authService.currentUser;if(console.log("\u{1f510} Auth Debug:",{currentUser:v,isAuthenticated:!!v,uid:v?.uid,authState:F.authService.authState$}),!v)throw new Error("No authenticated user");const k=new Date;k.setMinutes(k.getMinutes()+5);const M={fromUserId:v.uid,toUserId:f.uid,fromUserName:v.displayName,fromUserPhone:v.phoneNumber,roomId:S,status:"pending",timestamp:(0,nt.O5)(),expiresAt:k};try{const j=yield(0,nt.gS)((0,nt.rJ)(F.firestore,"invitations"),M);return console.log("Invitation sent:",j.id),j.id}catch(j){throw console.error("Error sending invitation:",j),new Error("Failed to send invitation")}})()}setupInvitationListener(){this.authService.authState$.subscribe(f=>{if(f){const S=(0,nt.rJ)(this.firestore,"invitations"),F=(0,nt.P)(S,(0,nt._M)("toUserId","==",f.uid),(0,nt._M)("status","==","pending"));(0,nt.aQ)(F,v=>{v.docChanges().forEach(k=>{if("added"===k.type){const M={id:k.doc.id,...k.doc.data()};new Date<(M.expiresAt.toDate?M.expiresAt.toDate():new Date(M.expiresAt))?(console.log("New invitation received:",M),this.incomingInvitationSubject.next(M)):this.updateInvitationStatus(M.id,"expired")}})})}})}respondToInvitation(f,S){var F=this;return(0,R.A)(function*(){try{const v=S?"accepted":"declined";if(yield F.updateInvitationStatus(f,v),S){(0,nt.H9)(F.firestore,"invitations",f);const M=yield(0,nt.GG)((0,nt.P)((0,nt.rJ)(F.firestore,"invitations"),(0,nt._M)("__name__","==",f)));if(!M.empty)return M.docs[0].data().roomId}return null}catch(v){throw console.error("Error responding to invitation:",v),new Error("Failed to respond to invitation")}})()}listenForInvitationResponse(f){return new de.c(S=>{const F=(0,nt.H9)(this.firestore,"invitations",f),v=(0,nt.aQ)(F,k=>{if(k.exists()){const M=k.data();"accepted"===M.status?(S.next("accepted"),this.responseSubject.next({invitationId:f,status:"accepted"})):"declined"===M.status?(S.next("declined"),this.responseSubject.next({invitationId:f,status:"declined"})):"expired"===M.status&&(S.next("expired"),this.responseSubject.next({invitationId:f,status:"expired"}))}});return()=>v()})}updateInvitationStatus(f,S){var F=this;return(0,R.A)(function*(){const v=(0,nt.H9)(F.firestore,"invitations",f);yield(0,nt.mZ)(v,{status:S})})()}clearIncomingInvitation(){this.incomingInvitationSubject.next(null)}cleanupExpiredInvitations(){var f=this;return(0,R.A)(function*(){try{const S=new Date,F=(0,nt.rJ)(f.firestore,"invitations"),v=(0,nt.P)(F,(0,nt._M)("status","==","pending")),k=yield(0,nt.GG)(v),M=[];k.forEach(j=>{const ee=j.data(),Re=ee.expiresAt.toDate?ee.expiresAt.toDate():new Date(ee.expiresAt);S>Re&&M.push(j.id)});for(const j of M)yield f.updateInvitationStatus(j,"expired");console.log(`Cleaned up ${M.length} expired invitations`)}catch(S){console.error("Error cleaning up expired invitations:",S)}})()}static \u0275fac=function(S){return new(S||N)(p.KVO(nt._7),p.KVO(fo))};static \u0275prov=p.jDH({token:N,factory:N.\u0275fac,providedIn:"root"})}return N})(),ji=(()=>{class N{firestore;invitationService;peerConnection;localStream;remoteStreamSubject=new cs.t(null);connectionStatusSubject=new cs.t("Disconnected");remoteUserSubject=new cs.t(null);remoteStream$=this.remoteStreamSubject.asObservable();connectionStatus$=this.connectionStatusSubject.asObservable();remoteUser$=this.remoteUserSubject.asObservable();navigationSubject=new cs.t(null);navigation$=this.navigationSubject.asObservable();currentRoomId=null;currentUser=null;isHost=!1;unsubscribeFunctions=[];remoteDescriptionSet=!1;pendingCandidates=[];iceServers=[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"},{urls:"stun:stun2.l.google.com:19302"},{urls:"stun:stun3.l.google.com:19302"},{urls:"stun:stun4.l.google.com:19302"},{urls:"turn:openrelay.metered.ca:80",username:"openrelayproject",credential:"openrelayproject"},{urls:"turn:openrelay.metered.ca:443",username:"openrelayproject",credential:"openrelayproject"},{urls:"turn:numb.viagenie.ca",username:"webrtc@live.com",credential:"muazkh"}];constructor(f,S){this.firestore=f,this.invitationService=S}initializeCall(f,S){var F=this;return(0,R.A)(function*(){try{F.currentRoomId=f,F.currentUser=S,console.log("\u{1f680} Initializing call for room:",f),F.connectionStatusSubject.next("Initializing..."),yield F.setupLocalMedia();const v=yield F.checkRoomExists(f);F.isHost=!v,yield F.setupPeerConnection(),F.isHost?(console.log("\u{1f3e0} Creating new room..."),yield F.createRoom(),setTimeout(()=>{F.createOffer()},1e3)):(console.log("\u{1f6aa} Joining existing room..."),yield F.joinRoom()),F.listenForRoomChanges(),F.connectionStatusSubject.next("Connected to room"),console.log("\u2705 Call initialization complete")}catch(v){throw console.error("\u274c Error initializing call:",v),F.connectionStatusSubject.next("Failed to connect"),v}})()}setupLocalMedia(){var f=this;return(0,R.A)(function*(){try{console.log("\u{1f4f9} Setting up local media...");const S={video:{width:{ideal:1280,max:1920},height:{ideal:720,max:1080},frameRate:{ideal:30,max:60}},audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}};f.localStream=yield navigator.mediaDevices.getUserMedia(S),console.log("\u2705 Local media setup complete")}catch(S){throw console.error("\u274c Error accessing media devices:",S),new Error("Failed to access camera/microphone. Please check permissions.")}})()}setupPeerConnection(){var f=this;return(0,R.A)(function*(){f.peerConnection=new RTCPeerConnection({iceServers:f.iceServers,iceCandidatePoolSize:20,iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"}),f.localStream.getTracks().forEach(F=>{console.log("\u{1f3b5} Adding local track:",F.kind),f.peerConnection.addTrack(F,f.localStream)}),f.peerConnection.ontrack=F=>{console.log("\u{1f4f9} Received remote track:",F.track.kind),f.remoteStreamSubject.next(F.streams[0]),f.connectionStatusSubject.next("Connected - Video active")},f.peerConnection.onicecandidate=function(){var F=(0,R.A)(function*(v){v.candidate&&f.currentRoomId?(console.log("\u{1f9ca} Sending ICE candidate"),yield f.addIceCandidate(v.candidate)):v.candidate||console.log("\u{1f9ca} ICE gathering complete")});return function(v){return F.apply(this,arguments)}}(),f.peerConnection.onconnectionstatechange=()=>{const F=f.peerConnection.connectionState;switch(console.log("\u{1f517} Connection state:",F),F){case"connecting":f.connectionStatusSubject.next("Connecting...");break;case"connected":f.connectionStatusSubject.next("Connected");break;case"disconnected":f.connectionStatusSubject.next("Reconnecting..."),setTimeout(()=>{"disconnected"===f.peerConnection.connectionState&&(console.log("\u{1f504} Attempting ICE restart..."),f.peerConnection.restartIce())},3e3);break;case"failed":f.connectionStatusSubject.next("Connection failed"),setTimeout(()=>{console.log("\u{1f504} Attempting connection restart..."),f.peerConnection.restartIce()},1e3);break;case"closed":f.connectionStatusSubject.next("Call ended")}},f.peerConnection.oniceconnectionstatechange=()=>{const F=f.peerConnection.iceConnectionState;switch(console.log("\u{1f9ca} ICE connection state:",F),F){case"checking":f.connectionStatusSubject.next("Establishing connection...");break;case"connected":case"completed":f.connectionStatusSubject.next("Connected");break;case"failed":console.log("\u{1f504} ICE connection failed, restarting..."),f.peerConnection.restartIce()}},f.peerConnection.onsignalingstatechange=()=>{console.log("\u{1f4e1} Signaling state:",f.peerConnection.signalingState)}})()}checkRoomExists(f){var S=this;return(0,R.A)(function*(){try{const F=(0,nt.H9)(S.firestore,"calls",f);return(yield(0,nt.x7)(F)).exists()}catch(F){return console.error("Error checking room:",F),!1}})()}createRoom(){var f=this;return(0,R.A)(function*(){try{const S={createdBy:f.currentUser.uid,createdAt:(0,nt.O5)(),participants:[f.currentUser.uid],status:"waiting"},F=(0,nt.H9)(f.firestore,"calls",f.currentRoomId);yield(0,nt.BN)(F,S),console.log("\u2705 Room created successfully")}catch(S){throw console.error("\u274c Error creating room:",S),S}})()}joinRoom(){var f=this;return(0,R.A)(function*(){try{const S=(0,nt.H9)(f.firestore,"calls",f.currentRoomId),F=yield(0,nt.x7)(S);if(F.exists()){const v=F.data(),k=v.participants||[];k.includes(f.currentUser.uid)||(k.push(f.currentUser.uid),yield(0,nt.mZ)(S,{participants:k,status:"active"})),v.offer&&(yield f.handleOffer(v.offer))}console.log("\u2705 Joined room successfully")}catch(S){throw console.error("\u274c Error joining room:",S),S}})()}listenForRoomChanges(){var f=this;const S=(0,nt.H9)(this.firestore,"calls",this.currentRoomId),F=(0,nt.aQ)(S,function(){var v=(0,R.A)(function*(k){if(k.exists()){const M=k.data();M.offer&&!f.isHost&&"stable"===f.peerConnection.signalingState&&!f.remoteDescriptionSet&&(yield f.handleOffer(M.offer)),M.answer&&f.isHost&&"have-local-offer"===f.peerConnection.signalingState&&!f.remoteDescriptionSet&&(yield f.handleAnswer(M.answer))}});return function(k){return v.apply(this,arguments)}}());this.unsubscribeFunctions.push(F),this.listenForIceCandidates()}handleOffer(f){var S=this;return(0,R.A)(function*(){try{console.log("\u{1f4de} Handling offer...");const F={sdp:f.sdp,type:f.type};yield S.peerConnection.setRemoteDescription(new RTCSessionDescription(F)),S.remoteDescriptionSet=!0,yield S.processPendingIceCandidates();const v=yield S.peerConnection.createAnswer();yield S.peerConnection.setLocalDescription(v);const k=(0,nt.H9)(S.firestore,"calls",S.currentRoomId);yield(0,nt.mZ)(k,{answer:{sdp:v.sdp,type:v.type}}),console.log("\u2705 Answer sent")}catch(F){console.error("\u274c Error handling offer:",F)}})()}handleAnswer(f){var S=this;return(0,R.A)(function*(){try{console.log("\u{1f4de} Handling answer...");const F={sdp:f.sdp,type:f.type};yield S.peerConnection.setRemoteDescription(new RTCSessionDescription(F)),S.remoteDescriptionSet=!0,yield S.processPendingIceCandidates(),console.log("\u2705 Answer processed")}catch(F){console.error("\u274c Error handling answer:",F)}})()}listenForIceCandidates(){var f=this;const S=(0,nt.rJ)(this.firestore,"calls",this.currentRoomId,"iceCandidates"),F=(0,nt.P)(S,(0,nt.My)("timestamp")),v=(0,nt.aQ)(F,k=>{k.docChanges().forEach(function(){var M=(0,R.A)(function*(j){if("added"===j.type){const ee=j.doc.data();if(ee.senderId!==f.currentUser.uid)try{const Re=new RTCIceCandidate({candidate:ee.candidate,sdpMLineIndex:ee.sdpMLineIndex,sdpMid:ee.sdpMid});f.remoteDescriptionSet?(yield f.peerConnection.addIceCandidate(Re),console.log("\u2705 ICE candidate added")):(f.pendingCandidates.push(Re),console.log("\u{1f4e6} ICE candidate queued (waiting for remote description)"))}catch(Re){console.error("\u274c Error adding ICE candidate:",Re)}}});return function(j){return M.apply(this,arguments)}}())});this.unsubscribeFunctions.push(v)}processPendingIceCandidates(){var f=this;return(0,R.A)(function*(){console.log(`\u{1f9ca} Processing ${f.pendingCandidates.length} pending ICE candidates`);for(const S of f.pendingCandidates)try{yield f.peerConnection.addIceCandidate(S),console.log("\u2705 Processed pending ICE candidate")}catch(F){console.error("\u274c Error processing pending ICE candidate:",F)}f.pendingCandidates=[]})()}addIceCandidate(f){var S=this;return(0,R.A)(function*(){try{const F=(0,nt.rJ)(S.firestore,"calls",S.currentRoomId,"iceCandidates");yield(0,nt.gS)(F,{candidate:f.candidate,sdpMLineIndex:f.sdpMLineIndex,sdpMid:f.sdpMid,senderId:S.currentUser.uid,timestamp:(0,nt.O5)()})}catch(F){console.error("\u274c Error saving ICE candidate:",F)}})()}createOffer(){var f=this;return(0,R.A)(function*(){try{console.log("\u{1f4e4} Creating offer...");const S=yield f.peerConnection.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});yield f.peerConnection.setLocalDescription(S);const F=(0,nt.H9)(f.firestore,"calls",f.currentRoomId);yield(0,nt.mZ)(F,{offer:{sdp:S.sdp,type:S.type}}),console.log("\u2705 Offer created and sent")}catch(S){throw console.error("\u274c Error creating offer:",S),S}})()}toggleVideo(){if(this.localStream){const f=this.localStream.getVideoTracks()[0];if(f)return f.enabled=!f.enabled,console.log("\u{1f4f9} Video toggled:",f.enabled),f.enabled}return!1}toggleAudio(){if(this.localStream){const f=this.localStream.getAudioTracks()[0];if(f)return f.enabled=!f.enabled,console.log("\u{1f3a4} Audio toggled:",f.enabled),f.enabled}return!1}switchCamera(){var f=this;return(0,R.A)(function*(){if(!f.localStream)throw new Error("No local stream available");try{const S=f.localStream.getVideoTracks()[0];if(!S)throw new Error("No video track available");const F=S.getSettings(),v="user"===F.facingMode;console.log("\u{1f4f1} Switching camera from:",F.facingMode),S.stop();const M=(yield navigator.mediaDevices.getUserMedia({video:{facingMode:v?"environment":"user"},audio:!1})).getVideoTracks()[0],j=f.peerConnection.getSenders().find(ee=>ee.track&&"video"===ee.track.kind);j&&(yield j.replaceTrack(M),console.log("\u2705 Video track replaced in peer connection")),f.localStream.removeTrack(S),f.localStream.addTrack(M),console.log("\u2705 Camera switched successfully")}catch(S){throw console.error("\u274c Error switching camera:",S),new Error("Failed to switch camera. This feature may not be available on your device.")}})()}startScreenShare(){var f=this;return(0,R.A)(function*(){try{console.log("\u{1f5a5}\ufe0f Starting screen share...");const F=(yield navigator.mediaDevices.getDisplayMedia({video:!0,audio:!0})).getVideoTracks()[0],v=f.peerConnection.getSenders().find(k=>k.track&&"video"===k.track.kind);v&&(yield v.replaceTrack(F),console.log("\u2705 Screen share track added to peer connection")),F.onended=()=>{f.stopScreenShare().catch(console.error)},console.log("\u2705 Screen sharing started")}catch(S){throw console.error("\u274c Error starting screen share:",S),new Error("Failed to start screen sharing")}})()}stopScreenShare(){var f=this;return(0,R.A)(function*(){try{console.log("\u{1f5a5}\ufe0f Stopping screen share...");const F=(yield navigator.mediaDevices.getUserMedia({video:!0,audio:!1})).getVideoTracks()[0],v=f.peerConnection.getSenders().find(M=>M.track&&"video"===M.track.kind);v&&(yield v.replaceTrack(F),console.log("\u2705 Camera track restored in peer connection"));const k=f.localStream.getVideoTracks()[0];k&&(f.localStream.removeTrack(k),k.stop()),f.localStream.addTrack(F),console.log("\u2705 Screen sharing stopped")}catch(S){throw console.error("\u274c Error stopping screen share:",S),new Error("Failed to stop screen sharing")}})()}getLocalStream(){return this.localStream}getRemoteStream(){return this.remoteStreamSubject.value}endCall(){var f=this;return(0,R.A)(function*(){try{if(console.log("\u{1f4de} Ending call..."),f.peerConnection&&f.peerConnection.close(),f.localStream&&f.localStream.getTracks().forEach(S=>{S.stop(),console.log("\u{1f6d1} Stopped local track:",S.kind)}),f.unsubscribeFunctions.forEach(S=>{try{S()}catch(F){console.error("\u274c Error unsubscribing:",F)}}),f.unsubscribeFunctions=[],f.currentRoomId)try{const S=(0,nt.H9)(f.firestore,"calls",f.currentRoomId);yield(0,nt.mZ)(S,{status:"ended",endedAt:(0,nt.O5)()}),setTimeout((0,R.A)(function*(){try{yield(0,nt.kd)(S),console.log("\u{1f5d1}\ufe0f Room deleted")}catch(F){console.error("\u274c Error deleting room:",F)}}),6e4)}catch(S){console.error("\u274c Error updating room status:",S)}f.remoteStreamSubject.next(null),f.connectionStatusSubject.next("Call ended"),f.remoteUserSubject.next(null),f.currentRoomId=null,f.currentUser=null,f.isHost=!1,f.remoteDescriptionSet=!1,f.pendingCandidates=[],console.log("\u2705 Call ended successfully")}catch(S){console.error("\u274c Error ending call:",S)}})()}getConnectionStats(){var f=this;return(0,R.A)(function*(){if(!f.peerConnection)return null;try{const S=yield f.peerConnection.getStats(),F={};return S.forEach(v=>{"inbound-rtp"===v.type&&(F.inbound={bytesReceived:v.bytesReceived,packetsReceived:v.packetsReceived,packetsLost:v.packetsLost}),"outbound-rtp"===v.type&&(F.outbound={bytesSent:v.bytesSent,packetsSent:v.packetsSent}),"candidate-pair"===v.type&&"succeeded"===v.state&&(F.connection={roundTripTime:v.currentRoundTripTime,availableOutgoingBitrate:v.availableOutgoingBitrate})}),F}catch(S){return console.error("\u274c Error getting connection stats:",S),null}})()}startCall(){var f=this;return(0,R.A)(function*(){f.isHost&&"stable"===f.peerConnection.signalingState&&(yield f.createOffer())})()}generateRoomId(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}inviteUserToCall(f){var S=this;return(0,R.A)(function*(){if(!S.currentUser)throw new Error("No current user available for video call service");const v=S.generateRoomId();try{console.log("\u{1f3a5} Inviting user to call:",f);const k=yield S.invitationService.sendInvitation(f,v);S.invitationService.listenForInvitationResponse(k).subscribe(function(){var M=(0,R.A)(function*(j){console.log("\u{1f4de} Invitation response:",j),"accepted"===j?(S.navigationSubject.next({action:"navigate",roomId:v,isHost:!0}),console.log("\u{1f680} Starting call as host...")):"declined"===j?(console.log("\u274c Invitation was declined"),S.navigationSubject.next({action:"declined"})):"expired"===j&&(console.log("\u23f0 Invitation expired"),S.navigationSubject.next({action:"expired"}))});return function(j){return M.apply(this,arguments)}}()),console.log("\u2705 Invitation sent successfully")}catch(k){throw console.error("\u274c Error sending invitation:",k),k}})()}joinCallFromInvitation(f,S){var F=this;return(0,R.A)(function*(){try{console.log("\u{1f6aa} Joining call from invitation, room:",f),F.currentUser=S,F.currentRoomId=f,F.isHost=!1,yield F.initializeCall(f,S),console.log("\u2705 Successfully joined call from invitation")}catch(v){throw console.error("\u274c Error joining call from invitation:",v),v}})()}clearNavigationEvent(){this.navigationSubject.next(null)}setCurrentUser(f){this.currentUser=f}getCurrentUser(){return this.currentUser}static \u0275fac=function(S){return new(S||N)(p.KVO(nt._7),p.KVO(ci))};static \u0275prov=p.jDH({token:N,factory:N.\u0275fac,providedIn:"root"})}return N})(),Ia=(()=>{class N{firestore;constructor(f){this.firestore=f}joinRoom(f,S){var F=this;return(0,R.A)(function*(){try{const v=(0,nt.H9)(F.firestore,"chatRooms",f),k=yield(0,nt.x7)(v);if(k.exists()){const j=k.data().participants||[];j.includes(S.uid)||(j.push(S.uid),yield(0,nt.mZ)(v,{participants:j}),yield F.sendSystemMessage(f,`${S.displayName||"User"} joined the chat`))}else{const M={id:f,participants:[S.uid],createdAt:(0,nt.O5)()};yield(0,nt.BN)(v,M),yield F.sendSystemMessage(f,`${S.displayName||"User"} created the chat room`)}console.log("\u2705 Joined chat room:",f)}catch(v){throw console.error("\u274c Error joining chat room:",v),v}})()}leaveRoom(f,S){var F=this;return(0,R.A)(function*(){try{if(S){const v=(0,nt.H9)(F.firestore,"chatRooms",f),k=yield(0,nt.x7)(v);if(k.exists()){const ee=(k.data().participants||[]).filter(Re=>Re!==S.uid);yield(0,nt.mZ)(v,{participants:ee}),yield F.sendSystemMessage(f,`${S.displayName||"User"} left the chat`)}}console.log("\u{1f44b} Left chat room:",f)}catch(v){console.error("\u274c Error leaving chat room:",v)}})()}sendMessage(f,S,F){var v=this;return(0,R.A)(function*(){try{const k=(0,nt.rJ)(v.firestore,"chatRooms",f,"messages"),M={content:S.trim(),senderId:F.uid,senderName:F.displayName||F.phoneNumber.slice(-4)||"User",roomId:f,timestamp:(0,nt.O5)(),type:"text"};yield(0,nt.gS)(k,M);const j=(0,nt.H9)(v.firestore,"chatRooms",f);yield(0,nt.mZ)(j,{lastMessage:S.trim(),lastMessageTime:(0,nt.O5)()}),console.log("\u{1f4e4} Message sent:",S)}catch(k){throw console.error("\u274c Error sending message:",k),k}})()}sendSystemMessage(f,S){var F=this;return(0,R.A)(function*(){try{const v=(0,nt.rJ)(F.firestore,"chatRooms",f,"messages"),k={content:S,senderId:"system",senderName:"System",roomId:f,timestamp:(0,nt.O5)(),type:"system"};yield(0,nt.gS)(v,k)}catch(v){console.error("\u274c Error sending system message:",v)}})()}getMessages(f){return new de.c(S=>{const F=(0,nt.rJ)(this.firestore,"chatRooms",f,"messages"),v=(0,nt.P)(F,(0,nt.My)("timestamp","asc")),k=(0,nt.aQ)(v,M=>{const j=[];M.forEach(ee=>{const Re=ee.data();j.push({id:ee.id,...Re})}),S.next(j)},M=>{console.error("\u274c Error listening to messages:",M),S.error(M)});return()=>k()})}deleteMessage(f,S){var F=this;return(0,R.A)(function*(){try{const v=(0,nt.H9)(F.firestore,"chatRooms",f,"messages",S);yield(0,nt.mZ)(v,{content:"[Message deleted]",type:"system"}),console.log("\u{1f5d1}\ufe0f Message deleted:",S)}catch(v){throw console.error("\u274c Error deleting message:",v),v}})()}getRoomInfo(f){var S=this;return(0,R.A)(function*(){try{const F=(0,nt.H9)(S.firestore,"chatRooms",f),v=yield(0,nt.x7)(F);return v.exists()?v.data():null}catch(F){return console.error("\u274c Error getting room info:",F),null}})()}sendTypingIndicator(f,S,F){var v=this;return(0,R.A)(function*(){try{const k=(0,nt.H9)(v.firestore,"chatRooms",f,"typing",S.uid);if(F){const M={userId:S.uid,userName:S.displayName||"User",timestamp:(0,nt.O5)()};yield(0,nt.BN)(k,M)}else try{yield(0,nt.kd)(k)}catch{console.log("Typing indicator document not found (already removed)")}}catch(k){console.error("\u274c Error sending typing indicator:",k)}})()}getTypingUsers(f,S){return new de.c(F=>{const v=(0,nt.rJ)(this.firestore,"chatRooms",f,"typing"),k=(0,nt.aQ)(v,M=>{const j=[],ee=Date.now();M.forEach(Re=>{const Ke=Re.data(),xt=Ke?.userId,Qn=Ke?.userName,dn=Ke?.timestamp;let Ut=null;dn&&("function"==typeof dn.toMillis?Ut=dn.toMillis():"number"==typeof dn&&(Ut=dn)),xt&&xt!==S&&Qn&&Ut&&ee-Ut<3e3&&j.push(Qn)}),F.next(j)},M=>{console.error("\u274c Error listening to typing indicators:",M),F.error(M)});return()=>k()})}clearOldMessages(f){var S=this;return(0,R.A)(function*(F,v=30){try{(0,nt.rJ)(S.firestore,"chatRooms",F,"messages");const M=new Date;M.setDate(M.getDate()-v),console.log(`\u{1f9f9} Old message cleanup would delete messages older than ${M}`)}catch(k){console.error("\u274c Error clearing old messages:",k)}}).apply(this,arguments)}getMessageCount(f){var S=this;return(0,R.A)(function*(){try{const F=(0,nt.rJ)(S.firestore,"chatRooms",f,"messages");return(yield(0,nt.GG)(F)).size}catch(F){return console.error("\u274c Error getting message count:",F),0}})()}getRoomParticipants(f){var S=this;return(0,R.A)(function*(){try{return(yield S.getRoomInfo(f))?.participants||[]}catch(F){return console.error("\u274c Error getting room participants:",F),[]}})()}isUserInRoom(f,S){var F=this;return(0,R.A)(function*(){try{return(yield F.getRoomParticipants(f)).includes(S)}catch(v){return console.error("\u274c Error checking if user is in room:",v),!1}})()}getRecentMessages(f){var S=this;return(0,R.A)(function*(F,v=50){try{const k=(0,nt.rJ)(S.firestore,"chatRooms",F,"messages"),M=(0,nt.P)(k,(0,nt.My)("timestamp","desc")),j=yield(0,nt.GG)(M),ee=[];return j.forEach(Re=>{const Ke=Re.data();ee.push({id:Re.id,...Ke})}),ee.reverse().slice(-v)}catch(k){return console.error("\u274c Error getting recent messages:",k),[]}}).apply(this,arguments)}static \u0275fac=function(S){return new(S||N)(p.KVO(nt._7))};static \u0275prov=p.jDH({token:N,factory:N.\u0275fac,providedIn:"root"})}return N})();const Jr=["localVideo"],lc=["remoteVideo"],po=["chatMessages"];function Ai(N,L){1&N&&(p.j41(0,"div",8),p.nrm(1,"div",9),p.j41(2,"p"),p.EFF(3,"Initializing call..."),p.k0s()())}function ds(N,L){if(1&N){const f=p.RV6();p.j41(0,"div",40)(1,"div",41)(2,"div",42),p.EFF(3),p.k0s(),p.j41(4,"h3"),p.EFF(5,"Waiting for someone to join..."),p.k0s(),p.j41(6,"p"),p.EFF(7,"Share the room ID with someone to start the meeting"),p.k0s(),p.j41(8,"div",43)(9,"code"),p.EFF(10),p.k0s(),p.j41(11,"button",44),p.bIt("click",function(){p.eBV(f);const F=p.XpG(2);return p.Njj(F.copyRoomId())}),p.EFF(12,"Copy Room ID"),p.k0s()()()()}if(2&N){const f=p.XpG(2);p.R7$(3),p.JRh(f.getInitials(f.currentUser.displayName||f.currentUser.phoneNumber||"You")),p.R7$(7),p.JRh(f.roomId)}}function bn(N,L){if(1&N&&(p.j41(0,"div",45)(1,"span"),p.EFF(2),p.k0s()()),2&N){const f=p.XpG(2);p.R7$(2),p.JRh(f.remoteUserName||"Remote User")}}function Ea(N,L){if(1&N&&(p.j41(0,"div",46)(1,"div",47)(2,"span",48),p.EFF(3),p.k0s(),p.j41(4,"span",49),p.EFF(5),p.k0s()(),p.j41(6,"div",50),p.EFF(7),p.k0s()()),2&N){const f=L.$implicit,S=p.XpG(2);p.AVh("own",f.senderId===S.currentUser.uid),p.R7$(3),p.JRh(f.senderName),p.R7$(2),p.JRh(S.formatTime(f.timestamp)),p.R7$(2),p.JRh(f.content)}}function na(N,L){1&N&&(p.j41(0,"div",51),p.EFF(1," No messages yet. Start the conversation! "),p.k0s())}function Ca(N,L){if(1&N){const f=p.RV6();p.j41(0,"div",10)(1,"div",11)(2,"div",12)(3,"h3"),p.EFF(4,"\u{1f4f9} Meeting Room"),p.k0s(),p.j41(5,"p"),p.EFF(6,"Room ID: "),p.j41(7,"code"),p.EFF(8),p.k0s()(),p.j41(9,"button",13),p.bIt("click",function(){p.eBV(f);const F=p.XpG();return p.Njj(F.copyRoomId())}),p.EFF(10,"\u{1f4cb} Copy"),p.k0s()(),p.j41(11,"div",14),p.nrm(12,"span",15),p.EFF(13),p.k0s(),p.j41(14,"button",16),p.bIt("click",function(){p.eBV(f);const F=p.XpG();return p.Njj(F.toggleChat())}),p.EFF(15),p.k0s()(),p.j41(16,"div",17)(17,"div",18),p.nrm(18,"video",19,0),p.DNE(20,ds,13,2,"div",20)(21,bn,3,1,"div",21),p.k0s(),p.j41(22,"div",22),p.bIt("pointerdown",function(F){p.eBV(f);const v=p.XpG();return p.Njj(v.startDragging(F))}),p.nrm(23,"video",23,1),p.j41(25,"div",24),p.EFF(26),p.k0s()(),p.j41(27,"div",25)(28,"div",26)(29,"button",27),p.bIt("click",function(){p.eBV(f);const F=p.XpG();return p.Njj(F.toggleAudio())}),p.EFF(30),p.k0s(),p.j41(31,"button",27),p.bIt("click",function(){p.eBV(f);const F=p.XpG();return p.Njj(F.toggleVideo())}),p.EFF(32),p.k0s(),p.j41(33,"button",28),p.bIt("click",function(){p.eBV(f);const F=p.XpG();return p.Njj(F.switchCamera())}),p.EFF(34," \u{1f504} "),p.k0s(),p.j41(35,"button",29),p.bIt("click",function(){p.eBV(f);const F=p.XpG();return p.Njj(F.toggleScreenShare())}),p.EFF(36),p.k0s(),p.j41(37,"button",30),p.bIt("click",function(){p.eBV(f);const F=p.XpG();return p.Njj(F.endCall())}),p.EFF(38," \u{1f4de} "),p.k0s()()()(),p.j41(39,"div",31)(40,"div",32)(41,"h4"),p.EFF(42,"\u{1f4ac} Chat"),p.k0s(),p.j41(43,"button",33),p.bIt("click",function(){p.eBV(f);const F=p.XpG();return p.Njj(F.toggleChat())}),p.EFF(44,"\xd7"),p.k0s()(),p.j41(45,"div",34,2),p.DNE(47,Ea,8,5,"div",35)(48,na,2,0,"div",36),p.k0s(),p.j41(49,"div",37)(50,"input",38),p.mxI("ngModelChange",function(F){p.eBV(f);const v=p.XpG();return p.DH7(v.newMessage,F)||(v.newMessage=F),p.Njj(F)}),p.bIt("keyup.enter",function(){p.eBV(f);const F=p.XpG();return p.Njj(F.sendMessage())}),p.k0s(),p.j41(51,"button",39),p.bIt("click",function(){p.eBV(f);const F=p.XpG();return p.Njj(F.sendMessage())}),p.EFF(52," \u{1f4e4} "),p.k0s()()()()}if(2&N){const f=p.XpG();p.R7$(8),p.JRh(f.roomId),p.R7$(4),p.HbH(f.getStatusClass()),p.R7$(),p.SpI(" ",f.connectionStatus," "),p.R7$(),p.AVh("active",f.showChat),p.R7$(),p.SpI(" \u{1f4ac} Chat ",f.unreadMessages>0?"("+f.unreadMessages+")":""," "),p.R7$(),p.AVh("chat-open",f.showChat),p.R7$(2),p.AVh("no-video",!f.hasRemoteVideo),p.R7$(2),p.Y8G("ngIf",!f.hasRemoteVideo),p.R7$(),p.Y8G("ngIf",f.hasRemoteVideo),p.R7$(),p.xc7("right",f.localVideoPosition.x,"px")("top",f.localVideoPosition.y,"px"),p.R7$(4),p.E5c(" You (",f.currentUser.displayName||"User",") (",f.isVideoOn?"\u{1f4f9}":"\u{1f4f9}\u0338",") (",f.isAudioOn?"\u{1f3a4}":"\u{1f3a4}\u0338",") "),p.R7$(3),p.HbH("control-btn "+(f.isAudioOn?"active":"inactive")),p.Y8G("title",f.isAudioOn?"Mute microphone":"Unmute microphone"),p.R7$(),p.SpI(" ",f.isAudioOn?"\u{1f3a4}":"\u{1f3a4}\u0338"," "),p.R7$(),p.HbH("control-btn "+(f.isVideoOn?"active":"inactive")),p.Y8G("title",f.isVideoOn?"Turn off camera":"Turn on camera"),p.R7$(),p.SpI(" ",f.isVideoOn?"\u{1f4f9}":"\u{1f4f9}\u0338"," "),p.R7$(3),p.HbH("control-btn "+(f.isScreenSharing?"active":"")),p.R7$(),p.SpI(" ",f.isScreenSharing?"\u{1f5a5}\ufe0f":"\u{1f4bb}"," "),p.R7$(3),p.AVh("open",f.showChat),p.R7$(8),p.Y8G("ngForOf",f.messages),p.R7$(),p.Y8G("ngIf",0===f.messages.length),p.R7$(2),p.R50("ngModel",f.newMessage),p.R7$(),p.Y8G("disabled",!f.newMessage.trim())}}function ra(N,L){if(1&N){const f=p.RV6();p.j41(0,"div",52),p.EFF(1),p.j41(2,"button",53),p.bIt("click",function(){p.eBV(f);const F=p.XpG();return p.Njj(F.clearError())}),p.EFF(3,"\xd7"),p.k0s()()}if(2&N){const f=p.XpG();p.R7$(),p.SpI(" ",f.errorMessage," ")}}function Vc(N,L){if(1&N){const f=p.RV6();p.j41(0,"div",54),p.EFF(1),p.j41(2,"button",53),p.bIt("click",function(){p.eBV(f);const F=p.XpG();return p.Njj(F.clearSuccess())}),p.EFF(3,"\xd7"),p.k0s()()}if(2&N){const f=p.XpG();p.R7$(),p.SpI(" ",f.successMessage," ")}}let Wo=(()=>{class N{videoCallService;chatService;route;router;authService;localVideo;remoteVideo;chatMessages;roomId;currentUser;leaveRoom=new p.bkB;routeRoomId;routeCurrentUser=null;isHost=!1;fromInvitation=!1;connectionStatus="Connecting...";hasRemoteVideo=!1;remoteUserName="";isVideoOn=!0;isAudioOn=!0;isScreenSharing=!1;showChat=!1;localVideoPosition={x:20,y:20};isDragging=!1;dragOffset={x:0,y:0};messages=[];newMessage="";unreadMessages=0;errorMessage="";successMessage="";subscriptions=[];constructor(f,S,F,v,k){this.videoCallService=f,this.chatService=S,this.route=F,this.router=v,this.authService=k}ngOnInit(){var f=this;return(0,R.A)(function*(){yield f.initializeFromRoute();const S=f.roomId||f.routeRoomId,F=f.currentUser||f.routeCurrentUser;if(!F)return console.error("\u274c VideoCallComponent: currentUser is required but not provided"),f.setError("User authentication required"),void f.router.navigate(["/auth"]);if(!S)return console.error("\u274c VideoCallComponent: roomId is required but not provided"),f.setError("Room ID is required"),void f.router.navigate(["/lobby"]);f.roomId=S,f.currentUser=F,console.log("\u{1f3a5} VideoCallComponent initializing...",{roomId:f.roomId,user:f.currentUser.displayName||f.currentUser.phoneNumber,isHost:f.isHost,fromInvitation:f.fromInvitation});try{yield f.initializeVideoCall(),f.initializeChat(),f.setupEventListeners(),console.log("\u2705 VideoCallComponent initialized successfully")}catch(v){console.error("\u274c Error initializing video call:",v),f.setError("Failed to initialize video call: "+(v instanceof Error?v.message:"Unknown error"))}})()}initializeFromRoute(){var f=this;return(0,R.A)(function*(){return new Promise(S=>{if(f.route.params.subscribe(F=>{f.routeRoomId=F.roomId}),f.route.queryParams.subscribe(F=>{f.isHost="true"===F.host,f.fromInvitation="true"===F.fromInvitation}),f.routeCurrentUser=f.authService.currentUser,f.routeCurrentUser)S();else{const F=f.authService.authState$.subscribe(v=>{v&&(f.routeCurrentUser=v,F.unsubscribe(),S())});setTimeout(()=>{f.routeCurrentUser||(console.warn("\u26a0\ufe0f No authenticated user found after timeout"),S())},2e3)}})})()}ngOnDestroy(){this.subscriptions.forEach(f=>f.unsubscribe()),this.videoCallService.endCall(),this.roomId&&this.chatService.leaveRoom(this.roomId)}initializeVideoCall(){var f=this;return(0,R.A)(function*(){if(!f.roomId||!f.currentUser)return;f.fromInvitation?yield f.videoCallService.joinCallFromInvitation(f.roomId,f.currentUser):yield f.videoCallService.initializeCall(f.roomId,f.currentUser);const S=f.videoCallService.getLocalStream();S&&f.localVideo?.nativeElement&&(f.localVideo.nativeElement.srcObject=S);const F=f.videoCallService.remoteStream$.subscribe(M=>{M&&M.getTracks().length>0&&f.remoteVideo?.nativeElement&&(f.remoteVideo.nativeElement.srcObject=M,f.hasRemoteVideo=!0,console.log("\u{1f4f9} Remote video stream connected"))}),v=f.videoCallService.connectionStatus$.subscribe(M=>{f.connectionStatus=M,console.log("\u{1f517} Connection status:",M)}),k=f.videoCallService.remoteUser$.subscribe(M=>{M&&(f.remoteUserName=M.displayName||"Remote User",console.log("\u{1f464} Remote user connected:",f.remoteUserName))});f.subscriptions.push(F,v,k)})()}initializeChat(){if(!this.roomId||!this.currentUser)return;this.chatService.joinRoom(this.roomId,this.currentUser);const f=this.chatService.getMessages(this.roomId).subscribe(S=>{const F=this.messages.length;this.messages=S,!this.showChat&&S.length>F&&(this.unreadMessages+=S.length-F),setTimeout(()=>this.scrollToBottom(),100)});this.subscriptions.push(f)}setupEventListeners(){const f=()=>{this.videoCallService.endCall(),this.roomId&&this.chatService.leaveRoom(this.roomId)};window.addEventListener("beforeunload",f),this.subscriptions.push({unsubscribe:()=>window.removeEventListener("beforeunload",f)})}toggleVideo(){this.isVideoOn=this.videoCallService.toggleVideo(),console.log("\u{1f4f9} Video toggled:",this.isVideoOn)}toggleAudio(){this.isAudioOn=this.videoCallService.toggleAudio(),console.log("\u{1f3a4} Audio toggled:",this.isAudioOn)}switchCamera(){var f=this;return(0,R.A)(function*(){try{yield f.videoCallService.switchCamera(),f.setSuccess("Camera switched"),console.log("\u{1f4f1} Camera switched")}catch(S){console.error("\u274c Error switching camera:",S),f.setError("Failed to switch camera")}})()}toggleScreenShare(){var f=this;return(0,R.A)(function*(){try{f.isScreenSharing?(yield f.videoCallService.stopScreenShare(),f.isScreenSharing=!1,f.setSuccess("Screen sharing stopped"),console.log("\u{1f5a5}\ufe0f Screen sharing stopped")):(yield f.videoCallService.startScreenShare(),f.isScreenSharing=!0,f.setSuccess("Screen sharing started"),console.log("\u{1f5a5}\ufe0f Screen sharing started"))}catch(S){console.error("\u274c Error toggling screen share:",S),f.setError("Failed to toggle screen sharing")}})()}endCall(){console.log("\u{1f4de} Ending call..."),this.videoCallService.endCall(),this.roomId&&this.chatService.leaveRoom(this.roomId),this.leaveRoom.observers.length>0?this.leaveRoom.emit():this.router.navigate(["/lobby"])}toggleChat(){this.showChat=!this.showChat,this.showChat&&(this.unreadMessages=0,setTimeout(()=>this.scrollToBottom(),100)),console.log("\u{1f4ac} Chat toggled:",this.showChat)}sendMessage(){!this.newMessage.trim()||!this.roomId||!this.currentUser||(console.log("\u{1f4ac} Sending message:",this.newMessage.trim()),this.chatService.sendMessage(this.roomId,this.newMessage.trim(),this.currentUser),this.newMessage="")}scrollToBottom(){if(this.chatMessages?.nativeElement){const f=this.chatMessages.nativeElement;f.scrollTop=f.scrollHeight}}copyRoomId(){var f=this;return(0,R.A)(function*(){if(f.roomId)try{yield navigator.clipboard.writeText(f.roomId),f.setSuccess("Room ID copied to clipboard"),console.log("\u{1f4cb} Room ID copied:",f.roomId)}catch(S){console.error("\u274c Error copying room ID:",S);const F=document.createElement("textarea");F.value=f.roomId,document.body.appendChild(F),F.select(),document.execCommand("copy"),document.body.removeChild(F),f.setSuccess("Room ID copied to clipboard")}})()}getStatusClass(){return this.connectionStatus.includes("Connected")?"connected":this.connectionStatus.includes("Connecting")?"connecting":"failed"}getInitials(f){return f&&f.split(" ").map(S=>S[0]).join("").toUpperCase().slice(0,2)||"U"}formatTime(f){return f?(f.toDate?f.toDate():new Date(f)).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):""}startDragging(f){this.isDragging=!0;const F=f.target.getBoundingClientRect();this.dragOffset.x=f.clientX-F.left,this.dragOffset.y=f.clientY-F.top,document.addEventListener("pointermove",this.onDrag.bind(this)),document.addEventListener("pointerup",this.stopDragging.bind(this)),f.preventDefault()}onDrag(f){if(!this.isDragging)return;const S=document.querySelector(".video-area");if(!S)return;const v=S.clientHeight-170;this.localVideoPosition.x=Math.max(20,Math.min(S.clientWidth-220,f.clientX-this.dragOffset.x)),this.localVideoPosition.y=Math.max(20,Math.min(v,f.clientY-this.dragOffset.y))}stopDragging(){this.isDragging=!1,document.removeEventListener("pointermove",this.onDrag.bind(this)),document.removeEventListener("pointerup",this.stopDragging.bind(this))}setError(f){this.errorMessage=f,this.successMessage="",setTimeout(()=>this.clearError(),5e3)}setSuccess(f){this.successMessage=f,this.errorMessage="",setTimeout(()=>this.clearSuccess(),3e3)}clearError(){this.errorMessage=""}clearSuccess(){this.successMessage=""}static \u0275fac=function(S){return new(S||N)(p.rXU(ji),p.rXU(Ia),p.rXU(Se.nX),p.rXU(Se.Ix),p.rXU(fo))};static \u0275cmp=p.VBU({type:N,selectors:[["app-video-call"]],viewQuery:function(S,F){if(1&S&&(p.GBs(Jr,5),p.GBs(lc,5),p.GBs(po,5)),2&S){let v;p.mGM(v=p.lsd())&&(F.localVideo=v.first),p.mGM(v=p.lsd())&&(F.remoteVideo=v.first),p.mGM(v=p.lsd())&&(F.chatMessages=v.first)}},inputs:{roomId:"roomId",currentUser:"currentUser"},outputs:{leaveRoom:"leaveRoom"},standalone:!0,features:[p.aNF],decls:5,vars:4,consts:[["remoteVideo",""],["localVideo",""],["chatMessages",""],[1,"video-call-container"],["class","loading-container",4,"ngIf"],["class","video-call-content",4,"ngIf"],["class","error-toast",4,"ngIf"],["class","success-toast",4,"ngIf"],[1,"loading-container"],[1,"spinner"],[1,"video-call-content"],[1,"call-header"],[1,"call-info"],[1,"copy-btn",3,"click"],[1,"call-status"],[1,"status-indicator"],[1,"chat-toggle-btn",3,"click"],[1,"video-area"],[1,"remote-video-container"],["autoplay","","playsinline","",1,"remote-video"],["class","no-remote-overlay",4,"ngIf"],["class","remote-user-info",4,"ngIf"],[1,"local-video-container",3,"pointerdown"],["autoplay","","muted","","playsinline","",1,"local-video"],[1,"local-user-info"],[1,"controls-container"],[1,"controls"],[3,"click","title"],["title","Switch camera",1,"control-btn",3,"click"],["title","Share screen",3,"click"],["title","Leave meeting",1,"control-btn","end-call",3,"click"],[1,"chat-panel"],[1,"chat-header"],[1,"close-chat-btn",3,"click"],[1,"chat-messages"],["class","message",3,"own",4,"ngFor","ngForOf"],["class","no-messages",4,"ngIf"],[1,"chat-input-container"],["type","text","placeholder","Type a message...","maxlength","500",1,"chat-input",3,"ngModelChange","keyup.enter","ngModel"],[1,"send-btn",3,"click","disabled"],[1,"no-remote-overlay"],[1,"waiting-content"],[1,"avatar-large"],[1,"room-id-display"],[1,"copy-btn-large",3,"click"],[1,"remote-user-info"],[1,"message"],[1,"message-header"],[1,"sender-name"],[1,"message-time"],[1,"message-content"],[1,"no-messages"],[1,"error-toast"],[1,"close-btn",3,"click"],[1,"success-toast"]],template:function(S,F){1&S&&(p.j41(0,"div",3),p.DNE(1,Ai,4,0,"div",4)(2,Ca,53,37,"div",5)(3,ra,4,1,"div",6)(4,Vc,4,1,"div",7),p.k0s()),2&S&&(p.R7$(),p.Y8G("ngIf",!F.currentUser),p.R7$(),p.Y8G("ngIf",F.currentUser),p.R7$(),p.Y8G("ngIf",F.errorMessage),p.R7$(),p.Y8G("ngIf",F.successMessage))},dependencies:[J.MD,J.Sq,J.bT,bo,it,lt,ya,Wi],styles:[".loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;background:#1a1a1a;color:#fff}.spinner[_ngcontent-%COMP%]{width:50px;height:50px;border:4px solid rgba(255,255,255,.3);border-top:4px solid white;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:20px}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.video-call-container[_ngcontent-%COMP%]{height:100vh;display:flex;flex-direction:column;background:#1a1a1a;color:#fff;position:relative;overflow:hidden}.call-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:15px 25px;background:#000c;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);z-index:1000;position:relative}.call-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px}.call-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:18px}.call-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px;color:#ccc}.call-info[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{background:#ffffff1a;padding:4px 8px;border-radius:4px;font-family:monospace}.copy-btn[_ngcontent-%COMP%]{padding:5px 10px;background:#007bff;color:#fff;border:none;border-radius:5px;cursor:pointer;font-size:12px}.call-status[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:14px}.status-indicator[_ngcontent-%COMP%]{width:10px;height:10px;border-radius:50%}.status-indicator.connected[_ngcontent-%COMP%]{background:#28a745}.status-indicator.connecting[_ngcontent-%COMP%]{background:#ffc107}.status-indicator.failed[_ngcontent-%COMP%]{background:#dc3545}.chat-toggle-btn[_ngcontent-%COMP%]{padding:10px 15px;background:#ffffff1a;color:#fff;border:none;border-radius:8px;cursor:pointer;transition:background .3s}.chat-toggle-btn.active[_ngcontent-%COMP%]{background:#007bff}.video-area[_ngcontent-%COMP%]{flex:1;position:relative;min-height:100vh;transition:margin-right .3s ease;display:flex;flex-direction:column}.video-area.chat-open[_ngcontent-%COMP%]{margin-right:350px}.remote-video-container[_ngcontent-%COMP%]{width:100%;flex:1;position:relative;background:#000;min-height:300px}.remote-video[_ngcontent-%COMP%]{width:100%;height:100vh;object-fit:cover}.remote-video.no-video[_ngcontent-%COMP%]{display:none}.no-remote-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#1e3c72,#2a5298)}.waiting-content[_ngcontent-%COMP%]{text-align:center;max-width:500px;padding:40px}.avatar-large[_ngcontent-%COMP%]{width:120px;height:120px;border-radius:50%;background:linear-gradient(135deg,#667eea,#764ba2);display:flex;align-items:center;justify-content:center;font-size:48px;font-weight:700;margin:0 auto 30px}.waiting-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 10px;font-size:24px}.waiting-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 30px;color:#fffc;line-height:1.5}.room-id-display[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:15px;background:#0000004d;padding:15px;border-radius:10px}.room-id-display[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{background:#ffffff1a;padding:8px 12px;border-radius:6px;font-family:monospace;font-size:18px}.copy-btn-large[_ngcontent-%COMP%]{padding:8px 16px;background:#28a745;color:#fff;border:none;border-radius:6px;cursor:pointer;font-weight:700}.remote-user-info[_ngcontent-%COMP%]{position:absolute;bottom:20px;left:20px;background:#000000b3;padding:8px 15px;border-radius:20px;font-size:14px;z-index:10}.local-video-container[_ngcontent-%COMP%]{position:absolute;top:20px;right:20px;width:200px;height:150px;border:2px solid rgba(255,255,255,.3);border-radius:15px;overflow:hidden;cursor:move;z-index:500;transition:all .3s;background:#333}.local-video-container[_ngcontent-%COMP%]:hover{border-color:#fff9}.local-video[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;background:#333}.local-user-info[_ngcontent-%COMP%]{position:absolute;bottom:5px;left:5px;background:#000c;padding:3px 8px;border-radius:10px;font-size:11px;z-index:10}.controls-container[_ngcontent-%COMP%]{position:absolute;bottom:60px;left:50%;transform:translate(-50%);z-index:2000;pointer-events:none}.controls[_ngcontent-%COMP%]{display:flex;gap:15px;background:#000000e6;padding:15px 25px;border-radius:50px;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);box-shadow:0 4px 20px #0000004d;pointer-events:auto}.control-btn[_ngcontent-%COMP%]{width:60px;height:60px;border:none;border-radius:50%;background:#ffffff1a;color:#fff;font-size:24px;cursor:pointer;transition:all .3s;display:flex;align-items:center;justify-content:center;position:relative;z-index:10}.control-btn[_ngcontent-%COMP%]:hover{background:#fff3;transform:scale(1.05)}.control-btn.active[_ngcontent-%COMP%]{background:#28a745cc}.control-btn.inactive[_ngcontent-%COMP%]{background:#dc3545cc}.control-btn.end-call[_ngcontent-%COMP%]{background:#dc3545e6}.control-btn.end-call[_ngcontent-%COMP%]:hover{background:#dc3545}.chat-panel[_ngcontent-%COMP%]{position:fixed;right:-350px;top:0;width:350px;height:100vh;background:#fff;color:#333;display:flex;flex-direction:column;transition:right .3s ease;z-index:1500;box-shadow:-5px 0 15px #0000001a}.chat-panel.open[_ngcontent-%COMP%]{right:0}.chat-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px;border-bottom:1px solid #eee;background:#f8f9fa}.chat-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;font-size:18px}.close-chat-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:24px;cursor:pointer;color:#666}.chat-messages[_ngcontent-%COMP%]{flex:1;padding:20px;overflow-y:auto;max-height:calc(100vh - 140px)}.message[_ngcontent-%COMP%]{margin-bottom:15px;max-width:80%}.message.own[_ngcontent-%COMP%]{margin-left:auto;text-align:right}.message-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:5px;font-size:12px;color:#666}.message.own[_ngcontent-%COMP%]   .message-header[_ngcontent-%COMP%]{justify-content:flex-end;gap:10px}.sender-name[_ngcontent-%COMP%]{font-weight:700}.message-time[_ngcontent-%COMP%]{opacity:.7}.message-content[_ngcontent-%COMP%]{background:#f1f3f4;padding:10px 15px;border-radius:18px;display:inline-block;max-width:100%;word-wrap:break-word;line-height:1.4}.message.own[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]{background:#007bff;color:#fff}.no-messages[_ngcontent-%COMP%]{text-align:center;color:#999;font-style:italic;margin-top:50px}.chat-input-container[_ngcontent-%COMP%]{display:flex;padding:15px 20px;border-top:1px solid #eee;background:#f8f9fa}.chat-input[_ngcontent-%COMP%]{flex:1;padding:12px 15px;border:1px solid #ddd;border-radius:25px;outline:none;font-size:14px;margin-right:10px}.chat-input[_ngcontent-%COMP%]:focus{border-color:#007bff}.send-btn[_ngcontent-%COMP%]{width:40px;height:40px;border:none;border-radius:50%;background:#007bff;color:#fff;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:background .3s}.send-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#0056b3}.send-btn[_ngcontent-%COMP%]:disabled{background:#ccc;cursor:not-allowed}.error-toast[_ngcontent-%COMP%], .success-toast[_ngcontent-%COMP%]{position:fixed;top:80px;right:20px;padding:15px 20px;border-radius:10px;display:flex;align-items:center;justify-content:space-between;gap:15px;z-index:3000;max-width:350px;animation:_ngcontent-%COMP%_slideIn .3s ease-out}.error-toast[_ngcontent-%COMP%]{background:#fee;color:#c33;border:1px solid #fcc}.success-toast[_ngcontent-%COMP%]{background:#efe;color:#3c3;border:1px solid #cfc}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:18px;cursor:pointer;opacity:.7}.close-btn[_ngcontent-%COMP%]:hover{opacity:1}@keyframes _ngcontent-%COMP%_slideIn{0%{transform:translate(100%);opacity:0}to{transform:translate(0);opacity:1}}@media (max-width: 768px){.call-header[_ngcontent-%COMP%]{flex-direction:column;gap:10px;padding:15px}.local-video-container[_ngcontent-%COMP%]{width:120px;height:90px;top:10px;right:10px}.controls-container[_ngcontent-%COMP%]{bottom:20px}.controls[_ngcontent-%COMP%]{gap:10px;padding:10px 15px}.control-btn[_ngcontent-%COMP%]{width:50px;height:50px;font-size:20px}.chat-panel[_ngcontent-%COMP%]{width:100vw;right:-100vw}.video-area.chat-open[_ngcontent-%COMP%]{margin-right:0}.waiting-content[_ngcontent-%COMP%]{padding:20px}.avatar-large[_ngcontent-%COMP%]{width:80px;height:80px;font-size:32px}.room-id-display[_ngcontent-%COMP%]{flex-direction:column;gap:10px}.controls-container[_ngcontent-%COMP%]{position:fixed;bottom:20px;left:50%;transform:translate(-50%)}}"]})}return N})();function dc(N,L){1&N&&(p.j41(0,"span"),p.EFF(1,"Start Meeting"),p.k0s())}function za(N,L){1&N&&(p.j41(0,"span"),p.EFF(1,"Starting..."),p.k0s())}function go(N,L){1&N&&(p.j41(0,"span"),p.EFF(1,"Join"),p.k0s())}function Us(N,L){1&N&&(p.j41(0,"span"),p.EFF(1,"Joining..."),p.k0s())}function Xi(N,L){1&N&&(p.j41(0,"span"),p.EFF(1,"\u{1f4de} Invite"),p.k0s())}function wa(N,L){1&N&&(p.j41(0,"span"),p.EFF(1,"\u23f3 Inviting..."),p.k0s())}function Bi(N,L){if(1&N){const f=p.RV6();p.j41(0,"div",28)(1,"div",29),p.EFF(2),p.k0s(),p.j41(3,"div",30)(4,"p",31),p.EFF(5),p.k0s(),p.j41(6,"p",32),p.EFF(7),p.k0s()(),p.j41(8,"button",33),p.bIt("click",function(){const F=p.eBV(f).$implicit,v=p.XpG(2);return p.Njj(v.inviteUser(F))}),p.DNE(9,Xi,2,0,"span",12)(10,wa,2,0,"span",12),p.k0s()()}if(2&N){const f=L.$implicit,S=p.XpG(2);p.AVh("inviting",S.isInvitingUser(f.uid)),p.R7$(2),p.SpI(" ",S.getInitials(f.displayName||f.phoneNumber)," "),p.R7$(3),p.JRh(f.displayName||"User"),p.R7$(2),p.JRh(S.formatPhoneNumber(f.phoneNumber)),p.R7$(),p.Y8G("disabled",S.loading||S.isInvitingUser(f.uid)),p.R7$(),p.Y8G("ngIf",!S.isInvitingUser(f.uid)),p.R7$(),p.Y8G("ngIf",S.isInvitingUser(f.uid))}}function Ta(N,L){if(1&N&&(p.j41(0,"div",25)(1,"h3"),p.EFF(2),p.k0s(),p.j41(3,"div",26),p.DNE(4,Bi,11,8,"div",27),p.k0s()()),2&N){const f=p.XpG();p.R7$(2),p.SpI("\u{1f465} Online Users (",f.onlineUsers.length,")"),p.R7$(2),p.Y8G("ngForOf",f.onlineUsers)}}function mo(N,L){1&N&&(p.j41(0,"div",25)(1,"h3"),p.EFF(2,"\u{1f465} Online Users"),p.k0s(),p.j41(3,"div",34)(4,"div",35),p.EFF(5,"\u{1f465}"),p.k0s(),p.j41(6,"p"),p.EFF(7,"No other users are online right now"),p.k0s(),p.j41(8,"small"),p.EFF(9,"Other users will appear here when they're available for calls"),p.k0s()()())}function Yi(N,L){if(1&N){const f=p.RV6();p.j41(0,"div",36)(1,"span",37),p.EFF(2,"\u26a0\ufe0f"),p.k0s(),p.EFF(3),p.j41(4,"button",38),p.bIt("click",function(){p.eBV(f);const F=p.XpG();return p.Njj(F.clearError())}),p.EFF(5,"\xd7"),p.k0s()()}if(2&N){const f=p.XpG();p.R7$(3),p.SpI(" ",f.errorMessage," ")}}function qo(N,L){if(1&N){const f=p.RV6();p.j41(0,"div",39)(1,"span",40),p.EFF(2,"\u2705"),p.k0s(),p.EFF(3),p.j41(4,"button",38),p.bIt("click",function(){p.eBV(f);const F=p.XpG();return p.Njj(F.clearSuccess())}),p.EFF(5,"\xd7"),p.k0s()()}if(2&N){const f=p.XpG();p.R7$(3),p.SpI(" ",f.successMessage," ")}}function Es(N,L){if(1&N){const f=p.RV6();p.j41(0,"div",41),p.bIt("click",function(){p.eBV(f);const F=p.XpG();return p.Njj(F.closeInvitationModal())}),p.j41(1,"div",42),p.bIt("click",function(F){return p.eBV(f),p.Njj(F.stopPropagation())}),p.j41(2,"div",43)(3,"div",44)(4,"div",45),p.EFF(5,"\u{1f4de}"),p.k0s(),p.j41(6,"div",46),p.nrm(7,"div",47)(8,"div",48)(9,"div",49),p.k0s()(),p.j41(10,"h2"),p.EFF(11,"Incoming Call"),p.k0s()(),p.j41(12,"div",50)(13,"div",51)(14,"div",52),p.EFF(15),p.k0s(),p.j41(16,"div",53)(17,"h3"),p.EFF(18),p.k0s(),p.j41(19,"p",54),p.EFF(20),p.k0s(),p.j41(21,"p",55),p.EFF(22,"is calling you..."),p.k0s()()()(),p.j41(23,"div",56)(24,"button",57),p.bIt("click",function(){p.eBV(f);const F=p.XpG();return p.Njj(F.declineInvitation())}),p.j41(25,"span",58),p.EFF(26,"\u274c"),p.k0s(),p.j41(27,"span",59),p.EFF(28,"Decline"),p.k0s()(),p.j41(29,"button",60),p.bIt("click",function(){p.eBV(f);const F=p.XpG();return p.Njj(F.acceptInvitation())}),p.j41(30,"span",58),p.EFF(31,"\u2705"),p.k0s(),p.j41(32,"span",59),p.EFF(33,"Accept"),p.k0s()()()()()}if(2&N){const f=p.XpG();p.R7$(15),p.SpI(" ",f.getInitials((null==f.currentInvitation?null:f.currentInvitation.fromUserName)||"U")," "),p.R7$(3),p.JRh((null==f.currentInvitation?null:f.currentInvitation.fromUserName)||"Unknown User"),p.R7$(2),p.JRh(f.formatPhoneNumber((null==f.currentInvitation?null:f.currentInvitation.fromUserPhone)||""))}}let Ga=(()=>{class N{authService;videoCallService;invitationService;router;currentUser=null;joinRoom=new p.bkB;createRoom=new p.bkB;meetingId="";onlineUsers=[];errorMessage="";successMessage="";showInvitationModal=!1;currentInvitation=null;loading=!1;invitingUser=null;subscriptions=[];constructor(f,S,F,v){this.authService=f,this.videoCallService=S,this.invitationService=F,this.router=v}ngOnInit(){if(this.loadOnlineUsers(),this.setupInvitationListener(),this.setUserOnlineStatus(!0),this.currentUser)this.videoCallService.setCurrentUser(this.currentUser);else{const f=this.authService.authState$.subscribe(S=>{S&&(this.currentUser=S,this.videoCallService.setCurrentUser(S))});this.subscriptions.push(f)}}ngOnDestroy(){this.subscriptions.forEach(f=>f.unsubscribe()),this.setUserOnlineStatus(!1)}setUserOnlineStatus(f){this.currentUser&&this.authService.setUserOnlineStatus(f)}loadOnlineUsers(){const f=this.authService.getOnlineUsers().subscribe({next:S=>{this.onlineUsers=S,console.log("\u{1f465} Online users loaded:",S)},error:S=>{console.error("Error loading online users:",S),this.setError("Failed to load online users")}});this.subscriptions.push(f)}setupInvitationListener(){const f=this.invitationService.incomingInvitation$.subscribe(S=>{S&&(console.log("\u{1f4de} Received invitation:",S),this.currentInvitation=S,this.showInvitationModal=!0)});this.subscriptions.push(f)}createMeeting(){this.setSuccess("Creating new meeting...");const f=this.videoCallService.generateRoomId();setTimeout(()=>{this.router.navigate(["/call",f],{queryParams:{host:"true"}})},500)}joinMeeting(){this.meetingId.trim()?this.meetingId.length<6?this.setError("Meeting ID must be at least 6 characters"):(this.setSuccess("Joining meeting..."),setTimeout(()=>{this.router.navigate(["/call",this.meetingId.trim()],{queryParams:{host:"false"}})},500)):this.setError("Please enter a meeting ID")}inviteUser(f){var S=this;return(0,R.A)(function*(){if(!S.loading&&S.invitingUser!==f.uid)try{S.invitingUser=f.uid,S.loading=!0;const F=S.authService.currentUser;if(!F)return void S.setError("You must be logged in to send invitations");S.videoCallService.setCurrentUser(F),S.setSuccess(`Inviting ${f.displayName||"User"} to a meeting...`),console.log("\u{1f4de} Inviting user:",f),yield S.videoCallService.inviteUserToCall(f),S.setSuccess(`Invitation sent to ${f.displayName}! Waiting for response...`)}catch(F){console.error("\u274c Error inviting user:",F),S.setError("Failed to send invitation. Please try again.")}finally{S.loading=!1,S.invitingUser=null}})()}acceptInvitation(){var f=this;return(0,R.A)(function*(){if(f.currentInvitation){try{console.log("\u2705 Accepting invitation:",f.currentInvitation);const S=yield f.invitationService.respondToInvitation(f.currentInvitation.id,!0);S&&f.router.navigate(["/call",S],{queryParams:{host:"false",fromInvitation:"true"}})}catch(S){console.error("\u274c Error accepting invitation:",S),f.setError("Failed to accept invitation. Please try again.")}f.closeInvitationModal()}})()}declineInvitation(){var f=this;return(0,R.A)(function*(){if(f.currentInvitation){try{console.log("\u274c Declining invitation:",f.currentInvitation),yield f.invitationService.respondToInvitation(f.currentInvitation.id,!1),f.setSuccess("Invitation declined")}catch(S){console.error("\u274c Error declining invitation:",S),f.setError("Failed to decline invitation")}f.closeInvitationModal()}})()}closeInvitationModal(){this.showInvitationModal=!1,this.currentInvitation=null,this.invitationService.clearIncomingInvitation()}isInvitingUser(f){return this.invitingUser===f&&this.loading}signOut(){var f=this;return(0,R.A)(function*(){try{yield f.authService.signOut()}catch(S){console.error("Error signing out:",S),f.setError("Failed to sign out")}})()}getUserInitials(){return this.getInitials(this.currentUser?.displayName?this.currentUser.displayName:this.currentUser?.phoneNumber||"U")}getInitials(f){return f.split(" ").map(S=>S[0]).join("").toUpperCase().slice(0,2)||"U"}formatPhoneNumber(f){return f.length>10?f.replace(/(\+\d{1,3})(\d{3})(\d{3})(\d{4})/,"$1 $2-$3-$4"):f}setError(f){this.errorMessage=f,this.successMessage="",setTimeout(()=>this.clearError(),5e3)}setSuccess(f){this.successMessage=f,this.errorMessage="",setTimeout(()=>this.clearSuccess(),3e3)}clearError(){this.errorMessage=""}clearSuccess(){this.successMessage=""}static \u0275fac=function(S){return new(S||N)(p.rXU(fo),p.rXU(ji),p.rXU(ci),p.rXU(Se.Ix))};static \u0275cmp=p.VBU({type:N,selectors:[["app-lobby"]],inputs:{currentUser:"currentUser"},outputs:{joinRoom:"joinRoom",createRoom:"createRoom"},standalone:!0,features:[p.aNF],decls:70,vars:16,consts:[[1,"lobby-container"],[1,"lobby-header"],[1,"user-info"],[1,"user-avatar"],[1,"user-details"],[1,"sign-out-btn",3,"click"],[1,"lobby-content"],[1,"welcome-section"],[1,"action-cards"],[1,"action-card","create-meeting"],[1,"card-icon"],[1,"btn-primary",3,"click","disabled"],[4,"ngIf"],[1,"action-card","join-meeting"],[1,"join-input-group"],["type","text","placeholder","Enter meeting ID",1,"meeting-input",3,"ngModelChange","keyup.enter","ngModel","disabled"],[1,"btn-secondary",3,"click","disabled"],["class","online-users-section",4,"ngIf"],[1,"tips-section"],[1,"tips-grid"],[1,"tip-item"],[1,"tip-icon"],["class","error-message",4,"ngIf"],["class","success-message",4,"ngIf"],["class","invitation-modal-overlay",3,"click",4,"ngIf"],[1,"online-users-section"],[1,"users-grid"],["class","user-card",3,"inviting",4,"ngFor","ngForOf"],[1,"user-card"],[1,"user-avatar-small"],[1,"user-info-small"],[1,"user-name"],[1,"user-phone"],[1,"invite-btn",3,"click","disabled"],[1,"no-users-message"],[1,"no-users-icon"],[1,"error-message"],[1,"error-icon"],[1,"close-btn",3,"click"],[1,"success-message"],[1,"success-icon"],[1,"invitation-modal-overlay",3,"click"],[1,"invitation-modal",3,"click"],[1,"modal-header"],[1,"call-animation"],[1,"call-icon"],[1,"call-rings"],[1,"ring","ring-1"],[1,"ring","ring-2"],[1,"ring","ring-3"],[1,"modal-body"],[1,"caller-info"],[1,"caller-avatar"],[1,"caller-details"],[1,"caller-phone"],[1,"call-status"],[1,"modal-actions"],[1,"decline-btn",3,"click"],[1,"btn-icon"],[1,"btn-text"],[1,"accept-btn",3,"click"]],template:function(S,F){1&S&&(p.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),p.EFF(4),p.k0s(),p.j41(5,"div",4)(6,"h3"),p.EFF(7),p.k0s(),p.j41(8,"p"),p.EFF(9),p.k0s()()(),p.j41(10,"button",5),p.bIt("click",function(){return F.signOut()}),p.EFF(11," \u{1f6aa} Sign Out "),p.k0s()(),p.j41(12,"div",6)(13,"div",7)(14,"h1"),p.EFF(15,"Welcome to TripXL Meet"),p.k0s(),p.j41(16,"p"),p.EFF(17,"Start a video call or join an existing meeting"),p.k0s()(),p.j41(18,"div",8)(19,"div",9)(20,"div",10),p.EFF(21,"\u{1f4f9}"),p.k0s(),p.j41(22,"h3"),p.EFF(23,"Start New Meeting"),p.k0s(),p.j41(24,"p"),p.EFF(25,"Create an instant meeting room"),p.k0s(),p.j41(26,"button",11),p.bIt("click",function(){return F.createMeeting()}),p.DNE(27,dc,2,0,"span",12)(28,za,2,0,"span",12),p.k0s()(),p.j41(29,"div",13)(30,"div",10),p.EFF(31,"\u{1f517}"),p.k0s(),p.j41(32,"h3"),p.EFF(33,"Join Meeting"),p.k0s(),p.j41(34,"p"),p.EFF(35,"Enter meeting ID to join"),p.k0s(),p.j41(36,"div",14)(37,"input",15),p.mxI("ngModelChange",function(k){return p.DH7(F.meetingId,k)||(F.meetingId=k),k}),p.bIt("keyup.enter",function(){return F.joinMeeting()}),p.k0s(),p.j41(38,"button",16),p.bIt("click",function(){return F.joinMeeting()}),p.DNE(39,go,2,0,"span",12)(40,Us,2,0,"span",12),p.k0s()()()(),p.DNE(41,Ta,5,2,"div",17)(42,mo,10,0,"div",17),p.j41(43,"div",18)(44,"h3"),p.EFF(45,"\u{1f4a1} Quick Tips"),p.k0s(),p.j41(46,"div",19)(47,"div",20)(48,"span",21),p.EFF(49,"\u{1f3a5}"),p.k0s(),p.j41(50,"span"),p.EFF(51,"High-quality video calling"),p.k0s()(),p.j41(52,"div",20)(53,"span",21),p.EFF(54,"\u{1f4ac}"),p.k0s(),p.j41(55,"span"),p.EFF(56,"Real-time chat messaging"),p.k0s()(),p.j41(57,"div",20)(58,"span",21),p.EFF(59,"\u{1f512}"),p.k0s(),p.j41(60,"span"),p.EFF(61,"Secure phone verification"),p.k0s()(),p.j41(62,"div",20)(63,"span",21),p.EFF(64,"\u{1f4f1}"),p.k0s(),p.j41(65,"span"),p.EFF(66,"Works on any device"),p.k0s()()()()(),p.DNE(67,Yi,6,1,"div",22)(68,qo,6,1,"div",23)(69,Es,34,3,"div",24),p.k0s()),2&S&&(p.R7$(4),p.SpI(" ",F.getUserInitials()," "),p.R7$(3),p.JRh((null==F.currentUser?null:F.currentUser.displayName)||"User"),p.R7$(2),p.JRh(null==F.currentUser?null:F.currentUser.phoneNumber),p.R7$(17),p.Y8G("disabled",F.loading),p.R7$(),p.Y8G("ngIf",!F.loading),p.R7$(),p.Y8G("ngIf",F.loading),p.R7$(9),p.R50("ngModel",F.meetingId),p.Y8G("disabled",F.loading),p.R7$(),p.Y8G("disabled",!F.meetingId.trim()||F.loading),p.R7$(),p.Y8G("ngIf",!F.loading),p.R7$(),p.Y8G("ngIf",F.loading),p.R7$(),p.Y8G("ngIf",F.onlineUsers.length>0),p.R7$(),p.Y8G("ngIf",0===F.onlineUsers.length),p.R7$(25),p.Y8G("ngIf",F.errorMessage),p.R7$(),p.Y8G("ngIf",F.successMessage),p.R7$(),p.Y8G("ngIf",F.showInvitationModal))},dependencies:[J.MD,J.Sq,J.bT,bo,it,lt,Wi],styles:[".lobby-container[_ngcontent-%COMP%]{height:100vh;background:linear-gradient(135deg,#f5f7fa,#c3cfe2);padding:20px;overflow-y:auto;box-sizing:border-box}.lobby-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;background:#fff;padding:20px 30px;border-radius:15px;box-shadow:0 4px 6px #00000012;margin-bottom:30px}.user-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px}.user-avatar[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:50%;background:linear-gradient(135deg,#667eea,#764ba2);display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700;font-size:18px}.user-details[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 5px;color:#333;font-size:18px}.user-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#666;font-size:14px}.sign-out-btn[_ngcontent-%COMP%]{padding:10px 20px;background:#ff4757;color:#fff;border:none;border-radius:10px;cursor:pointer;font-weight:700;transition:background .3s}.sign-out-btn[_ngcontent-%COMP%]:hover{background:#ff3742}.lobby-content[_ngcontent-%COMP%]{max-width:1000px;margin:0 auto}.welcome-section[_ngcontent-%COMP%]{text-align:center;margin-bottom:40px}.welcome-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:3rem;margin:0 0 10px;background:linear-gradient(135deg,#667eea,#764ba2);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.welcome-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;color:#666;margin:0}.action-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(350px,1fr));gap:30px;margin-bottom:50px}.action-card[_ngcontent-%COMP%]{background:#fff;padding:40px 30px;border-radius:20px;box-shadow:0 10px 30px #0000001a;text-align:center;transition:transform .3s}.action-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}.card-icon[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:20px}.action-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;margin:0 0 10px;color:#333}.action-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;margin:0 0 30px;line-height:1.5}.btn-primary[_ngcontent-%COMP%]{width:100%;padding:15px;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;border-radius:10px;font-size:16px;font-weight:700;cursor:pointer;transition:transform .2s}.btn-primary[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}.join-input-group[_ngcontent-%COMP%]{display:flex;gap:10px}.meeting-input[_ngcontent-%COMP%]{flex:1;padding:15px;border:2px solid #e1e5e9;border-radius:10px;font-size:16px;transition:border-color .3s}.meeting-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea}.btn-secondary[_ngcontent-%COMP%]{padding:15px 25px;background:#28a745;color:#fff;border:none;border-radius:10px;font-weight:700;cursor:pointer;transition:background .3s}.btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background:#218838}.btn-secondary[_ngcontent-%COMP%]:disabled{background:#6c757d;cursor:not-allowed}.online-users-section[_ngcontent-%COMP%]{background:#fff;padding:30px;border-radius:20px;box-shadow:0 10px 30px #0000001a;margin-bottom:30px}.online-users-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 20px;color:#333;font-size:1.3rem}.users-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:15px}.user-card[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;padding:15px;background:#f8f9fa;border-radius:12px;cursor:pointer;transition:all .3s}.user-card[_ngcontent-%COMP%]:hover{background:#e9ecef;transform:translateY(-2px)}.user-avatar-small[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;background:linear-gradient(135deg,#28a745,#20c997);display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700;font-size:14px}.user-info-small[_ngcontent-%COMP%]{flex:1}.user-name[_ngcontent-%COMP%]{margin:0 0 5px;font-weight:700;color:#333}.user-phone[_ngcontent-%COMP%]{margin:0;font-size:12px;color:#666}.invite-btn[_ngcontent-%COMP%]{padding:8px 15px;background:#007bff;color:#fff;border:none;border-radius:8px;font-size:12px;font-weight:700;cursor:pointer;transition:background .3s}.invite-btn[_ngcontent-%COMP%]:hover{background:#0056b3}.tips-section[_ngcontent-%COMP%]{background:#fff;padding:30px;border-radius:20px;box-shadow:0 10px 30px #0000001a}.tips-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 20px;color:#333;font-size:1.3rem}.tips-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px}.tip-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:15px;background:#f8f9fa;border-radius:10px}.tip-icon[_ngcontent-%COMP%]{font-size:24px}.error-message[_ngcontent-%COMP%], .success-message[_ngcontent-%COMP%]{position:fixed;top:20px;right:20px;padding:15px 20px;border-radius:10px;display:flex;align-items:center;gap:10px;z-index:1000;max-width:400px;animation:_ngcontent-%COMP%_slideIn .3s ease-out}.error-message[_ngcontent-%COMP%]{background:#fee;color:#c33;border:1px solid #fcc}.success-message[_ngcontent-%COMP%]{background:#efe;color:#3c3;border:1px solid #cfc}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:18px;cursor:pointer;opacity:.7;transition:opacity .3s}.close-btn[_ngcontent-%COMP%]:hover{opacity:1}@keyframes _ngcontent-%COMP%_slideIn{0%{transform:translate(100%);opacity:0}to{transform:translate(0);opacity:1}}@media (max-width: 768px){.lobby-container[_ngcontent-%COMP%]{padding:15px}.lobby-header[_ngcontent-%COMP%]{flex-direction:column;gap:20px;text-align:center}.action-cards[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:20px}.action-card[_ngcontent-%COMP%]{padding:30px 20px}.welcome-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}.join-input-group[_ngcontent-%COMP%]{flex-direction:column}.users-grid[_ngcontent-%COMP%], .tips-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}.user-card.inviting[_ngcontent-%COMP%]{opacity:.7;pointer-events:none}.user-card.inviting[_ngcontent-%COMP%]   .invite-btn[_ngcontent-%COMP%]{background:#6c757d;cursor:not-allowed}.no-users-message[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;color:#666}.no-users-icon[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:15px;opacity:.5}.no-users-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.1rem;margin:0 0 5px}.no-users-message[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:.9rem;opacity:.7}.invitation-modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#000c;display:flex;justify-content:center;align-items:center;z-index:2000;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);animation:_ngcontent-%COMP%_fadeIn .3s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.invitation-modal[_ngcontent-%COMP%]{background:#fff;border-radius:25px;max-width:450px;width:90%;overflow:hidden;box-shadow:0 25px 50px #0006;animation:_ngcontent-%COMP%_modalSlideUp .4s ease-out;position:relative}@keyframes _ngcontent-%COMP%_modalSlideUp{0%{transform:translateY(100px) scale(.9);opacity:0}to{transform:translateY(0) scale(1);opacity:1}}.modal-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:30px;text-align:center;position:relative;overflow:hidden}.call-animation[_ngcontent-%COMP%]{position:relative;margin-bottom:20px}.call-icon[_ngcontent-%COMP%]{font-size:3rem;position:relative;z-index:2;animation:_ngcontent-%COMP%_bounce 2s infinite}@keyframes _ngcontent-%COMP%_bounce{0%,to{transform:translateY(0)}50%{transform:translateY(-10px)}}.call-rings[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);z-index:1}.ring[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);border:3px solid rgba(255,255,255,.3);border-radius:50%;animation:_ngcontent-%COMP%_ripple 2s infinite}.ring-1[_ngcontent-%COMP%]{width:80px;height:80px;animation-delay:0s}.ring-2[_ngcontent-%COMP%]{width:120px;height:120px;animation-delay:.5s}.ring-3[_ngcontent-%COMP%]{width:160px;height:160px;animation-delay:1s}@keyframes _ngcontent-%COMP%_ripple{0%{transform:translate(-50%,-50%) scale(.5);opacity:1}to{transform:translate(-50%,-50%) scale(1);opacity:0}}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.8rem;font-weight:700}.modal-body[_ngcontent-%COMP%]{padding:30px;background:#fff}.caller-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px}.caller-avatar[_ngcontent-%COMP%]{width:70px;height:70px;border-radius:50%;background:linear-gradient(135deg,#667eea,#764ba2);display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700;font-size:28px;flex-shrink:0;box-shadow:0 4px 15px #667eea66}.caller-details[_ngcontent-%COMP%]{flex:1}.caller-details[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;font-size:1.4rem;color:#333;font-weight:700}.caller-phone[_ngcontent-%COMP%]{margin:0 0 8px;color:#666;font-size:1rem}.call-status[_ngcontent-%COMP%]{margin:0;color:#667eea;font-weight:600;font-size:1.1rem}.modal-actions[_ngcontent-%COMP%]{padding:20px 30px 30px;display:flex;gap:15px;background:#f8f9fa}.accept-btn[_ngcontent-%COMP%], .decline-btn[_ngcontent-%COMP%]{flex:1;padding:15px 20px;border:none;border-radius:15px;cursor:pointer;font-weight:700;font-size:1rem;display:flex;align-items:center;justify-content:center;gap:8px;transition:all .3s ease;position:relative;overflow:hidden}.accept-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#28a745,#20c997);color:#fff;box-shadow:0 4px 15px #28a74566}.accept-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 20px #28a74599}.decline-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#dc3545,#fd7e14);color:#fff;box-shadow:0 4px 15px #dc354566}.decline-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 20px #dc354599}.btn-icon[_ngcontent-%COMP%]{font-size:1.2rem}.btn-text[_ngcontent-%COMP%]{font-size:1rem}.accept-btn[_ngcontent-%COMP%]:active, .decline-btn[_ngcontent-%COMP%]:active{transform:translateY(0);transition:transform .1s}@media (max-width: 768px){.invitation-modal[_ngcontent-%COMP%]{max-width:95%;margin:10px}.modal-header[_ngcontent-%COMP%], .modal-body[_ngcontent-%COMP%]{padding:25px 20px}.caller-info[_ngcontent-%COMP%]{flex-direction:column;text-align:center;gap:15px}.caller-avatar[_ngcontent-%COMP%]{width:60px;height:60px;font-size:24px}.modal-actions[_ngcontent-%COMP%]{padding:15px 20px 25px;flex-direction:column;gap:12px}.accept-btn[_ngcontent-%COMP%], .decline-btn[_ngcontent-%COMP%]{padding:12px 15px}.call-icon[_ngcontent-%COMP%]{font-size:2.5rem}.ring-1[_ngcontent-%COMP%]{width:60px;height:60px}.ring-2[_ngcontent-%COMP%]{width:90px;height:90px}.ring-3[_ngcontent-%COMP%]{width:120px;height:120px}}button[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none!important}.btn-primary[_ngcontent-%COMP%]:disabled, .btn-secondary[_ngcontent-%COMP%]:disabled{background:#6c757d}.invite-btn[_ngcontent-%COMP%]:disabled{background:#6c757d}"]})}return N})();function hu(N,L){1&N&&(p.j41(0,"div",5),p.nrm(1,"div",6),p.j41(2,"p"),p.EFF(3,"Loading Tripxl Meet ...."),p.k0s()())}function dr(N,L){if(1&N){const f=p.RV6();p.j41(0,"app-auth",7),p.bIt("authSuccess",function(){p.eBV(f);const F=p.XpG();return p.Njj(F.onAuthSuccess())}),p.k0s()}}function Cs(N,L){if(1&N){const f=p.RV6();p.j41(0,"app-lobby",11),p.bIt("joinRoom",function(F){p.eBV(f);const v=p.XpG(2);return p.Njj(v.onJoinRoom(F))})("createRoom",function(){p.eBV(f);const F=p.XpG(2);return p.Njj(F.onCreateRoom())}),p.k0s()}if(2&N){const f=p.XpG(2);p.Y8G("currentUser",f.currentUser)}}function Da(N,L){if(1&N){const f=p.RV6();p.j41(0,"app-video-call",12),p.bIt("leaveRoom",function(){p.eBV(f);const F=p.XpG(2);return p.Njj(F.onLeaveRoom())}),p.k0s()}if(2&N){const f=p.XpG(2);p.Y8G("roomId",f.currentRoomId)("currentUser",f.currentUser)}}function ba(N,L){if(1&N&&(p.j41(0,"div",8),p.DNE(1,Cs,1,1,"app-lobby",9)(2,Da,1,2,"app-video-call",10),p.k0s()),2&N){const f=p.XpG();p.R7$(),p.Y8G("ngIf","lobby"===f.currentView),p.R7$(),p.Y8G("ngIf","call"===f.currentView&&f.currentRoomId&&f.currentUser)}}function Wa(N,L){if(1&N&&(p.j41(0,"div",13)(1,"div"),p.EFF(2),p.k0s(),p.j41(3,"div"),p.EFF(4),p.k0s(),p.j41(5,"div"),p.EFF(6),p.k0s(),p.j41(7,"div"),p.EFF(8),p.k0s(),p.j41(9,"div"),p.EFF(10),p.k0s()()),2&N){const f=p.XpG();p.R7$(2),p.SpI("Loading: ",f.isLoading,""),p.R7$(2),p.SpI("Authenticated: ",f.isAuthenticated,""),p.R7$(2),p.SpI("Current User: ",f.currentUser?"Present":"Null",""),p.R7$(2),p.SpI("Current View: ",f.currentView,""),p.R7$(2),p.SpI("Room ID: ",f.currentRoomId||"None","")}}let Ao=(()=>{class N{authService;router;route;videoCallService;isLoading=!0;isAuthenticated=!1;currentUser=null;currentView="lobby";currentRoomId=null;subscriptions=[];constructor(f,S,F,v){this.authService=f,this.router=S,this.route=F,this.videoCallService=v}ngOnInit(){var f=this;return(0,R.A)(function*(){console.log("\u{1f680} App initializing...");try{const k=yield f.authService.getCurrentUser();k?(console.log("\u2705 User found:",k),f.currentUser=k,f.isAuthenticated=!0,f.videoCallService.setCurrentUser(k),yield f.authService.setUserOnlineStatus(!0)):console.log("\u274c No authenticated user found")}catch(k){console.error("\u274c Error checking auth state:",k)}finally{f.isLoading=!1,console.log("\u2705 App initialization complete")}const S=f.authService.authState$.subscribe(k=>{console.log("\u{1f504} Auth state changed:",k),f.currentUser=k,f.isAuthenticated=!!k,k&&f.videoCallService.setCurrentUser(k),k?f.handleCurrentRoute():(f.currentView="lobby",f.currentRoomId=null)}),F=f.videoCallService.navigation$.subscribe(k=>{k&&"navigate"===k.action&&k.roomId?(console.log("\u{1f3a5} Video service requesting navigation to room:",k.roomId),f.router.navigate(["call",k.roomId],{queryParams:{host:k.isHost?"true":"false"}}),f.videoCallService.clearNavigationEvent()):k&&"declined"===k.action&&console.log("\u274c Call invitation was declined")}),v=f.router.events.subscribe(k=>{k instanceof Se.wF&&(console.log("\u{1f504} Route changed to:",k.url),f.handleRouteChange(k.url))});f.subscriptions.push(S,v,F),f.handleCurrentRoute()})()}ngOnDestroy(){this.subscriptions.forEach(f=>f.unsubscribe())}handleCurrentRoute(){this.handleRouteChange(this.router.url)}handleRouteChange(f){if(console.log("\u{1f3af} Handling route:",f),f.startsWith("/call/")){const S=f.split("/call/")[1],F=S?S.split("?")[0]:"";F&&this.isAuthenticated&&this.currentUser?(console.log("\u{1f3a5} Switching to call view with room:",F),this.currentRoomId=F,this.currentView="call"):(console.log("\u274c Cannot enter call - missing requirements"),console.log("  - Room ID:",F),console.log("  - Authenticated:",this.isAuthenticated),console.log("  - User:",!!this.currentUser),this.router.navigate(["/lobby"]))}else console.log("\u{1f3e0} Switching to lobby view"),this.currentView="lobby",this.currentRoomId=null}onAuthSuccess(){console.log("\u2705 Authentication successful");const f=this.authService.currentUser;f?(this.isAuthenticated=!0,this.currentUser=f,console.log("\u2705 Current user set:",f),this.router.navigate(["/lobby"])):console.error("\u274c Auth success but no current user")}onJoinRoom(f){this.currentUser?(console.log("\u{1f6aa} Joining room via navigation:",f),this.router.navigate(["call",f],{queryParams:{host:"false"}})):console.error("\u274c Cannot join room: No current user")}onCreateRoom(){if(!this.currentUser)return void console.error("\u274c Cannot create room: No current user");const f=this.generateRoomId();console.log("\u{1f3e0} Creating room via navigation:",f),this.router.navigate(["call",f],{queryParams:{host:"true"}})}onLeaveRoom(){console.log("\u{1f44b} Leaving room"),this.router.navigate(["/lobby"])}generateRoomId(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}static \u0275fac=function(S){return new(S||N)(p.rXU(fo),p.rXU(Se.Ix),p.rXU(Se.nX),p.rXU(ji))};static \u0275cmp=p.VBU({type:N,selectors:[["app-root"]],standalone:!0,features:[p.aNF],decls:5,vars:4,consts:[[1,"app-container"],["class","loading-screen",4,"ngIf"],[3,"authSuccess",4,"ngIf"],["class","main-app",4,"ngIf"],["class","debug-info","style","position: fixed; bottom: 10px; right: 10px; background: rgba(0,0,0,0.8); color: white; padding: 10px; font-size: 12px; border-radius: 5px;",4,"ngIf"],[1,"loading-screen"],[1,"spinner"],[3,"authSuccess"],[1,"main-app"],[3,"currentUser","joinRoom","createRoom",4,"ngIf"],[3,"roomId","currentUser","leaveRoom",4,"ngIf"],[3,"joinRoom","createRoom","currentUser"],[3,"leaveRoom","roomId","currentUser"],[1,"debug-info",2,"position","fixed","bottom","10px","right","10px","background","rgba(0,0,0,0.8)","color","white","padding","10px","font-size","12px","border-radius","5px"]],template:function(S,F){1&S&&(p.j41(0,"div",0),p.DNE(1,hu,4,0,"div",1)(2,dr,1,0,"app-auth",2)(3,ba,3,2,"div",3)(4,Wa,11,5,"div",4),p.k0s()),2&S&&(p.R7$(),p.Y8G("ngIf",F.isLoading),p.R7$(),p.Y8G("ngIf",!F.isLoading&&!F.isAuthenticated),p.R7$(),p.Y8G("ngIf",!F.isLoading&&F.isAuthenticated&&F.currentUser),p.R7$(),p.Y8G("ngIf",!F.isLoading))},dependencies:[J.MD,J.bT,Mr,Wo,Ga],styles:[".app-container[_ngcontent-%COMP%]{height:100vh;width:100vw;overflow:hidden}.loading-screen[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}.spinner[_ngcontent-%COMP%]{width:50px;height:50px;border:4px solid rgba(255,255,255,.3);border-top:4px solid white;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:20px}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.main-app[_ngcontent-%COMP%]{height:100vh;width:100vw}.debug-info[_ngcontent-%COMP%]{font-family:monospace;z-index:9999}"]})}return N})()},9451:(hn,at,ie)=>{var R=ie(345),J=ie(9328),Se=ie(7440),p=ie(5621),Le=ie(4262);const de_firebaseConfig={apiKey:"AIzaSyDpmBtA9M6EnQ3K8A4poxA2XhCHlp9LtI4",authDomain:"chatapp-ed4ab.firebaseapp.com",projectId:"chatapp-ed4ab",storageBucket:"chatapp-ed4ab.firebasestorage.app",messagingSenderId:"68051279184",appId:"1:68051279184:web:1d09142162d95ff129a055"};var $e=ie(9712);(0,R.B8)(J.AppComponent,{providers:[(0,$e.lh)([{path:"",redirectTo:"/app",pathMatch:"full"},{path:"app",loadComponent:()=>Promise.resolve().then(ie.bind(ie,9328)).then(rt=>rt.AppComponent)},{path:"lobby",loadComponent:()=>Promise.resolve().then(ie.bind(ie,9328)).then(rt=>rt.AppComponent)},{path:"call/:roomId",loadComponent:()=>Promise.resolve().then(ie.bind(ie,9328)).then(rt=>rt.AppComponent)},{path:"**",redirectTo:"/app"}]),(0,Se.MW)(()=>(0,Se.Wp)(de_firebaseConfig)),(0,p._q)(()=>(0,p.xI)()),(0,Le.hV)(()=>(0,Le.aU)())]}).catch(rt=>console.error(rt))},4412:(hn,at,ie)=>{ie.d(at,{t:()=>J});var R=ie(1413);class J extends R.B{constructor(p){super(),this._value=p}get value(){return this.getValue()}_subscribe(p){const Le=super._subscribe(p);return!Le.closed&&p.next(this._value),Le}getValue(){const{hasError:p,thrownError:Le,_value:de}=this;if(p)throw Le;return this._throwIfClosed(),de}next(p){super.next(this._value=p)}}},1985:(hn,at,ie)=>{ie.d(at,{c:()=>It});var R=ie(7707),J=ie(8359),Se=ie(3494),p=ie(1203),Le=ie(1026),de=ie(8071),$e=ie(9786);let It=(()=>{class Ge{constructor(ft){ft&&(this._subscribe=ft)}lift(ft){const Tt=new Ge;return Tt.source=this,Tt.operator=ft,Tt}subscribe(ft,Tt,fn){const nn=function _e(Ge){return Ge&&Ge instanceof R.vU||function he(Ge){return Ge&&(0,de.T)(Ge.next)&&(0,de.T)(Ge.error)&&(0,de.T)(Ge.complete)}(Ge)&&(0,J.Uv)(Ge)}(ft)?ft:new R.Ms(ft,Tt,fn);return(0,$e.Y)(()=>{const{operator:Bt,source:xn}=this;nn.add(Bt?Bt.call(nn,xn):xn?this._subscribe(nn):this._trySubscribe(nn))}),nn}_trySubscribe(ft){try{return this._subscribe(ft)}catch(Tt){ft.error(Tt)}}forEach(ft,Tt){return new(Tt=rt(Tt))((fn,nn)=>{const Bt=new R.Ms({next:xn=>{try{ft(xn)}catch(Xt){nn(Xt),Bt.unsubscribe()}},error:nn,complete:fn});this.subscribe(Bt)})}_subscribe(ft){var Tt;return null===(Tt=this.source)||void 0===Tt?void 0:Tt.subscribe(ft)}[Se.s](){return this}pipe(...ft){return(0,p.m)(ft)(this)}toPromise(ft){return new(ft=rt(ft))((Tt,fn)=>{let nn;this.subscribe(Bt=>nn=Bt,Bt=>fn(Bt),()=>Tt(nn))})}}return Ge.create=_t=>new Ge(_t),Ge})();function rt(Ge){var _t;return null!==(_t=Ge??Le.$.Promise)&&void 0!==_t?_t:Promise}},1413:(hn,at,ie)=>{ie.d(at,{B:()=>$e});var R=ie(1985),J=ie(8359);const p=(0,ie(1853).L)(rt=>function(){rt(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Le=ie(7908),de=ie(9786);let $e=(()=>{class rt extends R.c{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(_e){const Ge=new It(this,this);return Ge.operator=_e,Ge}_throwIfClosed(){if(this.closed)throw new p}next(_e){(0,de.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Ge of this.currentObservers)Ge.next(_e)}})}error(_e){(0,de.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=_e;const{observers:Ge}=this;for(;Ge.length;)Ge.shift().error(_e)}})}complete(){(0,de.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:_e}=this;for(;_e.length;)_e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var _e;return(null===(_e=this.observers)||void 0===_e?void 0:_e.length)>0}_trySubscribe(_e){return this._throwIfClosed(),super._trySubscribe(_e)}_subscribe(_e){return this._throwIfClosed(),this._checkFinalizedStatuses(_e),this._innerSubscribe(_e)}_innerSubscribe(_e){const{hasError:Ge,isStopped:_t,observers:ft}=this;return Ge||_t?J.Kn:(this.currentObservers=null,ft.push(_e),new J.yU(()=>{this.currentObservers=null,(0,Le.o)(ft,_e)}))}_checkFinalizedStatuses(_e){const{hasError:Ge,thrownError:_t,isStopped:ft}=this;Ge?_e.error(_t):ft&&_e.complete()}asObservable(){const _e=new R.c;return _e.source=this,_e}}return rt.create=(he,_e)=>new It(he,_e),rt})();class It extends $e{constructor(he,_e){super(),this.destination=he,this.source=_e}next(he){var _e,Ge;null===(Ge=null===(_e=this.destination)||void 0===_e?void 0:_e.next)||void 0===Ge||Ge.call(_e,he)}error(he){var _e,Ge;null===(Ge=null===(_e=this.destination)||void 0===_e?void 0:_e.error)||void 0===Ge||Ge.call(_e,he)}complete(){var he,_e;null===(_e=null===(he=this.destination)||void 0===he?void 0:he.complete)||void 0===_e||_e.call(he)}_subscribe(he){var _e,Ge;return null!==(Ge=null===(_e=this.source)||void 0===_e?void 0:_e.subscribe(he))&&void 0!==Ge?Ge:J.Kn}}},7707:(hn,at,ie)=>{ie.d(at,{Ms:()=>fn,vU:()=>Ge});var R=ie(8071),J=ie(8359),Se=ie(1026),p=ie(5334),Le=ie(5343);const de=rt("C",void 0,void 0);function rt(ct,qe,dt){return{kind:ct,value:qe,error:dt}}var he=ie(9270),_e=ie(9786);class Ge extends J.yU{constructor(qe){super(),this.isStopped=!1,qe?(this.destination=qe,(0,J.Uv)(qe)&&qe.add(this)):this.destination=Xt}static create(qe,dt,it){return new fn(qe,dt,it)}next(qe){this.isStopped?xn(function It(ct){return rt("N",ct,void 0)}(qe),this):this._next(qe)}error(qe){this.isStopped?xn(function $e(ct){return rt("E",void 0,ct)}(qe),this):(this.isStopped=!0,this._error(qe))}complete(){this.isStopped?xn(de,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(qe){this.destination.next(qe)}_error(qe){try{this.destination.error(qe)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const _t=Function.prototype.bind;function ft(ct,qe){return _t.call(ct,qe)}class Tt{constructor(qe){this.partialObserver=qe}next(qe){const{partialObserver:dt}=this;if(dt.next)try{dt.next(qe)}catch(it){nn(it)}}error(qe){const{partialObserver:dt}=this;if(dt.error)try{dt.error(qe)}catch(it){nn(it)}else nn(qe)}complete(){const{partialObserver:qe}=this;if(qe.complete)try{qe.complete()}catch(dt){nn(dt)}}}class fn extends Ge{constructor(qe,dt,it){let Vt;if(super(),(0,R.T)(qe)||!qe)Vt={next:qe??void 0,error:dt??void 0,complete:it??void 0};else{let Qt;this&&Se.$.useDeprecatedNextContext?(Qt=Object.create(qe),Qt.unsubscribe=()=>this.unsubscribe(),Vt={next:qe.next&&ft(qe.next,Qt),error:qe.error&&ft(qe.error,Qt),complete:qe.complete&&ft(qe.complete,Qt)}):Vt=qe}this.destination=new Tt(Vt)}}function nn(ct){Se.$.useDeprecatedSynchronousErrorHandling?(0,_e.l)(ct):(0,p.m)(ct)}function xn(ct,qe){const{onStoppedNotification:dt}=Se.$;dt&&he.f.setTimeout(()=>dt(ct,qe))}const Xt={closed:!0,next:Le.l,error:function Bt(ct){throw ct},complete:Le.l}},8359:(hn,at,ie)=>{ie.d(at,{Kn:()=>de,yU:()=>Le,Uv:()=>$e});var R=ie(8071);const Se=(0,ie(1853).L)(rt=>function(_e){rt(this),this.message=_e?`${_e.length} errors occurred during unsubscription:\n${_e.map((Ge,_t)=>`${_t+1}) ${Ge.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=_e});var p=ie(7908);class Le{constructor(he){this.initialTeardown=he,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let he;if(!this.closed){this.closed=!0;const{_parentage:_e}=this;if(_e)if(this._parentage=null,Array.isArray(_e))for(const ft of _e)ft.remove(this);else _e.remove(this);const{initialTeardown:Ge}=this;if((0,R.T)(Ge))try{Ge()}catch(ft){he=ft instanceof Se?ft.errors:[ft]}const{_finalizers:_t}=this;if(_t){this._finalizers=null;for(const ft of _t)try{It(ft)}catch(Tt){he=he??[],Tt instanceof Se?he=[...he,...Tt.errors]:he.push(Tt)}}if(he)throw new Se(he)}}add(he){var _e;if(he&&he!==this)if(this.closed)It(he);else{if(he instanceof Le){if(he.closed||he._hasParent(this))return;he._addParent(this)}(this._finalizers=null!==(_e=this._finalizers)&&void 0!==_e?_e:[]).push(he)}}_hasParent(he){const{_parentage:_e}=this;return _e===he||Array.isArray(_e)&&_e.includes(he)}_addParent(he){const{_parentage:_e}=this;this._parentage=Array.isArray(_e)?(_e.push(he),_e):_e?[_e,he]:he}_removeParent(he){const{_parentage:_e}=this;_e===he?this._parentage=null:Array.isArray(_e)&&(0,p.o)(_e,he)}remove(he){const{_finalizers:_e}=this;_e&&(0,p.o)(_e,he),he instanceof Le&&he._removeParent(this)}}Le.EMPTY=(()=>{const rt=new Le;return rt.closed=!0,rt})();const de=Le.EMPTY;function $e(rt){return rt instanceof Le||rt&&"closed"in rt&&(0,R.T)(rt.remove)&&(0,R.T)(rt.add)&&(0,R.T)(rt.unsubscribe)}function It(rt){(0,R.T)(rt)?rt():rt.unsubscribe()}},1026:(hn,at,ie)=>{ie.d(at,{$:()=>R});const R={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},8455:(hn,at,ie)=>{ie.d(at,{H:()=>qe});var R=ie(8750),J=ie(941),Se=ie(6745),de=ie(1985),It=ie(4761),rt=ie(8071),he=ie(5225);function Ge(dt,it){if(!dt)throw new Error("Iterable cannot be null");return new de.c(Vt=>{(0,he.N)(Vt,it,()=>{const Qt=dt[Symbol.asyncIterator]();(0,he.N)(Vt,it,()=>{Qt.next().then(De=>{De.done?Vt.complete():Vt.next(De.value)})},0,!0)})})}var _t=ie(5055),ft=ie(9858),Tt=ie(7441),fn=ie(5397),nn=ie(7953),Bt=ie(591),xn=ie(5196);function qe(dt,it){return it?function ct(dt,it){if(null!=dt){if((0,_t.l)(dt))return function p(dt,it){return(0,R.Tg)(dt).pipe((0,Se._)(it),(0,J.Q)(it))}(dt,it);if((0,Tt.X)(dt))return function $e(dt,it){return new de.c(Vt=>{let Qt=0;return it.schedule(function(){Qt===dt.length?Vt.complete():(Vt.next(dt[Qt++]),Vt.closed||this.schedule())})})}(dt,it);if((0,ft.y)(dt))return function Le(dt,it){return(0,R.Tg)(dt).pipe((0,Se._)(it),(0,J.Q)(it))}(dt,it);if((0,nn.T)(dt))return Ge(dt,it);if((0,fn.x)(dt))return function _e(dt,it){return new de.c(Vt=>{let Qt;return(0,he.N)(Vt,it,()=>{Qt=dt[It.l](),(0,he.N)(Vt,it,()=>{let De,rn;try{({value:De,done:rn}=Qt.next())}catch(on){return void Vt.error(on)}rn?Vt.complete():Vt.next(De)},0,!0)}),()=>(0,rt.T)(Qt?.return)&&Qt.return()})}(dt,it);if((0,xn.U)(dt))return function Xt(dt,it){return Ge((0,xn.C)(dt),it)}(dt,it)}throw(0,Bt.L)(dt)}(dt,it):(0,R.Tg)(dt)}},8750:(hn,at,ie)=>{ie.d(at,{Tg:()=>_t});var R=ie(1635),J=ie(7441),Se=ie(9858),p=ie(1985),Le=ie(5055),de=ie(7953),$e=ie(591),It=ie(5397),rt=ie(5196),he=ie(8071),_e=ie(5334),Ge=ie(3494);function _t(ct){if(ct instanceof p.c)return ct;if(null!=ct){if((0,Le.l)(ct))return function ft(ct){return new p.c(qe=>{const dt=ct[Ge.s]();if((0,he.T)(dt.subscribe))return dt.subscribe(qe);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ct);if((0,J.X)(ct))return function Tt(ct){return new p.c(qe=>{for(let dt=0;dt<ct.length&&!qe.closed;dt++)qe.next(ct[dt]);qe.complete()})}(ct);if((0,Se.y)(ct))return function fn(ct){return new p.c(qe=>{ct.then(dt=>{qe.closed||(qe.next(dt),qe.complete())},dt=>qe.error(dt)).then(null,_e.m)})}(ct);if((0,de.T)(ct))return Bt(ct);if((0,It.x)(ct))return function nn(ct){return new p.c(qe=>{for(const dt of ct)if(qe.next(dt),qe.closed)return;qe.complete()})}(ct);if((0,rt.U)(ct))return function xn(ct){return Bt((0,rt.C)(ct))}(ct)}throw(0,$e.L)(ct)}function Bt(ct){return new p.c(qe=>{(function Xt(ct,qe){var dt,it,Vt,Qt;return(0,R.sH)(this,void 0,void 0,function*(){try{for(dt=(0,R.xN)(ct);!(it=yield dt.next()).done;)if(qe.next(it.value),qe.closed)return}catch(De){Vt={error:De}}finally{try{it&&!it.done&&(Qt=dt.return)&&(yield Qt.call(dt))}finally{if(Vt)throw Vt.error}}qe.complete()})})(ct,qe).catch(dt=>qe.error(dt))})}},4360:(hn,at,ie)=>{ie.d(at,{_:()=>J});var R=ie(7707);function J(p,Le,de,$e,It){return new Se(p,Le,de,$e,It)}class Se extends R.vU{constructor(Le,de,$e,It,rt,he){super(Le),this.onFinalize=rt,this.shouldUnsubscribe=he,this._next=de?function(_e){try{de(_e)}catch(Ge){Le.error(Ge)}}:super._next,this._error=It?function(_e){try{It(_e)}catch(Ge){Le.error(Ge)}finally{this.unsubscribe()}}:super._error,this._complete=$e?function(){try{$e()}catch(_e){Le.error(_e)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var Le;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:de}=this;super.unsubscribe(),!de&&(null===(Le=this.onFinalize)||void 0===Le||Le.call(this))}}}},6354:(hn,at,ie)=>{ie.d(at,{T:()=>Se});var R=ie(9974),J=ie(4360);function Se(p,Le){return(0,R.N)((de,$e)=>{let It=0;de.subscribe((0,J._)($e,rt=>{$e.next(p.call(Le,rt,It++))}))})}},941:(hn,at,ie)=>{ie.d(at,{Q:()=>p});var R=ie(5225),J=ie(9974),Se=ie(4360);function p(Le,de=0){return(0,J.N)(($e,It)=>{$e.subscribe((0,Se._)(It,rt=>(0,R.N)(It,Le,()=>It.next(rt),de),()=>(0,R.N)(It,Le,()=>It.complete(),de),rt=>(0,R.N)(It,Le,()=>It.error(rt),de)))})}},6745:(hn,at,ie)=>{ie.d(at,{_:()=>J});var R=ie(9974);function J(Se,p=0){return(0,R.N)((Le,de)=>{de.add(Se.schedule(()=>Le.subscribe(de),p))})}},8141:(hn,at,ie)=>{ie.d(at,{M:()=>Le});var R=ie(8071),J=ie(9974),Se=ie(4360),p=ie(3669);function Le(de,$e,It){const rt=(0,R.T)(de)||$e||It?{next:de,error:$e,complete:It}:de;return rt?(0,J.N)((he,_e)=>{var Ge;null===(Ge=rt.subscribe)||void 0===Ge||Ge.call(rt);let _t=!0;he.subscribe((0,Se._)(_e,ft=>{var Tt;null===(Tt=rt.next)||void 0===Tt||Tt.call(rt,ft),_e.next(ft)},()=>{var ft;_t=!1,null===(ft=rt.complete)||void 0===ft||ft.call(rt),_e.complete()},ft=>{var Tt;_t=!1,null===(Tt=rt.error)||void 0===Tt||Tt.call(rt,ft),_e.error(ft)},()=>{var ft,Tt;_t&&(null===(ft=rt.unsubscribe)||void 0===ft||ft.call(rt)),null===(Tt=rt.finalize)||void 0===Tt||Tt.call(rt)}))}):p.D}},9270:(hn,at,ie)=>{ie.d(at,{f:()=>R});const R={setTimeout(J,Se,...p){const{delegate:Le}=R;return Le?.setTimeout?Le.setTimeout(J,Se,...p):setTimeout(J,Se,...p)},clearTimeout(J){const{delegate:Se}=R;return(Se?.clearTimeout||clearTimeout)(J)},delegate:void 0}},4761:(hn,at,ie)=>{ie.d(at,{l:()=>J});const J=function R(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},3494:(hn,at,ie)=>{ie.d(at,{s:()=>R});const R="function"==typeof Symbol&&Symbol.observable||"@@observable"},3794:(hn,at,ie)=>{ie.d(at,{ms:()=>p,lI:()=>Le});var R=ie(8071);function Se($e){return $e[$e.length-1]}function p($e){return(0,R.T)(Se($e))?$e.pop():void 0}function Le($e){return function J($e){return $e&&(0,R.T)($e.schedule)}(Se($e))?$e.pop():void 0}},3073:(hn,at,ie)=>{ie.d(at,{D:()=>Le});const{isArray:R}=Array,{getPrototypeOf:J,prototype:Se,keys:p}=Object;function Le($e){if(1===$e.length){const It=$e[0];if(R(It))return{args:It,keys:null};if(function de($e){return $e&&"object"==typeof $e&&J($e)===Se}(It)){const rt=p(It);return{args:rt.map(he=>It[he]),keys:rt}}}return{args:$e,keys:null}}},7908:(hn,at,ie)=>{function R(J,Se){if(J){const p=J.indexOf(Se);0<=p&&J.splice(p,1)}}ie.d(at,{o:()=>R})},1853:(hn,at,ie)=>{function R(J){const p=J(Le=>{Error.call(Le),Le.stack=(new Error).stack});return p.prototype=Object.create(Error.prototype),p.prototype.constructor=p,p}ie.d(at,{L:()=>R})},8496:(hn,at,ie)=>{function R(J,Se){return J.reduce((p,Le,de)=>(p[Le]=Se[de],p),{})}ie.d(at,{e:()=>R})},9786:(hn,at,ie)=>{ie.d(at,{Y:()=>Se,l:()=>p});var R=ie(1026);let J=null;function Se(Le){if(R.$.useDeprecatedSynchronousErrorHandling){const de=!J;if(de&&(J={errorThrown:!1,error:null}),Le(),de){const{errorThrown:$e,error:It}=J;if(J=null,$e)throw It}}else Le()}function p(Le){R.$.useDeprecatedSynchronousErrorHandling&&J&&(J.errorThrown=!0,J.error=Le)}},5225:(hn,at,ie)=>{function R(J,Se,p,Le=0,de=!1){const $e=Se.schedule(function(){p(),de?J.add(this.schedule(null,Le)):this.unsubscribe()},Le);if(J.add($e),!de)return $e}ie.d(at,{N:()=>R})},3669:(hn,at,ie)=>{function R(J){return J}ie.d(at,{D:()=>R})},7441:(hn,at,ie)=>{ie.d(at,{X:()=>R});const R=J=>J&&"number"==typeof J.length&&"function"!=typeof J},7953:(hn,at,ie)=>{ie.d(at,{T:()=>J});var R=ie(8071);function J(Se){return Symbol.asyncIterator&&(0,R.T)(Se?.[Symbol.asyncIterator])}},8071:(hn,at,ie)=>{function R(J){return"function"==typeof J}ie.d(at,{T:()=>R})},5055:(hn,at,ie)=>{ie.d(at,{l:()=>Se});var R=ie(3494),J=ie(8071);function Se(p){return(0,J.T)(p[R.s])}},5397:(hn,at,ie)=>{ie.d(at,{x:()=>Se});var R=ie(4761),J=ie(8071);function Se(p){return(0,J.T)(p?.[R.l])}},9858:(hn,at,ie)=>{ie.d(at,{y:()=>J});var R=ie(8071);function J(Se){return(0,R.T)(Se?.then)}},5196:(hn,at,ie)=>{ie.d(at,{C:()=>Se,U:()=>p});var R=ie(1635),J=ie(8071);function Se(Le){return(0,R.AQ)(this,arguments,function*(){const $e=Le.getReader();try{for(;;){const{value:It,done:rt}=yield(0,R.N3)($e.read());if(rt)return yield(0,R.N3)(void 0);yield yield(0,R.N3)(It)}}finally{$e.releaseLock()}})}function p(Le){return(0,J.T)(Le?.getReader)}},9974:(hn,at,ie)=>{ie.d(at,{N:()=>Se,S:()=>J});var R=ie(8071);function J(p){return(0,R.T)(p?.lift)}function Se(p){return Le=>{if(J(Le))return Le.lift(function(de){try{return p(de,this)}catch($e){this.error($e)}});throw new TypeError("Unable to lift unknown Observable type")}}},6450:(hn,at,ie)=>{ie.d(at,{I:()=>p});var R=ie(6354);const{isArray:J}=Array;function p(Le){return(0,R.T)(de=>function Se(Le,de){return J(de)?Le(...de):Le(de)}(Le,de))}},5343:(hn,at,ie)=>{function R(){}ie.d(at,{l:()=>R})},1203:(hn,at,ie)=>{ie.d(at,{F:()=>J,m:()=>Se});var R=ie(3669);function J(...p){return Se(p)}function Se(p){return 0===p.length?R.D:1===p.length?p[0]:function(de){return p.reduce(($e,It)=>It($e),de)}}},5334:(hn,at,ie)=>{ie.d(at,{m:()=>Se});var R=ie(1026),J=ie(9270);function Se(p){J.f.setTimeout(()=>{const{onUnhandledError:Le}=R.$;if(!Le)throw p;Le(p)})}},591:(hn,at,ie)=>{function R(J){return new TypeError(`You provided ${null!==J&&"object"==typeof J?"an invalid object":`'${J}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}ie.d(at,{L:()=>R})},177:(hn,at,ie)=>{ie.d(at,{AJ:()=>Bo,MD:()=>jo,N0:()=>Zs,QT:()=>Se,Sq:()=>Gi,VF:()=>Le,Vy:()=>Rr,ZD:()=>p,_b:()=>Jt,aZ:()=>Bt,bT:()=>xs,hb:()=>ft,qQ:()=>$e});var R=ie(4438);let J=null;function Se(){return J}function p(v){J??=v}class Le{}const $e=new R.nKC("");let It=(()=>{class v{historyGo(M){throw new Error("")}static{this.\u0275fac=function(j){return new(j||v)}}static{this.\u0275prov=R.jDH({token:v,factory:()=>(0,R.WQX)(he),providedIn:"platform"})}}return v})(),he=(()=>{class v extends It{constructor(){super(),this._doc=(0,R.WQX)($e),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Se().getBaseHref(this._doc)}onPopState(M){const j=Se().getGlobalEventTarget(this._doc,"window");return j.addEventListener("popstate",M,!1),()=>j.removeEventListener("popstate",M)}onHashChange(M){const j=Se().getGlobalEventTarget(this._doc,"window");return j.addEventListener("hashchange",M,!1),()=>j.removeEventListener("hashchange",M)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(M){this._location.pathname=M}pushState(M,j,ee){this._history.pushState(M,j,ee)}replaceState(M,j,ee){this._history.replaceState(M,j,ee)}forward(){this._history.forward()}back(){this._history.back()}historyGo(M=0){this._history.go(M)}getState(){return this._history.state}static{this.\u0275fac=function(j){return new(j||v)}}static{this.\u0275prov=R.jDH({token:v,factory:()=>new v,providedIn:"platform"})}}return v})();function _e(v,k){if(0==v.length)return k;if(0==k.length)return v;let M=0;return v.endsWith("/")&&M++,k.startsWith("/")&&M++,2==M?v+k.substring(1):1==M?v+k:v+"/"+k}function Ge(v){const k=v.match(/#|\?|$/),M=k&&k.index||v.length;return v.slice(0,M-("/"===v[M-1]?1:0))+v.slice(M)}function _t(v){return v&&"?"!==v[0]?"?"+v:v}let ft=(()=>{class v{historyGo(M){throw new Error("")}static{this.\u0275fac=function(j){return new(j||v)}}static{this.\u0275prov=R.jDH({token:v,factory:()=>(0,R.WQX)(fn),providedIn:"root"})}}return v})();const Tt=new R.nKC("");let fn=(()=>{class v extends ft{constructor(M,j){super(),this._platformLocation=M,this._removeListenerFns=[],this._baseHref=j??this._platformLocation.getBaseHrefFromDOM()??(0,R.WQX)($e).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(M){this._removeListenerFns.push(this._platformLocation.onPopState(M),this._platformLocation.onHashChange(M))}getBaseHref(){return this._baseHref}prepareExternalUrl(M){return _e(this._baseHref,M)}path(M=!1){const j=this._platformLocation.pathname+_t(this._platformLocation.search),ee=this._platformLocation.hash;return ee&&M?`${j}${ee}`:j}pushState(M,j,ee,Re){const Ke=this.prepareExternalUrl(ee+_t(Re));this._platformLocation.pushState(M,j,Ke)}replaceState(M,j,ee,Re){const Ke=this.prepareExternalUrl(ee+_t(Re));this._platformLocation.replaceState(M,j,Ke)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(M=0){this._platformLocation.historyGo?.(M)}static{this.\u0275fac=function(j){return new(j||v)(R.KVO(It),R.KVO(Tt,8))}}static{this.\u0275prov=R.jDH({token:v,factory:v.\u0275fac,providedIn:"root"})}}return v})(),Bt=(()=>{class v{constructor(M){this._subject=new R.bkB,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=M;const j=this._locationStrategy.getBaseHref();this._basePath=function qe(v){if(new RegExp("^(https?:)?//").test(v)){const[,M]=v.split(/\/\/[^\/]+/);return M}return v}(Ge(ct(j))),this._locationStrategy.onPopState(ee=>{this._subject.emit({url:this.path(!0),pop:!0,state:ee.state,type:ee.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(M=!1){return this.normalize(this._locationStrategy.path(M))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(M,j=""){return this.path()==this.normalize(M+_t(j))}normalize(M){return v.stripTrailingSlash(function Xt(v,k){if(!v||!k.startsWith(v))return k;const M=k.substring(v.length);return""===M||["/",";","?","#"].includes(M[0])?M:k}(this._basePath,ct(M)))}prepareExternalUrl(M){return M&&"/"!==M[0]&&(M="/"+M),this._locationStrategy.prepareExternalUrl(M)}go(M,j="",ee=null){this._locationStrategy.pushState(ee,"",M,j),this._notifyUrlChangeListeners(this.prepareExternalUrl(M+_t(j)),ee)}replaceState(M,j="",ee=null){this._locationStrategy.replaceState(ee,"",M,j),this._notifyUrlChangeListeners(this.prepareExternalUrl(M+_t(j)),ee)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(M=0){this._locationStrategy.historyGo?.(M)}onUrlChange(M){return this._urlChangeListeners.push(M),this._urlChangeSubscription??=this.subscribe(j=>{this._notifyUrlChangeListeners(j.url,j.state)}),()=>{const j=this._urlChangeListeners.indexOf(M);this._urlChangeListeners.splice(j,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(M="",j){this._urlChangeListeners.forEach(ee=>ee(M,j))}subscribe(M,j,ee){return this._subject.subscribe({next:M,error:j,complete:ee})}static{this.normalizeQueryParams=_t}static{this.joinWithSlash=_e}static{this.stripTrailingSlash=Ge}static{this.\u0275fac=function(j){return new(j||v)(R.KVO(ft))}}static{this.\u0275prov=R.jDH({token:v,factory:()=>function xn(){return new Bt((0,R.KVO)(ft))}(),providedIn:"root"})}}return v})();function ct(v){return v.replace(/\/index.html$/,"")}function Jt(v,k){k=encodeURIComponent(k);for(const M of v.split(";")){const j=M.indexOf("="),[ee,Re]=-1==j?[M,""]:[M.slice(0,j),M.slice(j+1)];if(ee.trim()===k)return decodeURIComponent(Re)}return null}class Zr{constructor(k,M,j,ee){this.$implicit=k,this.ngForOf=M,this.index=j,this.count=ee}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Gi=(()=>{class v{set ngForOf(M){this._ngForOf=M,this._ngForOfDirty=!0}set ngForTrackBy(M){this._trackByFn=M}get ngForTrackBy(){return this._trackByFn}constructor(M,j,ee){this._viewContainer=M,this._template=j,this._differs=ee,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(M){M&&(this._template=M)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const M=this._ngForOf;!this._differ&&M&&(this._differ=this._differs.find(M).create(this.ngForTrackBy))}if(this._differ){const M=this._differ.diff(this._ngForOf);M&&this._applyChanges(M)}}_applyChanges(M){const j=this._viewContainer;M.forEachOperation((ee,Re,Ke)=>{if(null==ee.previousIndex)j.createEmbeddedView(this._template,new Zr(ee.item,this._ngForOf,-1,-1),null===Ke?void 0:Ke);else if(null==Ke)j.remove(null===Re?void 0:Re);else if(null!==Re){const xt=j.get(Re);j.move(xt,Ke),ps(xt,ee)}});for(let ee=0,Re=j.length;ee<Re;ee++){const xt=j.get(ee).context;xt.index=ee,xt.count=Re,xt.ngForOf=this._ngForOf}M.forEachIdentityChange(ee=>{ps(j.get(ee.currentIndex),ee)})}static ngTemplateContextGuard(M,j){return!0}static{this.\u0275fac=function(j){return new(j||v)(R.rXU(R.c1b),R.rXU(R.C4Q),R.rXU(R._q3))}}static{this.\u0275dir=R.FsC({type:v,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return v})();function ps(v,k){v.context.$implicit=k.item}let xs=(()=>{class v{constructor(M,j){this._viewContainer=M,this._context=new Ns,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=j}set ngIf(M){this._context.$implicit=this._context.ngIf=M,this._updateView()}set ngIfThen(M){ga("ngIfThen",M),this._thenTemplateRef=M,this._thenViewRef=null,this._updateView()}set ngIfElse(M){ga("ngIfElse",M),this._elseTemplateRef=M,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(M,j){return!0}static{this.\u0275fac=function(j){return new(j||v)(R.rXU(R.c1b),R.rXU(R.C4Q))}}static{this.\u0275dir=R.FsC({type:v,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return v})();class Ns{constructor(){this.$implicit=null,this.ngIf=null}}function ga(v,k){if(k&&!k.createEmbeddedView)throw new Error(`${v} must be a TemplateRef, but received '${(0,R.Tbb)(k)}'.`)}let jo=(()=>{class v{static{this.\u0275fac=function(j){return new(j||v)}}static{this.\u0275mod=R.$C({type:v})}static{this.\u0275inj=R.G2t({})}}return v})();const Bo="browser",$o="server";function Rr(v){return v===$o}class Zs{}},4438:(hn,at,ie)=>{function R(e,t){return Object.is(e,t)}ie.d(at,{iLQ:()=>Tv,sZ2:()=>gf,o8S:()=>du,BIS:()=>kg,gRc:()=>JD,Ql9:()=>bP,Ocv:()=>NP,Z63:()=>Ki,aKT:()=>Pu,uvJ:()=>Yi,zcH:()=>tc,bkB:()=>ua,$GK:()=>An,nKC:()=>Ot,zZn:()=>Ko,_q3:()=>N0,MKu:()=>O0,xe9:()=>A0,Co$:()=>qC,Vns:()=>Rh,SKi:()=>Xr,Xx1:()=>uo,Agw:()=>El,PLl:()=>D_,sFG:()=>lp,_9s:()=>$r,czy:()=>Xg,C4Q:()=>Kt,NYb:()=>yP,giA:()=>VD,xvI:()=>WM,RxE:()=>RD,c1b:()=>ti,gXe:()=>Qi,L39:()=>xx,EWP:()=>Ox,Ol2:()=>DE,w6W:()=>rA,Rfq:()=>Z,WQX:()=>jt,QuC:()=>Mr,EmA:()=>Ai,N4e:()=>N,vPA:()=>H,O8t:()=>kx,H3F:()=>MD,H8p:()=>Xi,KH2:()=>jp,TgB:()=>bc,wOt:()=>ut,WHO:()=>kD,e01:()=>FD,H5H:()=>e0,mq5:()=>Jw,JZv:()=>Mn,TL3:()=>hx,LfX:()=>je,plB:()=>Nc,jNT:()=>w0,zjR:()=>LD,TL$:()=>pf,Tbb:()=>ln,Vt3:()=>EE,GFd:()=>WC,OA$:()=>I,Jv_:()=>oD,aNF:()=>sD,R7$:()=>GI,BMQ:()=>UE,HbH:()=>Vw,AVh:()=>WE,wni:()=>OT,VBU:()=>nt,FsC:()=>Is,jDH:()=>Gn,G2t:()=>Ps,$C:()=>yi,EJ8:()=>ta,rXU:()=>Xd,nrm:()=>YE,k0s:()=>pv,j41:()=>fv,RV6:()=>Xw,xGo:()=>Kh,KVO:()=>Br,kS0:()=>Qh,bIt:()=>r0,lsd:()=>VT,XpG:()=>TT,Y8G:()=>HE,mGM:()=>FT,Njj:()=>Ju,eBV:()=>Ma,n$t:()=>vI,xc7:()=>GE,DNE:()=>AE,EFF:()=>qT,JRh:()=>c0,SpI:()=>vv,Lme:()=>u0,E5c:()=>l0,DH7:()=>tD,mxI:()=>h0,R50:()=>d0,GBs:()=>kT});let J=null,Se=!1,p=1;const Le=Symbol("SIGNAL");function de(e){const t=J;return J=e,t}const he={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function _e(e){if(Se)throw new Error("");if(null===J)return;J.consumerOnSignalRead(e);const t=J.nextProducerIndex++;it(J),t<J.producerNode.length&&J.producerNode[t]!==e&&dt(J)&&qe(J.producerNode[t],J.producerIndexOfThis[t]),J.producerNode[t]!==e&&(J.producerNode[t]=e,J.producerIndexOfThis[t]=dt(J)?ct(e,J,t):0),J.producerLastReadVersion[t]=e.version}function _t(e){if((!dt(e)||e.dirty)&&(e.dirty||e.lastCleanEpoch!==p)){if(!e.producerMustRecompute(e)&&!xn(e))return e.dirty=!1,void(e.lastCleanEpoch=p);e.producerRecomputeValue(e),e.dirty=!1,e.lastCleanEpoch=p}}function ft(e){if(void 0===e.liveConsumerNode)return;const t=Se;Se=!0;try{for(const r of e.liveConsumerNode)r.dirty||fn(r)}finally{Se=t}}function Tt(){return!1!==J?.consumerAllowSignalWrites}function fn(e){e.dirty=!0,ft(e),e.consumerMarkedDirty?.(e)}function nn(e){return e&&(e.nextProducerIndex=0),de(e)}function Bt(e,t){if(de(t),e&&void 0!==e.producerNode&&void 0!==e.producerIndexOfThis&&void 0!==e.producerLastReadVersion){if(dt(e))for(let r=e.nextProducerIndex;r<e.producerNode.length;r++)qe(e.producerNode[r],e.producerIndexOfThis[r]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}function xn(e){it(e);for(let t=0;t<e.producerNode.length;t++){const r=e.producerNode[t],o=e.producerLastReadVersion[t];if(o!==r.version||(_t(r),o!==r.version))return!0}return!1}function Xt(e){if(it(e),dt(e))for(let t=0;t<e.producerNode.length;t++)qe(e.producerNode[t],e.producerIndexOfThis[t]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}function ct(e,t,r){if(Vt(e),0===e.liveConsumerNode.length&&Qt(e))for(let o=0;o<e.producerNode.length;o++)e.producerIndexOfThis[o]=ct(e.producerNode[o],e,o);return e.liveConsumerIndexOfThis.push(r),e.liveConsumerNode.push(t)-1}function qe(e,t){if(Vt(e),1===e.liveConsumerNode.length&&Qt(e))for(let o=0;o<e.producerNode.length;o++)qe(e.producerNode[o],e.producerIndexOfThis[o]);const r=e.liveConsumerNode.length-1;if(e.liveConsumerNode[t]=e.liveConsumerNode[r],e.liveConsumerIndexOfThis[t]=e.liveConsumerIndexOfThis[r],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,t<e.liveConsumerNode.length){const o=e.liveConsumerIndexOfThis[t],a=e.liveConsumerNode[t];it(a),a.producerIndexOfThis[o]=t}}function dt(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function it(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}function Vt(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}function Qt(e){return void 0!==e.producerNode}const rn=Symbol("UNSET"),on=Symbol("COMPUTING"),fr=Symbol("ERRORED"),Hn={...he,value:rn,dirty:!0,error:null,equal:R,producerMustRecompute:e=>e.value===rn||e.value===on,producerRecomputeValue(e){if(e.value===on)throw new Error("Detected cycle in computations.");const t=e.value;e.value=on;const r=nn(e);let o;try{o=e.computation()}catch(a){o=fr,e.error=a}finally{Bt(e,r)}t!==rn&&t!==fr&&o!==fr&&e.equal(t,o)?e.value=t:(e.value=o,e.version++)}};let pn=function Qe(){throw new Error};function cr(){pn()}let yt=null;function W(e,t){Tt()||cr(),e.equal(e.value,t)||(e.value=t,function Et(e){e.version++,function Ge(){p++}(),ft(e),yt?.()}(e))}const Oe={...he,equal:R,value:void 0};var qn=ie(4412),Ur=ie(1413),zn=ie(8359),Un=ie(6354);const Nt="https://g.co/ng/security#xss";class ut extends Error{constructor(t,r){super(function di(e,t){return`NG0${Math.abs(e)}${t?": "+t:""}`}(t,r)),this.code=t}}function Pt(e){return{toString:e}.toString()}const or="__parameters__";function sr(e,t,r){return Pt(()=>{const o=function Pr(e){return function(...r){if(e){const o=e(...r);for(const a in o)this[a]=o[a]}}}(t);function a(...l){if(this instanceof a)return o.apply(this,l),this;const g=new a(...l);return E.annotation=g,E;function E(T,V,$){const X=T.hasOwnProperty(or)?T[or]:Object.defineProperty(T,or,{value:[]})[or];for(;X.length<=$;)X.push(null);return(X[$]=X[$]||[]).push(g),T}}return r&&(a.prototype=Object.create(r.prototype)),a.prototype.ngMetadataName=e,a.annotationCls=a,a})}const Mn=globalThis;function gn(e){for(let t in e)if(e[t]===gn)return t;throw Error("Could not find renamed property on target object.")}function ni(e,t){for(const r in t)t.hasOwnProperty(r)&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function ln(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(ln).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const t=e.toString();if(null==t)return""+t;const r=t.indexOf("\n");return-1===r?t:t.substring(0,r)}function jr(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}const wi=gn({__forward_ref__:gn});function Z(e){return e.__forward_ref__=Z,e.toString=function(){return ln(this())},e}function le(e){return se(e)?e():e}function se(e){return"function"==typeof e&&e.hasOwnProperty(wi)&&e.__forward_ref__===Z}function Gn(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function Ps(e){return{providers:e.providers||[],imports:e.imports||[]}}function Zo(e){return be(e,Jt)||be(e,yn)}function je(e){return null!==Zo(e)}function be(e,t){return e.hasOwnProperty(t)?e[t]:null}function wt(e){return e&&(e.hasOwnProperty($t)||e.hasOwnProperty(ar))?e[$t]:null}const Jt=gn({\u0275prov:gn}),$t=gn({\u0275inj:gn}),yn=gn({ngInjectableDef:gn}),ar=gn({ngInjectorDef:gn});class Ot{constructor(t,r){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof r?this.__NG_ELEMENT_ID__=r:void 0!==r&&(this.\u0275prov=Gn({token:this,providedIn:r.providedIn||"root",factory:r.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Vo(e){return e&&!!e.\u0275providers}const ur=gn({\u0275cmp:gn}),ma=gn({\u0275dir:gn}),fi=gn({\u0275pipe:gn}),Lo=gn({\u0275mod:gn}),Ti=gn({\u0275fac:gn}),Kn=gn({__NG_ELEMENT_ID__:gn}),so=gn({__NG_ENV_ID__:gn});function pt(e){return"string"==typeof e?e:null==e?"":String(e)}function Zn(e,t){throw new ut(-201,!1)}var An=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}(An||{});let pi;function Ir(){return pi}function br(e){const t=pi;return pi=e,t}function Qs(e,t,r){const o=Zo(e);return o&&"root"==o.providedIn?void 0===o.value?o.value=o.factory():o.value:r&An.Optional?null:void 0!==t?t:void Zn()}const Uo={},wo="__NG_DI_FLAG__",_i="ngTempTokenPath",ao=/\n/gm,Oi="__source";let oi;function Do(e){const t=oi;return oi=e,t}function co(e,t=An.Default){if(void 0===oi)throw new ut(-203,!1);return null===oi?Qs(e,void 0,t):oi.get(e,t&An.Optional?null:void 0,t)}function Br(e,t=An.Default){return(Ir()||co)(le(e),t)}function jt(e,t=An.Default){return Br(e,jo(t))}function jo(e){return typeof e>"u"||"number"==typeof e?e:(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function Bo(e){const t=[];for(let r=0;r<e.length;r++){const o=le(e[r]);if(Array.isArray(o)){if(0===o.length)throw new ut(900,!1);let a,l=An.Default;for(let g=0;g<o.length;g++){const E=o[g],T=ks(E);"number"==typeof T?-1===T?a=E.token:l|=T:a=E}t.push(Br(a,l))}else t.push(Br(o))}return t}function $o(e,t){return e[wo]=t,e.prototype[wo]=t,e}function ks(e){return e[wo]}const uo=$o(sr("Optional"),8),Fs=$o(sr("SkipSelf"),4);function gi(e,t){return e.hasOwnProperty(Ti)?e[Ti]:null}function lo(e,t){e.forEach(r=>Array.isArray(r)?lo(r,t):t(r))}function rr(e,t,r){t>=e.length?e.push(r):e.splice(t,0,r)}function Di(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function sn(e,t,r){let o=zr(e,t);return o>=0?e[1|o]=r:(o=~o,function is(e,t,r,o){let a=e.length;if(a==t)e.push(r,o);else if(1===a)e.push(o,e[0]),e[0]=r;else{for(a--,e.push(e[a-1],e[a]);a>t;)e[a]=e[a-2],a--;e[t]=r,e[t+1]=o}}(e,o,t,r)),o}function Dn(e,t){const r=zr(e,t);if(r>=0)return e[1|r]}function zr(e,t){return function Vs(e,t,r){let o=0,a=e.length>>r;for(;a!==o;){const l=o+(a-o>>1),g=e[l<<r];if(t===g)return l<<r;g>t?a=l:o=l+1}return~(a<<r)}(e,t,1)}const Fi={},On=[],Ki=new Ot(""),os=new Ot("",-1),ho=new Ot("");class ss{get(t,r=Uo){if(r===Uo){const o=new Error(`NullInjectorError: No provider for ${ln(t)}!`);throw o.name="NullInjectorError",o}return r}}var Ba=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(Ba||{}),Qi=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(Qi||{}),Vi=function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e}(Vi||{});function ai(e,t,r){let o=e.length;for(;;){const a=e.indexOf(t,r);if(-1===a)return a;if(0===a||e.charCodeAt(a-1)<=32){const l=t.length;if(a+l===o||e.charCodeAt(a+l)<=32)return a}r=a+1}}function _s(e,t,r){let o=0;for(;o<r.length;){const a=r[o];if("number"==typeof a){if(0!==a)break;o++;const l=r[o++],g=r[o++],E=r[o++];e.setAttribute(t,g,E,l)}else{const l=a,g=r[++o];Js(l)?e.setProperty(t,l,g):e.setAttribute(t,l,g),o++}}return o}function ya(e){return 3===e||4===e||6===e}function Js(e){return 64===e.charCodeAt(0)}function zo(e,t){if(null!==t&&0!==t.length)if(null===e||0===e.length)e=t.slice();else{let r=-1;for(let o=0;o<t.length;o++){const a=t[o];"number"==typeof a?r=a:0===r||ea(e,r,a,null,-1===r||2===r?t[++o]:null)}}return e}function ea(e,t,r,o,a){let l=0,g=e.length;if(-1===t)g=-1;else for(;l<e.length;){const E=e[l++];if("number"==typeof E){if(E===t){g=-1;break}if(E>t){g=l-1;break}}}for(;l<e.length;){const E=e[l];if("number"==typeof E)break;if(E===r){if(null===o)return void(null!==a&&(e[l+1]=a));if(o===e[l+1])return void(e[l+2]=a)}l++,null!==o&&l++,null!==a&&l++}-1!==g&&(e.splice(g,0,t),l=g+1),e.splice(l++,0,r),null!==o&&e.splice(l++,0,o),null!==a&&e.splice(l++,0,a)}const Go="ng-template";function va(e,t,r,o){let a=0;if(o){for(;a<t.length&&"string"==typeof t[a];a+=2)if("class"===t[a]&&-1!==ai(t[a+1].toLowerCase(),r,0))return!0}else if(Li(e))return!1;if(a=t.indexOf(1,a),a>-1){let l;for(;++a<t.length&&"string"==typeof(l=t[a]);)if(l.toLowerCase()===r)return!0}return!1}function Li(e){return 4===e.type&&e.value!==Go}function ys(e,t,r){return t===(4!==e.type||r?e.value:Go)}function ir(e,t,r){let o=4;const a=e.attrs,l=null!==a?function Ls(e){for(let t=0;t<e.length;t++)if(ya(e[t]))return t;return e.length}(a):0;let g=!1;for(let E=0;E<t.length;E++){const T=t[E];if("number"!=typeof T){if(!g)if(4&o){if(o=2|1&o,""!==T&&!ys(e,T,r)||""===T&&1===t.length){if(Gr(o))return!1;g=!0}}else if(8&o){if(null===a||!va(e,a,T,r)){if(Gr(o))return!1;g=!0}}else{const V=t[++E],$=bi(T,a,Li(e),r);if(-1===$){if(Gr(o))return!1;g=!0;continue}if(""!==V){let X;if(X=$>l?"":a[$+1].toLowerCase(),2&o&&V!==X){if(Gr(o))return!1;g=!0}}}}else{if(!g&&!Gr(o)&&!Gr(T))return!1;if(g&&Gr(T))continue;g=!1,o=T|1&o}}return Gr(o)||g}function Gr(e){return!(1&e)}function bi(e,t,r,o){if(null===t)return-1;let a=0;if(o||!r){let l=!1;for(;a<t.length;){const g=t[a];if(g===e)return a;if(3===g||6===g)l=!0;else{if(1===g||2===g){let E=t[++a];for(;"string"==typeof E;)E=t[++a];continue}if(4===g)break;if(0===g){a+=4;continue}}a+=l?1:2}return-1}return function as(e,t){let r=e.indexOf(4);if(r>-1)for(r++;r<e.length;){const o=e[r];if("number"==typeof o)return-1;if(o===t)return r;r++}return-1}(t,e)}function $a(e,t,r=!1){for(let o=0;o<t.length;o++)if(ir(e,t[o],r))return!0;return!1}function Wr(e,t){return e?":not("+t.trim()+")":t}function cs(e){let t=e[0],r=1,o=2,a="",l=!1;for(;r<e.length;){let g=e[r];if("string"==typeof g)if(2&o){const E=e[++r];a+="["+g+(E.length>0?'="'+E+'"':"")+"]"}else 8&o?a+="."+g:4&o&&(a+=" "+g);else""!==a&&!Gr(g)&&(t+=Wr(l,a),a=""),o=g,l=l||!Gr(o);r++}return""!==a&&(t+=Wr(l,a)),t}function nt(e){return Pt(()=>{const t=ji(e),r={...t,decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===Ba.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||Qi.Emulated,styles:e.styles||On,_:null,schemas:e.schemas||null,tView:null,id:""};Ia(r);const o=e.dependencies;return r.directiveDefs=Jr(o,!1),r.pipeDefs=Jr(o,!0),r.id=function po(e){let t=0;const r=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,e.consts,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery].join("|");for(const a of r)t=Math.imul(31,t)+a.charCodeAt(0)|0;return t+=2147483648,"c"+t}(r),r})}function fo(e){return wn(e)||Jn(e)}function ls(e){return null!==e}function yi(e){return Pt(()=>({type:e.type,bootstrap:e.bootstrap||On,declarations:e.declarations||On,imports:e.imports||On,exports:e.exports||On,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function Ui(e,t){if(null==e)return Fi;const r={};for(const o in e)if(e.hasOwnProperty(o)){const a=e[o];let l,g,E=Vi.None;Array.isArray(a)?(E=a[0],l=a[1],g=a[2]??l):(l=a,g=a),t?(r[l]=E!==Vi.None?[o,E]:o,t[l]=g):r[l]=o}return r}function Is(e){return Pt(()=>{const t=ji(e);return Ia(t),t})}function ta(e){return{type:e.type,name:e.name,factory:null,pure:!1!==e.pure,standalone:!0===e.standalone,onDestroy:e.type.prototype.ngOnDestroy||null}}function wn(e){return e[ur]||null}function Jn(e){return e[ma]||null}function qr(e){return e[fi]||null}function Mr(e){const t=wn(e)||Jn(e)||qr(e);return null!==t&&t.standalone}function ci(e,t){const r=e[Lo]||null;if(!r&&!0===t)throw new Error(`Type ${ln(e)} does not have '\u0275mod' property.`);return r}function ji(e){const t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:e.inputs||Fi,exportAs:e.exportAs||null,standalone:!0===e.standalone,signals:!0===e.signals,selectors:e.selectors||On,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Ui(e.inputs,t),outputs:Ui(e.outputs),debugInfo:null}}function Ia(e){e.features?.forEach(t=>t(e))}function Jr(e,t){if(!e)return null;const r=t?qr:fo;return()=>("function"==typeof e?e():e).map(o=>r(o)).filter(ls)}function Ai(e){return{\u0275providers:e}}function ds(...e){return{\u0275providers:bn(0,e),\u0275fromNgModule:!0}}function bn(e,...t){const r=[],o=new Set;let a;const l=g=>{r.push(g)};return lo(t,g=>{const E=g;na(E,l,[],o)&&(a||=[],a.push(E))}),void 0!==a&&Ea(a,l),r}function Ea(e,t){for(let r=0;r<e.length;r++){const{ngModule:o,providers:a}=e[r];ra(a,l=>{t(l,o)})}}function na(e,t,r,o){if(!(e=le(e)))return!1;let a=null,l=wt(e);const g=!l&&wn(e);if(l||g){if(g&&!g.standalone)return!1;a=e}else{const T=e.ngModule;if(l=wt(T),!l)return!1;a=T}const E=o.has(a);if(g){if(E)return!1;if(o.add(a),g.dependencies){const T="function"==typeof g.dependencies?g.dependencies():g.dependencies;for(const V of T)na(V,t,r,o)}}else{if(!l)return!1;{if(null!=l.imports&&!E){let V;o.add(a);try{lo(l.imports,$=>{na($,t,r,o)&&(V||=[],V.push($))})}finally{}void 0!==V&&Ea(V,t)}if(!E){const V=gi(a)||(()=>new a);t({provide:a,useFactory:V,deps:On},a),t({provide:ho,useValue:a,multi:!0},a),t({provide:Ki,useValue:()=>Br(a),multi:!0},a)}const T=l.providers;if(null!=T&&!E){const V=e;ra(T,$=>{t($,V)})}}}return a!==e&&void 0!==e.providers}function ra(e,t){for(let r of e)Vo(r)&&(r=r.\u0275providers),Array.isArray(r)?ra(r,t):t(r)}const Vc=gn({provide:String,useValue:gn});function Wo(e){return null!==e&&"object"==typeof e&&Vc in e}function go(e){return"function"==typeof e}const Xi=new Ot(""),wa={},Bi={};let Ta;function mo(){return void 0===Ta&&(Ta=new ss),Ta}class Yi{}class qo extends Yi{get destroyed(){return this._destroyed}constructor(t,r,o,a){super(),this.parent=r,this.source=o,this.scopes=a,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Ao(t,g=>this.processProvider(g)),this.records.set(os,Cs(void 0,this)),a.has("environment")&&this.records.set(Yi,Cs(void 0,this));const l=this.records.get(Xi);null!=l&&"string"==typeof l.value&&this.scopes.add(l.value),this.injectorDefTypes=new Set(this.get(ho,On,An.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;const t=de(null);try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();const r=this._onDestroyHooks;this._onDestroyHooks=[];for(const o of r)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),de(t)}}onDestroy(t){return this.assertNotDestroyed(),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){this.assertNotDestroyed();const r=Do(this),o=br(void 0);try{return t()}finally{Do(r),br(o)}}get(t,r=Uo,o=An.Default){if(this.assertNotDestroyed(),t.hasOwnProperty(so))return t[so](this);o=jo(o);const l=Do(this),g=br(void 0);try{if(!(o&An.SkipSelf)){let T=this.records.get(t);if(void 0===T){const V=function Wa(e){return"function"==typeof e||"object"==typeof e&&e instanceof Ot}(t)&&Zo(t);T=V&&this.injectableDefInScope(V)?Cs(Es(t),wa):null,this.records.set(t,T)}if(null!=T)return this.hydrate(t,T)}return(o&An.Self?mo():this.parent).get(t,r=o&An.Optional&&r===Uo?null:r)}catch(E){if("NullInjectorError"===E.name){if((E[_i]=E[_i]||[]).unshift(ln(t)),l)throw E;return function Rr(e,t,r,o){const a=e[_i];throw t[Oi]&&a.unshift(t[Oi]),e.message=function ts(e,t,r,o=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.slice(2):e;let a=ln(t);if(Array.isArray(t))a=t.map(ln).join(" -> ");else if("object"==typeof t){let l=[];for(let g in t)if(t.hasOwnProperty(g)){let E=t[g];l.push(g+":"+("string"==typeof E?JSON.stringify(E):ln(E)))}a=`{${l.join(", ")}}`}return`${r}${o?"("+o+")":""}[${a}]: ${e.replace(ao,"\n  ")}`}("\n"+e.message,a,r,o),e.ngTokenPath=a,e[_i]=null,e}(E,t,"R3InjectorError",this.source)}throw E}finally{br(g),Do(l)}}resolveInjectorInitializers(){const t=de(null),r=Do(this),o=br(void 0);try{const l=this.get(Ki,On,An.Self);for(const g of l)g()}finally{Do(r),br(o),de(t)}}toString(){const t=[],r=this.records;for(const o of r.keys())t.push(ln(o));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ut(205,!1)}processProvider(t){let r=go(t=le(t))?t:le(t&&t.provide);const o=function hu(e){return Wo(e)?Cs(void 0,e.useValue):Cs(dr(e),wa)}(t);if(!go(t)&&!0===t.multi){let a=this.records.get(r);a||(a=Cs(void 0,wa,!0),a.factory=()=>Bo(a.multi),this.records.set(r,a)),r=t,a.multi.push(t)}this.records.set(r,o)}hydrate(t,r){const o=de(null);try{return r.value===wa&&(r.value=Bi,r.value=r.factory()),"object"==typeof r.value&&r.value&&function ba(e){return null!==e&&"object"==typeof e&&"function"==typeof e.ngOnDestroy}(r.value)&&this._ngOnDestroyHooks.add(r.value),r.value}finally{de(o)}}injectableDefInScope(t){if(!t.providedIn)return!1;const r=le(t.providedIn);return"string"==typeof r?"any"===r||this.scopes.has(r):this.injectorDefTypes.has(r)}removeOnDestroy(t){const r=this._onDestroyHooks.indexOf(t);-1!==r&&this._onDestroyHooks.splice(r,1)}}function Es(e){const t=Zo(e),r=null!==t?t.factory:gi(e);if(null!==r)return r;if(e instanceof Ot)throw new ut(204,!1);if(e instanceof Function)return function Ga(e){if(e.length>0)throw new ut(204,!1);const r=function We(e){return e&&(e[Jt]||e[yn])||null}(e);return null!==r?()=>r.factory(e):()=>new e}(e);throw new ut(204,!1)}function dr(e,t,r){let o;if(go(e)){const a=le(e);return gi(a)||Es(a)}if(Wo(e))o=()=>le(e.useValue);else if(function za(e){return!(!e||!e.useFactory)}(e))o=()=>e.useFactory(...Bo(e.deps||[]));else if(function dc(e){return!(!e||!e.useExisting)}(e))o=()=>Br(le(e.useExisting));else{const a=le(e&&(e.useClass||e.provide));if(!function Da(e){return!!e.deps}(e))return gi(a)||Es(a);o=()=>new a(...Bo(e.deps))}return o}function Cs(e,t,r=!1){return{factory:e,value:t,multi:r?[]:void 0}}function Ao(e,t){for(const r of e)Array.isArray(r)?Ao(r,t):r&&Vo(r)?Ao(r.\u0275providers,t):t(r)}function N(e,t){e instanceof qo&&e.assertNotDestroyed();const o=Do(e),a=br(void 0);try{return t()}finally{Do(o),br(a)}}const en=0,Je=1,Ft=2,er=3,Kr=4,Cr=5,Nr=6,vi=7,$n=8,wr=9,Si=10,an=11,qa=12,hc=13,ia=14,xr=15,Zi=16,fc=17,js=18,Aa=19,pc=20,So=21,gc=22,Ro=23,Rt=25,Or=1,_o=7,Ii=9,hr=10;var mc=function(e){return e[e.None=0]="None",e[e.HasTransplantedViews=2]="HasTransplantedViews",e}(mc||{});function ei(e){return Array.isArray(e)&&"object"==typeof e[Or]}function $i(e){return Array.isArray(e)&&!0===e[Or]}function Ka(e){return!!(4&e.flags)}function ws(e){return e.componentOffset>-1}function $s(e){return!(1&~e.flags)}function Hi(e){return!!e.template}function Hs(e){return!!(512&e[Ft])}class Ic{constructor(t,r,o){this.previousValue=t,this.currentValue=r,this.firstChange=o}isFirstChange(){return this.firstChange}}function Zu(e,t,r,o){null!==t?t.applyValueToInputSignal(t,o):e[r]=o}function I(){return A}function A(e){return e.type.prototype.ngOnChanges&&(e.setInput=P),C}function C(){const e=q(this),t=e?.current;if(t){const r=e.previous;if(r===Fi)e.previous=t;else for(let o in t)r[o]=t[o];e.current=null,this.ngOnChanges(t)}}function P(e,t,r,o,a){const l=this.declaredInputs[o],g=q(e)||function oe(e,t){return e[U]=t}(e,{previous:Fi,current:null}),E=g.current||(g.current={}),T=g.previous,V=T[l];E[l]=new Ic(V&&V.currentValue,r,T===Fi),Zu(e,t,a,r)}I.ngInherit=!0;const U="__ngSimpleChanges__";function q(e){return e[U]||null}const st=function(e,t,r){};function Wt(e){for(;Array.isArray(e);)e=e[en];return e}function mr(e,t){return Wt(t[e])}function pr(e,t){return Wt(t[e.index])}function kr(e,t){return e.data[t]}function mi(e,t){const r=t[e];return ei(r)?r:r[en]}function Zl(e){return!(128&~e[Ft])}function Io(e,t){return null==t?null:e[t]}function Jl(e){e[fc]=0}function mu(e){1024&e[Ft]||(e[Ft]|=1024,Zl(e)&&Ec(e))}function Ya(e){return!!(9216&e[Ft]||e[Ro]?.dirty)}function $c(e){e[Si].changeDetectionScheduler?.notify(8),64&e[Ft]&&(e[Ft]|=1024),Ya(e)&&Ec(e)}function Ec(e){e[Si].changeDetectionScheduler?.notify(0);let t=Ts(e);for(;null!==t&&!(8192&t[Ft])&&(t[Ft]|=8192,Zl(t));)t=Ts(t)}function Za(e,t){if(!(256&~e[Ft]))throw new ut(911,!1);null===e[So]&&(e[So]=[]),e[So].push(t)}function Ts(e){const t=e[er];return $i(t)?t[er]:t}const vn={lFrame:Hh(null),bindingsEnabled:!0,skipHydrationRootTNode:null};let yu=!1;function rd(){return vn.bindingsEnabled}function He(){return vn.lFrame.lView}function Wn(){return vn.lFrame.tView}function Ma(e){return vn.lFrame.contextLView=e,e[$n]}function Ju(e){return vn.lFrame.contextLView=null,e}function Xn(){let e=el();for(;null!==e&&64===e.type;)e=e.parent;return e}function el(){return vn.lFrame.currentTNode}function bs(e,t){const r=vn.lFrame;r.currentTNode=e,r.isParent=t}function od(){return vn.lFrame.isParent}function cd(){return yu}function Bh(e){yu=e}function Ji(){return vn.lFrame.bindingIndex}function As(){return vn.lFrame.bindingIndex++}function zs(e){const t=vn.lFrame,r=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,r}function Xp(e,t){const r=vn.lFrame;r.bindingIndex=r.bindingRootIndex=e,ud(t)}function ud(e){vn.lFrame.currentDirectiveIndex=e}function Ci(){return vn.lFrame.currentQueryIndex}function nl(e){vn.lFrame.currentQueryIndex=e}function Zp(e){const t=e[Je];return 2===t.type?t.declTNode:1===t.type?e[Cr]:null}function $h(e,t,r){if(r&An.SkipSelf){let a=t,l=e;for(;!(a=a.parent,null!==a||r&An.Host||(a=Zp(l),null===a||(l=l[ia],10&a.type))););if(null===a)return!1;t=a,e=l}const o=vn.lFrame=rl();return o.currentTNode=t,o.lView=e,!0}function wu(e){const t=rl(),r=e[Je];vn.lFrame=t,t.currentTNode=r.firstChild,t.lView=e,t.tView=r,t.contextLView=e,t.bindingIndex=r.bindingStartIndex,t.inI18n=!1}function rl(){const e=vn.lFrame,t=null===e?null:e.child;return null===t?Hh(e):t}function Hh(e){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=t),t}function Tu(){const e=vn.lFrame;return vn.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const Du=Tu;function ld(){const e=Tu();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function Ri(){return vn.lFrame.selectedIndex}function Pa(e){vn.lFrame.selectedIndex=e}function Tr(){const e=vn.lFrame;return kr(e.tView,e.selectedIndex)}let sl=!0;function Gc(){return sl}function Gs(e){sl=e}function bu(e,t){for(let r=t.directiveStart,o=t.directiveEnd;r<o;r++){const l=e.data[r].type.prototype,{ngAfterContentInit:g,ngAfterContentChecked:E,ngAfterViewInit:T,ngAfterViewChecked:V,ngOnDestroy:$}=l;g&&(e.contentHooks??=[]).push(-r,g),E&&((e.contentHooks??=[]).push(r,E),(e.contentCheckHooks??=[]).push(r,E)),T&&(e.viewHooks??=[]).push(-r,T),V&&((e.viewHooks??=[]).push(r,V),(e.viewCheckHooks??=[]).push(r,V)),null!=$&&(e.destroyHooks??=[]).push(r,$)}}function cl(e,t,r){md(e,t,3,r)}function gd(e,t,r,o){(3&e[Ft])===r&&md(e,t,r,o)}function Wc(e,t){let r=e[Ft];(3&r)===t&&(r&=16383,r+=1,e[Ft]=r)}function md(e,t,r,o){const l=o??-1,g=t.length-1;let E=0;for(let T=void 0!==o?65535&e[fc]:0;T<g;T++)if("number"==typeof t[T+1]){if(E=t[T],null!=o&&E>=o)break}else t[T]<0&&(e[fc]+=65536),(E<l||-1==l)&&(Tc(e,r,t,T),e[fc]=(4294901760&e[fc])+T+2),T++}function ca(e,t){st(4,e,t);const r=de(null);try{t.call(e)}finally{de(r),st(5,e,t)}}function Tc(e,t,r,o){const a=r[o]<0,l=r[o+1],E=e[a?-r[o]:r[o]];a?e[Ft]>>14<e[fc]>>16&&(3&e[Ft])===t&&(e[Ft]+=16384,ca(E,l)):ca(E,l)}const xa=-1;class Ja{constructor(t,r,o){this.factory=t,this.resolving=!1,this.canSeeViewProviders=r,this.injectImpl=o}}const w={};class d{constructor(t,r){this.injector=t,this.parentInjector=r}get(t,r,o){o=jo(o);const a=this.injector.get(t,w,o);return a!==w||r===w?a:this.parentInjector.get(t,r,o)}}function _(e){return e!==xa}function b(e){return 32767&e}function Q(e,t){let r=function z(e){return e>>16}(e),o=t;for(;r>0;)o=o[ia],r--;return o}let Fe=!0;function et(e){const t=Fe;return Fe=e,t}const In=255,mn=5;let Ar=0;const Mi={};function Qr(e,t){const r=dl(e,t);if(-1!==r)return r;const o=t[Je];o.firstCreatePass&&(e.injectorIndex=t.length,Au(o.data,e),Au(t,null),Au(o.blueprint,null));const a=ec(e,t),l=e.injectorIndex;if(_(a)){const g=b(a),E=Q(a,t),T=E[Je].data;for(let V=0;V<8;V++)t[l+V]=E[g+V]|T[g+V]}return t[l+8]=a,l}function Au(e,t){e.push(0,0,0,0,0,0,0,0,t)}function dl(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:e.injectorIndex}function ec(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let r=0,o=null,a=t;for(;null!==a;){if(o=rg(a),null===o)return xa;if(r++,a=a[ia],-1!==o.injectorIndex)return o.injectorIndex|r<<16}return xa}function Na(e,t,r){!function qc(e,t,r){let o;"string"==typeof r?o=r.charCodeAt(0)||0:r.hasOwnProperty(Kn)&&(o=r[Kn]),null==o&&(o=r[Kn]=Ar++);const a=o&In;t.data[e+(a>>mn)]|=1<<a}(e,t,r)}function fl(e,t,r){if(r&An.Optional||void 0!==e)return e;Zn()}function pl(e,t,r,o){if(r&An.Optional&&void 0===o&&(o=null),!(r&(An.Self|An.Host))){const a=e[wr],l=br(void 0);try{return a?a.get(t,o,r&An.Optional):Qs(t,o,r&An.Optional)}finally{br(l)}}return fl(o,0,r)}function yd(e,t,r,o=An.Default,a){if(null!==e){if(2048&t[Ft]&&!(o&An.Self)){const g=function Kc(e,t,r,o,a){let l=e,g=t;for(;null!==l&&null!==g&&2048&g[Ft]&&!(512&g[Ft]);){const E=Wh(l,g,r,o|An.Self,Mi);if(E!==Mi)return E;let T=l.parent;if(!T){const V=g[pc];if(V){const $=V.get(r,Mi,o);if($!==Mi)return $}T=rg(g),g=g[ia]}l=T}return a}(e,t,r,o,Mi);if(g!==Mi)return g}const l=Wh(e,t,r,o,Mi);if(l!==Mi)return l}return pl(t,r,o,a)}function Wh(e,t,r,o,a){const l=function ng(e){if("string"==typeof e)return e.charCodeAt(0)||0;const t=e.hasOwnProperty(Kn)?e[Kn]:void 0;return"number"==typeof t?t>=0?t&In:t_:t}(r);if("function"==typeof l){if(!$h(t,e,o))return o&An.Host?fl(a,0,o):pl(t,r,o,a);try{let g;if(g=l(o),null!=g||o&An.Optional)return g;Zn()}finally{Du()}}else if("number"==typeof l){let g=null,E=dl(e,t),T=xa,V=o&An.Host?t[xr][Cr]:null;for((-1===E||o&An.SkipSelf)&&(T=-1===E?ec(e,t):t[E+8],T!==xa&&qh(o,!1)?(g=t[Je],E=b(T),t=Q(T,t)):E=-1);-1!==E;){const $=t[Je];if(Su(l,E,$.data)){const X=vd(E,t,r,g,o,V);if(X!==Mi)return X}T=t[E+8],T!==xa&&qh(o,t[Je].data[E+8]===V)&&Su(l,E,t)?(g=$,E=b(T),t=Q(T,t)):E=-1}}return a}function vd(e,t,r,o,a,l){const g=t[Je],E=g.data[e+8],$=gl(E,g,r,null==o?ws(E)&&Fe:o!=g&&!!(3&E.type),a&An.Host&&l===E);return null!==$?Oa(t,g,$,E):Mi}function gl(e,t,r,o,a){const l=e.providerIndexes,g=t.data,E=1048575&l,T=e.directiveStart,$=l>>20,ae=a?E+$:e.directiveEnd;for(let ge=o?E:E+$;ge<ae;ge++){const Te=g[ge];if(ge<T&&r===Te||ge>=T&&Te.type===r)return ge}if(a){const ge=g[T];if(ge&&Hi(ge)&&ge.type===r)return T}return null}function Oa(e,t,r,o){let a=e[r];const l=t.data;if(function zh(e){return e instanceof Ja}(a)){const g=a;g.resolving&&function lr(e,t){throw t&&t.join(" > "),new ut(-200,e)}(function At(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():pt(e)}(l[r]));const E=et(g.canSeeViewProviders);g.resolving=!0;const V=g.injectImpl?br(g.injectImpl):null;$h(e,o,An.Default);try{a=e[r]=g.factory(void 0,l,e,o),t.firstCreatePass&&r>=o.directiveStart&&function al(e,t,r){const{ngOnChanges:o,ngOnInit:a,ngDoCheck:l}=t.type.prototype;if(o){const g=A(t);(r.preOrderHooks??=[]).push(e,g),(r.preOrderCheckHooks??=[]).push(e,g)}a&&(r.preOrderHooks??=[]).push(0-e,a),l&&((r.preOrderHooks??=[]).push(e,l),(r.preOrderCheckHooks??=[]).push(e,l))}(r,l[r],t)}finally{null!==V&&br(V),et(E),g.resolving=!1,Du()}}return a}function Su(e,t,r){return!!(r[t+(e>>mn)]&1<<e)}function qh(e,t){return!(e&An.Self||e&An.Host&&t)}class Pi{constructor(t,r){this._tNode=t,this._lView=r}get(t,r,o){return yd(this._tNode,this._lView,t,jo(o),r)}}function t_(){return new Pi(Xn(),He())}function Kh(e){return Pt(()=>{const t=e.prototype.constructor,r=t[Ti]||Id(t),o=Object.prototype;let a=Object.getPrototypeOf(e.prototype).constructor;for(;a&&a!==o;){const l=a[Ti]||Id(a);if(l&&l!==r)return l;a=Object.getPrototypeOf(a)}return l=>new l})}function Id(e){return se(e)?()=>{const t=Id(le(e));return t&&t()}:gi(e)}function rg(e){const t=e[Je],r=t.type;return 2===r?t.declTNode:1===r?e[Cr]:null}function Qh(e){return function hl(e,t){if("class"===t)return e.classes;if("style"===t)return e.styles;const r=e.attrs;if(r){const o=r.length;let a=0;for(;a<o;){const l=r[a];if(ya(l))break;if(0===l)a+=2;else if("number"==typeof l)for(a++;a<o&&"string"==typeof r[a];)a++;else{if(l===t)return r[a+1];a+=2}}}return null}(Xn(),e)}function ag(e,t=null,r=null,o){const a=cg(e,t,r,o);return a.resolveInjectorInitializers(),a}function cg(e,t=null,r=null,o,a=new Set){const l=[r||On,ds(e)];return o=o||("object"==typeof e?void 0:ln(e)),new qo(l,t||mo(),o||null,a)}class Ko{static{this.THROW_IF_NOT_FOUND=Uo}static{this.NULL=new ss}static create(t,r){if(Array.isArray(t))return ag({name:""},r,t,"");{const o=t.name??"";return ag({name:o},t.parent,t.providers,o)}}static{this.\u0275prov=Gn({token:Ko,providedIn:"any",factory:()=>Br(os)})}static{this.__NG_ELEMENT_ID__=-1}}new Ot("").__NG_ELEMENT_ID__=e=>{const t=Xn();if(null===t)throw new ut(204,!1);if(2&t.type)return t.value;if(e&An.Optional)return null;throw new ut(204,!1)};function ug(e){return e.ngOriginalError}const ef=!0;let ml=(()=>{class e{static{this.__NG_ELEMENT_ID__=dg}static{this.__NG_ENV_ID__=r=>r}}return e})();class lg extends ml{constructor(t){super(),this._lView=t}onDestroy(t){return Za(this._lView,t),()=>function _u(e,t){if(null===e[So])return;const r=e[So].indexOf(t);-1!==r&&e[So].splice(r,1)}(this._lView,t)}}function dg(){return new lg(He())}let bc=(()=>{class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new qn.t(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=Gn({token:e,providedIn:"root",factory:()=>new e})}}return e})();const ua=class Qc extends Ur.B{constructor(t=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=t,function L(){return void 0!==Ir()||null!=function ja(){return oi}()}()&&(this.destroyRef=jt(ml,{optional:!0})??void 0,this.pendingTasks=jt(bc,{optional:!0})??void 0)}emit(t){const r=de(null);try{super.next(t)}finally{de(r)}}subscribe(t,r,o){let a=t,l=r||(()=>null),g=o;if(t&&"object"==typeof t){const T=t;a=T.next?.bind(T),l=T.error?.bind(T),g=T.complete?.bind(T)}this.__isAsync&&(l=this.wrapInTimeout(l),a&&(a=this.wrapInTimeout(a)),g&&(g=this.wrapInTimeout(g)));const E=super.subscribe({next:a,error:l,complete:g});return t instanceof zn.yU&&t.add(E),E}wrapInTimeout(t){return r=>{const o=this.pendingTasks?.add();setTimeout(()=>{t(r),void 0!==o&&this.pendingTasks?.remove(o)})}}};function Ac(...e){}function Mu(e){let t,r;function o(){e=Ac;try{void 0!==r&&"function"==typeof cancelAnimationFrame&&cancelAnimationFrame(r),void 0!==t&&clearTimeout(t)}catch{}}return t=setTimeout(()=>{e(),o()}),"function"==typeof requestAnimationFrame&&(r=requestAnimationFrame(()=>{e(),o()})),()=>o()}function hg(e){return queueMicrotask(()=>e()),()=>{e=Ac}}const fg="isAngularZone",tf=fg+"_ID";let c_=0;class Xr{constructor(t){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ua(!1),this.onMicrotaskEmpty=new ua(!1),this.onStable=new ua(!1),this.onError=new ua(!1);const{enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:a=!1,scheduleInRootZone:l=ef}=t;if(typeof Zone>"u")throw new ut(908,!1);Zone.assertZonePatched();const g=this;g._nesting=0,g._outer=g._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(g._inner=g._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(g._inner=g._inner.fork(Zone.longStackTraceZoneSpec)),g.shouldCoalesceEventChangeDetection=!a&&o,g.shouldCoalesceRunChangeDetection=a,g.callbackScheduled=!1,g.scheduleInRootZone=l,function jv(e){const t=()=>{!function gg(e){function t(){Mu(()=>{e.callbackScheduled=!1,mg(e),e.isCheckStableRunning=!0,Td(e),e.isCheckStableRunning=!1})}e.isCheckStableRunning||e.callbackScheduled||(e.callbackScheduled=!0,e.scheduleInRootZone?Zone.root.run(()=>{t()}):e._outer.run(()=>{t()}),mg(e))}(e)},r=c_++;e._inner=e._inner.fork({name:"angular",properties:{[fg]:!0,[tf]:r,[tf+r]:!0},onInvokeTask:(o,a,l,g,E,T)=>{if(function _g(e){return yg(e,"__ignore_ng_zone__")}(T))return o.invokeTask(l,g,E,T);try{return nf(e),o.invokeTask(l,g,E,T)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||e.shouldCoalesceRunChangeDetection)&&t(),rf(e)}},onInvoke:(o,a,l,g,E,T,V)=>{try{return nf(e),o.invoke(l,g,E,T,V)}finally{e.shouldCoalesceRunChangeDetection&&!e.callbackScheduled&&!function Bv(e){return yg(e,"__scheduler_tick__")}(T)&&t(),rf(e)}},onHasTask:(o,a,l,g)=>{o.hasTask(l,g),a===l&&("microTask"==g.change?(e._hasPendingMicrotasks=g.microTask,mg(e),Td(e)):"macroTask"==g.change&&(e.hasPendingMacrotasks=g.macroTask))},onHandleError:(o,a,l,g)=>(o.handleError(l,g),e.runOutsideAngular(()=>e.onError.emit(g)),!1)})}(g)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get(fg)}static assertInAngularZone(){if(!Xr.isInAngularZone())throw new ut(909,!1)}static assertNotInAngularZone(){if(Xr.isInAngularZone())throw new ut(909,!1)}run(t,r,o){return this._inner.run(t,r,o)}runTask(t,r,o,a){const l=this._inner,g=l.scheduleEventTask("NgZoneEvent: "+a,t,pg,Ac,Ac);try{return l.runTask(g,r,o)}finally{l.cancelTask(g)}}runGuarded(t,r,o){return this._inner.runGuarded(t,r,o)}runOutsideAngular(t){return this._outer.run(t)}}const pg={};function Td(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function mg(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&!0===e.callbackScheduled)}function nf(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function rf(e){e._nesting--,Td(e)}class sf{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ua,this.onMicrotaskEmpty=new ua,this.onStable=new ua,this.onError=new ua}run(t,r,o){return t.apply(r,o)}runGuarded(t,r,o){return t.apply(r,o)}runOutsideAngular(t){return t()}runTask(t,r,o,a){return t.apply(r,o)}}function yg(e,t){return!(!Array.isArray(e)||1!==e.length)&&!0===e[0]?.data?.[t]}class tc{constructor(){this._console=console}handleError(t){const r=this._findOriginalError(t);this._console.error("ERROR",t),r&&this._console.error("ORIGINAL ERROR",r)}_findOriginalError(t){let r=t&&ug(t);for(;r&&ug(r);)r=ug(r);return r||null}}const u_=new Ot("",{providedIn:"root",factory:()=>{const e=jt(Xr),t=jt(tc);return r=>e.runOutsideAngular(()=>t.handleError(r))}});function Ig(){return _l(Xn(),He())}function _l(e,t){return new Pu(pr(e,t))}let Pu=(()=>{class e{constructor(r){this.nativeElement=r}static{this.__NG_ELEMENT_ID__=Ig}}return e})();function Eg(e){return e instanceof Pu?e.nativeElement:e}function Cg(){return this._results[Symbol.iterator]()}class Dd{get changes(){return this._changes??=new ua}constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;const r=Dd.prototype;r[Symbol.iterator]||(r[Symbol.iterator]=Cg)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,r){return this._results.reduce(t,r)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,r){this.dirty=!1;const o=function Sn(e){return e.flat(Number.POSITIVE_INFINITY)}(t);(this._changesDetected=!function ki(e,t,r){if(e.length!==t.length)return!1;for(let o=0;o<e.length;o++){let a=e[o],l=t[o];if(r&&(a=r(a),l=r(l)),l!==a)return!1}return!0}(this._results,o,r))&&(this._results=o,this.length=o.length,this.last=o[this.length-1],this.first=o[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(t){this._onDirty=t}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}}function Nu(e){return!(128&~e.flags)}const cf=new Map;let wg=0;function Tg(e){cf.delete(e[Aa])}const yl="__ngContext__";function xi(e,t){ei(t)?(e[yl]=t[Aa],function Gv(e){cf.set(e[Aa],e)}(t)):e[yl]=t}function y_(e){return v_(e[qa])}function df(e){return v_(e[Kr])}function v_(e){for(;null!==e&&!$i(e);)e=e[Kr];return e}let ff;function pf(e){ff=e}const gf=new Ot("",{providedIn:"root",factory:()=>Yv}),Yv="ng",D_=new Ot(""),El=new Ot("",{providedIn:"platform",factory:()=>"unknown"}),kg=new Ot("",{providedIn:"root",factory:()=>function Xc(){if(void 0!==ff)return ff;if(typeof document<"u")return document;throw new ut(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let S_=()=>null;function If(e,t,r=!1){return S_(e,t,r)}const Fr=new Ot("",{providedIn:"root",factory:()=>!1});let Gg;function aI(e){return function F_(){if(void 0===Gg&&(Gg=null,Mn.trustedTypes))try{Gg=Mn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return Gg}()?.createScriptURL(e)||e}class cI{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Nt})`}}function Rs(e){return e instanceof cI?e.changingThisBreaksApplicationSecurity:e}function Uu(e,t){const r=function Df(e){return e instanceof cI&&e.getTypeName()||null}(e);if(null!=r&&r!==t){if("ResourceURL"===r&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${r} (see ${Nt})`)}return r===t}const L_=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var Zc=function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e}(Zc||{});function _I(e){const t=Rl();return t?t.sanitize(Zc.URL,e)||"":Uu(e,"URL")?Rs(e):function Bd(e){return(e=String(e)).match(L_)?e:"unsafe:"+e}(pt(e))}function yI(e){const t=Rl();if(t)return aI(t.sanitize(Zc.RESOURCE_URL,e)||"");if(Uu(e,"ResourceURL"))return aI(Rs(e));throw new ut(904,!1)}function vI(e,t,r){return function Lf(e,t){return"src"===t&&("embed"===e||"frame"===e||"iframe"===e||"media"===e||"script"===e)||"href"===t&&("base"===e||"link"===e)?yI:_I}(t,r)(e)}function Rl(){const e=He();return e&&e[Si].sanitizer}function da(e){return e instanceof Function?e():e}var Xg=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(Xg||{});let Q_;function X_(e,t){return Q_(e,t)}function Nl(e,t,r,o,a){if(null!=o){let l,g=!1;$i(o)?l=o:ei(o)&&(g=!0,o=o[en]);const E=Wt(o);0===e&&null!==r?null==a?kI(t,r,E):Ol(t,r,E,a||null,!0):1===e&&null!==r?Ol(t,r,E,a||null,!0):2===e?function zu(e,t,r){e.removeChild(null,t,r)}(t,E,g):3===e&&t.destroyNode(E),null!=l&&function $I(e,t,r,o,a){const l=r[_o];l!==Wt(r)&&Nl(t,e,o,l,a);for(let E=hr;E<r.length;E++){const T=r[E];Gf(T[Je],T,e,t,o,l)}}(t,e,l,r,a)}}function $f(e,t,r){return e.createElement(t,r)}function PI(e,t){t[Si].changeDetectionScheduler?.notify(9),Gf(e,t,t[an],2,null,null)}function NI(e,t){const r=e[Ii],o=t[er];(ei(o)||t[xr]!==o[er][xr])&&(e[Ft]|=mc.HasTransplantedViews),null===r?e[Ii]=[t]:r.push(t)}function Y_(e,t){const r=e[Ii],o=r.indexOf(t);r.splice(o,1)}function Hf(e,t){if(e.length<=hr)return;const r=hr+t,o=e[r];if(o){const a=o[Zi];null!==a&&a!==e&&Y_(a,o),t>0&&(e[r-1][Kr]=o[Kr]);const l=Di(e,hr+t);!function Jc(e,t){PI(e,t),t[en]=null,t[Cr]=null}(o[Je],o);const g=l[js];null!==g&&g.detachView(l[Je]),o[er]=null,o[Kr]=null,o[Ft]&=-129}return o}function Jg(e,t){if(!(256&t[Ft])){const r=t[an];r.destroyNode&&Gf(e,t,r,3,null,null),function oC(e){let t=e[qa];if(!t)return Z_(e[Je],e);for(;t;){let r=null;if(ei(t))r=t[qa];else{const o=t[hr];o&&(r=o)}if(!r){for(;t&&!t[Kr]&&t!==e;)ei(t)&&Z_(t[Je],t),t=t[er];null===t&&(t=e),ei(t)&&Z_(t[Je],t),r=t&&t[Kr]}t=r}}(t)}}function Z_(e,t){if(256&t[Ft])return;const r=de(null);try{t[Ft]&=-129,t[Ft]|=256,t[Ro]&&Xt(t[Ro]),function J_(e,t){let r;if(null!=e&&null!=(r=e.destroyHooks))for(let o=0;o<r.length;o+=2){const a=t[r[o]];if(!(a instanceof Ja)){const l=r[o+1];if(Array.isArray(l))for(let g=0;g<l.length;g+=2){const E=a[l[g]],T=l[g+1];st(4,E,T);try{T.call(E)}finally{st(5,E,T)}}else{st(4,a,l);try{l.call(a)}finally{st(5,a,l)}}}}}(e,t),function sC(e,t){const r=e.cleanup,o=t[vi];if(null!==r)for(let l=0;l<r.length-1;l+=2)if("string"==typeof r[l]){const g=r[l+3];g>=0?o[g]():o[-g].unsubscribe(),l+=2}else r[l].call(o[r[l+1]]);null!==o&&(t[vi]=null);const a=t[So];if(null!==a){t[So]=null;for(let l=0;l<a.length;l++)(0,a[l])()}}(e,t),1===t[Je].type&&t[an].destroy();const o=t[Zi];if(null!==o&&$i(t[er])){o!==t[er]&&Y_(o,t);const a=t[js];null!==a&&a.detachView(e)}Tg(t)}finally{de(r)}}function em(e,t,r){return function OI(e,t,r){let o=t;for(;null!==o&&168&o.type;)o=(t=o).parent;if(null===o)return r[en];{const{componentOffset:a}=o;if(a>-1){const{encapsulation:l}=e.data[o.directiveStart+a];if(l===Qi.None||l===Qi.Emulated)return null}return pr(o,r)}}(e,t.parent,r)}function Ol(e,t,r,o,a){e.insertBefore(t,r,o,a)}function kI(e,t,r){e.appendChild(t,r)}function FI(e,t,r,o,a){null!==o?Ol(e,t,r,o,a):kI(e,t,r)}function zf(e,t){return e.parentNode(t)}let Kd,UI=function LI(e,t,r){return 40&e.type?pr(e,r):null};function Hu(e,t,r,o){const a=em(e,o,t),l=t[an],E=function VI(e,t,r){return UI(e,t,r)}(o.parent||t[Cr],o,t);if(null!=a)if(Array.isArray(r))for(let T=0;T<r.length;T++)FI(l,a,r[T],E,!1);else FI(l,a,r,E,!1);void 0!==Kd&&Kd(l,o,t,r,a)}function eu(e,t){if(null!==t){const r=t.type;if(3&r)return pr(t,e);if(4&r)return ny(-1,e[t.index]);if(8&r){const o=t.child;if(null!==o)return eu(e,o);{const a=e[t.index];return $i(a)?ny(-1,a):Wt(a)}}if(128&r)return eu(e,t.next);if(32&r)return X_(t,e)()||Wt(e[t.index]);{const o=ty(e,t);return null!==o?Array.isArray(o)?o[0]:eu(Ts(e[xr]),o):eu(e,t.next)}}return null}function ty(e,t){return null!==t?e[xr][Cr].projection[t.projection]:null}function ny(e,t){const r=hr+e+1;if(r<t.length){const o=t[r],a=o[Je].firstChild;if(null!==a)return eu(o,a)}return t[_o]}function tm(e,t,r,o,a,l,g){for(;null!=r;){if(128===r.type){r=r.next;continue}const E=o[r.index],T=r.type;if(g&&0===t&&(E&&xi(Wt(E),o),r.flags|=2),32&~r.flags)if(8&T)tm(e,t,r.child,o,a,l,!1),Nl(t,e,a,E,l);else if(32&T){const V=X_(r,o);let $;for(;$=V();)Nl(t,e,a,$,l);Nl(t,e,a,E,l)}else 16&T?BI(e,t,o,r,a,l):Nl(t,e,a,E,l);r=g?r.projectionNext:r.next}}function Gf(e,t,r,o,a,l){tm(r,o,e.firstChild,t,a,l,!1)}function BI(e,t,r,o,a,l){const g=r[xr],T=g[Cr].projection[o.projection];if(Array.isArray(T))for(let V=0;V<T.length;V++)Nl(t,e,a,T[V],l);else{let V=T;const $=g[er];Nu(o)&&(V.flags|=128),tm(e,t,V,$,a,l,!0)}}function HI(e,t,r){""===r?e.removeAttribute(t,"class"):e.setAttribute(t,"class",r)}function zI(e,t,r){const{mergedAttrs:o,classes:a,styles:l}=r;null!==o&&_s(e,t,o),null!==a&&HI(e,t,a),null!==l&&function cC(e,t,r){e.setAttribute(t,"style",r)}(e,t,l)}const Ln={};function GI(e=1){WI(Wn(),He(),Ri()+e,!1)}function WI(e,t,r,o){if(!o)if(3&~t[Ft]){const l=e.preOrderHooks;null!==l&&gd(t,l,0,r)}else{const l=e.preOrderCheckHooks;null!==l&&cl(t,l,r)}Pa(r)}function Xd(e,t=An.Default){const r=He();return null===r?Br(e,t):yd(Xn(),r,le(e),t)}function qI(e,t,r,o,a,l){const g=de(null);try{let E=null;a&Vi.SignalBased&&(E=t[o][Le]),null!==E&&void 0!==E.transformFn&&(l=E.transformFn(l)),a&Vi.HasDecoratorInputTransform&&(l=e.inputTransforms[o].call(t,l)),null!==e.setInput?e.setInput(t,E,l,r,o):Zu(t,E,o,l)}finally{de(g)}}function Wf(e,t,r,o,a,l,g,E,T,V,$){const X=t.blueprint.slice();return X[en]=a,X[Ft]=204|o,(null!==V||e&&2048&e[Ft])&&(X[Ft]|=2048),Jl(X),X[er]=X[ia]=e,X[$n]=r,X[Si]=g||e&&e[Si],X[an]=E||e&&e[an],X[wr]=T||e&&e[wr]||null,X[Cr]=l,X[Aa]=function d_(){return wg++}(),X[Nr]=$,X[pc]=V,X[xr]=2==t.type?e[xr]:X,X}function kl(e,t,r,o,a){let l=e.data[t];if(null===l)l=function iy(e,t,r,o,a){const l=el(),g=od(),T=e.data[t]=function QI(e,t,r,o,a,l){let g=t?t.injectorIndex:-1,E=0;return function Ds(){return null!==vn.skipHydrationRootTNode}()&&(E|=128),{type:r,index:o,insertBeforeIndex:null,injectorIndex:g,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:E,providerIndexes:0,value:a,attrs:l,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,g?l:l&&l.parent,r,t,o,a);return null===e.firstChild&&(e.firstChild=T),null!==l&&(g?null==l.child&&null!==T.parent&&(l.child=T):null===l.next&&(l.next=T,T.prev=l)),T}(e,t,r,o,a),function Qp(){return vn.lFrame.inI18n}()&&(l.flags|=32);else if(64&l.type){l.type=r,l.value=o,l.attrs=a;const g=function wc(){const e=vn.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}();l.injectorIndex=null===g?-1:g.injectorIndex}return bs(l,!0),l}function qf(e,t,r,o){if(0===r)return-1;const a=t.length;for(let l=0;l<r;l++)t.push(o),e.blueprint.push(o),e.data.push(null);return a}function KI(e,t,r,o,a){const l=Ri(),g=2&o;try{Pa(-1),g&&t.length>Rt&&WI(e,t,Rt,!1),st(g?2:0,a),r(o,a)}finally{Pa(l),st(g?3:1,a)}}function oy(e,t,r){if(Ka(t)){const o=de(null);try{const l=t.directiveEnd;for(let g=t.directiveStart;g<l;g++){const E=e.data[g];E.contentQueries&&E.contentQueries(1,r[g],g)}}finally{de(o)}}}function sy(e,t,r){rd()&&(function ZI(e,t,r,o){const a=r.directiveStart,l=r.directiveEnd;ws(r)&&function SC(e,t,r){const o=pr(t,e),a=cy(r);let g=16;r.signals?g=4096:r.onPush&&(g=64);const E=nm(e,Wf(e,a,null,g,o,t,null,e[Si].rendererFactory.createRenderer(o,r),null,null,null));e[t.index]=E}(t,r,e.data[a+r.componentOffset]),e.firstCreatePass||Qr(r,t),xi(o,t);const g=r.initialInputs;for(let E=a;E<l;E++){const T=e.data[E],V=Oa(t,e,E,r);xi(V,t),null!==g&&RC(0,E-a,V,T,0,g),Hi(T)&&(mi(r.index,t)[$n]=Oa(t,e,E,r))}}(e,t,r,pr(r,t)),!(64&~r.flags)&&JI(e,t,r))}function ay(e,t,r=pr){const o=t.localNames;if(null!==o){let a=t.index+1;for(let l=0;l<o.length;l+=2){const g=o[l+1],E=-1===g?r(t,e):e[g];e[a++]=E}}}function cy(e){const t=e.tView;return null===t||t.incompleteFirstPass?e.tView=uy(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function uy(e,t,r,o,a,l,g,E,T,V,$){const X=Rt+o,ae=X+a,ge=function dC(e,t){const r=[];for(let o=0;o<t;o++)r.push(o<e?null:Ln);return r}(X,ae),Te="function"==typeof V?V():V;return ge[Je]={type:e,blueprint:ge,template:r,queries:null,viewQuery:E,declTNode:t,data:ge.slice().fill(null,X),bindingStartIndex:X,expandoStartIndex:ae,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof l?l():l,pipeRegistry:"function"==typeof g?g():g,firstChild:null,schemas:T,consts:Te,incompleteFirstPass:!1,ssrId:$}}let ly=()=>null;function XI(e,t,r,o,a){for(let l in t){if(!t.hasOwnProperty(l))continue;const g=t[l];if(void 0===g)continue;o??={};let E,T=Vi.None;Array.isArray(g)?(E=g[0],T=g[1]):E=g;let V=l;if(null!==a){if(!a.hasOwnProperty(l))continue;V=a[l]}0===e?YI(o,r,V,E,T):YI(o,r,V,E)}return o}function YI(e,t,r,o,a){let l;e.hasOwnProperty(r)?(l=e[r]).push(t,o):l=e[r]=[t,o],void 0!==a&&l.push(a)}function Ws(e,t,r,o,a,l,g,E){const T=pr(t,r);let $,V=t.inputs;!E&&null!=V&&($=V[o])?(_y(e,r,$,o,a),ws(t)&&function vC(e,t){const r=mi(t,e);16&r[Ft]||(r[Ft]|=64)}(r,t.index)):3&t.type&&(o=function yC(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(o),a=null!=g?g(a,t.value||"",o):a,l.setProperty(T,o,a))}function dy(e,t,r,o){if(rd()){const a=null===o?null:{"":-1},l=function eE(e,t){const r=e.directiveRegistry;let o=null,a=null;if(r)for(let l=0;l<r.length;l++){const g=r[l];if($a(t,g.selectors,!1))if(o||(o=[]),Hi(g))if(null!==g.findHostDirectiveDefs){const E=[];a=a||new Map,g.findHostDirectiveDefs(g,E,a),o.unshift(...E,g),fy(e,t,E.length)}else o.unshift(g),fy(e,t,0);else a=a||new Map,g.findHostDirectiveDefs?.(g,o,a),o.push(g)}return null===o?null:[o,a]}(e,r);let g,E;null===l?g=E=null:[g,E]=l,null!==g&&hy(e,t,r,g,a,E),a&&function TC(e,t,r){if(t){const o=e.localNames=[];for(let a=0;a<t.length;a+=2){const l=r[t[a+1]];if(null==l)throw new ut(-301,!1);o.push(t[a],l)}}}(r,o,a)}r.mergedAttrs=zo(r.mergedAttrs,r.attrs)}function hy(e,t,r,o,a,l){for(let V=0;V<o.length;V++)Na(Qr(r,t),e,o[V].type);!function bC(e,t,r){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+r,e.providerIndexes=t}(r,e.data.length,o.length);for(let V=0;V<o.length;V++){const $=o[V];$.providersResolver&&$.providersResolver($)}let g=!1,E=!1,T=qf(e,t,o.length,null);for(let V=0;V<o.length;V++){const $=o[V];r.mergedAttrs=zo(r.mergedAttrs,$.hostAttrs),AC(e,r,t,T,$),DC(T,$,a),null!==$.contentQueries&&(r.flags|=4),(null!==$.hostBindings||null!==$.hostAttrs||0!==$.hostVars)&&(r.flags|=64);const X=$.type.prototype;!g&&(X.ngOnChanges||X.ngOnInit||X.ngDoCheck)&&((e.preOrderHooks??=[]).push(r.index),g=!0),!E&&(X.ngOnChanges||X.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(r.index),E=!0),T++}!function _C(e,t,r){const a=t.directiveEnd,l=e.data,g=t.attrs,E=[];let T=null,V=null;for(let $=t.directiveStart;$<a;$++){const X=l[$],ae=r?r.get(X):null,Te=ae?ae.outputs:null;T=XI(0,X.inputs,$,T,ae?ae.inputs:null),V=XI(1,X.outputs,$,V,Te);const Ze=null===T||null===g||Li(t)?null:MC(T,$,g);E.push(Ze)}null!==T&&(T.hasOwnProperty("class")&&(t.flags|=8),T.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=E,t.inputs=T,t.outputs=V}(e,r,l)}function JI(e,t,r){const o=r.directiveStart,a=r.directiveEnd,l=r.index,g=function Yp(){return vn.lFrame.currentDirectiveIndex}();try{Pa(l);for(let E=o;E<a;E++){const T=e.data[E],V=t[E];ud(E),(null!==T.hostBindings||0!==T.hostVars||null!==T.hostAttrs)&&wC(T,V)}}finally{Pa(-1),ud(g)}}function wC(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function fy(e,t,r){t.componentOffset=r,(e.components??=[]).push(t.index)}function DC(e,t,r){if(r){if(t.exportAs)for(let o=0;o<t.exportAs.length;o++)r[t.exportAs[o]]=e;Hi(t)&&(r[""]=e)}}function AC(e,t,r,o,a){e.data[o]=a;const l=a.factory||(a.factory=gi(a.type)),g=new Ja(l,Hi(a),Xd);e.blueprint[o]=g,r[o]=g,function EC(e,t,r,o,a){const l=a.hostBindings;if(l){let g=e.hostBindingOpCodes;null===g&&(g=e.hostBindingOpCodes=[]);const E=~t.index;(function CC(e){let t=e.length;for(;t>0;){const r=e[--t];if("number"==typeof r&&r<0)return r}return 0})(g)!=E&&g.push(E),g.push(r,o,l)}}(e,t,o,qf(e,r,a.hostVars,Ln),a)}function Rc(e,t,r,o,a,l){const g=pr(e,t);!function py(e,t,r,o,a,l,g){if(null==l)e.removeAttribute(t,a,r);else{const E=null==g?pt(l):g(l,o||"",a);e.setAttribute(t,a,E,r)}}(t[an],g,l,e.value,r,o,a)}function RC(e,t,r,o,a,l){const g=l[t];if(null!==g)for(let E=0;E<g.length;)qI(o,r,g[E++],g[E++],g[E++],g[E++])}function MC(e,t,r){let o=null,a=0;for(;a<r.length;){const l=r[a];if(0!==l)if(5!==l){if("number"==typeof l)break;if(e.hasOwnProperty(l)){null===o&&(o=[]);const g=e[l];for(let E=0;E<g.length;E+=3)if(g[E]===t){o.push(l,g[E+1],g[E+2],r[a+1]);break}}a+=2}else a+=2;else a+=4}return o}function gy(e,t,r,o){return[e,!0,0,t,null,o,null,r,null,null]}function tE(e,t){const r=e.contentQueries;if(null!==r){const o=de(null);try{for(let a=0;a<r.length;a+=2){const g=r[a+1];if(-1!==g){const E=e.data[g];nl(r[a]),E.contentQueries(2,t[g],g)}}}finally{de(o)}}}function nm(e,t){return e[qa]?e[hc][Kr]=t:e[qa]=t,e[hc]=t,t}function rm(e,t,r){nl(0);const o=de(null);try{t(e,r)}finally{de(o)}}function nE(e){return e[vi]??=[]}function rE(e){return e.cleanup??=[]}function im(e,t){const r=e[wr],o=r?r.get(tc,null):null;o&&o.handleError(t)}function _y(e,t,r,o,a){for(let l=0;l<r.length;){const g=r[l++],E=r[l++],T=r[l++];qI(e.data[g],t[g],o,E,T,a)}}function tu(e,t,r){const o=mr(t,e);!function RI(e,t,r){e.setValue(t,r)}(e[an],o,r)}function iE(e,t){const r=mi(t,e),o=r[Je];!function oE(e,t){for(let r=t.length;r<e.blueprint.length;r++)t.push(e.blueprint[r])}(o,r);const a=r[en];null!==a&&null===r[Nr]&&(r[Nr]=If(a,r[wr])),yy(o,r,r[$n])}function yy(e,t,r){wu(t);try{const o=e.viewQuery;null!==o&&rm(1,o,r);const a=e.template;null!==a&&KI(e,t,a,1,r),e.firstCreatePass&&(e.firstCreatePass=!1),t[js]?.finishViewCreation(e),e.staticContentQueries&&tE(e,t),e.staticViewQueries&&rm(2,e.viewQuery,r);const l=e.components;null!==l&&function PC(e,t){for(let r=0;r<t.length;r++)iE(e,t[r])}(t,l)}catch(o){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),o}finally{t[Ft]&=-5,ld()}}function Fl(e,t){return!t||null===t.firstChild||Nu(e)}function Jd(e,t,r,o,a=!1){for(;null!==r;){if(128===r.type){r=a?r.projectionNext:r.next;continue}const l=t[r.index];null!==l&&o.push(Wt(l)),$i(l)&&aE(l,o);const g=r.type;if(8&g)Jd(e,t,r.child,o);else if(32&g){const E=X_(r,t);let T;for(;T=E();)o.push(T)}else if(16&g){const E=ty(t,r);if(Array.isArray(E))o.push(...E);else{const T=Ts(t[xr]);Jd(T[Je],T,E,o,!0)}}r=a?r.projectionNext:r.next}return o}function aE(e,t){for(let r=hr;r<e.length;r++){const o=e[r],a=o[Je].firstChild;null!==a&&Jd(o[Je],o,a,t)}e[_o]!==e[en]&&t.push(e[_o])}let Iy=[];const i={...he,consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{Ec(e.lView)},consumerOnSignalRead(){this.lView[Ro]=this}},u={...he,consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{let t=Ts(e.lView);for(;t&&!h(t[Je]);)t=Ts(t);t&&mu(t)},consumerOnSignalRead(){this.lView[Ro]=this}};function h(e){return 2!==e.type}const y=100;function D(e,t=!0,r=0){const o=e[Si],a=o.rendererFactory;a.begin?.();try{!function x(e,t){const r=cd();try{Bh(!0),gt(e,t);let o=0;for(;Ya(e);){if(o===y)throw new ut(103,!1);o++,gt(e,1)}}finally{Bh(r)}}(e,r)}catch(g){throw t&&im(e,g),g}finally{a.end?.(),o.inlineEffectRunner?.flush()}}function G(e,t,r,o){const a=t[Ft];if(!(256&~a))return;t[Si].inlineEffectRunner?.flush(),wu(t);let E=!0,T=null,V=null;h(e)?(V=function xC(e){return e[Ro]??function c(e){const t=Iy.pop()??Object.create(i);return t.lView=e,t}(e)}(t),T=nn(V)):null===function $e(){return J}()?(E=!1,V=function s(e){const t=e[Ro]??Object.create(u);return t.lView=e,t}(t),T=nn(V)):t[Ro]&&(Xt(t[Ro]),t[Ro]=null);try{Jl(t),function Hc(e){return vn.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==r&&KI(e,t,r,2,o);const $=!(3&~a);if($){const ge=e.preOrderCheckHooks;null!==ge&&cl(t,ge,null)}else{const ge=e.preOrderHooks;null!==ge&&gd(t,ge,0,null),Wc(t,0)}if(function pe(e){for(let t=y_(e);null!==t;t=df(t)){if(!(t[Ft]&mc.HasTransplantedViews))continue;const r=t[Ii];for(let o=0;o<r.length;o++)mu(r[o])}}(t),te(t,0),null!==e.contentQueries&&tE(e,t),$){const ge=e.contentCheckHooks;null!==ge&&cl(t,ge)}else{const ge=e.contentHooks;null!==ge&&gd(t,ge,1),Wc(t,1)}!function lC(e,t){const r=e.hostBindingOpCodes;if(null!==r)try{for(let o=0;o<r.length;o++){const a=r[o];if(a<0)Pa(~a);else{const l=a,g=r[++o],E=r[++o];Xp(g,l),E(2,t[l])}}}finally{Pa(-1)}}(e,t);const X=e.components;null!==X&&ht(t,X,0);const ae=e.viewQuery;if(null!==ae&&rm(2,ae,o),$){const ge=e.viewCheckHooks;null!==ge&&cl(t,ge)}else{const ge=e.viewHooks;null!==ge&&gd(t,ge,2),Wc(t,2)}if(!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),t[gc]){for(const ge of t[gc])ge();t[gc]=null}t[Ft]&=-73}catch($){throw Ec(t),$}finally{null!==V&&(Bt(V,T),E&&function n(e){e.lView[Ro]!==e&&(e.lView=null,Iy.push(e))}(V)),ld()}}function te(e,t){for(let r=y_(e);null!==r;r=df(r))for(let o=hr;o<r.length;o++)tt(r[o],t)}function Ve(e,t,r){tt(mi(t,e),r)}function tt(e,t){Zl(e)&&gt(e,t)}function gt(e,t){const o=e[Je],a=e[Ft],l=e[Ro];let g=!!(0===t&&16&a);if(g||=!!(64&a&&0===t),g||=!!(1024&a),g||=!(!l?.dirty||!xn(l)),g||=!1,l&&(l.dirty=!1),e[Ft]&=-9217,g)G(o,e,o.template,e[$n]);else if(8192&a){te(e,1);const E=o.components;null!==E&&ht(e,E,1)}}function ht(e,t,r){for(let o=0;o<t.length;o++)Ve(e,t[o],r)}function zt(e,t){const r=cd()?64:1088;for(e[Si].changeDetectionScheduler?.notify(t);e;){e[Ft]|=r;const o=Ts(e);if(Hs(e)&&!o)return e;e=o}return null}class tn{get rootNodes(){const t=this._lView,r=t[Je];return Jd(r,t,r.firstChild,[])}constructor(t,r,o=!0){this._lView=t,this._cdRefInjectingView=r,this.notifyErrorHandler=o,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[$n]}set context(t){this._lView[$n]=t}get destroyed(){return!(256&~this._lView[Ft])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[er];if($i(t)){const r=t[8],o=r?r.indexOf(this):-1;o>-1&&(Hf(t,o),Di(r,o))}this._attachedToViewContainer=!1}Jg(this._lView[Je],this._lView)}onDestroy(t){Za(this._lView,t)}markForCheck(){zt(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Ft]&=-129}reattach(){$c(this._lView),this._lView[Ft]|=128}detectChanges(){this._lView[Ft]|=1024,D(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ut(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;const t=Hs(this._lView),r=this._lView[Zi];null!==r&&!t&&Y_(r,this._lView),PI(this._lView[Je],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new ut(902,!1);this._appRef=t;const r=Hs(this._lView),o=this._lView[Zi];null!==o&&!r&&NI(o,this._lView),$c(this._lView)}}let Kt=(()=>{class e{static{this.__NG_ELEMENT_ID__=Yn}}return e})();const kn=Kt,Dr=class extends kn{constructor(t,r,o){super(),this._declarationLView=t,this._declarationTContainer=r,this.elementRef=o}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,o){const a=function Yd(e,t,r,o){const a=de(null);try{const l=t.tView,T=Wf(e,l,r,4096&e[Ft]?4096:16,null,t,null,null,o?.injector??null,o?.embeddedViewInjector??null,o?.dehydratedView??null);T[Zi]=e[t.index];const $=e[js];return null!==$&&(T[js]=$.createEmbeddedView(l)),yy(l,T,r),T}finally{de(a)}}(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:o});return new tn(a)}};function Yn(){return we(Xn(),He())}function we(e,t){return 4&e.type?new Dr(t,e,_l(e,t)):null}class qu{}const $l=new Ot("",{providedIn:"root",factory:()=>!1}),Ly=new Ot(""),cp=new Ot("");class Uy{}class jy{}class up{resolveComponentFactory(t){throw function Ku(e){const t=Error(`No component factory found for ${ln(e)}.`);return t.ngComponent=e,t}(t)}}class _h{static{this.NULL=new up}}class $r{}let lp=(()=>{class e{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>function yh(){const e=He(),r=mi(Xn().index,e);return(ei(r)?r:e)[an]}()}}return e})(),vh=(()=>{class e{static{this.\u0275prov=Gn({token:e,providedIn:"root",factory:()=>null})}}return e})();function Nc(e){return!!ci(e)}function hp(e,t,r){let o=r?e.styles:null,a=r?e.classes:null,l=0;if(null!==t)for(let g=0;g<t.length;g++){const E=t[g];"number"==typeof E?l=E:1==l?a=jr(a,E):2==l&&(o=jr(o,E+": "+t[++g]+";"))}r?e.styles=o:e.stylesWithoutHost=o,r?e.classes=a:e.classesWithoutHost=a}class $y extends _h{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const r=wn(t);return new wh(r,this.ngModule)}}function Hy(e,t){const r=[];for(const o in e){if(!e.hasOwnProperty(o))continue;const a=e[o];if(void 0===a)continue;const l=Array.isArray(a),g=l?a[0]:a;r.push(t?{propName:g,templateName:o,isSignal:!!((l?a[1]:Vi.None)&Vi.SignalBased)}:{propName:g,templateName:o})}return r}class wh extends jy{get inputs(){const t=this.componentDef,r=t.inputTransforms,o=Hy(t.inputs,!0);if(null!==r)for(const a of o)r.hasOwnProperty(a.propName)&&(a.transform=r[a.propName]);return o}get outputs(){return Hy(this.componentDef.outputs,!1)}constructor(t,r){super(),this.componentDef=t,this.ngModule=r,this.componentType=t.type,this.selector=function us(e){return e.map(cs).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!r}create(t,r,o,a){const l=de(null);try{let g=(a=a||this.ngModule)instanceof Yi?a:a?.injector;g&&null!==this.componentDef.getStandaloneInjector&&(g=this.componentDef.getStandaloneInjector(g)||g);const E=g?new d(t,g):t,T=E.get($r,null);if(null===T)throw new ut(407,!1);const X={rendererFactory:T,sanitizer:E.get(vh,null),inlineEffectRunner:null,changeDetectionScheduler:E.get(qu,null)},ae=T.createRenderer(null,this.componentDef),ge=this.componentDef.selectors[0][0]||"div",Te=o?function hC(e,t,r,o){const l=o.get(Fr,!1)||r===Qi.ShadowDom,g=e.selectRootElement(t,l);return function fC(e){ly(e)}(g),g}(ae,o,this.componentDef.encapsulation,E):$f(ae,ge,function su(e){const t=e.toLowerCase();return"svg"===t?"svg":"math"===t?"math":null}(ge));let Ze=512;this.componentDef.signals?Ze|=4096:this.componentDef.onPush||(Ze|=16);let vt=null;null!==Te&&(vt=If(Te,E,!0));const St=uy(0,null,null,1,0,null,null,null,null,null,null),Ye=Wf(null,St,null,Ze,null,null,X,ae,E,null,vt);wu(Ye);let Pn,gr,Yr=null;try{const oo=this.componentDef;let fa,Hp=null;oo.findHostDirectiveDefs?(fa=[],Hp=new Map,oo.findHostDirectiveDefs(oo,fa,Hp),fa.push(oo)):fa=[oo];const Pb=function Th(e,t){const r=e[Je],o=Rt;return e[o]=t,kl(r,o,2,"#host",null)}(Ye,Te);Yr=function fp(e,t,r,o,a,l,g){const E=a[Je];!function zy(e,t,r,o){for(const a of e)t.mergedAttrs=zo(t.mergedAttrs,a.hostAttrs);null!==t.mergedAttrs&&(hp(t,t.mergedAttrs,!0),null!==r&&zI(o,r,t))}(o,e,t,g);let T=null;null!==t&&(T=If(t,a[wr]));const V=l.rendererFactory.createRenderer(t,r);let $=16;r.signals?$=4096:r.onPush&&($=64);const X=Wf(a,cy(r),null,$,a[e.index],e,l,V,null,null,T);return E.firstCreatePass&&fy(E,e,o.length-1),nm(a,X),a[e.index]=X}(Pb,Te,oo,fa,Ye,X,ae),gr=kr(St,Rt),Te&&function bh(e,t,r,o){if(o)_s(e,r,["ng-version","18.2.13"]);else{const{attrs:a,classes:l}=function Ha(e){const t=[],r=[];let o=1,a=2;for(;o<e.length;){let l=e[o];if("string"==typeof l)2===a?""!==l&&t.push(l,e[++o]):8===a&&r.push(l);else{if(!Gr(a))break;a=l}o++}return{attrs:t,classes:r}}(t.selectors[0]);a&&_s(e,r,a),l&&l.length>0&&HI(e,r,l.join(" "))}}(ae,oo,Te,o),void 0!==r&&function Gy(e,t,r){const o=e.projection=[];for(let a=0;a<t.length;a++){const l=r[a];o.push(null!=l?Array.from(l):null)}}(gr,this.ngContentSelectors,r),Pn=function Dh(e,t,r,o,a,l){const g=Xn(),E=a[Je],T=pr(g,a);hy(E,a,g,r,null,o);for(let $=0;$<r.length;$++)xi(Oa(a,E,g.directiveStart+$,g),a);JI(E,a,g),T&&xi(T,a);const V=Oa(a,E,g.directiveStart+g.componentOffset,g);if(e[$n]=a[$n]=V,null!==l)for(const $ of l)$(V,t);return oy(E,g,a),V}(Yr,oo,fa,Hp,Ye,[Im]),yy(St,Ye,null)}catch(oo){throw null!==Yr&&Tg(Yr),Tg(Ye),oo}finally{ld()}return new yE(this.componentType,Pn,_l(gr,Ye),Ye,gr)}finally{de(l)}}}class yE extends Uy{constructor(t,r,o,a,l){super(),this.location=o,this._rootLView=a,this._tNode=l,this.previousInputValues=null,this.instance=r,this.hostView=this.changeDetectorRef=new tn(a,void 0,!1),this.componentType=t}setInput(t,r){const o=this._tNode.inputs;let a;if(null!==o&&(a=o[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),r))return;const l=this._rootLView;_y(l[Je],l,a,t,r),this.previousInputValues.set(t,r),zt(mi(this._tNode.index,l),1)}}get injector(){return new Pi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}function Im(){const e=Xn();bu(He()[Je],e)}let ti=(()=>{class e{static{this.__NG_ELEMENT_ID__=vE}}return e})();function vE(){return Ah(Xn(),He())}const IE=ti,Em=class extends IE{constructor(t,r,o){super(),this._lContainer=t,this._hostTNode=r,this._hostLView=o}get element(){return _l(this._hostTNode,this._hostLView)}get injector(){return new Pi(this._hostTNode,this._hostLView)}get parentInjector(){const t=ec(this._hostTNode,this._hostLView);if(_(t)){const r=Q(t,this._hostLView),o=b(t);return new Pi(r[Je].data[o+8],r)}return new Pi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const r=Cm(this._lContainer);return null!==r&&r[t]||null}get length(){return this._lContainer.length-hr}createEmbeddedView(t,r,o){let a,l;"number"==typeof o?a=o:null!=o&&(a=o.index,l=o.injector);const E=t.createEmbeddedViewImpl(r||{},l,null);return this.insertImpl(E,a,Fl(this._hostTNode,null)),E}createComponent(t,r,o,a,l){const g=t&&!function ee(e){return"function"==typeof e}(t);let E;if(g)E=r;else{const Te=r||{};E=Te.index,o=Te.injector,a=Te.projectableNodes,l=Te.environmentInjector||Te.ngModuleRef}const T=g?t:new wh(wn(t)),V=o||this.parentInjector;if(!l&&null==T.ngModule){const Ze=(g?V:this.parentInjector).get(Yi,null);Ze&&(l=Ze)}wn(T.componentType??{});const ge=T.create(V,a,null,l);return this.insertImpl(ge.hostView,E,Fl(this._hostTNode,null)),ge}insert(t,r){return this.insertImpl(t,r,!0)}insertImpl(t,r,o){const a=t._lView;if(function e_(e){return $i(e[er])}(a)){const E=this.indexOf(t);if(-1!==E)this.detach(E);else{const T=a[er],V=new Em(T,T[Cr],T[er]);V.detach(V.indexOf(t))}}const l=this._adjustIndex(r),g=this._lContainer;return function Zd(e,t,r,o=!0){const a=t[Je];if(function xI(e,t,r,o){const a=hr+o,l=r.length;o>0&&(r[a-1][Kr]=t),o<l-hr?(t[Kr]=r[a],rr(r,hr+o,t)):(r.push(t),t[Kr]=null),t[er]=r;const g=t[Zi];null!==g&&r!==g&&NI(g,t);const E=t[js];null!==E&&E.insertView(e),$c(t),t[Ft]|=128}(a,t,e,r),o){const g=ny(r,e),E=t[an],T=zf(E,e[_o]);null!==T&&function MI(e,t,r,o,a,l){o[en]=a,o[Cr]=t,Gf(e,o,r,1,a,l)}(a,e[Cr],E,t,T,g)}const l=t[Nr];null!==l&&null!==l.firstChild&&(l.firstChild=null)}(g,a,l,o),t.attachToViewContainerRef(),rr(pp(g),l,t),t}move(t,r){return this.insert(t,r)}indexOf(t){const r=Cm(this._lContainer);return null!==r?r.indexOf(t):-1}remove(t){const r=this._adjustIndex(t,-1),o=Hf(this._lContainer,r);o&&(Di(pp(this._lContainer),r),Jg(o[Je],o))}detach(t){const r=this._adjustIndex(t,-1),o=Hf(this._lContainer,r);return o&&null!=Di(pp(this._lContainer),r)?new tn(o):null}_adjustIndex(t,r=0){return t??this.length+r}};function Cm(e){return e[8]}function pp(e){return e[8]||(e[8]=[])}function Ah(e,t){let r;const o=t[e.index];return $i(o)?r=o:(r=gy(o,t,null,e),t[e.index]=r,nm(t,r)),ac(r,t,e,o),new Em(r,e,t)}let ac=function zl(e,t,r,o){if(e[_o])return;let a;a=8&r.type?Wt(o):function Wy(e,t){const r=e[an],o=r.createComment(""),a=pr(t,e);return Ol(r,zf(r,a),o,function ey(e,t){return e.nextSibling(t)}(r,a),!1),o}(t,r),e[_o]=a},gp=()=>!1;class _p{constructor(t){this.queryList=t,this.matches=null}clone(){return new _p(this.queryList)}setDirty(){this.queryList.setDirty()}}class Gl{constructor(t=[]){this.queries=t}createEmbeddedView(t){const r=t.queries;if(null!==r){const o=null!==t.contentQueries?t.contentQueries[0]:r.length,a=[];for(let l=0;l<o;l++){const g=r.getByIndex(l);a.push(this.queries[g.indexInDeclarationView].clone())}return new Gl(a)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}finishViewCreation(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let r=0;r<this.queries.length;r++)null!==ql(t,r).matches&&this.queries[r].setDirty()}}class Qy{constructor(t,r,o=null){this.flags=r,this.read=o,this.predicate="string"==typeof t?function Zy(e){return e.split(",").map(t=>t.trim())}(t):t}}class yp{constructor(t=[]){this.queries=t}elementStart(t,r){for(let o=0;o<this.queries.length;o++)this.queries[o].elementStart(t,r)}elementEnd(t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementEnd(t)}embeddedTView(t){let r=null;for(let o=0;o<this.length;o++){const a=null!==r?r.length:0,l=this.getByIndex(o).embeddedTView(t,a);l&&(l.indexInDeclarationView=o,null!==r?r.push(l):r=[l])}return null!==r?new yp(r):null}template(t,r){for(let o=0;o<this.queries.length;o++)this.queries[o].template(t,r)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class Qu{constructor(t,r=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=r}elementStart(t,r){this.isApplyingToNode(r)&&this.matchTNode(t,r)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,r){this.elementStart(t,r)}embeddedTView(t,r){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,r),new Qu(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1&~this.metadata.flags){const r=this._declarationNodeIndex;let o=t.parent;for(;null!==o&&8&o.type&&o.index!==r;)o=o.parent;return r===(null!==o?o.index:-1)}return this._appliesToNextNode}matchTNode(t,r){const o=this.metadata.predicate;if(Array.isArray(o))for(let a=0;a<o.length;a++){const l=o[a];this.matchTNodeWithReadOption(t,r,Xy(r,l)),this.matchTNodeWithReadOption(t,r,gl(r,t,l,!1,!1))}else o===Kt?4&r.type&&this.matchTNodeWithReadOption(t,r,-1):this.matchTNodeWithReadOption(t,r,gl(r,t,o,!1,!1))}matchTNodeWithReadOption(t,r,o){if(null!==o){const a=this.metadata.read;if(null!==a)if(a===Pu||a===ti||a===Kt&&4&r.type)this.addMatch(r.index,-2);else{const l=gl(r,t,a,!1,!1);null!==l&&this.addMatch(r.index,l)}else this.addMatch(r.index,o)}}addMatch(t,r){null===this.matches?this.matches=[t,r]:this.matches.push(t,r)}}function Xy(e,t){const r=e.localNames;if(null!==r)for(let o=0;o<r.length;o+=2)if(r[o]===t)return r[o+1];return null}function Tm(e,t,r,o){return-1===r?function Yy(e,t){return 11&e.type?_l(e,t):4&e.type?we(e,t):null}(t,e):-2===r?function Dm(e,t,r){return r===Pu?_l(t,e):r===Kt?we(t,e):r===ti?Ah(t,e):void 0}(e,t,o):Oa(e,e[Je],r,t)}function bm(e,t,r,o){const a=t[js].queries[o];if(null===a.matches){const l=e.data,g=r.matches,E=[];for(let T=0;null!==g&&T<g.length;T+=2){const V=g[T];E.push(V<0?null:Tm(t,l[V],g[T+1],r.metadata.read))}a.matches=E}return a.matches}function Wl(e,t,r,o){const a=e.queries.getByIndex(r),l=a.matches;if(null!==l){const g=bm(e,t,a,r);for(let E=0;E<l.length;E+=2){const T=l[E];if(T>0)o.push(g[E/2]);else{const V=l[E+1],$=t[-T];for(let X=hr;X<$.length;X++){const ae=$[X];ae[Zi]===ae[er]&&Wl(ae[Je],ae,V,o)}if(null!==$[Ii]){const X=$[Ii];for(let ae=0;ae<X.length;ae++){const ge=X[ae];Wl(ge[Je],ge,V,o)}}}}}return o}function Am(e,t,r){const o=new Dd(!(4&~r));return function mC(e,t,r,o){const a=nE(t);a.push(r),e.firstCreatePass&&rE(e).push(o,a.length-1)}(e,t,o,o.destroy),(t[js]??=new Gl).queries.push(new _p(o))-1}function Rm(e,t,r){null===e.queries&&(e.queries=new yp),e.queries.track(new Qu(t,r))}function ql(e,t){return e.queries.getByIndex(t)}function Ms(e,t){const r=e[Je],o=ql(r,t);return o.crossesNgTemplate?Wl(r,e,t,[]):bm(r,e,o,t)}const Mm=new Set;function Qo(e){Mm.has(e)||(Mm.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}function H(e,t){Qo("NgSignals");const r=function Dt(e){const t=Object.create(Oe);t.value=e;const r=()=>(_e(t),t.value);return r[Le]=t,r}(e),o=r[Le];return t?.equal&&(o.equal=t.equal),r.set=a=>W(o,a),r.update=a=>function K(e,t){Tt()||cr(),W(e,t(e.value))}(o,a),r.asReadonly=Y.bind(r),r}function Y(){const e=this[Le];if(void 0===e.readonlyFn){const t=()=>this();t[Le]=e,e.readonlyFn=t}return e.readonlyFn}function xe(e){return function Xu(e){return"function"==typeof e&&void 0!==e[Le]}(e)&&"function"==typeof e.set}function EE(e){let t=function BC(e){return Object.getPrototypeOf(e.prototype).constructor}(e.type),r=!0;const o=[e];for(;t;){let a;if(Hi(e))a=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new ut(903,!1);a=t.\u0275dir}if(a){if(r){o.push(a);const g=e;g.inputs=nv(e.inputs),g.inputTransforms=nv(e.inputTransforms),g.declaredInputs=nv(e.declaredInputs),g.outputs=nv(e.outputs);const E=a.hostBindings;E&&Yb(e,E);const T=a.viewQuery,V=a.contentQueries;if(T&&Qb(e,T),V&&Xb(e,V),qb(e,a),ni(e.outputs,a.outputs),Hi(a)&&a.data.animation){const $=e.data;$.animation=($.animation||[]).concat(a.data.animation)}}const l=a.features;if(l)for(let g=0;g<l.length;g++){const E=l[g];E&&E.ngInherit&&E(e),E===EE&&(r=!1)}}t=Object.getPrototypeOf(t)}!function Kb(e){let t=0,r=null;for(let o=e.length-1;o>=0;o--){const a=e[o];a.hostVars=t+=a.hostVars,a.hostAttrs=zo(a.hostAttrs,r=zo(r,a.hostAttrs))}}(o)}function qb(e,t){for(const r in t.inputs){if(!t.inputs.hasOwnProperty(r)||e.inputs.hasOwnProperty(r))continue;const o=t.inputs[r];if(void 0!==o&&(e.inputs[r]=o,e.declaredInputs[r]=t.declaredInputs[r],null!==t.inputTransforms)){const a=Array.isArray(o)?o[0]:o;if(!t.inputTransforms.hasOwnProperty(a))continue;e.inputTransforms??={},e.inputTransforms[a]=t.inputTransforms[a]}}}function nv(e){return e===Fi?{}:e===On?[]:e}function Qb(e,t){const r=e.viewQuery;e.viewQuery=r?(o,a)=>{t(o,a),r(o,a)}:t}function Xb(e,t){const r=e.contentQueries;e.contentQueries=r?(o,a,l)=>{t(o,a,l),r(o,a,l)}:t}function Yb(e,t){const r=e.hostBindings;e.hostBindings=r?(o,a)=>{t(o,a),r(o,a)}:t}function WC(e){const t=e.inputConfig,r={};for(const o in t)if(t.hasOwnProperty(o)){const a=t[o];Array.isArray(a)&&a[3]&&(r[o]=a[3])}e.inputTransforms=r}class Rh{}class qC{}function rA(e,t){return new wE(e,t??null,[])}class wE extends Rh{constructor(t,r,o,a=!0){super(),this.ngModuleType=t,this._parent=r,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new $y(this);const l=ci(t);this._bootstrapComponents=da(l.bootstrap),this._r3Injector=cg(t,r,[{provide:Rh,useValue:this},{provide:_h,useValue:this.componentFactoryResolver},...o],ln(t),new Set(["environment"])),a&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(r=>r()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class TE extends qC{constructor(t){super(),this.moduleType=t}create(t){return new wE(this.moduleType,t,[])}}class KC extends Rh{constructor(t){super(),this.componentFactoryResolver=new $y(this),this.instance=null;const r=new qo([...t.providers,{provide:Rh,useValue:this},{provide:_h,useValue:this.componentFactoryResolver}],t.parent||mo(),t.debugName,new Set(["environment"]));this.injector=r,t.runEnvironmentInitializers&&r.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}}function DE(e,t,r=null){return new KC({providers:e,parent:t,debugName:r,runEnvironmentInitializers:!0}).injector}function rv(e){return!!bE(e)&&(Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e)}function bE(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function no(e,t,r){return!Object.is(e[t],r)&&(e[t]=r,!0)}function Mh(e,t,r,o){const a=no(e,t,r);return no(e,t+1,o)||a}function Om(e,t,r,o,a,l,g,E,T,V){const $=r+Rt,X=t.firstCreatePass?function uA(e,t,r,o,a,l,g,E,T){const V=t.consts,$=kl(t,e,4,g||null,E||null);dy(t,r,$,Io(V,T)),bu(t,$);const X=$.tView=uy(2,$,o,a,l,t.directiveRegistry,t.pipeRegistry,null,t.schemas,V,null);return null!==t.queries&&(t.queries.template(t,$),X.queries=t.queries.embeddedTView($)),$}($,t,e,o,a,l,g,E,T):t.data[$];bs(X,!1);const ae=QC(t,e,X,r);Gc()&&Hu(t,e,ae,X),xi(ae,e);const ge=gy(ae,e,ae,X);return e[$]=ge,nm(e,ge),function qy(e,t,r){return gp(e,t,r)}(ge,X,e),$s(X)&&sy(t,e,X),null!=T&&ay(e,X,V),X}function AE(e,t,r,o,a,l,g,E){const T=He(),V=Wn();return Om(T,V,e,t,r,o,a,Io(V.consts,l),g,E),AE}let QC=function XC(e,t,r,o){return Gs(!0),t[an].createComment("")};var wp=function(e){return e[e.EarlyRead=0]="EarlyRead",e[e.Write=1]="Write",e[e.MixedReadWrite=2]="MixedReadWrite",e[e.Read=3]="Read",e}(wp||{});let nw=(()=>{class e{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=Gn({token:e,providedIn:"root",factory:()=>new e})}}return e})();class Vm{constructor(){this.ngZone=jt(Xr),this.scheduler=jt(qu),this.errorHandler=jt(tc,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[wp.EarlyRead,wp.Write,wp.MixedReadWrite,wp.Read]}execute(){this.executing=!0;for(const t of Vm.PHASES)for(const r of this.sequences)if(!r.erroredOrDestroyed&&r.hooks[t])try{r.pipelinedValue=this.ngZone.runOutsideAngular(()=>r.hooks[t](r.pipelinedValue))}catch(o){r.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(const t of this.sequences)t.afterRun(),t.once&&(this.sequences.delete(t),t.destroy());for(const t of this.deferredRegistrations)this.sequences.add(t);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(t){this.executing?this.deferredRegistrations.add(t):(this.sequences.add(t),this.scheduler.notify(6))}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}static{this.\u0275prov=Gn({token:Vm,providedIn:"root",factory:()=>new Vm})}}function UE(e,t,r,o){const a=He();return no(a,As(),t)&&(Wn(),Rc(Tr(),a,e,t,r,o)),UE}function xp(e,t,r,o,a,l,g,E){const V=function iv(e,t,r,o,a){const l=Mh(e,t,r,o);return no(e,t+2,a)||l}(e,Ji(),r,a,g);return zs(3),V?t+pt(r)+o+pt(a)+l+pt(g)+E:Ln}function lv(e,t){return e<<17|t<<2}function Ql(e){return e>>17&32767}function jE(e){return 2|e}function xh(e){return(131068&e)>>2}function BE(e,t){return-131069&e|t<<2}function $E(e){return 1|e}function Mw(e,t,r,o){const a=e[r+1],l=null===t;let g=o?Ql(a):xh(a),E=!1;for(;0!==g&&(!1===E||l);){const V=e[g+1];YA(e[g],t)&&(E=!0,e[g+1]=o?$E(V):jE(V)),g=o?Ql(V):xh(V)}E&&(e[r+1]=o?jE(a):$E(a))}function YA(e,t){return null===e||null==t||(Array.isArray(e)?e[1]:e)===t||!(!Array.isArray(e)||"string"!=typeof t)&&zr(e,t)>=0}const Oo={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Pw(e){return e.substring(Oo.key,Oo.keyEnd)}function xw(e,t){const r=Oo.textEnd;return r===t?-1:(t=Oo.keyEnd=function tS(e,t,r){for(;t<r&&e.charCodeAt(t)>32;)t++;return t}(e,Oo.key=t,r),Lp(e,t,r))}function Lp(e,t,r){for(;t<r&&e.charCodeAt(t)<=32;)t++;return t}function HE(e,t,r){const o=He();return no(o,As(),t)&&Ws(Wn(),Tr(),o,e,t,o[an],r,!1),HE}function zE(e,t,r,o,a){const g=a?"class":"style";_y(e,r,t.inputs[g],g,o)}function GE(e,t,r){return kc(e,t,r,!1),GE}function WE(e,t){return kc(e,t,null,!0),WE}function Vw(e){!function Fc(e,t,r,o){const a=Wn(),l=zs(2);a.firstUpdatePass&&Uw(a,null,l,o);const g=He();if(r!==Ln&&no(g,l,r)){const E=a.data[Ri()];if(Hw(E,o)&&!Lw(a,l)){let T=o?E.classesWithoutHost:E.stylesWithoutHost;null!==T&&(r=jr(T,r||"")),zE(a,E,g,r,o)}else!function dS(e,t,r,o,a,l,g,E){a===Ln&&(a=On);let T=0,V=0,$=0<a.length?a[0]:null,X=0<l.length?l[0]:null;for(;null!==$||null!==X;){const ae=T<a.length?a[T+1]:void 0,ge=V<l.length?l[V+1]:void 0;let Ze,Te=null;$===X?(T+=2,V+=2,ae!==ge&&(Te=X,Ze=ge)):null===X||null!==$&&$<X?(T+=2,Te=$):(V+=2,Te=X,Ze=ge),null!==Te&&Bw(e,t,r,o,Te,Ze,g,E),$=T<a.length?a[T]:null,X=V<l.length?l[V]:null}}(a,E,g,g[an],g[l+1],g[l+1]=function uS(e,t,r){if(null==r||""===r)return On;const o=[],a=Rs(r);if(Array.isArray(a))for(let l=0;l<a.length;l++)e(o,a[l],!0);else if("object"==typeof a)for(const l in a)a.hasOwnProperty(l)&&e(o,l,a[l]);else"string"==typeof a&&t(o,a);return o}(e,t,r),o,l)}}(lS,lu,e,!0)}function lu(e,t){for(let r=function JA(e){return function Ow(e){Oo.key=0,Oo.keyEnd=0,Oo.value=0,Oo.valueEnd=0,Oo.textEnd=e.length}(e),xw(e,Lp(e,0,Oo.textEnd))}(t);r>=0;r=xw(t,r))sn(e,Pw(t),!0)}function kc(e,t,r,o){const a=He(),l=Wn(),g=zs(2);l.firstUpdatePass&&Uw(l,e,g,o),t!==Ln&&no(a,g,t)&&Bw(l,l.data[Ri()],a,a[an],e,a[g+1]=function hS(e,t){return null==e||""===e||("string"==typeof t?e+=t:"object"==typeof e&&(e=ln(Rs(e)))),e}(t,r),o,g)}function Lw(e,t){return t>=e.expandoStartIndex}function Uw(e,t,r,o){const a=e.data;if(null===a[r+1]){const l=a[Ri()],g=Lw(e,r);Hw(l,o)&&null===t&&!g&&(t=!1),t=function oS(e,t,r,o){const a=function Cu(e){const t=vn.lFrame.currentDirectiveIndex;return-1===t?null:e[t]}(e);let l=o?t.residualClasses:t.residualStyles;if(null===a)0===(o?t.classBindings:t.styleBindings)&&(r=Um(r=qE(null,e,t,r,o),t.attrs,o),l=null);else{const g=t.directiveStylingLast;if(-1===g||e[g]!==a)if(r=qE(a,e,t,r,o),null===l){let T=function sS(e,t,r){const o=r?t.classBindings:t.styleBindings;if(0!==xh(o))return e[Ql(o)]}(e,t,o);void 0!==T&&Array.isArray(T)&&(T=qE(null,e,t,T[1],o),T=Um(T,t.attrs,o),function aS(e,t,r,o){e[Ql(r?t.classBindings:t.styleBindings)]=o}(e,t,o,T))}else l=function cS(e,t,r){let o;const a=t.directiveEnd;for(let l=1+t.directiveStylingLast;l<a;l++)o=Um(o,e[l].hostAttrs,r);return Um(o,t.attrs,r)}(e,t,o)}return void 0!==l&&(o?t.residualClasses=l:t.residualStyles=l),r}(a,l,t,o),function QA(e,t,r,o,a,l){let g=l?t.classBindings:t.styleBindings,E=Ql(g),T=xh(g);e[o]=r;let $,V=!1;if(Array.isArray(r)?($=r[1],(null===$||zr(r,$)>0)&&(V=!0)):$=r,a)if(0!==T){const ae=Ql(e[E+1]);e[o+1]=lv(ae,E),0!==ae&&(e[ae+1]=BE(e[ae+1],o)),e[E+1]=function qA(e,t){return 131071&e|t<<17}(e[E+1],o)}else e[o+1]=lv(E,0),0!==E&&(e[E+1]=BE(e[E+1],o)),E=o;else e[o+1]=lv(T,0),0===E?E=o:e[T+1]=BE(e[T+1],o),T=o;V&&(e[o+1]=jE(e[o+1])),Mw(e,$,o,!0),Mw(e,$,o,!1),function XA(e,t,r,o,a){const l=a?e.residualClasses:e.residualStyles;null!=l&&"string"==typeof t&&zr(l,t)>=0&&(r[o+1]=$E(r[o+1]))}(t,$,e,o,l),g=lv(E,T),l?t.classBindings=g:t.styleBindings=g}(a,l,t,r,g,o)}}function qE(e,t,r,o,a){let l=null;const g=r.directiveEnd;let E=r.directiveStylingLast;for(-1===E?E=r.directiveStart:E++;E<g&&(l=t[E],o=Um(o,l.hostAttrs,a),l!==e);)E++;return null!==e&&(r.directiveStylingLast=E),o}function Um(e,t,r){const o=r?1:2;let a=-1;if(null!==t)for(let l=0;l<t.length;l++){const g=t[l];"number"==typeof g?a=g:a===o&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),sn(e,g,!!r||t[++l]))}return void 0===e?null:e}function lS(e,t,r){const o=String(t);""!==o&&!o.includes(" ")&&sn(e,o,r)}function Bw(e,t,r,o,a,l,g,E){if(!(3&t.type))return;const T=e.data,V=T[E+1],$=function KA(e){return!(1&~e)}(V)?$w(T,t,r,a,xh(V),g):void 0;dv($)||(dv(l)||function WA(e){return!(2&~e)}(V)&&(l=$w(T,null,r,a,E,g)),function aC(e,t,r,o,a){if(t)a?e.addClass(r,o):e.removeClass(r,o);else{let l=-1===o.indexOf("-")?void 0:Xg.DashCase;null==a?e.removeStyle(r,o,l):("string"==typeof a&&a.endsWith("!important")&&(a=a.slice(0,-10),l|=Xg.Important),e.setStyle(r,o,a,l))}}(o,g,mr(Ri(),r),a,l))}function $w(e,t,r,o,a,l){const g=null===t;let E;for(;a>0;){const T=e[a],V=Array.isArray(T),$=V?T[1]:T,X=null===$;let ae=r[a+1];ae===Ln&&(ae=X?On:void 0);let ge=X?Dn(ae,o):$===o?ae:void 0;if(V&&!dv(ge)&&(ge=Dn(T,o)),dv(ge)&&(E=ge,g))return E;const Te=e[a+1];a=g?Ql(Te):xh(Te)}if(null!==t){let T=l?t.residualClasses:t.residualStyles;null!=T&&(E=Dn(T,o))}return E}function dv(e){return void 0!==e}function Hw(e,t){return!!(e.flags&(t?8:16))}function fv(e,t,r,o){const a=He(),l=Wn(),g=Rt+e,E=a[an],T=l.firstCreatePass?function kS(e,t,r,o,a,l){const g=t.consts,T=kl(t,e,2,o,Io(g,a));return dy(t,r,T,Io(g,l)),null!==T.attrs&&hp(T,T.attrs,!1),null!==T.mergedAttrs&&hp(T,T.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,T),T}(g,l,a,t,r,o):l.data[g],V=qw(l,a,T,E,t,e);a[g]=V;const $=$s(T);return bs(T,!0),zI(E,V,T),!function Ep(e){return!(32&~e.flags)}(T)&&Gc()&&Hu(l,a,V,T),0===function td(){return vn.lFrame.elementDepthCount}()&&xi(V,a),function nd(){vn.lFrame.elementDepthCount++}(),$&&(sy(l,a,T),oy(l,T,a)),null!==o&&ay(a,T),fv}function pv(){let e=Xn();od()?function Eu(){vn.lFrame.isParent=!1}():(e=e.parent,bs(e,!1));const t=e;(function id(e){return vn.skipHydrationRootTNode===e})(t)&&function jh(){vn.skipHydrationRootTNode=null}(),function Mo(){vn.lFrame.elementDepthCount--}();const r=Wn();return r.firstCreatePass&&(bu(r,e),Ka(e)&&r.queries.elementEnd(e)),null!=t.classesWithoutHost&&function ll(e){return!!(8&e.flags)}(t)&&zE(r,t,He(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function eg(e){return!!(16&e.flags)}(t)&&zE(r,t,He(),t.stylesWithoutHost,!1),pv}function YE(e,t,r,o){return fv(e,t,r,o),pv(),YE}let qw=(e,t,r,o,a,l)=>(Gs(!0),$f(o,a,function pd(){return vn.lFrame.currentNamespace}()));function Xw(){return He()}const Nh=void 0;var $S=["en",[["a","p"],["AM","PM"],Nh],[["AM","PM"],Nh,Nh],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Nh,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Nh,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Nh,"{1} 'at' {0}",Nh],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function BS(e){const r=Math.floor(Math.abs(e)),o=e.toString().replace(/^[^.]*\.?/,"").length;return 1===r&&0===o?1:5}];let Up={};function e0(e){const t=function HS(e){return e.toLowerCase().replace(/_/g,"-")}(e);let r=eT(t);if(r)return r;const o=t.split("-")[0];if(r=eT(o),r)return r;if("en"===o)return $S;throw new ut(701,!1)}function Jw(e){return e0(e)[jp.PluralCase]}function eT(e){return e in Up||(Up[e]=Mn.ng&&Mn.ng.common&&Mn.ng.common.locales&&Mn.ng.common.locales[e]),Up[e]}var jp=function(e){return e[e.LocaleId=0]="LocaleId",e[e.DayPeriodsFormat=1]="DayPeriodsFormat",e[e.DayPeriodsStandalone=2]="DayPeriodsStandalone",e[e.DaysFormat=3]="DaysFormat",e[e.DaysStandalone=4]="DaysStandalone",e[e.MonthsFormat=5]="MonthsFormat",e[e.MonthsStandalone=6]="MonthsStandalone",e[e.Eras=7]="Eras",e[e.FirstDayOfWeek=8]="FirstDayOfWeek",e[e.WeekendRange=9]="WeekendRange",e[e.DateFormat=10]="DateFormat",e[e.TimeFormat=11]="TimeFormat",e[e.DateTimeFormat=12]="DateTimeFormat",e[e.NumberSymbols=13]="NumberSymbols",e[e.NumberFormats=14]="NumberFormats",e[e.CurrencyCode=15]="CurrencyCode",e[e.CurrencySymbol=16]="CurrencySymbol",e[e.CurrencyName=17]="CurrencyName",e[e.Currencies=18]="Currencies",e[e.Directionality=19]="Directionality",e[e.PluralCase=20]="PluralCase",e[e.ExtraData=21]="ExtraData",e}(jp||{});const gv="en-US";let tT=gv,vT=(e,t,r)=>{};function r0(e,t,r,o){const a=He(),l=Wn(),g=Xn();return o0(l,a,a[an],g,e,t,o),r0}function o0(e,t,r,o,a,l,g){const E=$s(o),V=e.firstCreatePass&&rE(e),$=t[$n],X=nE(t);let ae=!0;if(3&o.type||g){const Ze=pr(o,t),vt=g?g(Ze):Ze,St=X.length,Ye=g?gr=>g(Wt(gr[o.index])):o.index;let Pn=null;if(!g&&E&&(Pn=function PR(e,t,r,o){const a=e.cleanup;if(null!=a)for(let l=0;l<a.length-1;l+=2){const g=a[l];if(g===r&&a[l+1]===o){const E=t[vi],T=a[l+2];return E.length>T?E[T]:null}"string"==typeof g&&(l+=2)}return null}(e,t,a,o.index)),null!==Pn)(Pn.__ngLastListenerFn__||Pn).__ngNextListenerFn__=l,Pn.__ngLastListenerFn__=l,ae=!1;else{l=wT(o,t,$,l),vT(Ze,a,l);const gr=r.listen(vt,a,l);X.push(l,gr),V&&V.push(a,Ye,St,St+1)}}else l=wT(o,t,$,l);const ge=o.outputs;let Te;if(ae&&null!==ge&&(Te=ge[a])){const Ze=Te.length;if(Ze)for(let vt=0;vt<Ze;vt+=2){const Yr=t[Te[vt]][Te[vt+1]].subscribe(l),oo=X.length;X.push(l,Yr),V&&V.push(a,o.index,oo,-(oo+1))}}}function CT(e,t,r,o){const a=de(null);try{return st(6,t,r),!1!==r(o)}catch(l){return im(e,l),!1}finally{st(7,t,r),de(a)}}function wT(e,t,r,o){return function a(l){if(l===Function)return o;zt(e.componentOffset>-1?mi(e.index,t):t,5);let E=CT(t,r,o,l),T=a.__ngNextListenerFn__;for(;T;)E=CT(t,r,T,l)&&E,T=T.__ngNextListenerFn__;return E}}function TT(e=1){return function dd(e){return(vn.lFrame.contextLView=function ed(e,t){for(;e>0;)t=t[ia],e--;return t}(e,vn.lFrame.contextLView))[$n]}(e)}function OT(e,t,r,o){!function Sm(e,t,r,o){const a=Wn();if(a.firstCreatePass){const l=Xn();Rm(a,new Qy(t,r,o),l.index),function Jy(e,t){const r=e.contentQueries||(e.contentQueries=[]);t!==(r.length?r[r.length-1]:-1)&&r.push(e.queries.length-1,t)}(a,e),!(2&~r)&&(a.staticContentQueries=!0)}return Am(a,He(),r)}(e,t,r,o)}function kT(e,t,r){!function au(e,t,r){const o=Wn();return o.firstCreatePass&&(Rm(o,new Qy(e,t,r),-1),!(2&~t)&&(o.staticViewQueries=!0)),Am(o,He(),t)}(e,t,r)}function FT(e){const t=He(),r=Wn(),o=Ci();nl(o+1);const a=ql(r,o);if(e.dirty&&function Lh(e){return!(4&~e[Ft])}(t)===!(2&~a.metadata.flags)){if(null===a.matches)e.reset([]);else{const l=Ms(t,o);e.reset(l,Eg),e.notifyOnChanges()}return!0}return!1}function VT(){return function vp(e,t){return e[js].queries[t].queryList}(He(),Ci())}function qT(e,t=""){const r=He(),o=Wn(),a=e+Rt,l=o.firstCreatePass?kl(o,a,1,t,null):o.data[a],g=KT(o,r,l,t,e);r[a]=g,Gc()&&Hu(o,r,g,l),bs(l,!1)}let KT=(e,t,r,o,a)=>(Gs(!0),function Yg(e,t){return e.createText(t)}(t[an],o));function c0(e){return vv("",e,""),c0}function vv(e,t,r){const o=He(),a=function Mp(e,t,r,o){return no(e,As(),r)?t+pt(r)+o:Ln}(o,e,t,r);return a!==Ln&&tu(o,Ri(),a),vv}function u0(e,t,r,o,a){const l=He(),g=function Pp(e,t,r,o,a,l){const E=Mh(e,Ji(),r,a);return zs(2),E?t+pt(r)+o+pt(a)+l:Ln}(l,e,t,r,o,a);return g!==Ln&&tu(l,Ri(),g),u0}function l0(e,t,r,o,a,l,g){const E=He(),T=xp(E,e,t,r,o,a,l,g);return T!==Ln&&tu(E,Ri(),T),l0}function d0(e,t,r){xe(t)&&(t=t());const o=He();return no(o,As(),t)&&Ws(Wn(),Tr(),o,e,t,o[an],r,!1),d0}function tD(e,t){const r=xe(e);return r&&e.set(t),r}function h0(e,t){const r=He(),o=Wn(),a=Xn();return o0(o,r,r[an],a,e,t),h0}function f0(e,t,r,o,a){if(e=le(e),Array.isArray(e))for(let l=0;l<e.length;l++)f0(e[l],t,r,o,a);else{const l=Wn(),g=He(),E=Xn();let T=go(e)?e:le(e.provide);const V=dr(e),$=1048575&E.providerIndexes,X=E.directiveStart,ae=E.providerIndexes>>20;if(go(e)||!e.multi){const ge=new Ja(V,a,Xd),Te=g0(T,t,a?$:$+ae,X);-1===Te?(Na(Qr(E,g),l,T),p0(l,e,t.length),t.push(T),E.directiveStart++,E.directiveEnd++,a&&(E.providerIndexes+=1048576),r.push(ge),g.push(ge)):(r[Te]=ge,g[Te]=ge)}else{const ge=g0(T,t,$+ae,X),Te=g0(T,t,$,$+ae),vt=Te>=0&&r[Te];if(a&&!vt||!a&&!(ge>=0&&r[ge])){Na(Qr(E,g),l,T);const St=function nM(e,t,r,o,a){const l=new Ja(e,r,Xd);return l.multi=[],l.index=t,l.componentProviders=0,iD(l,a,o&&!r),l}(a?tM:eM,r.length,a,o,V);!a&&vt&&(r[Te].providerFactory=St),p0(l,e,t.length,0),t.push(T),E.directiveStart++,E.directiveEnd++,a&&(E.providerIndexes+=1048576),r.push(St),g.push(St)}else p0(l,e,ge>-1?ge:Te,iD(r[a?Te:ge],V,!a&&o));!a&&o&&vt&&r[Te].componentProviders++}}}function p0(e,t,r,o){const a=go(t),l=function Us(e){return!!e.useClass}(t);if(a||l){const T=(l?le(t.useClass):t).prototype.ngOnDestroy;if(T){const V=e.destroyHooks||(e.destroyHooks=[]);if(!a&&t.multi){const $=V.indexOf(r);-1===$?V.push(r,[o,T]):V[$+1].push(o,T)}else V.push(r,T)}}}function iD(e,t,r){return r&&e.componentProviders++,e.multi.push(t)-1}function g0(e,t,r,o){for(let a=r;a<o;a++)if(t[a]===e)return a;return-1}function eM(e,t,r,o){return m0(this.multi,[])}function tM(e,t,r,o){const a=this.multi;let l;if(this.providerFactory){const g=this.providerFactory.componentProviders,E=Oa(r,r[Je],this.providerFactory.index,o);l=E.slice(0,g),m0(a,l);for(let T=g;T<E.length;T++)l.push(E[T])}else l=[],m0(a,l);return l}function m0(e,t){for(let r=0;r<e.length;r++)t.push((0,e[r])());return t}function oD(e,t=[]){return r=>{r.providersResolver=(o,a)=>function JR(e,t,r){const o=Wn();if(o.firstCreatePass){const a=Hi(e);f0(r,o.data,o.blueprint,a,!0),f0(t,o.data,o.blueprint,a,!1)}}(o,a?a(e):e,t)}}let rM=(()=>{class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){const o=bn(0,r.type),a=o.length>0?DE([o],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,a)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(const r of this.cachedInjectors.values())null!==r&&r.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=Gn({token:e,providedIn:"environment",factory:()=>new e(Br(Yi))})}}return e})();function sD(e){Qo("NgStandalone"),e.getStandaloneInjector=t=>t.get(rM).getOrCreateStandaloneInjector(e)}class RD{constructor(t){this.full=t;const r=t.split(".");this.major=r[0],this.minor=r[1],this.patch=r.slice(2).join(".")}}const WM=new RD("18.2.13");let MD=(()=>{class e{log(r){console.log(r)}warn(r){console.warn(r)}static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275prov=Gn({token:e,factory:e.\u0275fac,providedIn:"platform"})}}return e})();const kD=new Ot(""),FD=new Ot("");let C0,yP=(()=>{class e{constructor(r,o,a){this._ngZone=r,this.registry=o,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,C0||(function vP(e){C0=e}(a),a.addToWindow(o)),this._watchAngularEvents(),r.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Xr.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let r=this._callbacks.pop();clearTimeout(r.timeoutId),r.doneCb()}});else{let r=this.getPendingTasks();this._callbacks=this._callbacks.filter(o=>!o.updateCb||!o.updateCb(r)||(clearTimeout(o.timeoutId),!1))}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(r=>({source:r.source,creationLocation:r.creationLocation,data:r.data})):[]}addCallback(r,o,a){let l=-1;o&&o>0&&(l=setTimeout(()=>{this._callbacks=this._callbacks.filter(g=>g.timeoutId!==l),r()},o)),this._callbacks.push({doneCb:r,timeoutId:l,updateCb:a})}whenStable(r,o,a){if(a&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(r,o,a),this._runCallbacksIfReady()}registerApplication(r){this.registry.registerApplication(r,this)}unregisterApplication(r){this.registry.unregisterApplication(r)}findProviders(r,o,a){return[]}static{this.\u0275fac=function(o){return new(o||e)(Br(Xr),Br(VD),Br(FD))}}static{this.\u0275prov=Gn({token:e,factory:e.\u0275fac})}}return e})(),VD=(()=>{class e{constructor(){this._applications=new Map}registerApplication(r,o){this._applications.set(r,o)}unregisterApplication(r){this._applications.delete(r)}unregisterAllApplications(){this._applications.clear()}getTestability(r){return this._applications.get(r)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(r,o=!0){return C0?.findTestabilityInTree(this,r,o)??null}static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275prov=Gn({token:e,factory:e.\u0275fac,providedIn:"platform"})}}return e})();function w0(e){return!!e&&"function"==typeof e.then}function LD(e){return!!e&&"function"==typeof e.subscribe}const IP=new Ot("");let UD=(()=>{class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,o)=>{this.resolve=r,this.reject=o}),this.appInits=jt(IP,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const r=[];for(const a of this.appInits){const l=a();if(w0(l))r.push(l);else if(LD(l)){const g=new Promise((E,T)=>{l.subscribe({complete:E,error:T})});r.push(g)}}const o=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{o()}).catch(a=>{this.reject(a)}),0===r.length&&o(),this.initialized=!0}static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275prov=Gn({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();const Tv=new Ot("");let du=(()=>{class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=jt(u_),this.afterRenderManager=jt(nw),this.zonelessEnabled=jt($l),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new Ur.B,this.afterTick=new Ur.B,this.componentTypes=[],this.components=[],this.isStable=jt(bc).hasPendingTasks.pipe((0,Un.T)(r=>!r)),this._injector=jt(Yi)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let r;return new Promise(o=>{r=this.isStable.subscribe({next:a=>{a&&o()}})}).finally(()=>{r.unsubscribe()})}get injector(){return this._injector}bootstrap(r,o){const a=r instanceof jy;if(!this._injector.get(UD).done)throw!a&&Mr(r),new ut(405,!1);let g;g=a?r:this._injector.get(_h).resolveComponentFactory(r),this.componentTypes.push(g.componentType);const E=function EP(e){return e.isBoundToModule}(g)?void 0:this._injector.get(Rh),V=g.create(Ko.NULL,[],o||g.selector,E),$=V.location.nativeElement,X=V.injector.get(kD,null);return X?.registerApplication($),V.onDestroy(()=>{this.detachView(V.hostView),Dv(this.components,V),X?.unregisterApplication($)}),this._loadComponent(V),V}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new ut(101,!1);const r=de(null);try{this._runningTick=!0,this.synchronize()}catch(o){this.internalErrorHandler(o)}finally{this._runningTick=!1,de(r),this.afterTick.next()}}synchronize(){let r=null;this._injector.destroyed||(r=this._injector.get($r,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let o=0;for(;0!==this.dirtyFlags&&o++<10;)this.synchronizeOnce(r)}synchronizeOnce(r){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,7&this.dirtyFlags){const o=!!(1&this.dirtyFlags);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(o);for(let{_lView:a,notifyErrorHandler:l}of this._views)TP(a,l,o,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),7&this.dirtyFlags)return}else r?.begin?.(),r?.end?.();8&this.dirtyFlags&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){this.allViews.some(({_lView:r})=>Ya(r))?this.dirtyFlags|=2:this.dirtyFlags&=-8}attachView(r){const o=r;this._views.push(o),o.attachToAppRef(this)}detachView(r){const o=r;Dv(this._views,o),o.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);const o=this._injector.get(Tv,[]);[...this._bootstrapListeners,...o].forEach(a=>a(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>Dv(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new ut(406,!1);const r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275prov=Gn({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function Dv(e,t){const r=e.indexOf(t);r>-1&&e.splice(r,1)}function TP(e,t,r,o){(r||Ya(e))&&D(e,t,r&&!o?0:1)}class DP{constructor(t,r){this.ngModuleFactory=t,this.componentFactories=r}}let bP=(()=>{class e{compileModuleSync(r){return new TE(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){const o=this.compileModuleSync(r),l=da(ci(r).declarations).reduce((g,E)=>{const T=wn(E);return T&&g.push(new wh(T)),g},[]);return new DP(o,l)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275prov=Gn({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),RP=(()=>{class e{constructor(){this.zone=jt(Xr),this.changeDetectionScheduler=jt(qu),this.applicationRef=jt(du)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275prov=Gn({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function T0({ngZoneFactory:e,ignoreChangesOutsideZone:t,scheduleInRootZone:r}){return e??=()=>new Xr({...D0(),scheduleInRootZone:r}),[{provide:Xr,useFactory:e},{provide:Ki,multi:!0,useFactory:()=>{const o=jt(RP,{optional:!0});return()=>o.initialize()}},{provide:Ki,multi:!0,useFactory:()=>{const o=jt(PP);return()=>{o.initialize()}}},!0===t?{provide:Ly,useValue:!0}:[],{provide:cp,useValue:r??ef}]}function D0(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}let PP=(()=>{class e{constructor(){this.subscription=new zn.yU,this.initialized=!1,this.zone=jt(Xr),this.pendingTasks=jt(bc)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Xr.assertNotInAngularZone(),queueMicrotask(()=>{null!==r&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Xr.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275prov=Gn({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),Qm=(()=>{class e{constructor(){this.appRef=jt(du),this.taskService=jt(bc),this.ngZone=jt(Xr),this.zonelessEnabled=jt($l),this.disableScheduling=jt(Ly,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new zn.yU,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(tf):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(jt(cp,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof sf||!this.zoneIsDefined)}notify(r){if(!this.zonelessEnabled&&5===r)return;switch(r){case 0:this.appRef.dirtyFlags|=2;break;case 3:case 2:case 4:case 5:case 1:this.appRef.dirtyFlags|=4;break;case 7:this.appRef.deferredDirtyFlags|=8;break;default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;const o=this.useMicrotaskScheduler?hg:Mu;this.pendingRenderTaskId=this.taskService.add(),this.cancelScheduledCallback=this.scheduleInRootZone?Zone.root.run(()=>o(()=>this.tick())):this.ngZone.runOutsideAngular(()=>o(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||null!==this.pendingRenderTaskId||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(tf+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&7&this.appRef.dirtyFlags&&(this.appRef.dirtyFlags|=1);const r=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(o){throw this.taskService.remove(r),o}finally{this.cleanup()}this.useMicrotaskScheduler=!0,hg(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(r)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,null!==this.pendingRenderTaskId){const r=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(r)}}static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275prov=Gn({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();const A0=new Ot("",{providedIn:"root",factory:()=>jt(A0,An.Optional|An.SkipSelf)||function xP(){return typeof $localize<"u"&&$localize.locale||gv}()}),NP=new Ot("",{providedIn:"root",factory:()=>"USD"}),Av=new Ot("");function Sv(e){return!e.moduleRef}let Xl=null;let JD=(()=>{class e{static{this.__NG_ELEMENT_ID__=$P}}return e})();function $P(e){return function HP(e,t,r){if(ws(e)&&!r){const o=mi(e.index,t);return new tn(o,o)}return 175&e.type?new tn(t[xr],t):null}(Xn(),He(),!(16&~e))}class rb{constructor(){}supports(t){return rv(t)}create(t){return new KP(t)}}const qP=(e,t)=>t;class KP{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||qP}forEachItem(t){let r;for(r=this._itHead;null!==r;r=r._next)t(r)}forEachOperation(t){let r=this._itHead,o=this._removalsHead,a=0,l=null;for(;r||o;){const g=!o||r&&r.currentIndex<ob(o,a,l)?r:o,E=ob(g,a,l),T=g.currentIndex;if(g===o)a--,o=o._nextRemoved;else if(r=r._next,null==g.previousIndex)a++;else{l||(l=[]);const V=E-a,$=T-a;if(V!=$){for(let ae=0;ae<V;ae++){const ge=ae<l.length?l[ae]:l[ae]=0,Te=ge+ae;$<=Te&&Te<V&&(l[ae]=ge+1)}l[g.previousIndex]=$-V}}E!==T&&t(g,E,T)}}forEachPreviousItem(t){let r;for(r=this._previousItHead;null!==r;r=r._nextPrevious)t(r)}forEachAddedItem(t){let r;for(r=this._additionsHead;null!==r;r=r._nextAdded)t(r)}forEachMovedItem(t){let r;for(r=this._movesHead;null!==r;r=r._nextMoved)t(r)}forEachRemovedItem(t){let r;for(r=this._removalsHead;null!==r;r=r._nextRemoved)t(r)}forEachIdentityChange(t){let r;for(r=this._identityChangesHead;null!==r;r=r._nextIdentityChange)t(r)}diff(t){if(null==t&&(t=[]),!rv(t))throw new ut(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let a,l,g,r=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let E=0;E<this.length;E++)l=t[E],g=this._trackByFn(E,l),null!==r&&Object.is(r.trackById,g)?(o&&(r=this._verifyReinsertion(r,l,g,E)),Object.is(r.item,l)||this._addIdentityChange(r,l)):(r=this._mismatch(r,l,g,E),o=!0),r=r._next}else a=0,function aA(e,t){if(Array.isArray(e))for(let r=0;r<e.length;r++)t(e[r]);else{const r=e[Symbol.iterator]();let o;for(;!(o=r.next()).done;)t(o.value)}}(t,E=>{g=this._trackByFn(a,E),null!==r&&Object.is(r.trackById,g)?(o&&(r=this._verifyReinsertion(r,E,g,a)),Object.is(r.item,E)||this._addIdentityChange(r,E)):(r=this._mismatch(r,E,g,a),o=!0),r=r._next,a++}),this.length=a;return this._truncate(r),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,r,o,a){let l;return null===t?l=this._itTail:(l=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(o,null))?(Object.is(t.item,r)||this._addIdentityChange(t,r),this._reinsertAfter(t,l,a)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(o,a))?(Object.is(t.item,r)||this._addIdentityChange(t,r),this._moveAfter(t,l,a)):t=this._addAfter(new QP(r,o),l,a),t}_verifyReinsertion(t,r,o,a){let l=null===this._unlinkedRecords?null:this._unlinkedRecords.get(o,null);return null!==l?t=this._reinsertAfter(l,t._prev,a):t.currentIndex!=a&&(t.currentIndex=a,this._addToMoves(t,a)),t}_truncate(t){for(;null!==t;){const r=t._next;this._addToRemovals(this._unlink(t)),t=r}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,r,o){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const a=t._prevRemoved,l=t._nextRemoved;return null===a?this._removalsHead=l:a._nextRemoved=l,null===l?this._removalsTail=a:l._prevRemoved=a,this._insertAfter(t,r,o),this._addToMoves(t,o),t}_moveAfter(t,r,o){return this._unlink(t),this._insertAfter(t,r,o),this._addToMoves(t,o),t}_addAfter(t,r,o){return this._insertAfter(t,r,o),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,r,o){const a=null===r?this._itHead:r._next;return t._next=a,t._prev=r,null===a?this._itTail=t:a._prev=t,null===r?this._itHead=t:r._next=t,null===this._linkedRecords&&(this._linkedRecords=new ib),this._linkedRecords.put(t),t.currentIndex=o,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const r=t._prev,o=t._next;return null===r?this._itHead=o:r._next=o,null===o?this._itTail=r:o._prev=r,t}_addToMoves(t,r){return t.previousIndex===r||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new ib),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,r){return t.item=r,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class QP{constructor(t,r){this.item=t,this.trackById=r,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class XP{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,r){let o;for(o=this._head;null!==o;o=o._nextDup)if((null===r||r<=o.currentIndex)&&Object.is(o.trackById,t))return o;return null}remove(t){const r=t._prevDup,o=t._nextDup;return null===r?this._head=o:r._nextDup=o,null===o?this._tail=r:o._prevDup=r,null===this._head}}class ib{constructor(){this.map=new Map}put(t){const r=t.trackById;let o=this.map.get(r);o||(o=new XP,this.map.set(r,o)),o.add(t)}get(t,r){const a=this.map.get(t);return a?a.get(t,r):null}remove(t){const r=t.trackById;return this.map.get(r).remove(t)&&this.map.delete(r),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function ob(e,t,r){const o=e.previousIndex;if(null===o)return o;let a=0;return r&&o<r.length&&(a=r[o]),o+t+a}class sb{constructor(){}supports(t){return t instanceof Map||bE(t)}create(){return new YP}}class YP{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let r;for(r=this._mapHead;null!==r;r=r._next)t(r)}forEachPreviousItem(t){let r;for(r=this._previousMapHead;null!==r;r=r._nextPrevious)t(r)}forEachChangedItem(t){let r;for(r=this._changesHead;null!==r;r=r._nextChanged)t(r)}forEachAddedItem(t){let r;for(r=this._additionsHead;null!==r;r=r._nextAdded)t(r)}forEachRemovedItem(t){let r;for(r=this._removalsHead;null!==r;r=r._nextRemoved)t(r)}diff(t){if(t){if(!(t instanceof Map||bE(t)))throw new ut(900,!1)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let r=this._mapHead;if(this._appendAfter=null,this._forEach(t,(o,a)=>{if(r&&r.key===a)this._maybeAddToChanges(r,o),this._appendAfter=r,r=r._next;else{const l=this._getOrCreateRecordForKey(a,o);r=this._insertBeforeOrAppend(r,l)}}),r){r._prev&&(r._prev._next=null),this._removalsHead=r;for(let o=r;null!==o;o=o._nextRemoved)o===this._mapHead&&(this._mapHead=null),this._records.delete(o.key),o._nextRemoved=o._next,o.previousValue=o.currentValue,o.currentValue=null,o._prev=null,o._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,r){if(t){const o=t._prev;return r._next=t,r._prev=o,t._prev=r,o&&(o._next=r),t===this._mapHead&&(this._mapHead=r),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=r,r._prev=this._appendAfter):this._mapHead=r,this._appendAfter=r,null}_getOrCreateRecordForKey(t,r){if(this._records.has(t)){const a=this._records.get(t);this._maybeAddToChanges(a,r);const l=a._prev,g=a._next;return l&&(l._next=g),g&&(g._prev=l),a._next=null,a._prev=null,a}const o=new ZP(t);return this._records.set(t,o),o.currentValue=r,this._addToAdditions(o),o}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,r){Object.is(r,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=r,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,r){t instanceof Map?t.forEach(r):Object.keys(t).forEach(o=>r(t[o],o))}}class ZP{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function ab(){return new N0([new rb])}let N0=(()=>{class e{static{this.\u0275prov=Gn({token:e,providedIn:"root",factory:ab})}constructor(r){this.factories=r}static create(r,o){if(null!=o){const a=o.factories.slice();r=r.concat(a)}return new e(r)}static extend(r){return{provide:e,useFactory:o=>e.create(r,o||ab()),deps:[[e,new Fs,new uo]]}}find(r){const o=this.factories.find(a=>a.supports(r));if(null!=o)return o;throw new ut(901,!1)}}return e})();function cb(){return new O0([new sb])}let O0=(()=>{class e{static{this.\u0275prov=Gn({token:e,providedIn:"root",factory:cb})}constructor(r){this.factories=r}static create(r,o){if(o){const a=o.factories.slice();r=r.concat(a)}return new e(r)}static extend(r){return{provide:e,useFactory:o=>e.create(r,o||cb()),deps:[[e,new Fs,new uo]]}}find(r){const o=this.factories.find(a=>a.supports(r));if(o)return o;throw new ut(901,!1)}}return e})();function hx(e){try{const{rootComponent:t,appProviders:r,platformProviders:o}=e,a=function BP(e=[]){if(Xl)return Xl;const t=function XD(e=[],t){return Ko.create({name:t,providers:[{provide:Xi,useValue:"platform"},{provide:Av,useValue:new Set([()=>Xl=null])},...e]})}(e);return Xl=t,function jD(){!function Lr(e){pn=e}(()=>{throw new ut(600,!1)})}(),function YD(e){e.get(D_,null)?.forEach(r=>r())}(t),t}(o),l=[T0({}),{provide:qu,useExisting:Qm},...r||[]];return function qD(e){const t=Sv(e)?e.r3Injector:e.moduleRef.injector,r=t.get(Xr);return r.run(()=>{Sv(e)?e.r3Injector.resolveInjectorInitializers():e.moduleRef.resolveInjectorInitializers();const o=t.get(tc,null);let a;if(r.runOutsideAngular(()=>{a=r.onError.subscribe({next:l=>{o.handleError(l)}})}),Sv(e)){const l=()=>t.destroy(),g=e.platformInjector.get(Av);g.add(l),t.onDestroy(()=>{a.unsubscribe(),g.delete(l)})}else{const l=()=>e.moduleRef.destroy(),g=e.platformInjector.get(Av);g.add(l),e.moduleRef.onDestroy(()=>{Dv(e.allPlatformModules,e.moduleRef),a.unsubscribe(),g.delete(l)})}return function wP(e,t,r){try{const o=r();return w0(o)?o.catch(a=>{throw t.runOutsideAngular(()=>e.handleError(a)),a}):o}catch(o){throw t.runOutsideAngular(()=>e.handleError(o)),o}}(o,r,()=>{const l=t.get(UD);return l.runInitializers(),l.donePromise.then(()=>{if(function qS(e){"string"==typeof e&&(tT=e.toLowerCase().replace(/_/g,"-"))}(t.get(A0,gv)||gv),Sv(e)){const E=t.get(du);return void 0!==e.rootComponent&&E.bootstrap(e.rootComponent),E}return function LP(e,t){const r=e.injector.get(du);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(o=>r.bootstrap(o));else{if(!e.instance.ngDoBootstrap)throw new ut(-403,!1);e.instance.ngDoBootstrap(r)}t.push(e)}(e.moduleRef,e.allPlatformModules),e.moduleRef})})})}({r3Injector:new KC({providers:l,parent:a,debugName:"",runEnvironmentInitializers:!1}).injector,platformInjector:a,rootComponent:t})}catch(t){return Promise.reject(t)}}function xx(e){return"boolean"==typeof e?e:null!=e&&"false"!==e}function Ox(e,t){Qo("NgSignals");const r=function De(e){const t=Object.create(Hn);t.computation=e;const r=()=>{if(_t(t),_e(t),t.value===fr)throw t.error;return t.value};return r[Le]=t,r}(e);return t?.equal&&(r[Le].equal=t.equal),r}function kx(e){const t=de(null);try{return e()}finally{de(t)}}},7440:(hn,at,ie)=>{ie.d(at,{MW:()=>_t,Wp:()=>nn,XU:()=>p,gL:()=>Le});var R=ie(2214),J=ie(4438),Se=ie(3586);class p{constructor(dt){return dt}}class Le{constructor(){return(0,R.Dk)()}}const It=new J.nKC("angularfire2._apps"),rt={provide:p,useFactory:function $e(qe){return qe&&1===qe.length?qe[0]:new p((0,R.Sx)())},deps:[[new J.Xx1,It]]},he={provide:Le,deps:[[new J.Xx1,It]]};function _e(qe){return(dt,it)=>{const Vt=it.get(J.Agw);(0,R.KO)("angularfire",Se.xv.full,"core"),(0,R.KO)("angularfire",Se.xv.full,"app"),(0,R.KO)("angular",J.xvI.full,Vt.toString());const Qt=dt.runOutsideAngular(()=>qe(it));return new p(Qt)}}function _t(qe,...dt){return(0,J.EmA)([rt,he,{provide:It,useFactory:_e(qe),multi:!0,deps:[J.SKi,J.zZn,Se.u0,...dt]}])}const nn=(0,Se.S3)(R.Wp,!0)},5621:(hn,at,ie)=>{ie.d(at,{CI:()=>lt,DF:()=>It,Nj:()=>$e,_q:()=>fn,hg:()=>ye,ik:()=>Yt,xI:()=>on});var R=ie(3586),J=ie(4438),Se=ie(7440),p=ie(2214),Le=ie(9579);class $e{constructor(ln){return ln}}class It{constructor(){return(0,R.CA)("auth")}}const he=new J.nKC("angularfire2.auth-instances");function Ge(ni){return(ln,jr)=>{const Hr=ln.runOutsideAngular(()=>ni(jr));return new $e(Hr)}}const _t={provide:It,deps:[[new J.Xx1,he]]},ft={provide:$e,useFactory:function _e(ni,ln){const jr=(0,R.lR)("auth",ni,ln);return jr&&new $e(jr)},deps:[[new J.Xx1,he],Se.XU]};function fn(ni,...ln){return(0,p.KO)("angularfire",R.xv.full,"auth"),(0,J.EmA)([ft,_t,{provide:he,useFactory:Ge(ni),multi:!0,deps:[J.SKi,J.zZn,R.u0,Se.gL,[new J.Xx1,R.Jv],...ln]}])}const on=(0,R.S3)(Le.xI,!0),ye=(0,R.S3)(Le.hg,!0),Yt=(0,R.S3)(Le.ik,!0),lt=(0,R.S3)(Le.CI,!0)},4262:(hn,at,ie)=>{ie.d(at,{_7:()=>Hu,gS:()=>Wf,rJ:()=>cy,kd:()=>ly,H9:()=>QI,x7:()=>hy,GG:()=>ZI,aU:()=>eE,aQ:()=>gy,My:()=>rm,hV:()=>$I,P:()=>my,O5:()=>iE,BN:()=>oE,mZ:()=>Jd,_M:()=>Iy});var _t,ft,R=ie(3586),J=ie(4438),Se=ie(7440),p=ie(5621),Le=ie(2214),de=ie(467),$e=ie(7852),It=ie(1362),rt=ie(8041),he=ie(1076),_e=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ge={};(function(){var c;function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function u(we,ue,Ie){Ie||(Ie=0);var Ae=Array(16);if("string"==typeof ue)for(var Pe=0;16>Pe;++Pe)Ae[Pe]=ue.charCodeAt(Ie++)|ue.charCodeAt(Ie++)<<8|ue.charCodeAt(Ie++)<<16|ue.charCodeAt(Ie++)<<24;else for(Pe=0;16>Pe;++Pe)Ae[Pe]=ue[Ie++]|ue[Ie++]<<8|ue[Ie++]<<16|ue[Ie++]<<24;var Ue=we.g[3],me=(ue=we.g[0])+(Ue^(Ie=we.g[1])&((Pe=we.g[2])^Ue))+Ae[0]+3614090360&4294967295;me=(Ie=(Pe=(Ue=(ue=(Ie=(Pe=(Ue=(ue=(Ie=(Pe=(Ue=(ue=(Ie=(Pe=(Ue=(ue=(Ie=(Pe=(Ue=(ue=(Ie=(Pe=(Ue=(ue=(Ie=(Pe=(Ue=(ue=(Ie=(Pe=(Ue=(ue=(Ie=(Pe=(Ue=(ue=(Ie=(Pe=(Ue=(ue=(Ie=(Pe=(Ue=(ue=(Ie=(Pe=(Ue=(ue=(Ie=(Pe=(Ue=(ue=(Ie=(Pe=(Ue=(ue=(Ie=(Pe=(Ue=(ue=Ie+(me<<7&4294967295|me>>>25))+((me=Ue+(Pe^ue&(Ie^Pe))+Ae[1]+3905402710&4294967295)<<12&4294967295|me>>>20))+((me=Pe+(Ie^Ue&(ue^Ie))+Ae[2]+606105819&4294967295)<<17&4294967295|me>>>15))+((me=Ie+(ue^Pe&(Ue^ue))+Ae[3]+3250441966&4294967295)<<22&4294967295|me>>>10))+((me=ue+(Ue^Ie&(Pe^Ue))+Ae[4]+4118548399&4294967295)<<7&4294967295|me>>>25))+((me=Ue+(Pe^ue&(Ie^Pe))+Ae[5]+1200080426&4294967295)<<12&4294967295|me>>>20))+((me=Pe+(Ie^Ue&(ue^Ie))+Ae[6]+2821735955&4294967295)<<17&4294967295|me>>>15))+((me=Ie+(ue^Pe&(Ue^ue))+Ae[7]+4249261313&4294967295)<<22&4294967295|me>>>10))+((me=ue+(Ue^Ie&(Pe^Ue))+Ae[8]+1770035416&4294967295)<<7&4294967295|me>>>25))+((me=Ue+(Pe^ue&(Ie^Pe))+Ae[9]+2336552879&4294967295)<<12&4294967295|me>>>20))+((me=Pe+(Ie^Ue&(ue^Ie))+Ae[10]+4294925233&4294967295)<<17&4294967295|me>>>15))+((me=Ie+(ue^Pe&(Ue^ue))+Ae[11]+2304563134&4294967295)<<22&4294967295|me>>>10))+((me=ue+(Ue^Ie&(Pe^Ue))+Ae[12]+1804603682&4294967295)<<7&4294967295|me>>>25))+((me=Ue+(Pe^ue&(Ie^Pe))+Ae[13]+4254626195&4294967295)<<12&4294967295|me>>>20))+((me=Pe+(Ie^Ue&(ue^Ie))+Ae[14]+2792965006&4294967295)<<17&4294967295|me>>>15))+((me=Ie+(ue^Pe&(Ue^ue))+Ae[15]+1236535329&4294967295)<<22&4294967295|me>>>10))+((me=ue+(Pe^Ue&(Ie^Pe))+Ae[1]+4129170786&4294967295)<<5&4294967295|me>>>27))+((me=Ue+(Ie^Pe&(ue^Ie))+Ae[6]+3225465664&4294967295)<<9&4294967295|me>>>23))+((me=Pe+(ue^Ie&(Ue^ue))+Ae[11]+643717713&4294967295)<<14&4294967295|me>>>18))+((me=Ie+(Ue^ue&(Pe^Ue))+Ae[0]+3921069994&4294967295)<<20&4294967295|me>>>12))+((me=ue+(Pe^Ue&(Ie^Pe))+Ae[5]+3593408605&4294967295)<<5&4294967295|me>>>27))+((me=Ue+(Ie^Pe&(ue^Ie))+Ae[10]+38016083&4294967295)<<9&4294967295|me>>>23))+((me=Pe+(ue^Ie&(Ue^ue))+Ae[15]+3634488961&4294967295)<<14&4294967295|me>>>18))+((me=Ie+(Ue^ue&(Pe^Ue))+Ae[4]+3889429448&4294967295)<<20&4294967295|me>>>12))+((me=ue+(Pe^Ue&(Ie^Pe))+Ae[9]+568446438&4294967295)<<5&4294967295|me>>>27))+((me=Ue+(Ie^Pe&(ue^Ie))+Ae[14]+3275163606&4294967295)<<9&4294967295|me>>>23))+((me=Pe+(ue^Ie&(Ue^ue))+Ae[3]+4107603335&4294967295)<<14&4294967295|me>>>18))+((me=Ie+(Ue^ue&(Pe^Ue))+Ae[8]+1163531501&4294967295)<<20&4294967295|me>>>12))+((me=ue+(Pe^Ue&(Ie^Pe))+Ae[13]+2850285829&4294967295)<<5&4294967295|me>>>27))+((me=Ue+(Ie^Pe&(ue^Ie))+Ae[2]+4243563512&4294967295)<<9&4294967295|me>>>23))+((me=Pe+(ue^Ie&(Ue^ue))+Ae[7]+1735328473&4294967295)<<14&4294967295|me>>>18))+((me=Ie+(Ue^ue&(Pe^Ue))+Ae[12]+2368359562&4294967295)<<20&4294967295|me>>>12))+((me=ue+(Ie^Pe^Ue)+Ae[5]+4294588738&4294967295)<<4&4294967295|me>>>28))+((me=Ue+(ue^Ie^Pe)+Ae[8]+2272392833&4294967295)<<11&4294967295|me>>>21))+((me=Pe+(Ue^ue^Ie)+Ae[11]+1839030562&4294967295)<<16&4294967295|me>>>16))+((me=Ie+(Pe^Ue^ue)+Ae[14]+4259657740&4294967295)<<23&4294967295|me>>>9))+((me=ue+(Ie^Pe^Ue)+Ae[1]+2763975236&4294967295)<<4&4294967295|me>>>28))+((me=Ue+(ue^Ie^Pe)+Ae[4]+1272893353&4294967295)<<11&4294967295|me>>>21))+((me=Pe+(Ue^ue^Ie)+Ae[7]+4139469664&4294967295)<<16&4294967295|me>>>16))+((me=Ie+(Pe^Ue^ue)+Ae[10]+3200236656&4294967295)<<23&4294967295|me>>>9))+((me=ue+(Ie^Pe^Ue)+Ae[13]+681279174&4294967295)<<4&4294967295|me>>>28))+((me=Ue+(ue^Ie^Pe)+Ae[0]+3936430074&4294967295)<<11&4294967295|me>>>21))+((me=Pe+(Ue^ue^Ie)+Ae[3]+3572445317&4294967295)<<16&4294967295|me>>>16))+((me=Ie+(Pe^Ue^ue)+Ae[6]+76029189&4294967295)<<23&4294967295|me>>>9))+((me=ue+(Ie^Pe^Ue)+Ae[9]+3654602809&4294967295)<<4&4294967295|me>>>28))+((me=Ue+(ue^Ie^Pe)+Ae[12]+3873151461&4294967295)<<11&4294967295|me>>>21))+((me=Pe+(Ue^ue^Ie)+Ae[15]+530742520&4294967295)<<16&4294967295|me>>>16))+((me=Ie+(Pe^Ue^ue)+Ae[2]+3299628645&4294967295)<<23&4294967295|me>>>9))+((me=ue+(Pe^(Ie|~Ue))+Ae[0]+4096336452&4294967295)<<6&4294967295|me>>>26))+((me=Ue+(Ie^(ue|~Pe))+Ae[7]+1126891415&4294967295)<<10&4294967295|me>>>22))+((me=Pe+(ue^(Ue|~Ie))+Ae[14]+2878612391&4294967295)<<15&4294967295|me>>>17))+((me=Ie+(Ue^(Pe|~ue))+Ae[5]+4237533241&4294967295)<<21&4294967295|me>>>11))+((me=ue+(Pe^(Ie|~Ue))+Ae[12]+1700485571&4294967295)<<6&4294967295|me>>>26))+((me=Ue+(Ie^(ue|~Pe))+Ae[3]+2399980690&4294967295)<<10&4294967295|me>>>22))+((me=Pe+(ue^(Ue|~Ie))+Ae[10]+4293915773&4294967295)<<15&4294967295|me>>>17))+((me=Ie+(Ue^(Pe|~ue))+Ae[1]+2240044497&4294967295)<<21&4294967295|me>>>11))+((me=ue+(Pe^(Ie|~Ue))+Ae[8]+1873313359&4294967295)<<6&4294967295|me>>>26))+((me=Ue+(Ie^(ue|~Pe))+Ae[15]+4264355552&4294967295)<<10&4294967295|me>>>22))+((me=Pe+(ue^(Ue|~Ie))+Ae[6]+2734768916&4294967295)<<15&4294967295|me>>>17))+((me=Ie+(Ue^(Pe|~ue))+Ae[13]+1309151649&4294967295)<<21&4294967295|me>>>11))+((Ue=(ue=Ie+((me=ue+(Pe^(Ie|~Ue))+Ae[4]+4149444226&4294967295)<<6&4294967295|me>>>26))+((me=Ue+(Ie^(ue|~Pe))+Ae[11]+3174756917&4294967295)<<10&4294967295|me>>>22))^((Pe=Ue+((me=Pe+(ue^(Ue|~Ie))+Ae[2]+718787259&4294967295)<<15&4294967295|me>>>17))|~ue))+Ae[9]+3951481745&4294967295,we.g[0]=we.g[0]+ue&4294967295,we.g[1]=we.g[1]+(Pe+(me<<21&4294967295|me>>>11))&4294967295,we.g[2]=we.g[2]+Pe&4294967295,we.g[3]=we.g[3]+Ue&4294967295}function y(we,ue){this.h=ue;for(var Ie=[],Ae=!0,Pe=we.length-1;0<=Pe;Pe--){var Ue=0|we[Pe];Ae&&Ue==ue||(Ie[Pe]=Ue,Ae=!1)}this.g=Ie}(function n(we,ue){function Ie(){}Ie.prototype=ue.prototype,we.D=ue.prototype,we.prototype=new Ie,we.prototype.constructor=we,we.C=function(Ae,Pe,Ue){for(var me=Array(arguments.length-2),nu=2;nu<arguments.length;nu++)me[nu-2]=arguments[nu];return ue.prototype[Pe].apply(Ae,me)}})(s,function i(){this.blockSize=-1}),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},s.prototype.u=function(we,ue){void 0===ue&&(ue=we.length);for(var Ie=ue-this.blockSize,Ae=this.B,Pe=this.h,Ue=0;Ue<ue;){if(0==Pe)for(;Ue<=Ie;)u(this,we,Ue),Ue+=this.blockSize;if("string"==typeof we){for(;Ue<ue;)if(Ae[Pe++]=we.charCodeAt(Ue++),Pe==this.blockSize){u(this,Ae),Pe=0;break}}else for(;Ue<ue;)if(Ae[Pe++]=we[Ue++],Pe==this.blockSize){u(this,Ae),Pe=0;break}}this.h=Pe,this.o+=ue},s.prototype.v=function(){var we=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);we[0]=128;for(var ue=1;ue<we.length-8;++ue)we[ue]=0;var Ie=8*this.o;for(ue=we.length-8;ue<we.length;++ue)we[ue]=255&Ie,Ie/=256;for(this.u(we),we=Array(16),ue=Ie=0;4>ue;++ue)for(var Ae=0;32>Ae;Ae+=8)we[Ie++]=this.g[ue]>>>Ae&255;return we};var D={};function x(we){return-128<=we&&128>we?function h(we,ue){var Ie=D;return Object.prototype.hasOwnProperty.call(Ie,we)?Ie[we]:Ie[we]=ue(we)}(we,function(ue){return new y([0|ue],0>ue?-1:0)}):new y([0|we],0>we?-1:0)}function B(we){if(isNaN(we)||!isFinite(we))return te;if(0>we)return ht(B(-we));for(var ue=[],Ie=1,Ae=0;we>=Ie;Ae++)ue[Ae]=we/Ie|0,Ie*=4294967296;return new y(ue,0)}var te=x(0),pe=x(1),Ve=x(16777216);function tt(we){if(0!=we.h)return!1;for(var ue=0;ue<we.g.length;ue++)if(0!=we.g[ue])return!1;return!0}function gt(we){return-1==we.h}function ht(we){for(var ue=we.g.length,Ie=[],Ae=0;Ae<ue;Ae++)Ie[Ae]=~we.g[Ae];return new y(Ie,~we.h).add(pe)}function zt(we,ue){return we.add(ht(ue))}function tn(we,ue){for(;(65535&we[ue])!=we[ue];)we[ue+1]+=we[ue]>>>16,we[ue]&=65535,ue++}function Kt(we,ue){this.g=we,this.h=ue}function kn(we,ue){if(tt(ue))throw Error("division by zero");if(tt(we))return new Kt(te,te);if(gt(we))return ue=kn(ht(we),ue),new Kt(ht(ue.g),ht(ue.h));if(gt(ue))return ue=kn(we,ht(ue)),new Kt(ht(ue.g),ue.h);if(30<we.g.length){if(gt(we)||gt(ue))throw Error("slowDivide_ only works with positive integers.");for(var Ie=pe,Ae=ue;0>=Ae.l(we);)Ie=Dr(Ie),Ae=Dr(Ae);var Pe=Yn(Ie,1),Ue=Yn(Ae,1);for(Ae=Yn(Ae,2),Ie=Yn(Ie,2);!tt(Ae);){var me=Ue.add(Ae);0>=me.l(we)&&(Pe=Pe.add(Ie),Ue=me),Ae=Yn(Ae,1),Ie=Yn(Ie,1)}return ue=zt(we,Pe.j(ue)),new Kt(Pe,ue)}for(Pe=te;0<=we.l(ue);){for(Ie=Math.max(1,Math.floor(we.m()/ue.m())),Ae=48>=(Ae=Math.ceil(Math.log(Ie)/Math.LN2))?1:Math.pow(2,Ae-48),me=(Ue=B(Ie)).j(ue);gt(me)||0<me.l(we);)me=(Ue=B(Ie-=Ae)).j(ue);tt(Ue)&&(Ue=pe),Pe=Pe.add(Ue),we=zt(we,me)}return new Kt(Pe,we)}function Dr(we){for(var ue=we.g.length+1,Ie=[],Ae=0;Ae<ue;Ae++)Ie[Ae]=we.i(Ae)<<1|we.i(Ae-1)>>>31;return new y(Ie,we.h)}function Yn(we,ue){var Ie=ue>>5;ue%=32;for(var Ae=we.g.length-Ie,Pe=[],Ue=0;Ue<Ae;Ue++)Pe[Ue]=0<ue?we.i(Ue+Ie)>>>ue|we.i(Ue+Ie+1)<<32-ue:we.i(Ue+Ie);return new y(Pe,we.h)}(c=y.prototype).m=function(){if(gt(this))return-ht(this).m();for(var we=0,ue=1,Ie=0;Ie<this.g.length;Ie++){var Ae=this.i(Ie);we+=(0<=Ae?Ae:4294967296+Ae)*ue,ue*=4294967296}return we},c.toString=function(we){if(2>(we=we||10)||36<we)throw Error("radix out of range: "+we);if(tt(this))return"0";if(gt(this))return"-"+ht(this).toString(we);for(var ue=B(Math.pow(we,6)),Ie=this,Ae="";;){var Pe=kn(Ie,ue).g,Ue=((0<(Ie=zt(Ie,Pe.j(ue))).g.length?Ie.g[0]:Ie.h)>>>0).toString(we);if(tt(Ie=Pe))return Ue+Ae;for(;6>Ue.length;)Ue="0"+Ue;Ae=Ue+Ae}},c.i=function(we){return 0>we?0:we<this.g.length?this.g[we]:this.h},c.l=function(we){return gt(we=zt(this,we))?-1:tt(we)?0:1},c.abs=function(){return gt(this)?ht(this):this},c.add=function(we){for(var ue=Math.max(this.g.length,we.g.length),Ie=[],Ae=0,Pe=0;Pe<=ue;Pe++){var Ue=Ae+(65535&this.i(Pe))+(65535&we.i(Pe)),me=(Ue>>>16)+(this.i(Pe)>>>16)+(we.i(Pe)>>>16);Ae=me>>>16,Ie[Pe]=(me&=65535)<<16|(Ue&=65535)}return new y(Ie,-2147483648&Ie[Ie.length-1]?-1:0)},c.j=function(we){if(tt(this)||tt(we))return te;if(gt(this))return gt(we)?ht(this).j(ht(we)):ht(ht(this).j(we));if(gt(we))return ht(this.j(ht(we)));if(0>this.l(Ve)&&0>we.l(Ve))return B(this.m()*we.m());for(var ue=this.g.length+we.g.length,Ie=[],Ae=0;Ae<2*ue;Ae++)Ie[Ae]=0;for(Ae=0;Ae<this.g.length;Ae++)for(var Pe=0;Pe<we.g.length;Pe++){var Ue=this.i(Ae)>>>16,me=65535&this.i(Ae),nu=we.i(Pe)>>>16,eh=65535&we.i(Pe);Ie[2*Ae+2*Pe]+=me*eh,tn(Ie,2*Ae+2*Pe),Ie[2*Ae+2*Pe+1]+=Ue*eh,tn(Ie,2*Ae+2*Pe+1),Ie[2*Ae+2*Pe+1]+=me*nu,tn(Ie,2*Ae+2*Pe+1),Ie[2*Ae+2*Pe+2]+=Ue*nu,tn(Ie,2*Ae+2*Pe+2)}for(Ae=0;Ae<ue;Ae++)Ie[Ae]=Ie[2*Ae+1]<<16|Ie[2*Ae];for(Ae=ue;Ae<2*ue;Ae++)Ie[Ae]=0;return new y(Ie,0)},c.A=function(we){return kn(this,we).h},c.and=function(we){for(var ue=Math.max(this.g.length,we.g.length),Ie=[],Ae=0;Ae<ue;Ae++)Ie[Ae]=this.i(Ae)&we.i(Ae);return new y(Ie,this.h&we.h)},c.or=function(we){for(var ue=Math.max(this.g.length,we.g.length),Ie=[],Ae=0;Ae<ue;Ae++)Ie[Ae]=this.i(Ae)|we.i(Ae);return new y(Ie,this.h|we.h)},c.xor=function(we){for(var ue=Math.max(this.g.length,we.g.length),Ie=[],Ae=0;Ae<ue;Ae++)Ie[Ae]=this.i(Ae)^we.i(Ae);return new y(Ie,this.h^we.h)},s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,ft=Ge.Md5=s,y.prototype.add=y.prototype.add,y.prototype.multiply=y.prototype.j,y.prototype.modulo=y.prototype.A,y.prototype.compare=y.prototype.l,y.prototype.toNumber=y.prototype.m,y.prototype.toString=y.prototype.toString,y.prototype.getBits=y.prototype.i,y.fromNumber=B,y.fromString=function G(we,ue){if(0==we.length)throw Error("number format error: empty string");if(2>(ue=ue||10)||36<ue)throw Error("radix out of range: "+ue);if("-"==we.charAt(0))return ht(G(we.substring(1),ue));if(0<=we.indexOf("-"))throw Error('number format error: interior "-" character');for(var Ie=B(Math.pow(ue,8)),Ae=te,Pe=0;Pe<we.length;Pe+=8){var Ue=Math.min(8,we.length-Pe),me=parseInt(we.substring(Pe,Pe+Ue),ue);8>Ue?(Ue=B(Math.pow(ue,Ue)),Ae=Ae.j(Ue).add(B(me))):Ae=(Ae=Ae.j(Ie)).add(B(me))}return Ae},_t=Ge.Integer=y}).apply(typeof _e<"u"?_e:typeof self<"u"?self:typeof window<"u"?window:{});var nn,xn,Xt,ct,qe,dt,it,Vt,Tt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},fn={};(function(){var c,n="function"==typeof Object.defineProperties?Object.defineProperty:function(m,O,H){return m==Array.prototype||m==Object.prototype||(m[O]=H.value),m},s=function i(m){m=["object"==typeof globalThis&&globalThis,m,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Tt&&Tt];for(var O=0;O<m.length;++O){var H=m[O];if(H&&H.Math==Math)return H}throw Error("Cannot find global object")}(this);!function u(m,O){if(O)e:{var H=s;m=m.split(".");for(var Y=0;Y<m.length-1;Y++){var xe=m[Y];if(!(xe in H))break e;H=H[xe]}(O=O(Y=H[m=m[m.length-1]]))!=Y&&null!=O&&n(H,m,{configurable:!0,writable:!0,value:O})}}("Array.prototype.values",function(m){return m||function(){return function h(m,O){m instanceof String&&(m+="");var H=0,Y=!1,xe={next:function(){if(!Y&&H<m.length){var ze=H++;return{value:O(ze,m[ze]),done:!1}}return Y=!0,{done:!0,value:void 0}}};return xe[Symbol.iterator]=function(){return xe},xe}(this,function(O,H){return H})}});var y=y||{},D=this||self;function x(m){var O=typeof m;return"array"==(O="object"!=O?O:m?Array.isArray(m)?"array":O:"null")||"object"==O&&"number"==typeof m.length}function B(m){var O=typeof m;return"object"==O&&null!=m||"function"==O}function G(m,O,H){return m.call.apply(m.bind,arguments)}function te(m,O,H){if(!m)throw Error();if(2<arguments.length){var Y=Array.prototype.slice.call(arguments,2);return function(){var xe=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(xe,Y),m.apply(O,xe)}}return function(){return m.apply(O,arguments)}}function pe(m,O,H){return(pe=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?G:te).apply(null,arguments)}function Ve(m,O){var H=Array.prototype.slice.call(arguments,1);return function(){var Y=H.slice();return Y.push.apply(Y,arguments),m.apply(this,Y)}}function tt(m,O){function H(){}H.prototype=O.prototype,m.aa=O.prototype,m.prototype=new H,m.prototype.constructor=m,m.Qb=function(Y,xe,ze){for(var Mt=Array(arguments.length-2),Vr=2;Vr<arguments.length;Vr++)Mt[Vr-2]=arguments[Vr];return O.prototype[xe].apply(Y,Mt)}}function gt(m){const O=m.length;if(0<O){const H=Array(O);for(let Y=0;Y<O;Y++)H[Y]=m[Y];return H}return[]}function ht(m,O){for(let H=1;H<arguments.length;H++){const Y=arguments[H];if(x(Y)){const xe=m.length||0,ze=Y.length||0;m.length=xe+ze;for(let Mt=0;Mt<ze;Mt++)m[xe+Mt]=Y[Mt]}else m.push(Y)}}function tn(m){return/^[\s\xa0]*$/.test(m)}function Kt(){var m=D.navigator;return m&&(m=m.userAgent)?m:""}function kn(m){return kn[" "](m),m}kn[" "]=function(){};var Dr=!(-1==Kt().indexOf("Gecko")||-1!=Kt().toLowerCase().indexOf("webkit")&&-1==Kt().indexOf("Edge")||-1!=Kt().indexOf("Trident")||-1!=Kt().indexOf("MSIE")||-1!=Kt().indexOf("Edge"));function Yn(m,O,H){for(const Y in m)O.call(H,m[Y],Y,m)}function ue(m){const O={};for(const H in m)O[H]=m[H];return O}const Ie="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ae(m,O){let H,Y;for(let xe=1;xe<arguments.length;xe++){for(H in Y=arguments[xe],Y)m[H]=Y[H];for(let ze=0;ze<Ie.length;ze++)H=Ie[ze],Object.prototype.hasOwnProperty.call(Y,H)&&(m[H]=Y[H])}}function Pe(m){var O=1;m=m.split(":");const H=[];for(;0<O&&m.length;)H.push(m.shift()),O--;return m.length&&H.push(m.join(":")),H}function Ue(m){D.setTimeout(()=>{throw m},0)}function me(){var m=om;let O=null;return m.g&&(O=m.g,m.g=m.g.next,m.g||(m.h=null),O.next=null),O}var eh=new class zt{constructor(O,H){this.i=O,this.j=H,this.h=0,this.g=null}get(){let O;return 0<this.h?(this.h--,O=this.g,this.g=O.next,O.next=null):O=this.i(),O}}(()=>new NC,m=>m.reset());class NC{constructor(){this.next=this.g=this.h=null}set(O,H){this.h=O,this.g=H,this.next=null}reset(){this.next=this.g=this.h=null}}let th,nh=!1,om=new class nu{constructor(){this.h=this.g=null}add(O,H){const Y=eh.get();Y.set(O,H),this.h?this.h.next=Y:this.g=Y,this.h=Y}},Kf=()=>{const m=D.Promise.resolve(void 0);th=()=>{m.then(rh)}};var rh=()=>{for(var m;m=me();){try{m.h.call(m.g)}catch(H){Ue(H)}var O=eh;O.j(m),100>O.h&&(O.h++,m.next=O.g,O.g=m)}nh=!1};function rc(){this.s=this.s,this.C=this.C}function eo(m,O){this.type=m,this.g=this.target=O,this.defaultPrevented=!1}rc.prototype.s=!1,rc.prototype.ma=function(){this.s||(this.s=!0,this.N())},rc.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},eo.prototype.h=function(){this.defaultPrevented=!0};var Ey=function(){if(!D.addEventListener||!Object.defineProperty)return!1;var m=!1,O=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const H=()=>{};D.addEventListener("test",H,O),D.removeEventListener("test",H,O)}catch{}return m}();function Mc(m,O){if(eo.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m){var H=this.type=m.type,Y=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;if(this.target=m.target||m.srcElement,this.g=O,O=m.relatedTarget){if(Dr){e:{try{kn(O.nodeName);var xe=!0;break e}catch{}xe=!1}xe||(O=null)}}else"mouseover"==H?O=m.fromElement:"mouseout"==H&&(O=m.toElement);this.relatedTarget=O,Y?(this.clientX=void 0!==Y.clientX?Y.clientX:Y.pageX,this.clientY=void 0!==Y.clientY?Y.clientY:Y.pageY,this.screenX=Y.screenX||0,this.screenY=Y.screenY||0):(this.clientX=void 0!==m.clientX?m.clientX:m.pageX,this.clientY=void 0!==m.clientY?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType="string"==typeof m.pointerType?m.pointerType:Cy[m.pointerType]||"",this.state=m.state,this.i=m,m.defaultPrevented&&Mc.aa.h.call(this)}}tt(Mc,eo);var Cy={2:"touch",3:"pen",4:"mouse"};Mc.prototype.h=function(){Mc.aa.h.call(this);var m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var ih="closure_listenable_"+(1e6*Math.random()|0),oh=0;function wy(m,O,H,Y,xe){this.listener=m,this.proxy=null,this.src=O,this.type=H,this.capture=!!Y,this.ha=xe,this.key=++oh,this.da=this.fa=!1}function sh(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function ah(m){this.src=m,this.g={},this.h=0}function Qf(m,O){var H=O.type;if(H in m.g){var ze,Y=m.g[H],xe=Array.prototype.indexOf.call(Y,O,void 0);(ze=0<=xe)&&Array.prototype.splice.call(Y,xe,1),ze&&(sh(O),0==m.g[H].length&&(delete m.g[H],m.h--))}}function sm(m,O,H,Y){for(var xe=0;xe<m.length;++xe){var ze=m[xe];if(!ze.da&&ze.listener==O&&ze.capture==!!H&&ze.ha==Y)return xe}return-1}ah.prototype.add=function(m,O,H,Y,xe){var ze=m.toString();(m=this.g[ze])||(m=this.g[ze]=[],this.h++);var Mt=sm(m,O,Y,xe);return-1<Mt?(O=m[Mt],H||(O.fa=!1)):((O=new wy(O,this.src,ze,!!Y,xe)).fa=H,m.push(O)),O};var am="closure_lm_"+(1e6*Math.random()|0),cm={};function Vl(m,O,H,Y,xe){if(Y&&Y.once)return Dy(m,O,H,Y,xe);if(Array.isArray(O)){for(var ze=0;ze<O.length;ze++)Vl(m,O[ze],H,Y,xe);return null}return H=uh(H),m&&m[ih]?m.K(O,H,B(Y)?!!Y.capture:!!Y,xe):Ty(m,O,H,!1,Y,xe)}function Ty(m,O,H,Y,xe,ze){if(!O)throw Error("Invalid event type");var Mt=B(xe)?!!xe.capture:!!xe,Vr=lm(m);if(Vr||(m[am]=Vr=new ah(m)),(H=Vr.add(O,H,Y,Mt,ze)).proxy)return H;if(Y=function cE(){const O=by;return function m(H){return O.call(m.src,m.listener,H)}}(),H.proxy=Y,Y.src=m,Y.listener=H,m.addEventListener)Ey||(xe=Mt),void 0===xe&&(xe=!1),m.addEventListener(O.toString(),Y,xe);else if(m.attachEvent)m.attachEvent(um(O.toString()),Y);else{if(!m.addListener||!m.removeListener)throw Error("addEventListener and attachEvent are unavailable.");m.addListener(Y)}return H}function Dy(m,O,H,Y,xe){if(Array.isArray(O)){for(var ze=0;ze<O.length;ze++)Dy(m,O[ze],H,Y,xe);return null}return H=uh(H),m&&m[ih]?m.L(O,H,B(Y)?!!Y.capture:!!Y,xe):Ty(m,O,H,!0,Y,xe)}function ch(m,O,H,Y,xe){if(Array.isArray(O))for(var ze=0;ze<O.length;ze++)ch(m,O[ze],H,Y,xe);else Y=B(Y)?!!Y.capture:!!Y,H=uh(H),m&&m[ih]?(m=m.i,(O=String(O).toString())in m.g&&-1<(H=sm(ze=m.g[O],H,Y,xe))&&(sh(ze[H]),Array.prototype.splice.call(ze,H,1),0==ze.length&&(delete m.g[O],m.h--))):m&&(m=lm(m))&&(O=m.g[O.toString()],m=-1,O&&(m=sm(O,H,Y,xe)),(H=-1<m?O[m]:null)&&Xf(H))}function Xf(m){if("number"!=typeof m&&m&&!m.da){var O=m.src;if(O&&O[ih])Qf(O.i,m);else{var H=m.type,Y=m.proxy;O.removeEventListener?O.removeEventListener(H,Y,m.capture):O.detachEvent?O.detachEvent(um(H),Y):O.addListener&&O.removeListener&&O.removeListener(Y),(H=lm(O))?(Qf(H,m),0==H.h&&(H.src=null,O[am]=null)):sh(m)}}}function um(m){return m in cm?cm[m]:cm[m]="on"+m}function by(m,O){if(m.da)m=!0;else{O=new Mc(O,this);var H=m.listener,Y=m.ha||m.src;m.fa&&Xf(m),m=H.call(Y,O)}return m}function lm(m){return(m=m[am])instanceof ah?m:null}var Yf="__closure_events_fn_"+(1e9*Math.random()>>>0);function uh(m){return"function"==typeof m?m:(m[Yf]||(m[Yf]=function(O){return m.handleEvent(O)}),m[Yf])}function to(){rc.call(this),this.i=new ah(this),this.M=this,this.F=null}function hs(m,O){var H,Y=m.F;if(Y)for(H=[];Y;Y=Y.F)H.push(Y);if(m=m.M,Y=O.type||O,"string"==typeof O)O=new eo(O,m);else if(O instanceof eo)O.target=O.target||m;else{var xe=O;Ae(O=new eo(Y,m),xe)}if(xe=!0,H)for(var ze=H.length-1;0<=ze;ze--){var Mt=O.g=H[ze];xe=Zf(Mt,Y,!0,O)&&xe}if(xe=Zf(Mt=O.g=m,Y,!0,O)&&xe,xe=Zf(Mt,Y,!1,O)&&xe,H)for(ze=0;ze<H.length;ze++)xe=Zf(Mt=O.g=H[ze],Y,!1,O)&&xe}function Zf(m,O,H,Y){if(!(O=m.i.g[String(O)]))return!0;O=O.concat();for(var xe=!0,ze=0;ze<O.length;++ze){var Mt=O[ze];if(Mt&&!Mt.da&&Mt.capture==H){var Vr=Mt.listener,Co=Mt.ha||Mt.src;Mt.fa&&Qf(m.i,Mt),xe=!1!==Vr.call(Co,Y)&&xe}}return xe&&!Y.defaultPrevented}function Ay(m,O,H){if("function"==typeof m)H&&(m=pe(m,H));else{if(!m||"function"!=typeof m.handleEvent)throw Error("Invalid listener argument");m=pe(m.handleEvent,m)}return 2147483647<Number(O)?-1:D.setTimeout(m,O||0)}function Sy(m){m.g=Ay(()=>{m.g=null,m.i&&(m.i=!1,Sy(m))},m.l);const O=m.h;m.h=null,m.m.apply(null,O)}tt(to,rc),to.prototype[ih]=!0,to.prototype.removeEventListener=function(m,O,H,Y){ch(this,m,O,H,Y)},to.prototype.N=function(){if(to.aa.N.call(this),this.i){var O,m=this.i;for(O in m.g){for(var H=m.g[O],Y=0;Y<H.length;Y++)sh(H[Y]);delete m.g[O],m.h--}}this.F=null},to.prototype.K=function(m,O,H,Y){return this.i.add(String(m),O,!1,H,Y)},to.prototype.L=function(m,O,H,Y){return this.i.add(String(m),O,!0,H,Y)};class uE extends rc{constructor(O,H){super(),this.m=O,this.l=H,this.h=null,this.i=!1,this.g=null}j(O){this.h=arguments,this.g?this.i=!0:Sy(this)}N(){super.N(),this.g&&(D.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function lh(m){rc.call(this),this.h=m,this.g={}}tt(lh,rc);var Jf=[];function Ll(m){Yn(m.g,function(O,H){this.g.hasOwnProperty(H)&&Xf(O)},m),m.g={}}lh.prototype.N=function(){lh.aa.N.call(this),Ll(this)},lh.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ep=D.JSON.stringify,Ry=D.JSON.parse,lE=class{stringify(m){return D.JSON.stringify(m,void 0)}parse(m){return D.JSON.parse(m,void 0)}};function Gu(){}function dE(){}Gu.prototype.h=null;var hh={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function tp(){eo.call(this,"d")}function fh(){eo.call(this,"c")}tt(tp,eo),tt(fh,eo);var Wu={},dm=null;function np(){return dm=dm||new to}function hm(m){eo.call(this,Wu.La,m)}function Ul(m){const O=np();hs(O,new hm(O))}function fm(m,O){eo.call(this,Wu.STAT_EVENT,m),this.stat=O}function No(m){const O=np();hs(O,new fm(O,m))}function My(m,O){eo.call(this,Wu.Ma,m),this.size=O}function ph(m,O){if("function"!=typeof m)throw Error("Fn must not be null and must be a function");return D.setTimeout(function(){m()},O)}function gh(){this.g=!0}function jl(m,O,H,Y){m.info(function(){return"XMLHTTP TEXT ("+O+"): "+function pE(m,O){if(!m.g)return O;if(!O)return null;try{var H=JSON.parse(O);if(H)for(m=0;m<H.length;m++)if(Array.isArray(H[m])){var Y=H[m];if(!(2>Y.length)){var xe=Y[1];if(Array.isArray(xe)&&!(1>xe.length)){var ze=xe[0];if("noop"!=ze&&"stop"!=ze&&"close"!=ze)for(var Mt=1;Mt<xe.length;Mt++)xe[Mt]=""}}}return ep(H)}catch{return O}}(m,H)+(Y?" "+Y:"")})}Wu.La="serverreachability",tt(hm,eo),Wu.STAT_EVENT="statevent",tt(fm,eo),Wu.Ma="timingevent",tt(My,eo),gh.prototype.xa=function(){this.g=!1},gh.prototype.info=function(){};var Pc,rp={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Py={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function ru(){}function ic(m,O,H,Y){this.j=m,this.i=O,this.l=H,this.R=Y||1,this.U=new lh(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ip}function ip(){this.i=null,this.g="",this.h=!1}tt(ru,Gu),ru.prototype.g=function(){return new XMLHttpRequest},ru.prototype.i=function(){return{}},Pc=new ru;var xy={},iu={};function op(m,O,H){m.L=1,m.v=lp(oc(O)),m.m=H,m.P=!0,Ny(m,null)}function Ny(m,O){m.F=Date.now(),sp(m),m.A=oc(m.v);var H=m.A,Y=m.R;Array.isArray(Y)||(Y=[String(Y)]),Hl(H.i,"t",Y),m.C=0,H=m.j.J,m.h=new ip,m.g=Rm(m.j,H?O:null,!m.m),0<m.O&&(m.M=new uE(pe(m.Y,m,m.g),m.O)),O=m.U,H=m.g,Y=m.ca;var xe="readystatechange";Array.isArray(xe)||(xe&&(Jf[0]=xe.toString()),xe=Jf);for(var ze=0;ze<xe.length;ze++){var Mt=Vl(H,xe[ze],Y||O.handleEvent,!1,O.h||O);if(!Mt)break;O.g[Mt.key]=Mt}O=m.H?ue(m.H):{},m.m?(m.u||(m.u="POST"),O["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.A,m.u,m.m,O)):(m.u="GET",m.g.ea(m.A,m.u,null,O)),Ul(),function hE(m,O,H,Y,xe,ze){m.info(function(){if(m.g)if(ze)for(var Mt="",Vr=ze.split("&"),Co=0;Co<Vr.length;Co++){var _r=Vr[Co].split("=");if(1<_r.length){var Xo=_r[0];_r=_r[1];var fs=Xo.split("_");Mt=2<=fs.length&&"type"==fs[1]?Mt+(Xo+"=")+_r+"&":Mt+(Xo+"=redacted&")}}else Mt=null;else Mt=ze;return"XMLHTTP REQ ("+Y+") [attempt "+xe+"]: "+O+"\n"+H+"\n"+Mt})}(m.i,m.u,m.A,m.l,m.R,m.m)}function Oy(m){return!!m.g&&"GET"==m.u&&2!=m.L&&m.j.Ca}function gE(m,O){var H=m.C,Y=O.indexOf("\n",H);return-1==Y?iu:(H=Number(O.substring(H,Y)),isNaN(H)?xy:(Y+=1)+H>O.length?iu:(O=O.slice(Y,Y+H),m.C=Y+H,O))}function sp(m){m.S=Date.now()+m.I,ky(m,m.I)}function ky(m,O){if(null!=m.B)throw Error("WatchDog timer not null");m.B=ph(pe(m.ba,m),O)}function ap(m){m.B&&(D.clearTimeout(m.B),m.B=null)}function mh(m){0==m.j.G||m.J||vp(m.j,m)}function ou(m){ap(m);var O=m.M;O&&"function"==typeof O.ma&&O.ma(),m.M=null,Ll(m.U),m.g&&(O=m.g,m.g=null,O.abort(),O.ma())}function Bl(m,O){try{var H=m.j;if(0!=H.G&&(H.g==m||mm(H.h,m)))if(!m.K&&mm(H.h,m)&&3==H.G){try{var Y=H.Da.g.parse(O)}catch{Y=null}if(Array.isArray(Y)&&3==Y.length){var xe=Y;if(0==xe[0]){e:if(!H.u){if(H.g){if(!(H.g.F+3e3<m.F))break e;Wl(H),mp(H)}Tm(H),No(18)}}else H.za=xe[1],0<H.za-H.T&&37500>xe[2]&&H.F&&0==H.v&&!H.C&&(H.C=ph(pe(H.Za,H),6e3));if(1>=Vy(H.h)&&H.ca){try{H.ca()}catch{}H.ca=void 0}}else au(H,11)}else if((m.K||H.g==m)&&Wl(H),!tn(O))for(xe=H.Da.g.parse(O),O=0;O<xe.length;O++){let _r=xe[O];if(H.T=_r[0],_r=_r[1],2==H.G)if("c"==_r[0]){H.K=_r[1],H.ia=_r[2];const Xo=_r[3];null!=Xo&&(H.la=Xo,H.j.info("VER="+H.la));const fs=_r[4];null!=fs&&(H.Aa=fs,H.j.info("SVER="+H.Aa));const Sh=_r[5];null!=Sh&&"number"==typeof Sh&&0<Sh&&(H.L=Y=1.5*Sh,H.j.info("backChannelRequestTimeoutMs_="+Y)),Y=H;const cc=m.g;if(cc){const Pm=cc.g?cc.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Pm){var ze=Y.h;ze.g||-1==Pm.indexOf("spdy")&&-1==Pm.indexOf("quic")&&-1==Pm.indexOf("h2")||(ze.j=ze.l,ze.g=new Set,ze.h&&(xc(ze,ze.h),ze.h=null))}if(Y.D){const ev=cc.g?cc.g.getResponseHeader("X-HTTP-Session-Id"):null;ev&&(Y.ya=ev,$r(Y.I,Y.D,ev))}}H.G=3,H.l&&H.l.ua(),H.ba&&(H.R=Date.now()-m.F,H.j.info("Handshake RTT: "+H.R+"ms"));var Mt=m;if((Y=H).qa=Zy(Y,Y.J?Y.ia:null,Y.W),Mt.K){qu(Y.h,Mt);var Vr=Mt,Co=Y.L;Co&&(Vr.I=Co),Vr.B&&(ap(Vr),sp(Vr)),Y.g=Mt}else Yy(Y);0<H.i.length&&Gl(H)}else"stop"!=_r[0]&&"close"!=_r[0]||au(H,7);else 3==H.G&&("stop"==_r[0]||"close"==_r[0]?"stop"==_r[0]?au(H,7):wm(H):"noop"!=_r[0]&&H.l&&H.l.ta(_r),H.v=0)}Ul()}catch{}}ic.prototype.ca=function(m){m=m.target;const O=this.M;O&&3==ac(m)?O.j():this.Y(m)},ic.prototype.Y=function(m){try{if(m==this.g)e:{const fs=ac(this.g);var O=this.g.Ba();if(this.g.Z(),!(3>fs)&&(3!=fs||this.g&&(this.h.h||this.g.oa()||gp(this.g)))){this.J||4!=fs||7==O||Ul(),ap(this);var H=this.g.Z();this.X=H;t:if(Oy(this)){var Y=gp(this.g);m="";var xe=Y.length,ze=4==ac(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){ou(this),mh(this);var Mt="";break t}this.h.i=new D.TextDecoder}for(O=0;O<xe;O++)this.h.h=!0,m+=this.h.i.decode(Y[O],{stream:!(ze&&O==xe-1)});Y.length=0,this.h.g+=m,this.C=0,Mt=this.h.g}else Mt=this.g.oa();if(this.o=200==H,function fE(m,O,H,Y,xe,ze,Mt){m.info(function(){return"XMLHTTP RESP ("+Y+") [ attempt "+xe+"]: "+O+"\n"+H+"\n"+ze+" "+Mt})}(this.i,this.u,this.A,this.l,this.R,fs,H),this.o){if(this.T&&!this.K){t:{if(this.g){var Vr,Co=this.g;if((Vr=Co.g?Co.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!tn(Vr)){var _r=Vr;break t}}_r=null}if(!(H=_r)){this.o=!1,this.s=3,No(12),ou(this),mh(this);break e}jl(this.i,this.l,H,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Bl(this,H)}if(this.P){let cc;for(H=!0;!this.J&&this.C<Mt.length;){if(cc=gE(this,Mt),cc==iu){4==fs&&(this.s=4,No(14),H=!1),jl(this.i,this.l,null,"[Incomplete Response]");break}if(cc==xy){this.s=4,No(15),jl(this.i,this.l,Mt,"[Invalid Chunk]"),H=!1;break}jl(this.i,this.l,cc,null),Bl(this,cc)}if(Oy(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=fs||0!=Mt.length||this.h.h||(this.s=1,No(16),H=!1),this.o=this.o&&H,H){if(0<Mt.length&&!this.W){this.W=!0;var Xo=this.j;Xo.g==this&&Xo.ba&&!Xo.M&&(Xo.j.info("Great, no buffering proxy detected. Bytes received: "+Mt.length),Dm(Xo),Xo.M=!0,No(11))}}else jl(this.i,this.l,Mt,"[Invalid Chunked Response]"),ou(this),mh(this)}else jl(this.i,this.l,Mt,null),Bl(this,Mt);4==fs&&ou(this),this.o&&!this.J&&(4==fs?vp(this.j,this):(this.o=!1,sp(this)))}else(function qy(m){const O={};m=(m.g&&2<=ac(m)&&m.g.getAllResponseHeaders()||"").split("\r\n");for(let Y=0;Y<m.length;Y++){if(tn(m[Y]))continue;var H=Pe(m[Y]);const xe=H[0];if("string"!=typeof(H=H[1]))continue;H=H.trim();const ze=O[xe]||[];O[xe]=ze,ze.push(H)}!function we(m,O){for(const H in m)O.call(void 0,m[H],H,m)}(O,function(Y){return Y.join(", ")})})(this.g),400==H&&0<Mt.indexOf("Unknown SID")?(this.s=3,No(12)):(this.s=0,No(13)),ou(this),mh(this)}}}catch{}},ic.prototype.cancel=function(){this.J=!0,ou(this)},ic.prototype.ba=function(){this.B=null;const m=Date.now();0<=m-this.S?(function pm(m,O){m.info(function(){return"TIMEOUT: "+O})}(this.i,this.A),2!=this.L&&(Ul(),No(17)),ou(this),this.s=2,mh(this)):ky(this,this.S-m)};var mE=class{constructor(m,O){this.g=m,this.map=O}};function Fy(m){this.l=m||10,m=D.PerformanceNavigationTiming?0<(m=D.performance.getEntriesByType("navigation")).length&&("hq"==m[0].nextHopProtocol||"h2"==m[0].nextHopProtocol):!!(D.chrome&&D.chrome.loadTimes&&D.chrome.loadTimes()&&D.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function gm(m){return!!m.h||!!m.g&&m.g.size>=m.j}function Vy(m){return m.h?1:m.g?m.g.size:0}function mm(m,O){return m.h?m.h==O:!!m.g&&m.g.has(O)}function xc(m,O){m.g?m.g.add(O):m.h=O}function qu(m,O){m.h&&m.h==O?m.h=null:m.g&&m.g.has(O)&&m.g.delete(O)}function $l(m){if(null!=m.h)return m.i.concat(m.h.D);if(null!=m.g&&0!==m.g.size){let O=m.i;for(const H of m.g.values())O=O.concat(H.D);return O}return gt(m.i)}function cp(m,O){if(m.forEach&&"function"==typeof m.forEach)m.forEach(O,void 0);else if(x(m)||"string"==typeof m)Array.prototype.forEach.call(m,O,void 0);else for(var H=function Ly(m){if(m.na&&"function"==typeof m.na)return m.na();if(!m.V||"function"!=typeof m.V){if(typeof Map<"u"&&m instanceof Map)return Array.from(m.keys());if(!(typeof Set<"u"&&m instanceof Set)){if(x(m)||"string"==typeof m){var O=[];m=m.length;for(var H=0;H<m;H++)O.push(H);return O}O=[],H=0;for(const Y in m)O[H++]=Y;return O}}}(m),Y=function OC(m){if(m.V&&"function"==typeof m.V)return m.V();if(typeof Map<"u"&&m instanceof Map||typeof Set<"u"&&m instanceof Set)return Array.from(m.values());if("string"==typeof m)return m.split("");if(x(m)){for(var O=[],H=m.length,Y=0;Y<H;Y++)O.push(m[Y]);return O}for(Y in O=[],H=0,m)O[H++]=m[Y];return O}(m),xe=Y.length,ze=0;ze<xe;ze++)O.call(void 0,Y[ze],H&&H[ze],m)}Fy.prototype.cancel=function(){if(this.i=$l(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const m of this.g.values())m.cancel();this.g.clear()}};var Uy=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ku(m){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,m instanceof Ku){this.h=m.h,_m(this,m.j),this.o=m.o,this.g=m.g,up(this,m.s),this.l=m.l;var O=m.i,H=new Eh;H.i=O.i,O.g&&(H.g=new Map(O.g),H.h=O.h),_h(this,H),this.m=m.m}else m&&(O=String(m).match(Uy))?(this.h=!1,_m(this,O[1]||"",!0),this.o=yh(O[2]||""),this.g=yh(O[3]||"",!0),up(this,O[4]),this.l=yh(O[5]||"",!0),_h(this,O[6]||"",!0),this.m=yh(O[7]||"")):(this.h=!1,this.i=new Eh(null,this.h))}function oc(m){return new Ku(m)}function _m(m,O,H){m.j=H?yh(O,!0):O,m.j&&(m.j=m.j.replace(/:$/,""))}function up(m,O){if(O){if(O=Number(O),isNaN(O)||0>O)throw Error("Bad port number "+O);m.s=O}else m.s=null}function _h(m,O,H){O instanceof Eh?(m.i=O,function hp(m,O){O&&!m.j&&(sc(m),m.i=null,m.g.forEach(function(H,Y){var xe=Y.toLowerCase();Y!=xe&&(vm(this,Y),Hl(this,xe,H))},m)),m.j=O}(m.i,m.h)):(H||(O=vh(O,Ih)),m.i=new Eh(O,m.h))}function $r(m,O,H){m.i.set(O,H)}function lp(m){return $r(m,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),m}function yh(m,O){return m?O?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function vh(m,O,H){return"string"==typeof m?(m=encodeURI(m).replace(O,ym),H&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function ym(m){return"%"+((m=m.charCodeAt(0))>>4&15).toString(16)+(15&m).toString(16)}Ku.prototype.toString=function(){var m=[],O=this.j;O&&m.push(vh(O,Nc,!0),":");var H=this.g;return(H||"file"==O)&&(m.push("//"),(O=this.o)&&m.push(vh(O,Nc,!0),"@"),m.push(encodeURIComponent(String(H)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(H=this.s)&&m.push(":",String(H))),(H=this.l)&&(this.g&&"/"!=H.charAt(0)&&m.push("/"),m.push(vh(H,"/"==H.charAt(0)?By:dp,!0))),(H=this.i.toString())&&m.push("?",H),(H=this.m)&&m.push("#",vh(H,_E)),m.join("")};var Nc=/[#\/\?@]/g,dp=/[#\?:]/g,By=/[#\?]/g,Ih=/[#\?@]/g,_E=/#/g;function Eh(m,O){this.h=this.g=null,this.i=m||null,this.j=!!O}function sc(m){m.g||(m.g=new Map,m.h=0,m.i&&function jy(m,O){if(m){m=m.split("&");for(var H=0;H<m.length;H++){var Y=m[H].indexOf("="),xe=null;if(0<=Y){var ze=m[H].substring(0,Y);xe=m[H].substring(Y+1)}else ze=m[H];O(ze,xe?decodeURIComponent(xe.replace(/\+/g," ")):"")}}}(m.i,function(O,H){m.add(decodeURIComponent(O.replace(/\+/g," ")),H)}))}function vm(m,O){sc(m),O=Ch(m,O),m.g.has(O)&&(m.i=null,m.h-=m.g.get(O).length,m.g.delete(O))}function Oc(m,O){return sc(m),O=Ch(m,O),m.g.has(O)}function Hl(m,O,H){vm(m,O),0<H.length&&(m.i=null,m.g.set(Ch(m,O),gt(H)),m.h+=H.length)}function Ch(m,O){return O=String(O),m.j&&(O=O.toLowerCase()),O}function su(m,O,H,Y,xe){try{xe&&(xe.onload=null,xe.onerror=null,xe.onabort=null,xe.ontimeout=null),Y(H)}catch{}}function wh(){this.g=new lE}function yE(m,O,H){const Y=H||"";try{cp(m,function(xe,ze){let Mt=xe;B(xe)&&(Mt=ep(xe)),O.push(Y+ze+"="+encodeURIComponent(Mt))})}catch(xe){throw O.push(Y+"type="+encodeURIComponent("_badmap")),xe}}function Th(m){this.l=m.Ub||null,this.j=m.eb||!1}function fp(m,O){to.call(this),this.D=m,this.o=O,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function zy(m){m.j.read().then(m.Pa.bind(m)).catch(m.ga.bind(m))}function Dh(m){m.readyState=4,m.l=null,m.j=null,m.v=null,bh(m)}function bh(m){m.onreadystatechange&&m.onreadystatechange.call(m)}function Gy(m){let O="";return Yn(m,function(H,Y){O+=Y,O+=":",O+=H,O+="\r\n"}),O}function Im(m,O,H){e:{for(Y in H){var Y=!1;break e}Y=!0}Y||(H=Gy(H),"string"==typeof m?null!=H&&encodeURIComponent(String(H)):$r(m,O,H))}function ti(m){to.call(this),this.headers=new Map,this.o=m||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(c=Eh.prototype).add=function(m,O){sc(this),this.i=null,m=Ch(this,m);var H=this.g.get(m);return H||this.g.set(m,H=[]),H.push(O),this.h+=1,this},c.forEach=function(m,O){sc(this),this.g.forEach(function(H,Y){H.forEach(function(xe){m.call(O,xe,Y,this)},this)},this)},c.na=function(){sc(this);const m=Array.from(this.g.values()),O=Array.from(this.g.keys()),H=[];for(let Y=0;Y<O.length;Y++){const xe=m[Y];for(let ze=0;ze<xe.length;ze++)H.push(O[Y])}return H},c.V=function(m){sc(this);let O=[];if("string"==typeof m)Oc(this,m)&&(O=O.concat(this.g.get(Ch(this,m))));else{m=Array.from(this.g.values());for(let H=0;H<m.length;H++)O=O.concat(m[H])}return O},c.set=function(m,O){return sc(this),this.i=null,Oc(this,m=Ch(this,m))&&(this.h-=this.g.get(m).length),this.g.set(m,[O]),this.h+=1,this},c.get=function(m,O){return m&&0<(m=this.V(m)).length?String(m[0]):O},c.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],O=Array.from(this.g.keys());for(var H=0;H<O.length;H++){var Y=O[H];const ze=encodeURIComponent(String(Y)),Mt=this.V(Y);for(Y=0;Y<Mt.length;Y++){var xe=ze;""!==Mt[Y]&&(xe+="="+encodeURIComponent(String(Mt[Y]))),m.push(xe)}}return this.i=m.join("&")},tt(Th,Gu),Th.prototype.g=function(){return new fp(this.l,this.j)},Th.prototype.i=function(m){return function(){return m}}({}),tt(fp,to),(c=fp.prototype).open=function(m,O){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=m,this.A=O,this.readyState=1,bh(this)},c.send=function(m){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const O={headers:this.u,method:this.B,credentials:this.m,cache:void 0};m&&(O.body=m),(this.D||D).fetch(new Request(this.A,O)).then(this.Sa.bind(this),this.ga.bind(this))},c.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Dh(this)),this.readyState=0},c.Sa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,bh(this)),this.g&&(this.readyState=3,bh(this),this.g)))if("arraybuffer"===this.responseType)m.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof D.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;zy(this)}else m.text().then(this.Ra.bind(this),this.ga.bind(this))},c.Pa=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var O=m.value?m.value:new Uint8Array(0);(O=this.v.decode(O,{stream:!m.done}))&&(this.response=this.responseText+=O)}m.done?Dh(this):bh(this),3==this.readyState&&zy(this)}},c.Ra=function(m){this.g&&(this.response=this.responseText=m,Dh(this))},c.Qa=function(m){this.g&&(this.response=m,Dh(this))},c.ga=function(){this.g&&Dh(this)},c.setRequestHeader=function(m,O){this.u.append(m,O)},c.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},c.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],O=this.h.entries();for(var H=O.next();!H.done;)m.push((H=H.value)[0]+": "+H[1]),H=O.next();return m.join("\r\n")},Object.defineProperty(fp.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(m){this.m=m?"include":"same-origin"}}),tt(ti,to);var vE=/^https?$/i,IE=["POST","PUT"];function Em(m,O){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=O,m.m=5,Cm(m),Ah(m)}function Cm(m){m.A||(m.A=!0,hs(m,"complete"),hs(m,"error"))}function pp(m){if(m.h&&typeof y<"u"&&(!m.v[1]||4!=ac(m)||2!=m.Z()))if(m.u&&4==ac(m))Ay(m.Ea,0,m);else if(hs(m,"readystatechange"),4==ac(m)){m.h=!1;try{const Mt=m.Z();e:switch(Mt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var O=!0;break e;default:O=!1}var H;if(!(H=O)){var Y;if(Y=0===Mt){var xe=String(m.D).match(Uy)[1]||null;!xe&&D.self&&D.self.location&&(xe=D.self.location.protocol.slice(0,-1)),Y=!vE.test(xe?xe.toLowerCase():"")}H=Y}if(H)hs(m,"complete"),hs(m,"success");else{m.m=6;try{var ze=2<ac(m)?m.g.statusText:""}catch{ze=""}m.l=ze+" ["+m.Z()+"]",Cm(m)}}finally{Ah(m)}}}function Ah(m,O){if(m.g){Wy(m);const H=m.g,Y=m.v[0]?()=>{}:null;m.g=null,m.v=null,O||hs(m,"ready");try{H.onreadystatechange=Y}catch{}}}function Wy(m){m.I&&(D.clearTimeout(m.I),m.I=null)}function ac(m){return m.g?m.g.readyState:0}function gp(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.H){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function zl(m,O,H){return H&&H.internalChannelParams&&H.internalChannelParams[m]||O}function Ky(m){this.Aa=0,this.i=[],this.j=new gh,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=zl("failFast",!1,m),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=zl("baseRetryDelayMs",5e3,m),this.cb=zl("retryDelaySeedMs",1e4,m),this.Wa=zl("forwardChannelMaxRetries",2,m),this.wa=zl("forwardChannelRequestTimeoutMs",2e4,m),this.pa=m&&m.xmlHttpFactory||void 0,this.Xa=m&&m.Tb||void 0,this.Ca=m&&m.useFetchStreams||!1,this.L=void 0,this.J=m&&m.supportsCrossDomainXhr||!1,this.K="",this.h=new Fy(m&&m.concurrentRequestLimit),this.Da=new wh,this.P=m&&m.fastHandshake||!1,this.O=m&&m.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=m&&m.Rb||!1,m&&m.xa&&this.j.xa(),m&&m.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&m&&m.detectBufferingProxy||!1,this.ja=void 0,m&&m.longPollingTimeout&&0<m.longPollingTimeout&&(this.ja=m.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function wm(m){if(_p(m),3==m.G){var O=m.U++,H=oc(m.I);if($r(H,"SID",m.K),$r(H,"RID",O),$r(H,"TYPE","terminate"),Qu(m,H),(O=new ic(m,m.j,O)).L=2,O.v=lp(oc(H)),H=!1,D.navigator&&D.navigator.sendBeacon)try{H=D.navigator.sendBeacon(O.v.toString(),"")}catch{}!H&&D.Image&&((new Image).src=O.v,H=!0),H||(O.g=Rm(O.j,null),O.g.ea(O.v)),O.F=Date.now(),sp(O)}Sm(m)}function mp(m){m.g&&(Dm(m),m.g.cancel(),m.g=null)}function _p(m){mp(m),m.u&&(D.clearTimeout(m.u),m.u=null),Wl(m),m.h.cancel(),m.s&&("number"==typeof m.s&&D.clearTimeout(m.s),m.s=null)}function Gl(m){if(!gm(m.h)&&!m.s){m.s=!0;var O=m.Ga;th||Kf(),nh||(th(),nh=!0),om.add(O,m),m.B=0}}function yp(m,O){var H;H=O?O.l:m.U++;const Y=oc(m.I);$r(Y,"SID",m.K),$r(Y,"RID",H),$r(Y,"AID",m.T),Qu(m,Y),m.m&&m.o&&Im(Y,m.m,m.o),H=new ic(m,m.j,H,m.B+1),null===m.m&&(H.H=m.o),O&&(m.i=O.D.concat(m.i)),O=Xy(m,H,1e3),H.I=Math.round(.5*m.wa)+Math.round(.5*m.wa*Math.random()),xc(m.h,H),op(H,Y,O)}function Qu(m,O){m.H&&Yn(m.H,function(H,Y){$r(O,Y,H)}),m.l&&cp({},function(H,Y){$r(O,Y,H)})}function Xy(m,O,H){H=Math.min(m.i.length,H);var Y=m.l?pe(m.l.Na,m.l,m):null;e:{var xe=m.i;let ze=-1;for(;;){const Mt=["count="+H];-1==ze?0<H?(ze=xe[0].g,Mt.push("ofs="+ze)):ze=0:Mt.push("ofs="+ze);let Vr=!0;for(let Co=0;Co<H;Co++){let _r=xe[Co].g;const Xo=xe[Co].map;if(_r-=ze,0>_r)ze=Math.max(0,xe[Co].g-100),Vr=!1;else try{yE(Xo,Mt,"req"+_r+"_")}catch{Y&&Y(Xo)}}if(Vr){Y=Mt.join("&");break e}}}return m=m.i.splice(0,H),O.D=m,Y}function Yy(m){if(!m.g&&!m.u){m.Y=1;var O=m.Fa;th||Kf(),nh||(th(),nh=!0),om.add(O,m),m.v=0}}function Tm(m){return!(m.g||m.u||3<=m.v||(m.Y++,m.u=ph(pe(m.Fa,m),Am(m,m.v)),m.v++,0))}function Dm(m){null!=m.A&&(D.clearTimeout(m.A),m.A=null)}function bm(m){m.g=new ic(m,m.j,"rpc",m.Y),null===m.m&&(m.g.H=m.o),m.g.O=0;var O=oc(m.qa);$r(O,"RID","rpc"),$r(O,"SID",m.K),$r(O,"AID",m.T),$r(O,"CI",m.F?"0":"1"),!m.F&&m.ja&&$r(O,"TO",m.ja),$r(O,"TYPE","xmlhttp"),Qu(m,O),m.m&&m.o&&Im(O,m.m,m.o),m.L&&(m.g.I=m.L);var H=m.g;m=m.ia,H.L=1,H.v=lp(oc(O)),H.m=null,H.P=!0,Ny(H,m)}function Wl(m){null!=m.C&&(D.clearTimeout(m.C),m.C=null)}function vp(m,O){var H=null;if(m.g==O){Wl(m),Dm(m),m.g=null;var Y=2}else{if(!mm(m.h,O))return;H=O.D,qu(m.h,O),Y=1}if(0!=m.G)if(O.o)if(1==Y){H=O.m?O.m.length:0,O=Date.now()-O.F;var xe=m.B;hs(Y=np(),new My(Y,H)),Gl(m)}else Yy(m);else if(3==(xe=O.s)||0==xe&&0<O.X||!(1==Y&&function Qy(m,O){return!(Vy(m.h)>=m.h.j-(m.s?1:0)||(m.s?(m.i=O.D.concat(m.i),0):1==m.G||2==m.G||m.B>=(m.Va?0:m.Wa)||(m.s=ph(pe(m.Ga,m,O),Am(m,m.B)),m.B++,0)))}(m,O)||2==Y&&Tm(m)))switch(H&&0<H.length&&(O=m.h,O.i=O.i.concat(H)),xe){case 1:au(m,5);break;case 4:au(m,10);break;case 3:au(m,6);break;default:au(m,2)}}function Am(m,O){let H=m.Ta+Math.floor(Math.random()*m.cb);return m.isActive()||(H*=2),H*O}function au(m,O){if(m.j.info("Error code "+O),2==O){var H=pe(m.fb,m),Y=m.Xa;const xe=!Y;Y=new Ku(Y||"//www.google.com/images/cleardot.gif"),D.location&&"http"==D.location.protocol||_m(Y,"https"),lp(Y),xe?function $y(m,O){const H=new gh;if(D.Image){const Y=new Image;Y.onload=Ve(su,H,"TestLoadImage: loaded",!0,O,Y),Y.onerror=Ve(su,H,"TestLoadImage: error",!1,O,Y),Y.onabort=Ve(su,H,"TestLoadImage: abort",!1,O,Y),Y.ontimeout=Ve(su,H,"TestLoadImage: timeout",!1,O,Y),D.setTimeout(function(){Y.ontimeout&&Y.ontimeout()},1e4),Y.src=m}else O(!1)}(Y.toString(),H):function Hy(m,O){new gh;const Y=new AbortController,xe=setTimeout(()=>{Y.abort(),su(0,0,!1,O)},1e4);fetch(m,{signal:Y.signal}).then(ze=>{clearTimeout(xe),su(0,0,!!ze.ok,O)}).catch(()=>{clearTimeout(xe),su(0,0,!1,O)})}(Y.toString(),H)}else No(2);m.G=0,m.l&&m.l.sa(O),Sm(m),_p(m)}function Sm(m){if(m.G=0,m.ka=[],m.l){const O=$l(m.h);(0!=O.length||0!=m.i.length)&&(ht(m.ka,O),ht(m.ka,m.i),m.h.i.length=0,gt(m.i),m.i.length=0),m.l.ra()}}function Zy(m,O,H){var Y=H instanceof Ku?oc(H):new Ku(H);if(""!=Y.g)O&&(Y.g=O+"."+Y.g),up(Y,Y.s);else{var xe=D.location;Y=xe.protocol,O=O?O+"."+xe.hostname:xe.hostname,xe=+xe.port;var ze=new Ku(null);Y&&_m(ze,Y),O&&(ze.g=O),xe&&up(ze,xe),H&&(ze.l=H),Y=ze}return O=m.ya,(H=m.D)&&O&&$r(Y,H,O),$r(Y,"VER",m.la),Qu(m,Y),Y}function Rm(m,O,H){if(O&&!m.J)throw Error("Can't create secondary domain capable XhrIo object.");return(O=new ti(m.Ca&&!m.pa?new Th({eb:H}):m.pa)).Ha(m.J),O}function Jy(){}function ql(){}function Ms(m,O){to.call(this),this.g=new Ky(O),this.l=m,this.h=O&&O.messageUrlParams||null,m=O&&O.messageHeaders||null,O&&O.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=O&&O.initMessageHeaders||null,O&&O.messageContentType&&(m?m["X-WebChannel-Content-Type"]=O.messageContentType:m={"X-WebChannel-Content-Type":O.messageContentType}),O&&O.va&&(m?m["X-WebChannel-Client-Profile"]=O.va:m={"X-WebChannel-Client-Profile":O.va}),this.g.S=m,(m=O&&O.Sb)&&!tn(m)&&(this.g.m=m),this.v=O&&O.supportsCrossDomainXhr||!1,this.u=O&&O.sendRawJson||!1,(O=O&&O.httpSessionIdParam)&&!tn(O)&&(this.g.D=O,null!==(m=this.h)&&O in m&&O in(m=this.h)&&delete m[O]),this.j=new Xu(this)}function Mm(m){tp.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var O=m.__sm__;if(O){e:{for(const H in O){m=H;break e}m=void 0}(this.i=m)&&(m=this.i,O=null!==O&&m in O?O[m]:void 0),this.data=O}else this.data=m}function Qo(){fh.call(this),this.status=1}function Xu(m){this.g=m}(c=ti.prototype).Ha=function(m){this.J=m},c.ea=function(m,O,H,Y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);O=O?O.toUpperCase():"GET",this.D=m,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Pc.g(),this.v=function dh(m){return m.h||(m.h=m.i())}(this.o?this.o:Pc),this.g.onreadystatechange=pe(this.Ea,this);try{this.B=!0,this.g.open(O,String(m),!0),this.B=!1}catch(ze){return void Em(this,ze)}if(m=H||"",H=new Map(this.headers),Y)if(Object.getPrototypeOf(Y)===Object.prototype)for(var xe in Y)H.set(xe,Y[xe]);else{if("function"!=typeof Y.keys||"function"!=typeof Y.get)throw Error("Unknown input type for opt_headers: "+String(Y));for(const ze of Y.keys())H.set(ze,Y.get(ze))}Y=Array.from(H.keys()).find(ze=>"content-type"==ze.toLowerCase()),xe=D.FormData&&m instanceof D.FormData,!(0<=Array.prototype.indexOf.call(IE,O,void 0))||Y||xe||H.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ze,Mt]of H)this.g.setRequestHeader(ze,Mt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Wy(this),this.u=!0,this.g.send(m),this.u=!1}catch(ze){Em(this,ze)}},c.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=m||7,hs(this,"complete"),hs(this,"abort"),Ah(this))},c.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ah(this,!0)),ti.aa.N.call(this)},c.Ea=function(){this.s||(this.B||this.u||this.j?pp(this):this.bb())},c.bb=function(){pp(this)},c.isActive=function(){return!!this.g},c.Z=function(){try{return 2<ac(this)?this.g.status:-1}catch{return-1}},c.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},c.Oa=function(m){if(this.g){var O=this.g.responseText;return m&&0==O.indexOf(m)&&(O=O.substring(m.length)),Ry(O)}},c.Ba=function(){return this.m},c.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(c=Ky.prototype).la=8,c.G=1,c.connect=function(m,O,H,Y){No(0),this.W=m,this.H=O||{},H&&void 0!==Y&&(this.H.OSID=H,this.H.OAID=Y),this.F=this.X,this.I=Zy(this,null,this.W),Gl(this)},c.Ga=function(m){if(this.s)if(this.s=null,1==this.G){if(!m){this.U=Math.floor(1e5*Math.random()),m=this.U++;const xe=new ic(this,this.j,m);let ze=this.o;if(this.S&&(ze?(ze=ue(ze),Ae(ze,this.S)):ze=this.S),null!==this.m||this.O||(xe.H=ze,ze=null),this.P)e:{for(var O=0,H=0;H<this.i.length;H++){var Y=this.i[H];if(void 0===(Y="__data__"in Y.map&&"string"==typeof(Y=Y.map.__data__)?Y.length:void 0))break;if(4096<(O+=Y)){O=H;break e}if(4096===O||H===this.i.length-1){O=H+1;break e}}O=1e3}else O=1e3;O=Xy(this,xe,O),$r(H=oc(this.I),"RID",m),$r(H,"CVER",22),this.D&&$r(H,"X-HTTP-Session-Id",this.D),Qu(this,H),ze&&(this.O?O="headers="+encodeURIComponent(String(Gy(ze)))+"&"+O:this.m&&Im(H,this.m,ze)),xc(this.h,xe),this.Ua&&$r(H,"TYPE","init"),this.P?($r(H,"$req",O),$r(H,"SID","null"),xe.T=!0,op(xe,H,null)):op(xe,H,O),this.G=2}}else 3==this.G&&(m?yp(this,m):0==this.i.length||gm(this.h)||yp(this))},c.Fa=function(){if(this.u=null,bm(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var m=2*this.R;this.j.info("BP detection timer enabled: "+m),this.A=ph(pe(this.ab,this),m)}},c.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,No(10),mp(this),bm(this))},c.Za=function(){null!=this.C&&(this.C=null,mp(this),Tm(this),No(19))},c.fb=function(m){m?(this.j.info("Successfully pinged google.com"),No(2)):(this.j.info("Failed to ping google.com"),No(1))},c.isActive=function(){return!!this.l&&this.l.isActive(this)},(c=Jy.prototype).ua=function(){},c.ta=function(){},c.sa=function(){},c.ra=function(){},c.isActive=function(){return!0},c.Na=function(){},ql.prototype.g=function(m,O){return new Ms(m,O)},tt(Ms,to),Ms.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ms.prototype.close=function(){wm(this.g)},Ms.prototype.o=function(m){var O=this.g;if("string"==typeof m){var H={};H.__data__=m,m=H}else this.u&&((H={}).__data__=ep(m),m=H);O.i.push(new mE(O.Ya++,m)),3==O.G&&Gl(O)},Ms.prototype.N=function(){this.g.l=null,delete this.j,wm(this.g),delete this.g,Ms.aa.N.call(this)},tt(Mm,tp),tt(Qo,fh),tt(Xu,Jy),Xu.prototype.ua=function(){hs(this.g,"a")},Xu.prototype.ta=function(m){hs(this.g,new Mm(m))},Xu.prototype.sa=function(m){hs(this.g,new Qo)},Xu.prototype.ra=function(){hs(this.g,"b")},ql.prototype.createWebChannel=ql.prototype.g,Ms.prototype.send=Ms.prototype.o,Ms.prototype.open=Ms.prototype.m,Ms.prototype.close=Ms.prototype.close,Vt=fn.createWebChannelTransport=function(){return new ql},it=fn.getStatEventTarget=function(){return np()},dt=fn.Event=Wu,qe=fn.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},rp.NO_ERROR=0,rp.TIMEOUT=8,rp.HTTP_ERROR=6,ct=fn.ErrorCode=rp,Py.COMPLETE="complete",Xt=fn.EventType=Py,dE.EventType=hh,hh.OPEN="a",hh.CLOSE="b",hh.ERROR="c",hh.MESSAGE="d",to.prototype.listen=to.prototype.K,xn=fn.WebChannel=dE,fn.FetchXmlHttpFactory=Th,ti.prototype.listenOnce=ti.prototype.L,ti.prototype.getLastError=ti.prototype.Ka,ti.prototype.getLastErrorCode=ti.prototype.Ba,ti.prototype.getStatus=ti.prototype.Z,ti.prototype.getResponseJson=ti.prototype.Oa,ti.prototype.getResponseText=ti.prototype.oa,ti.prototype.send=ti.prototype.ea,ti.prototype.setWithCredentials=ti.prototype.Ha,nn=fn.XhrIo=ti}).apply(typeof Tt<"u"?Tt:typeof self<"u"?self:typeof window<"u"?window:{});const Qt="@firebase/firestore";class De{constructor(n){this.uid=n}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(n){return n.uid===this.uid}}De.UNAUTHENTICATED=new De(null),De.GOOGLE_CREDENTIALS=new De("google-credentials-uid"),De.FIRST_PARTY=new De("first-party-uid"),De.MOCK_USER=new De("mock-user");let rn="10.14.0";const on=new rt.Vy("@firebase/firestore");function fr(){return on.logLevel}function Qe(c,...n){if(on.logLevel<=rt.$b.DEBUG){const i=n.map(Lr);on.debug(`Firestore (${rn}): ${c}`,...i)}}function pn(c,...n){if(on.logLevel<=rt.$b.ERROR){const i=n.map(Lr);on.error(`Firestore (${rn}): ${c}`,...i)}}function cr(c,...n){if(on.logLevel<=rt.$b.WARN){const i=n.map(Lr);on.warn(`Firestore (${rn}): ${c}`,...i)}}function Lr(c){if("string"==typeof c)return c;try{return JSON.stringify(c)}catch{return c}}function yt(c="Unexpected state"){const n=`FIRESTORE (${rn}) INTERNAL ASSERTION FAILED: `+c;throw pn(n),new Error(n)}function Dt(c,n){c||yt()}function ce(c,n){return c}const W={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class K extends he.g{constructor(n,i){super(n,i),this.code=n,this.message=i,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ye{constructor(){this.promise=new Promise((n,i)=>{this.resolve=n,this.reject=i})}}class Oe{constructor(n,i){this.user=i,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${n}`)}}class Et{getToken(){return Promise.resolve(null)}invalidateToken(){}start(n,i){n.enqueueRetryable(()=>i(De.UNAUTHENTICATED))}shutdown(){}}class kt{constructor(n){this.token=n,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(n,i){this.changeListener=i,n.enqueueRetryable(()=>i(this.token.user))}shutdown(){this.changeListener=null}}class En{constructor(n){this.t=n,this.currentUser=De.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(n,i){var s=this;Dt(void 0===this.o);let u=this.i;const h=B=>this.i!==u?(u=this.i,i(B)):Promise.resolve();let y=new ye;this.o=()=>{this.i++,this.currentUser=this.u(),y.resolve(),y=new ye,n.enqueueRetryable(()=>h(this.currentUser))};const D=()=>{const B=y;n.enqueueRetryable((0,de.A)(function*(){yield B.promise,yield h(s.currentUser)}))},x=B=>{Qe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=B,this.o&&(this.auth.addAuthTokenListener(this.o),D())};this.t.onInit(B=>x(B)),setTimeout(()=>{if(!this.auth){const B=this.t.getImmediate({optional:!0});B?x(B):(Qe("FirebaseAuthCredentialsProvider","Auth not yet detected"),y.resolve(),y=new ye)}},0),D()}getToken(){const n=this.i,i=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(i).then(s=>this.i!==n?(Qe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Dt("string"==typeof s.accessToken),new Oe(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const n=this.auth&&this.auth.getUid();return Dt(null===n||"string"==typeof n),new De(n)}}class Gt{constructor(n,i,s){this.l=n,this.h=i,this.P=s,this.type="FirstParty",this.user=De.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const n=this.T();return n&&this.I.set("Authorization",n),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class un{constructor(n,i,s){this.l=n,this.h=i,this.P=s}getToken(){return Promise.resolve(new Gt(this.l,this.h,this.P))}start(n,i){n.enqueueRetryable(()=>i(De.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class qn{constructor(n){this.value=n,this.type="AppCheck",this.headers=new Map,n&&n.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ur{constructor(n){this.A=n,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(n,i){Dt(void 0===this.o);const s=h=>{null!=h.error&&Qe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${h.error.message}`);const y=h.token!==this.R;return this.R=h.token,Qe("FirebaseAppCheckTokenProvider",`Received ${y?"new":"existing"} token.`),y?i(h.token):Promise.resolve()};this.o=h=>{n.enqueueRetryable(()=>s(h))};const u=h=>{Qe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=h,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(h=>u(h)),setTimeout(()=>{if(!this.appCheck){const h=this.A.getImmediate({optional:!0});h?u(h):Qe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const n=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(n).then(i=>i?(Dt("string"==typeof i.token),this.R=i.token,new qn(i.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Un(c){const n=typeof self<"u"&&(self.crypto||self.msCrypto),i=new Uint8Array(c);if(n&&"function"==typeof n.getRandomValues)n.getRandomValues(i);else for(let s=0;s<c;s++)i[s]=Math.floor(256*Math.random());return i}class yr{static newId(){const i=62*Math.floor(256/62);let s="";for(;s.length<20;){const u=Un(40);for(let h=0;h<u.length;++h)s.length<20&&u[h]<i&&(s+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(u[h]%62))}return s}}function Nt(c,n){return c<n?-1:c>n?1:0}function ut(c,n,i){return c.length===n.length&&c.every((s,u)=>i(s,n[u]))}class Rn{constructor(n,i){if(this.seconds=n,this.nanoseconds=i,i<0)throw new K(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(i>=1e9)throw new K(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(n<-62135596800)throw new K(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+n);if(n>=253402300800)throw new K(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+n)}static now(){return Rn.fromMillis(Date.now())}static fromDate(n){return Rn.fromMillis(n.getTime())}static fromMillis(n){const i=Math.floor(n/1e3),s=Math.floor(1e6*(n-1e3*i));return new Rn(i,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(n){return this.seconds===n.seconds?Nt(this.nanoseconds,n.nanoseconds):Nt(this.seconds,n.seconds)}isEqual(n){return n.seconds===this.seconds&&n.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ct{constructor(n){this.timestamp=n}static fromTimestamp(n){return new Ct(n)}static min(){return new Ct(new Rn(0,0))}static max(){return new Ct(new Rn(253402300799,999999999))}compareTo(n){return this.timestamp._compareTo(n.timestamp)}isEqual(n){return this.timestamp.isEqual(n.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class qt{constructor(n,i,s){void 0===i?i=0:i>n.length&&yt(),void 0===s?s=n.length-i:s>n.length-i&&yt(),this.segments=n,this.offset=i,this.len=s}get length(){return this.len}isEqual(n){return 0===qt.comparator(this,n)}child(n){const i=this.segments.slice(this.offset,this.limit());return n instanceof qt?n.forEach(s=>{i.push(s)}):i.push(n),this.construct(i)}limit(){return this.offset+this.length}popFirst(n){return this.construct(this.segments,this.offset+(n=void 0===n?1:n),this.length-n)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(n){return this.segments[this.offset+n]}isEmpty(){return 0===this.length}isPrefixOf(n){if(n.length<this.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==n.get(i))return!1;return!0}isImmediateParentOf(n){if(this.length+1!==n.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==n.get(i))return!1;return!0}forEach(n){for(let i=this.offset,s=this.limit();i<s;i++)n(this.segments[i])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(n,i){const s=Math.min(n.length,i.length);for(let u=0;u<s;u++){const h=n.get(u),y=i.get(u);if(h<y)return-1;if(h>y)return 1}return n.length<i.length?-1:n.length>i.length?1:0}}class Yt extends qt{construct(n,i,s){return new Yt(n,i,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...n){const i=[];for(const s of n){if(s.indexOf("//")>=0)throw new K(W.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);i.push(...s.split("/").filter(u=>u.length>0))}return new Yt(i)}static emptyPath(){return new Yt([])}}const Cn=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Pt extends qt{construct(n,i,s){return new Pt(n,i,s)}static isValidIdentifier(n){return Cn.test(n)}canonicalString(){return this.toArray().map(n=>(n=n.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Pt.isValidIdentifier(n)||(n="`"+n+"`"),n)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Pt(["__name__"])}static fromServerFormat(n){const i=[];let s="",u=0;const h=()=>{if(0===s.length)throw new K(W.INVALID_ARGUMENT,`Invalid field path (${n}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);i.push(s),s=""};let y=!1;for(;u<n.length;){const D=n[u];if("\\"===D){if(u+1===n.length)throw new K(W.INVALID_ARGUMENT,"Path has trailing escape character: "+n);const x=n[u+1];if("\\"!==x&&"."!==x&&"`"!==x)throw new K(W.INVALID_ARGUMENT,"Path has invalid escape sequence: "+n);s+=x,u+=2}else"`"===D?(y=!y,u++):"."!==D||y?(s+=D,u++):(h(),u++)}if(h(),y)throw new K(W.INVALID_ARGUMENT,"Unterminated ` in path: "+n);return new Pt(i)}static emptyPath(){return new Pt([])}}class lt{constructor(n){this.path=n}static fromPath(n){return new lt(Yt.fromString(n))}static fromName(n){return new lt(Yt.fromString(n).popFirst(5))}static empty(){return new lt(Yt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(n){return this.path.length>=2&&this.path.get(this.path.length-2)===n}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(n){return null!==n&&0===Yt.comparator(this.path,n.path)}toString(){return this.path.toString()}static comparator(n,i){return Yt.comparator(n.path,i.path)}static isDocumentKey(n){return n.length%2==0}static fromSegments(n){return new lt(new Yt(n.slice()))}}class gn{constructor(n,i,s){this.readTime=n,this.documentKey=i,this.largestBatchId=s}static min(){return new gn(Ct.min(),lt.empty(),-1)}static max(){return new gn(Ct.max(),lt.empty(),-1)}}function ni(c,n){let i=c.readTime.compareTo(n.readTime);return 0!==i?i:(i=lt.comparator(c.documentKey,n.documentKey),0!==i?i:Nt(c.largestBatchId,n.largestBatchId))}const ln="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class jr{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(n){this.onCommittedListeners.push(n)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(n=>n())}}function Hr(c){return wi.apply(this,arguments)}function wi(){return(wi=(0,de.A)(function*(c){if(c.code!==W.FAILED_PRECONDITION||c.message!==ln)throw c;Qe("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class Z{constructor(n){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,n(i=>{this.isDone=!0,this.result=i,this.nextCallback&&this.nextCallback(i)},i=>{this.isDone=!0,this.error=i,this.catchCallback&&this.catchCallback(i)})}catch(n){return this.next(void 0,n)}next(n,i){return this.callbackAttached&&yt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(i,this.error):this.wrapSuccess(n,this.result):new Z((s,u)=>{this.nextCallback=h=>{this.wrapSuccess(n,h).next(s,u)},this.catchCallback=h=>{this.wrapFailure(i,h).next(s,u)}})}toPromise(){return new Promise((n,i)=>{this.next(n,i)})}wrapUserFunction(n){try{const i=n();return i instanceof Z?i:Z.resolve(i)}catch(i){return Z.reject(i)}}wrapSuccess(n,i){return n?this.wrapUserFunction(()=>n(i)):Z.resolve(i)}wrapFailure(n,i){return n?this.wrapUserFunction(()=>n(i)):Z.reject(i)}static resolve(n){return new Z((i,s)=>{i(n)})}static reject(n){return new Z((i,s)=>{s(n)})}static waitFor(n){return new Z((i,s)=>{let u=0,h=0,y=!1;n.forEach(D=>{++u,D.next(()=>{++h,y&&h===u&&i()},x=>s(x))}),y=!0,h===u&&i()})}static or(n){let i=Z.resolve(!1);for(const s of n)i=i.next(u=>u?Z.resolve(u):s());return i}static forEach(n,i){const s=[];return n.forEach((u,h)=>{s.push(i.call(this,u,h))}),this.waitFor(s)}static mapArray(n,i){return new Z((s,u)=>{const h=n.length,y=new Array(h);let D=0;for(let x=0;x<h;x++){const B=x;i(n[B]).next(G=>{y[B]=G,++D,D===h&&s(y)},G=>u(G))}})}static doWhile(n,i){return new Z((s,u)=>{const h=()=>{!0===n()?i().next(()=>{h()},u):s()};h()})}}function re(c){return"IndexedDbTransactionError"===c.name}let Nn=(()=>{class c{constructor(i,s){this.previousValue=i,s&&(s.sequenceNumberHandler=u=>this.ie(u),this.se=u=>s.writeSequenceNumber(u))}ie(i){return this.previousValue=Math.max(i,this.previousValue),this.previousValue}next(){const i=++this.previousValue;return this.se&&this.se(i),i}}return c.oe=-1,c})();function vr(c){return null==c}function Bn(c){return 0===c&&1/c==-1/0}function ma(c){let n=0;for(const i in c)Object.prototype.hasOwnProperty.call(c,i)&&n++;return n}function fi(c,n){for(const i in c)Object.prototype.hasOwnProperty.call(c,i)&&n(i,c[i])}function Ti(c){for(const n in c)if(Object.prototype.hasOwnProperty.call(c,n))return!1;return!0}class Kn{constructor(n,i){this.comparator=n,this.root=i||pt.EMPTY}insert(n,i){return new Kn(this.comparator,this.root.insert(n,i,this.comparator).copy(null,null,pt.BLACK,null,null))}remove(n){return new Kn(this.comparator,this.root.remove(n,this.comparator).copy(null,null,pt.BLACK,null,null))}get(n){let i=this.root;for(;!i.isEmpty();){const s=this.comparator(n,i.key);if(0===s)return i.value;s<0?i=i.left:s>0&&(i=i.right)}return null}indexOf(n){let i=0,s=this.root;for(;!s.isEmpty();){const u=this.comparator(n,s.key);if(0===u)return i+s.left.size;u<0?s=s.left:(i+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(n){return this.root.inorderTraversal(n)}forEach(n){this.inorderTraversal((i,s)=>(n(i,s),!1))}toString(){const n=[];return this.inorderTraversal((i,s)=>(n.push(`${i}:${s}`),!1)),`{${n.join(", ")}}`}reverseTraversal(n){return this.root.reverseTraversal(n)}getIterator(){return new so(this.root,null,this.comparator,!1)}getIteratorFrom(n){return new so(this.root,n,this.comparator,!1)}getReverseIterator(){return new so(this.root,null,this.comparator,!0)}getReverseIteratorFrom(n){return new so(this.root,n,this.comparator,!0)}}class so{constructor(n,i,s,u){this.isReverse=u,this.nodeStack=[];let h=1;for(;!n.isEmpty();)if(h=i?s(n.key,i):1,i&&u&&(h*=-1),h<0)n=this.isReverse?n.left:n.right;else{if(0===h){this.nodeStack.push(n);break}this.nodeStack.push(n),n=this.isReverse?n.right:n.left}}getNext(){let n=this.nodeStack.pop();const i={key:n.key,value:n.value};if(this.isReverse)for(n=n.left;!n.isEmpty();)this.nodeStack.push(n),n=n.right;else for(n=n.right;!n.isEmpty();)this.nodeStack.push(n),n=n.left;return i}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const n=this.nodeStack[this.nodeStack.length-1];return{key:n.key,value:n.value}}}class pt{constructor(n,i,s,u,h){this.key=n,this.value=i,this.color=s??pt.RED,this.left=u??pt.EMPTY,this.right=h??pt.EMPTY,this.size=this.left.size+1+this.right.size}copy(n,i,s,u,h){return new pt(n??this.key,i??this.value,s??this.color,u??this.left,h??this.right)}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,i,s){let u=this;const h=s(n,u.key);return u=h<0?u.copy(null,null,null,u.left.insert(n,i,s),null):0===h?u.copy(null,i,null,null,null):u.copy(null,null,null,null,u.right.insert(n,i,s)),u.fixUp()}removeMin(){if(this.left.isEmpty())return pt.EMPTY;let n=this;return n.left.isRed()||n.left.left.isRed()||(n=n.moveRedLeft()),n=n.copy(null,null,null,n.left.removeMin(),null),n.fixUp()}remove(n,i){let s,u=this;if(i(n,u.key)<0)u.left.isEmpty()||u.left.isRed()||u.left.left.isRed()||(u=u.moveRedLeft()),u=u.copy(null,null,null,u.left.remove(n,i),null);else{if(u.left.isRed()&&(u=u.rotateRight()),u.right.isEmpty()||u.right.isRed()||u.right.left.isRed()||(u=u.moveRedRight()),0===i(n,u.key)){if(u.right.isEmpty())return pt.EMPTY;s=u.right.min(),u=u.copy(s.key,s.value,null,null,u.right.removeMin())}u=u.copy(null,null,null,null,u.right.remove(n,i))}return u.fixUp()}isRed(){return this.color}fixUp(){let n=this;return n.right.isRed()&&!n.left.isRed()&&(n=n.rotateLeft()),n.left.isRed()&&n.left.left.isRed()&&(n=n.rotateRight()),n.left.isRed()&&n.right.isRed()&&(n=n.colorFlip()),n}moveRedLeft(){let n=this.colorFlip();return n.right.left.isRed()&&(n=n.copy(null,null,null,null,n.right.rotateRight()),n=n.rotateLeft(),n=n.colorFlip()),n}moveRedRight(){let n=this.colorFlip();return n.left.left.isRed()&&(n=n.rotateRight(),n=n.colorFlip()),n}rotateLeft(){const n=this.copy(null,null,pt.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight(){const n=this.copy(null,null,pt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip(){const n=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,i)}checkMaxDepth(){const n=this.check();return Math.pow(2,n)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw yt();const n=this.left.check();if(n!==this.right.check())throw yt();return n+(this.isRed()?0:1)}}pt.EMPTY=null,pt.RED=!0,pt.BLACK=!1,pt.EMPTY=new class{constructor(){this.size=0}get key(){throw yt()}get value(){throw yt()}get color(){throw yt()}get left(){throw yt()}get right(){throw yt()}copy(n,i,s,u,h){return this}insert(n,i,s){return new pt(n,i)}remove(n,i){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class At{constructor(n){this.comparator=n,this.data=new Kn(this.comparator)}has(n){return null!==this.data.get(n)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(n){return this.data.indexOf(n)}forEach(n){this.data.inorderTraversal((i,s)=>(n(i),!1))}forEachInRange(n,i){const s=this.data.getIteratorFrom(n[0]);for(;s.hasNext();){const u=s.getNext();if(this.comparator(u.key,n[1])>=0)return;i(u.key)}}forEachWhile(n,i){let s;for(s=void 0!==i?this.data.getIteratorFrom(i):this.data.getIterator();s.hasNext();)if(!n(s.getNext().key))return}firstAfterOrEqual(n){const i=this.data.getIteratorFrom(n);return i.hasNext()?i.getNext().key:null}getIterator(){return new Jo(this.data.getIterator())}getIteratorFrom(n){return new Jo(this.data.getIteratorFrom(n))}add(n){return this.copy(this.data.remove(n).insert(n,!0))}delete(n){return this.has(n)?this.copy(this.data.remove(n)):this}isEmpty(){return this.data.isEmpty()}unionWith(n){let i=this;return i.size<n.size&&(i=n,n=this),n.forEach(s=>{i=i.add(s)}),i}isEqual(n){if(!(n instanceof At)||this.size!==n.size)return!1;const i=this.data.getIterator(),s=n.data.getIterator();for(;i.hasNext();){const u=i.getNext().key,h=s.getNext().key;if(0!==this.comparator(u,h))return!1}return!0}toArray(){const n=[];return this.forEach(i=>{n.push(i)}),n}toString(){const n=[];return this.forEach(i=>n.push(i)),"SortedSet("+n.toString()+")"}copy(n){const i=new At(this.comparator);return i.data=n,i}}class Jo{constructor(n){this.iter=n}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class lr{constructor(n){this.fields=n,n.sort(Pt.comparator)}static empty(){return new lr([])}unionWith(n){let i=new At(Pt.comparator);for(const s of this.fields)i=i.add(s);for(const s of n)i=i.add(s);return new lr(i.toArray())}covers(n){for(const i of this.fields)if(i.isPrefixOf(n))return!0;return!1}isEqual(n){return ut(this.fields,n.fields,(i,s)=>i.isEqual(s))}}class Os extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Zn{constructor(n){this.binaryString=n}static fromBase64String(n){const i=function(u){try{return atob(u)}catch(h){throw typeof DOMException<"u"&&h instanceof DOMException?new Os("Invalid base64 string: "+h):h}}(n);return new Zn(i)}static fromUint8Array(n){const i=function(u){let h="";for(let y=0;y<u.length;++y)h+=String.fromCharCode(u[y]);return h}(n);return new Zn(i)}[Symbol.iterator](){let n=0;return{next:()=>n<this.binaryString.length?{value:this.binaryString.charCodeAt(n++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(i){const s=new Uint8Array(i.length);for(let u=0;u<i.length;u++)s[u]=i.charCodeAt(u);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(n){return Nt(this.binaryString,n.binaryString)}isEqual(n){return this.binaryString===n.binaryString}}Zn.EMPTY_BYTE_STRING=new Zn("");const An=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function pi(c){if(Dt(!!c),"string"==typeof c){let n=0;const i=An.exec(c);if(Dt(!!i),i[1]){let u=i[1];u=(u+"000000000").substr(0,9),n=Number(u)}const s=new Date(c);return{seconds:Math.floor(s.getTime()/1e3),nanos:n}}return{seconds:Ir(c.seconds),nanos:Ir(c.nanos)}}function Ir(c){return"number"==typeof c?c:"string"==typeof c?Number(c):0}function br(c){return"string"==typeof c?Zn.fromBase64String(c):Zn.fromUint8Array(c)}function Qs(c){var n,i;return"server_timestamp"===(null===(i=((null===(n=c?.mapValue)||void 0===n?void 0:n.fields)||{}).__type__)||void 0===i?void 0:i.stringValue)}function Xs(c){const n=c.mapValue.fields.__previous_value__;return Qs(n)?Xs(n):n}function Ys(c){const n=pi(c.mapValue.fields.__local_write_time__.timestampValue);return new Rn(n.seconds,n.nanos)}class Uo{constructor(n,i,s,u,h,y,D,x,B){this.databaseId=n,this.appId=i,this.persistenceKey=s,this.host=u,this.ssl=h,this.forceLongPolling=y,this.autoDetectLongPolling=D,this.longPollingOptions=x,this.useFetchStreams=B}}class wo{constructor(n,i){this.projectId=n,this.database=i||"(default)"}static empty(){return new wo("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(n){return n instanceof wo&&n.projectId===this.projectId&&n.database===this.database}}const _i={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ao(c){return"nullValue"in c?0:"booleanValue"in c?1:"integerValue"in c||"doubleValue"in c?2:"timestampValue"in c?3:"stringValue"in c?5:"bytesValue"in c?6:"referenceValue"in c?7:"geoPointValue"in c?8:"arrayValue"in c?9:"mapValue"in c?Qs(c)?4:uo(c)?9007199254740991:ts(c)?10:11:yt()}function To(c,n){if(c===n)return!0;const i=ao(c);if(i!==ao(n))return!1;switch(i){case 0:case 9007199254740991:return!0;case 1:return c.booleanValue===n.booleanValue;case 4:return Ys(c).isEqual(Ys(n));case 3:return function(u,h){if("string"==typeof u.timestampValue&&"string"==typeof h.timestampValue&&u.timestampValue.length===h.timestampValue.length)return u.timestampValue===h.timestampValue;const y=pi(u.timestampValue),D=pi(h.timestampValue);return y.seconds===D.seconds&&y.nanos===D.nanos}(c,n);case 5:return c.stringValue===n.stringValue;case 6:return h=n,br(c.bytesValue).isEqual(br(h.bytesValue));case 7:return c.referenceValue===n.referenceValue;case 8:return function(u,h){return Ir(u.geoPointValue.latitude)===Ir(h.geoPointValue.latitude)&&Ir(u.geoPointValue.longitude)===Ir(h.geoPointValue.longitude)}(c,n);case 2:return function(u,h){if("integerValue"in u&&"integerValue"in h)return Ir(u.integerValue)===Ir(h.integerValue);if("doubleValue"in u&&"doubleValue"in h){const y=Ir(u.doubleValue),D=Ir(h.doubleValue);return y===D?Bn(y)===Bn(D):isNaN(y)&&isNaN(D)}return!1}(c,n);case 9:return ut(c.arrayValue.values||[],n.arrayValue.values||[],To);case 10:case 11:return function(u,h){const y=u.mapValue.fields||{},D=h.mapValue.fields||{};if(ma(y)!==ma(D))return!1;for(const x in y)if(y.hasOwnProperty(x)&&(void 0===D[x]||!To(y[x],D[x])))return!1;return!0}(c,n);default:return yt()}var h}function Oi(c,n){return void 0!==(c.values||[]).find(i=>To(i,n))}function oi(c,n){if(c===n)return 0;const i=ao(c),s=ao(n);if(i!==s)return Nt(i,s);switch(i){case 0:case 9007199254740991:return 0;case 1:return Nt(c.booleanValue,n.booleanValue);case 2:return function(h,y){const D=Ir(h.integerValue||h.doubleValue),x=Ir(y.integerValue||y.doubleValue);return D<x?-1:D>x?1:D===x?0:isNaN(D)?isNaN(x)?0:-1:1}(c,n);case 3:return ja(c.timestampValue,n.timestampValue);case 4:return ja(Ys(c),Ys(n));case 5:return Nt(c.stringValue,n.stringValue);case 6:return function(h,y){const D=br(h),x=br(y);return D.compareTo(x)}(c.bytesValue,n.bytesValue);case 7:return function(h,y){const D=h.split("/"),x=y.split("/");for(let B=0;B<D.length&&B<x.length;B++){const G=Nt(D[B],x[B]);if(0!==G)return G}return Nt(D.length,x.length)}(c.referenceValue,n.referenceValue);case 8:return function(h,y){const D=Nt(Ir(h.latitude),Ir(y.latitude));return 0!==D?D:Nt(Ir(h.longitude),Ir(y.longitude))}(c.geoPointValue,n.geoPointValue);case 9:return Do(c.arrayValue,n.arrayValue);case 10:return function(h,y){var D,x,B,G;const Ve=null===(D=(h.fields||{}).value)||void 0===D?void 0:D.arrayValue,tt=null===(x=(y.fields||{}).value)||void 0===x?void 0:x.arrayValue,gt=Nt((null===(B=Ve?.values)||void 0===B?void 0:B.length)||0,(null===(G=tt?.values)||void 0===G?void 0:G.length)||0);return 0!==gt?gt:Do(Ve,tt)}(c.mapValue,n.mapValue);case 11:return function(h,y){if(h===_i.mapValue&&y===_i.mapValue)return 0;if(h===_i.mapValue)return 1;if(y===_i.mapValue)return-1;const D=h.fields||{},x=Object.keys(D),B=y.fields||{},G=Object.keys(B);x.sort(),G.sort();for(let te=0;te<x.length&&te<G.length;++te){const pe=Nt(x[te],G[te]);if(0!==pe)return pe;const Ve=oi(D[x[te]],B[G[te]]);if(0!==Ve)return Ve}return Nt(x.length,G.length)}(c.mapValue,n.mapValue);default:throw yt()}}function ja(c,n){if("string"==typeof c&&"string"==typeof n&&c.length===n.length)return Nt(c,n);const i=pi(c),s=pi(n),u=Nt(i.seconds,s.seconds);return 0!==u?u:Nt(i.nanos,s.nanos)}function Do(c,n){const i=c.values||[],s=n.values||[];for(let u=0;u<i.length&&u<s.length;++u){const h=oi(i[u],s[u]);if(h)return h}return Nt(i.length,s.length)}function co(c){return Br(c)}function Br(c){return"nullValue"in c?"null":"booleanValue"in c?""+c.booleanValue:"integerValue"in c?""+c.integerValue:"doubleValue"in c?""+c.doubleValue:"timestampValue"in c?function(i){const s=pi(i);return`time(${s.seconds},${s.nanos})`}(c.timestampValue):"stringValue"in c?c.stringValue:"bytesValue"in c?br(c.bytesValue).toBase64():"referenceValue"in c?lt.fromName(c.referenceValue).toString():"geoPointValue"in c?function(i){return`geo(${i.latitude},${i.longitude})`}(c.geoPointValue):"arrayValue"in c?function(i){let s="[",u=!0;for(const h of i.values||[])u?u=!1:s+=",",s+=Br(h);return s+"]"}(c.arrayValue):"mapValue"in c?function(i){const s=Object.keys(i.fields||{}).sort();let u="{",h=!0;for(const y of s)h?h=!1:u+=",",u+=`${y}:${Br(i.fields[y])}`;return u+"}"}(c.mapValue):yt()}function jt(c,n){return{referenceValue:`projects/${c.projectId}/databases/${c.database}/documents/${n.path.canonicalString()}`}}function jo(c){return!!c&&"integerValue"in c}function Bo(c){return!!c&&"arrayValue"in c}function $o(c){return!!c&&"nullValue"in c}function ks(c){return!!c&&"doubleValue"in c&&isNaN(Number(c.doubleValue))}function Rr(c){return!!c&&"mapValue"in c}function ts(c){var n,i;return"__vector__"===(null===(i=((null===(n=c?.mapValue)||void 0===n?void 0:n.fields)||{}).__type__)||void 0===i?void 0:i.stringValue)}function Ho(c){if(c.geoPointValue)return{geoPointValue:Object.assign({},c.geoPointValue)};if(c.timestampValue&&"object"==typeof c.timestampValue)return{timestampValue:Object.assign({},c.timestampValue)};if(c.mapValue){const n={mapValue:{fields:{}}};return fi(c.mapValue.fields,(i,s)=>n.mapValue.fields[i]=Ho(s)),n}if(c.arrayValue){const n={arrayValue:{values:[]}};for(let i=0;i<(c.arrayValue.values||[]).length;++i)n.arrayValue.values[i]=Ho(c.arrayValue.values[i]);return n}return Object.assign({},c)}function uo(c){return"__max__"===(((c.mapValue||{}).fields||{}).__type__||{}).stringValue}class Sn{constructor(n){this.value=n}static empty(){return new Sn({mapValue:{}})}field(n){if(n.isEmpty())return this.value;{let i=this.value;for(let s=0;s<n.length-1;++s)if(i=(i.mapValue.fields||{})[n.get(s)],!Rr(i))return null;return i=(i.mapValue.fields||{})[n.lastSegment()],i||null}}set(n,i){this.getFieldsMap(n.popLast())[n.lastSegment()]=Ho(i)}setAll(n){let i=Pt.emptyPath(),s={},u=[];n.forEach((y,D)=>{if(!i.isImmediateParentOf(D)){const x=this.getFieldsMap(i);this.applyChanges(x,s,u),s={},u=[],i=D.popLast()}y?s[D.lastSegment()]=Ho(y):u.push(D.lastSegment())});const h=this.getFieldsMap(i);this.applyChanges(h,s,u)}delete(n){const i=this.field(n.popLast());Rr(i)&&i.mapValue.fields&&delete i.mapValue.fields[n.lastSegment()]}isEqual(n){return To(this.value,n.value)}getFieldsMap(n){let i=this.value;i.mapValue.fields||(i.mapValue={fields:{}});for(let s=0;s<n.length;++s){let u=i.mapValue.fields[n.get(s)];Rr(u)&&u.mapValue.fields||(u={mapValue:{fields:{}}},i.mapValue.fields[n.get(s)]=u),i=u}return i.mapValue.fields}applyChanges(n,i,s){fi(i,(u,h)=>n[u]=h);for(const u of s)delete n[u]}clone(){return new Sn(Ho(this.value))}}function lo(c){const n=[];return fi(c.fields,(i,s)=>{const u=new Pt([i]);if(Rr(s)){const h=lo(s.mapValue).fields;if(0===h.length)n.push(u);else for(const y of h)n.push(u.child(y))}else n.push(u)}),new lr(n)}class rr{constructor(n,i,s,u,h,y,D){this.key=n,this.documentType=i,this.version=s,this.readTime=u,this.createTime=h,this.data=y,this.documentState=D}static newInvalidDocument(n){return new rr(n,0,Ct.min(),Ct.min(),Ct.min(),Sn.empty(),0)}static newFoundDocument(n,i,s,u){return new rr(n,1,i,Ct.min(),s,u,0)}static newNoDocument(n,i){return new rr(n,2,i,Ct.min(),Ct.min(),Sn.empty(),0)}static newUnknownDocument(n,i){return new rr(n,3,i,Ct.min(),Ct.min(),Sn.empty(),2)}convertToFoundDocument(n,i){return!this.createTime.isEqual(Ct.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=n),this.version=n,this.documentType=1,this.data=i,this.documentState=0,this}convertToNoDocument(n){return this.version=n,this.documentType=2,this.data=Sn.empty(),this.documentState=0,this}convertToUnknownDocument(n){return this.version=n,this.documentType=3,this.data=Sn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ct.min(),this}setReadTime(n){return this.readTime=n,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(n){return n instanceof rr&&this.key.isEqual(n.key)&&this.version.isEqual(n.version)&&this.documentType===n.documentType&&this.documentState===n.documentState&&this.data.isEqual(n.data)}mutableCopy(){return new rr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Di{constructor(n,i){this.position=n,this.inclusive=i}}function si(c,n,i){let s=0;for(let u=0;u<c.position.length;u++){const h=n[u],y=c.position[u];if(s=h.field.isKeyField()?lt.comparator(lt.fromName(y.referenceValue),i.key):oi(y,i.data.field(h.field)),"desc"===h.dir&&(s*=-1),0!==s)break}return s}function qi(c,n){if(null===c)return null===n;if(null===n||c.inclusive!==n.inclusive||c.position.length!==n.position.length)return!1;for(let i=0;i<c.position.length;i++)if(!To(c.position[i],n.position[i]))return!1;return!0}class rs{constructor(n,i="asc"){this.field=n,this.dir=i}}function is(c,n){return c.dir===n.dir&&c.field.isEqual(n.field)}class _a{}class sn extends _a{constructor(n,i,s){super(),this.field=n,this.op=i,this.value=s}static create(n,i,s){return n.isKeyField()?"in"===i||"not-in"===i?this.createKeyFieldInFilter(n,i,s):new ss(n,i,s):"array-contains"===i?new ai(n,s):"in"===i?new _s(n,s):"not-in"===i?new ya(n,s):"array-contains-any"===i?new Js(n,s):new sn(n,i,s)}static createKeyFieldInFilter(n,i,s){return"in"===i?new Ba(n,s):new Qi(n,s)}matches(n){const i=n.data.field(this.field);return"!="===this.op?null!==i&&this.matchesComparison(oi(i,this.value)):null!==i&&ao(this.value)===ao(i)&&this.matchesComparison(oi(i,this.value))}matchesComparison(n){switch(this.op){case"<":return n<0;case"<=":return n<=0;case"==":return 0===n;case"!=":return 0!==n;case">":return n>0;case">=":return n>=0;default:return yt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Dn extends _a{constructor(n,i){super(),this.filters=n,this.op=i,this.ae=null}static create(n,i){return new Dn(n,i)}matches(n){return zr(this)?void 0===this.filters.find(i=>!i.matches(n)):void 0!==this.filters.find(i=>i.matches(n))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((n,i)=>n.concat(i.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function zr(c){return"and"===c.op}function Vs(c){return function Fi(c){for(const n of c.filters)if(n instanceof Dn)return!1;return!0}(c)&&zr(c)}function On(c){if(c instanceof sn)return c.field.canonicalString()+c.op.toString()+co(c.value);if(Vs(c))return c.filters.map(n=>On(n)).join(",");{const n=c.filters.map(i=>On(i)).join(",");return`${c.op}(${n})`}}function Ki(c,n){return c instanceof sn?(s=c,(u=n)instanceof sn&&s.op===u.op&&s.field.isEqual(u.field)&&To(s.value,u.value)):c instanceof Dn?function(s,u){return u instanceof Dn&&s.op===u.op&&s.filters.length===u.filters.length&&s.filters.reduce((h,y,D)=>h&&Ki(y,u.filters[D]),!0)}(c,n):void yt();var s,u}function ho(c){return c instanceof sn?`${(i=c).field.canonicalString()} ${i.op} ${co(i.value)}`:c instanceof Dn?function(i){return i.op.toString()+" {"+i.getFilters().map(ho).join(" ,")+"}"}(c):"Filter";var i}class ss extends sn{constructor(n,i,s){super(n,i,s),this.key=lt.fromName(s.referenceValue)}matches(n){const i=lt.comparator(n.key,this.key);return this.matchesComparison(i)}}class Ba extends sn{constructor(n,i){super(n,"in",i),this.keys=Vi(0,i)}matches(n){return this.keys.some(i=>i.isEqual(n.key))}}class Qi extends sn{constructor(n,i){super(n,"not-in",i),this.keys=Vi(0,i)}matches(n){return!this.keys.some(i=>i.isEqual(n.key))}}function Vi(c,n){var i;return((null===(i=n.arrayValue)||void 0===i?void 0:i.values)||[]).map(s=>lt.fromName(s.referenceValue))}class ai extends sn{constructor(n,i){super(n,"array-contains",i)}matches(n){const i=n.data.field(this.field);return Bo(i)&&Oi(i.arrayValue,this.value)}}class _s extends sn{constructor(n,i){super(n,"in",i)}matches(n){const i=n.data.field(this.field);return null!==i&&Oi(this.value.arrayValue,i)}}class ya extends sn{constructor(n,i){super(n,"not-in",i)}matches(n){if(Oi(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const i=n.data.field(this.field);return null!==i&&!Oi(this.value.arrayValue,i)}}class Js extends sn{constructor(n,i){super(n,"array-contains-any",i)}matches(n){const i=n.data.field(this.field);return!(!Bo(i)||!i.arrayValue.values)&&i.arrayValue.values.some(s=>Oi(this.value.arrayValue,s))}}class zo{constructor(n,i=null,s=[],u=[],h=null,y=null,D=null){this.path=n,this.collectionGroup=i,this.orderBy=s,this.filters=u,this.limit=h,this.startAt=y,this.endAt=D,this.ue=null}}function ea(c,n=null,i=[],s=[],u=null,h=null,y=null){return new zo(c,n,i,s,u,h,y)}function Go(c){const n=ce(c);if(null===n.ue){let i=n.path.canonicalString();null!==n.collectionGroup&&(i+="|cg:"+n.collectionGroup),i+="|f:",i+=n.filters.map(s=>On(s)).join(","),i+="|ob:",i+=n.orderBy.map(s=>{return(h=s).field.canonicalString()+h.dir;var h}).join(","),vr(n.limit)||(i+="|l:",i+=n.limit),n.startAt&&(i+="|lb:",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(s=>co(s)).join(",")),n.endAt&&(i+="|ub:",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(s=>co(s)).join(",")),n.ue=i}return n.ue}function va(c,n){if(c.limit!==n.limit||c.orderBy.length!==n.orderBy.length)return!1;for(let i=0;i<c.orderBy.length;i++)if(!is(c.orderBy[i],n.orderBy[i]))return!1;if(c.filters.length!==n.filters.length)return!1;for(let i=0;i<c.filters.length;i++)if(!Ki(c.filters[i],n.filters[i]))return!1;return c.collectionGroup===n.collectionGroup&&!!c.path.isEqual(n.path)&&!!qi(c.startAt,n.startAt)&&qi(c.endAt,n.endAt)}function Li(c){return lt.isDocumentKey(c.path)&&null===c.collectionGroup&&0===c.filters.length}class bi{constructor(n,i=null,s=[],u=[],h=null,y="F",D=null,x=null){this.path=n,this.collectionGroup=i,this.explicitOrderBy=s,this.filters=u,this.limit=h,this.limitType=y,this.startAt=D,this.endAt=x,this.ce=null,this.le=null,this.he=null}}function vs(c){return new bi(c)}function Ls(c){return 0===c.filters.length&&null===c.limit&&null==c.startAt&&null==c.endAt&&(0===c.explicitOrderBy.length||1===c.explicitOrderBy.length&&c.explicitOrderBy[0].field.isKeyField())}function as(c){return null!==c.collectionGroup}function bo(c){const n=ce(c);if(null===n.ce){n.ce=[];const i=new Set;for(const h of n.explicitOrderBy)n.ce.push(h),i.add(h.field.canonicalString());const s=n.explicitOrderBy.length>0?n.explicitOrderBy[n.explicitOrderBy.length-1].dir:"asc";(function(y){let D=new At(Pt.comparator);return y.filters.forEach(x=>{x.getFlattenedFilters().forEach(B=>{B.isInequality()&&(D=D.add(B.field))})}),D})(n).forEach(h=>{i.has(h.canonicalString())||h.isKeyField()||n.ce.push(new rs(h,s))}),i.has(Pt.keyField().canonicalString())||n.ce.push(new rs(Pt.keyField(),s))}return n.ce}function Wr(c){const n=ce(c);return n.le||(n.le=function us(c,n){if("F"===c.limitType)return ea(c.path,c.collectionGroup,n,c.filters,c.limit,c.startAt,c.endAt);{n=n.map(u=>new rs(u.field,"desc"===u.dir?"asc":"desc"));const i=c.endAt?new Di(c.endAt.position,c.endAt.inclusive):null,s=c.startAt?new Di(c.startAt.position,c.startAt.inclusive):null;return ea(c.path,c.collectionGroup,n,c.filters,c.limit,i,s)}}(n,bo(c))),n.le}function Ha(c,n){const i=c.filters.concat([n]);return new bi(c.path,c.collectionGroup,c.explicitOrderBy.slice(),i,c.limit,c.limitType,c.startAt,c.endAt)}function nt(c,n,i){return new bi(c.path,c.collectionGroup,c.explicitOrderBy.slice(),c.filters.slice(),n,i,c.startAt,c.endAt)}function fo(c,n){return va(Wr(c),Wr(n))&&c.limitType===n.limitType}function ls(c){return`${Go(Wr(c))}|lt:${c.limitType}`}function yi(c){return`Query(target=${function(i){let s=i.path.canonicalString();return null!==i.collectionGroup&&(s+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(s+=`, filters: [${i.filters.map(u=>ho(u)).join(", ")}]`),vr(i.limit)||(s+=", limit: "+i.limit),i.orderBy.length>0&&(s+=`, orderBy: [${i.orderBy.map(u=>{return`${(y=u).field.canonicalString()} (${y.dir})`;var y}).join(", ")}]`),i.startAt&&(s+=", startAt: ",s+=i.startAt.inclusive?"b:":"a:",s+=i.startAt.position.map(u=>co(u)).join(",")),i.endAt&&(s+=", endAt: ",s+=i.endAt.inclusive?"a:":"b:",s+=i.endAt.position.map(u=>co(u)).join(",")),`Target(${s})`}(Wr(c))}; limitType=${c.limitType})`}function Ui(c,n){return n.isFoundDocument()&&function(s,u){const h=u.key.path;return null!==s.collectionGroup?u.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(h):lt.isDocumentKey(s.path)?s.path.isEqual(h):s.path.isImmediateParentOf(h)}(c,n)&&function(s,u){for(const h of bo(s))if(!h.field.isKeyField()&&null===u.data.field(h.field))return!1;return!0}(c,n)&&function(s,u){for(const h of s.filters)if(!h.matches(u))return!1;return!0}(c,n)&&(u=n,!((s=c).startAt&&!function(y,D,x){const B=si(y,D,x);return y.inclusive?B<=0:B<0}(s.startAt,bo(s),u)||s.endAt&&!function(y,D,x){const B=si(y,D,x);return y.inclusive?B>=0:B>0}(s.endAt,bo(s),u)));var s,u}function ta(c){return(n,i)=>{let s=!1;for(const u of bo(c)){const h=wn(u,n,i);if(0!==h)return h;s=s||u.field.isKeyField()}return 0}}function wn(c,n,i){const s=c.field.isKeyField()?lt.comparator(n.key,i.key):function(h,y,D){const x=y.data.field(h),B=D.data.field(h);return null!==x&&null!==B?oi(x,B):yt()}(c.field,n,i);switch(c.dir){case"asc":return s;case"desc":return-1*s;default:return yt()}}class Jn{constructor(n,i){this.mapKeyFn=n,this.equalsFn=i,this.inner={},this.innerSize=0}get(n){const i=this.mapKeyFn(n),s=this.inner[i];if(void 0!==s)for(const[u,h]of s)if(this.equalsFn(u,n))return h}has(n){return void 0!==this.get(n)}set(n,i){const s=this.mapKeyFn(n),u=this.inner[s];if(void 0===u)return this.inner[s]=[[n,i]],void this.innerSize++;for(let h=0;h<u.length;h++)if(this.equalsFn(u[h][0],n))return void(u[h]=[n,i]);u.push([n,i]),this.innerSize++}delete(n){const i=this.mapKeyFn(n),s=this.inner[i];if(void 0===s)return!1;for(let u=0;u<s.length;u++)if(this.equalsFn(s[u][0],n))return 1===s.length?delete this.inner[i]:s.splice(u,1),this.innerSize--,!0;return!1}forEach(n){fi(this.inner,(i,s)=>{for(const[u,h]of s)n(u,h)})}isEmpty(){return Ti(this.inner)}size(){return this.innerSize}}const qr=new Kn(lt.comparator);function Mr(){return qr}const ci=new Kn(lt.comparator);function ji(...c){let n=ci;for(const i of c)n=n.insert(i.key,i);return n}function Ia(c){let n=ci;return c.forEach((i,s)=>n=n.insert(i,s.overlayedDocument)),n}function Jr(){return po()}function lc(){return po()}function po(){return new Jn(c=>c.toString(),(c,n)=>c.isEqual(n))}const Ai=new Kn(lt.comparator),ds=new At(lt.comparator);function bn(...c){let n=ds;for(const i of c)n=n.add(i);return n}const Ea=new At(Nt);function Ca(c,n){if(c.useProto3Json){if(isNaN(n))return{doubleValue:"NaN"};if(n===1/0)return{doubleValue:"Infinity"};if(n===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Bn(n)?"-0":n}}function ra(c){return{integerValue:""+c}}function Vc(c,n){return function nr(c){return"number"==typeof c&&Number.isInteger(c)&&!Bn(c)&&c<=Number.MAX_SAFE_INTEGER&&c>=Number.MIN_SAFE_INTEGER}(n)?ra(n):Ca(c,n)}class Wo{constructor(){this._=void 0}}function dc(c,n,i){return c instanceof Us?function(u,h){const y={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:u.seconds,nanos:u.nanoseconds}}}};return h&&Qs(h)&&(h=Xs(h)),h&&(y.fields.__previous_value__=h),{mapValue:y}}(i,n):c instanceof Xi?wa(c,n):c instanceof Bi?Ta(c,n):function(u,h){const y=go(u,h),D=Yi(y)+Yi(u.Pe);return jo(y)&&jo(u.Pe)?ra(D):Ca(u.serializer,D)}(c,n)}function za(c,n,i){return c instanceof Xi?wa(c,n):c instanceof Bi?Ta(c,n):i}function go(c,n){return c instanceof mo?jo(s=n)||(h=s)&&"doubleValue"in h?n:{integerValue:0}:null;var s,h}class Us extends Wo{}class Xi extends Wo{constructor(n){super(),this.elements=n}}function wa(c,n){const i=qo(n);for(const s of c.elements)i.some(u=>To(u,s))||i.push(s);return{arrayValue:{values:i}}}class Bi extends Wo{constructor(n){super(),this.elements=n}}function Ta(c,n){let i=qo(n);for(const s of c.elements)i=i.filter(u=>!To(u,s));return{arrayValue:{values:i}}}class mo extends Wo{constructor(n,i){super(),this.serializer=n,this.Pe=i}}function Yi(c){return Ir(c.integerValue||c.doubleValue)}function qo(c){return Bo(c)&&c.arrayValue.values?c.arrayValue.values.slice():[]}class Es{constructor(n,i){this.field=n,this.transform=i}}class hu{constructor(n,i){this.version=n,this.transformResults=i}}class dr{constructor(n,i){this.updateTime=n,this.exists=i}static none(){return new dr}static exists(n){return new dr(void 0,n)}static updateTime(n){return new dr(n)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(n){return this.exists===n.exists&&(this.updateTime?!!n.updateTime&&this.updateTime.isEqual(n.updateTime):!n.updateTime)}}function Cs(c,n){return void 0!==c.updateTime?n.isFoundDocument()&&n.version.isEqual(c.updateTime):void 0===c.exists||c.exists===n.isFoundDocument()}class Da{}function ba(c,n){if(!c.hasLocalMutations||n&&0===n.fields.length)return null;if(null===n)return c.isNoDocument()?new M(c.key,dr.none()):new f(c.key,c.data,dr.none());{const i=c.data,s=Sn.empty();let u=new At(Pt.comparator);for(let h of n.fields)if(!u.has(h)){let y=i.field(h);null===y&&h.length>1&&(h=h.popLast(),y=i.field(h)),null===y?s.delete(h):s.set(h,y),u=u.add(h)}return new S(c.key,s,new lr(u.toArray()),dr.none())}}function Wa(c,n,i){c instanceof f?function(u,h,y){const D=u.value.clone(),x=v(u.fieldTransforms,h,y.transformResults);D.setAll(x),h.convertToFoundDocument(y.version,D).setHasCommittedMutations()}(c,n,i):c instanceof S?function(u,h,y){if(!Cs(u.precondition,h))return void h.convertToUnknownDocument(y.version);const D=v(u.fieldTransforms,h,y.transformResults),x=h.data;x.setAll(F(u)),x.setAll(D),h.convertToFoundDocument(y.version,x).setHasCommittedMutations()}(c,n,i):n.convertToNoDocument(i.version).setHasCommittedMutations()}function Ao(c,n,i,s){return c instanceof f?function(h,y,D,x){if(!Cs(h.precondition,y))return D;const B=h.value.clone(),G=k(h.fieldTransforms,x,y);return B.setAll(G),y.convertToFoundDocument(y.version,B).setHasLocalMutations(),null}(c,n,i,s):c instanceof S?function(h,y,D,x){if(!Cs(h.precondition,y))return D;const B=k(h.fieldTransforms,x,y),G=y.data;return G.setAll(F(h)),G.setAll(B),y.convertToFoundDocument(y.version,G).setHasLocalMutations(),null===D?null:D.unionWith(h.fieldMask.fields).unionWith(h.fieldTransforms.map(te=>te.field))}(c,n,i,s):(D=i,Cs(c.precondition,y=n)?(y.convertToNoDocument(y.version).setHasLocalMutations(),null):D);var y,D}function N(c,n){let i=null;for(const s of c.fieldTransforms){const u=n.data.field(s.field),h=go(s.transform,u||null);null!=h&&(null===i&&(i=Sn.empty()),i.set(s.field,h))}return i||null}function L(c,n){return c.type===n.type&&!!c.key.isEqual(n.key)&&!!c.precondition.isEqual(n.precondition)&&(u=n.fieldTransforms,!!(void 0===(s=c.fieldTransforms)&&void 0===u||s&&u&&ut(s,u,(h,y)=>function Ga(c,n){return c.field.isEqual(n.field)&&(u=n.transform,(s=c.transform)instanceof Xi&&u instanceof Xi||s instanceof Bi&&u instanceof Bi?ut(s.elements,u.elements,To):s instanceof mo&&u instanceof mo?To(s.Pe,u.Pe):s instanceof Us&&u instanceof Us);var s,u}(h,y))))&&(0===c.type?c.value.isEqual(n.value):1!==c.type||c.data.isEqual(n.data)&&c.fieldMask.isEqual(n.fieldMask));var s,u}class f extends Da{constructor(n,i,s,u=[]){super(),this.key=n,this.value=i,this.precondition=s,this.fieldTransforms=u,this.type=0}getFieldMask(){return null}}class S extends Da{constructor(n,i,s,u,h=[]){super(),this.key=n,this.data=i,this.fieldMask=s,this.precondition=u,this.fieldTransforms=h,this.type=1}getFieldMask(){return this.fieldMask}}function F(c){const n=new Map;return c.fieldMask.fields.forEach(i=>{if(!i.isEmpty()){const s=c.data.field(i);n.set(i,s)}}),n}function v(c,n,i){const s=new Map;Dt(c.length===i.length);for(let u=0;u<i.length;u++){const h=c[u],y=h.transform,D=n.data.field(h.field);s.set(h.field,za(y,D,i[u]))}return s}function k(c,n,i){const s=new Map;for(const u of c){const h=u.transform,y=i.data.field(u.field);s.set(u.field,dc(h,y,n))}return s}class M extends Da{constructor(n,i){super(),this.key=n,this.precondition=i,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class j extends Da{constructor(n,i){super(),this.key=n,this.precondition=i,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class ee{constructor(n,i,s,u){this.batchId=n,this.localWriteTime=i,this.baseMutations=s,this.mutations=u}applyToRemoteDocument(n,i){const s=i.mutationResults;for(let u=0;u<this.mutations.length;u++){const h=this.mutations[u];h.key.isEqual(n.key)&&Wa(h,n,s[u])}}applyToLocalView(n,i){for(const s of this.baseMutations)s.key.isEqual(n.key)&&(i=Ao(s,n,i,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(n.key)&&(i=Ao(s,n,i,this.localWriteTime));return i}applyToLocalDocumentSet(n,i){const s=lc();return this.mutations.forEach(u=>{const h=n.get(u.key),y=h.overlayedDocument;let D=this.applyToLocalView(y,h.mutatedFields);D=i.has(u.key)?null:D;const x=ba(y,D);null!==x&&s.set(u.key,x),y.isValidDocument()||y.convertToNoDocument(Ct.min())}),s}keys(){return this.mutations.reduce((n,i)=>n.add(i.key),bn())}isEqual(n){return this.batchId===n.batchId&&ut(this.mutations,n.mutations,(i,s)=>L(i,s))&&ut(this.baseMutations,n.baseMutations,(i,s)=>L(i,s))}}class Re{constructor(n,i,s,u){this.batch=n,this.commitVersion=i,this.mutationResults=s,this.docVersions=u}static from(n,i,s){Dt(n.mutations.length===s.length);let u=function(){return Ai}();const h=n.mutations;for(let y=0;y<h.length;y++)u=u.insert(h[y].key,s[y].version);return new Re(n,i,s,u)}}class Ke{constructor(n,i){this.largestBatchId=n,this.mutation=i}getKey(){return this.mutation.key}isEqual(n){return null!==n&&this.mutation===n.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Qn{constructor(n,i){this.count=n,this.unchangedNames=i}}var dn,Ut;function Er(c){if(void 0===c)return pn("GRPC error has no .code"),W.UNKNOWN;switch(c){case dn.OK:return W.OK;case dn.CANCELLED:return W.CANCELLED;case dn.UNKNOWN:return W.UNKNOWN;case dn.DEADLINE_EXCEEDED:return W.DEADLINE_EXCEEDED;case dn.RESOURCE_EXHAUSTED:return W.RESOURCE_EXHAUSTED;case dn.INTERNAL:return W.INTERNAL;case dn.UNAVAILABLE:return W.UNAVAILABLE;case dn.UNAUTHENTICATED:return W.UNAUTHENTICATED;case dn.INVALID_ARGUMENT:return W.INVALID_ARGUMENT;case dn.NOT_FOUND:return W.NOT_FOUND;case dn.ALREADY_EXISTS:return W.ALREADY_EXISTS;case dn.PERMISSION_DENIED:return W.PERMISSION_DENIED;case dn.FAILED_PRECONDITION:return W.FAILED_PRECONDITION;case dn.ABORTED:return W.ABORTED;case dn.OUT_OF_RANGE:return W.OUT_OF_RANGE;case dn.UNIMPLEMENTED:return W.UNIMPLEMENTED;case dn.DATA_LOSS:return W.DATA_LOSS;default:return yt()}}(Ut=dn||(dn={}))[Ut.OK=0]="OK",Ut[Ut.CANCELLED=1]="CANCELLED",Ut[Ut.UNKNOWN=2]="UNKNOWN",Ut[Ut.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ut[Ut.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ut[Ut.NOT_FOUND=5]="NOT_FOUND",Ut[Ut.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ut[Ut.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ut[Ut.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ut[Ut.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ut[Ut.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ut[Ut.ABORTED=10]="ABORTED",Ut[Ut.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ut[Ut.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ut[Ut.INTERNAL=13]="INTERNAL",Ut[Ut.UNAVAILABLE=14]="UNAVAILABLE",Ut[Ut.DATA_LOSS=15]="DATA_LOSS";const Ft=new _t([4294967295,4294967295],0);function er(c){const n=function Je(){return new TextEncoder}().encode(c),i=new ft;return i.update(n),new Uint8Array(i.digest())}function Kr(c){const n=new DataView(c.buffer),i=n.getUint32(0,!0),s=n.getUint32(4,!0),u=n.getUint32(8,!0),h=n.getUint32(12,!0);return[new _t([i,s],0),new _t([u,h],0)]}class Cr{constructor(n,i,s){if(this.bitmap=n,this.padding=i,this.hashCount=s,i<0||i>=8)throw new Nr(`Invalid padding: ${i}`);if(s<0)throw new Nr(`Invalid hash count: ${s}`);if(n.length>0&&0===this.hashCount)throw new Nr(`Invalid hash count: ${s}`);if(0===n.length&&0!==i)throw new Nr(`Invalid padding when bitmap length is 0: ${i}`);this.Ie=8*n.length-i,this.Te=_t.fromNumber(this.Ie)}Ee(n,i,s){let u=n.add(i.multiply(_t.fromNumber(s)));return 1===u.compare(Ft)&&(u=new _t([u.getBits(0),u.getBits(1)],0)),u.modulo(this.Te).toNumber()}de(n){return!!(this.bitmap[Math.floor(n/8)]&1<<n%8)}mightContain(n){if(0===this.Ie)return!1;const i=er(n),[s,u]=Kr(i);for(let h=0;h<this.hashCount;h++){const y=this.Ee(s,u,h);if(!this.de(y))return!1}return!0}static create(n,i,s){const u=n%8==0?0:8-n%8,h=new Uint8Array(Math.ceil(n/8)),y=new Cr(h,u,i);return s.forEach(D=>y.insert(D)),y}insert(n){if(0===this.Ie)return;const i=er(n),[s,u]=Kr(i);for(let h=0;h<this.hashCount;h++){const y=this.Ee(s,u,h);this.Ae(y)}}Ae(n){const i=Math.floor(n/8);this.bitmap[i]|=1<<n%8}}class Nr extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class vi{constructor(n,i,s,u,h){this.snapshotVersion=n,this.targetChanges=i,this.targetMismatches=s,this.documentUpdates=u,this.resolvedLimboDocuments=h}static createSynthesizedRemoteEventForCurrentChange(n,i,s){const u=new Map;return u.set(n,$n.createSynthesizedTargetChangeForCurrentChange(n,i,s)),new vi(Ct.min(),u,new Kn(Nt),Mr(),bn())}}class $n{constructor(n,i,s,u,h){this.resumeToken=n,this.current=i,this.addedDocuments=s,this.modifiedDocuments=u,this.removedDocuments=h}static createSynthesizedTargetChangeForCurrentChange(n,i,s){return new $n(s,i,bn(),bn(),bn())}}class wr{constructor(n,i,s,u){this.Re=n,this.removedTargetIds=i,this.key=s,this.Ve=u}}class Si{constructor(n,i){this.targetId=n,this.me=i}}class an{constructor(n,i,s=Zn.EMPTY_BYTE_STRING,u=null){this.state=n,this.targetIds=i,this.resumeToken=s,this.cause=u}}class qa{constructor(){this.fe=0,this.ge=xr(),this.pe=Zn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(n){n.approximateByteSize()>0&&(this.we=!0,this.pe=n)}ve(){let n=bn(),i=bn(),s=bn();return this.ge.forEach((u,h)=>{switch(h){case 0:n=n.add(u);break;case 2:i=i.add(u);break;case 1:s=s.add(u);break;default:yt()}}),new $n(this.pe,this.ye,n,i,s)}Ce(){this.we=!1,this.ge=xr()}Fe(n,i){this.we=!0,this.ge=this.ge.insert(n,i)}Me(n){this.we=!0,this.ge=this.ge.remove(n)}xe(){this.fe+=1}Oe(){this.fe-=1,Dt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class hc{constructor(n){this.Le=n,this.Be=new Map,this.ke=Mr(),this.qe=ia(),this.Qe=new Kn(Nt)}Ke(n){for(const i of n.Re)n.Ve&&n.Ve.isFoundDocument()?this.$e(i,n.Ve):this.Ue(i,n.key,n.Ve);for(const i of n.removedTargetIds)this.Ue(i,n.key,n.Ve)}We(n){this.forEachTarget(n,i=>{const s=this.Ge(i);switch(n.state){case 0:this.ze(i)&&s.De(n.resumeToken);break;case 1:s.Oe(),s.Se||s.Ce(),s.De(n.resumeToken);break;case 2:s.Oe(),s.Se||this.removeTarget(i);break;case 3:this.ze(i)&&(s.Ne(),s.De(n.resumeToken));break;case 4:this.ze(i)&&(this.je(i),s.De(n.resumeToken));break;default:yt()}})}forEachTarget(n,i){n.targetIds.length>0?n.targetIds.forEach(i):this.Be.forEach((s,u)=>{this.ze(u)&&i(u)})}He(n){const i=n.targetId,s=n.me.count,u=this.Je(i);if(u){const h=u.target;if(Li(h))if(0===s){const y=new lt(h.path);this.Ue(i,y,rr.newNoDocument(y,Ct.min()))}else Dt(1===s);else{const y=this.Ye(i);if(y!==s){const D=this.Ze(n),x=D?this.Xe(D,n,y):1;0!==x&&(this.je(i),this.Qe=this.Qe.insert(i,2===x?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Ze(n){const i=n.me.unchangedNames;if(!i||!i.bits)return null;const{bits:{bitmap:s="",padding:u=0},hashCount:h=0}=i;let y,D;try{y=br(s).toUint8Array()}catch(x){if(x instanceof Os)return cr("Decoding the base64 bloom filter in existence filter failed ("+x.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw x}try{D=new Cr(y,u,h)}catch(x){return cr(x instanceof Nr?"BloomFilter error: ":"Applying bloom filter failed: ",x),null}return 0===D.Ie?null:D}Xe(n,i,s){return i.me.count===s-this.nt(n,i.targetId)?0:2}nt(n,i){const s=this.Le.getRemoteKeysForTarget(i);let u=0;return s.forEach(h=>{const y=this.Le.tt(),D=`projects/${y.projectId}/databases/${y.database}/documents/${h.path.canonicalString()}`;n.mightContain(D)||(this.Ue(i,h,null),u++)}),u}rt(n){const i=new Map;this.Be.forEach((h,y)=>{const D=this.Je(y);if(D){if(h.current&&Li(D.target)){const x=new lt(D.target.path);null!==this.ke.get(x)||this.it(y,x)||this.Ue(y,x,rr.newNoDocument(x,n))}h.be&&(i.set(y,h.ve()),h.Ce())}});let s=bn();this.qe.forEach((h,y)=>{let D=!0;y.forEachWhile(x=>{const B=this.Je(x);return!B||"TargetPurposeLimboResolution"===B.purpose||(D=!1,!1)}),D&&(s=s.add(h))}),this.ke.forEach((h,y)=>y.setReadTime(n));const u=new vi(n,i,this.Qe,this.ke,s);return this.ke=Mr(),this.qe=ia(),this.Qe=new Kn(Nt),u}$e(n,i){if(!this.ze(n))return;const s=this.it(n,i.key)?2:0;this.Ge(n).Fe(i.key,s),this.ke=this.ke.insert(i.key,i),this.qe=this.qe.insert(i.key,this.st(i.key).add(n))}Ue(n,i,s){if(!this.ze(n))return;const u=this.Ge(n);this.it(n,i)?u.Fe(i,1):u.Me(i),this.qe=this.qe.insert(i,this.st(i).delete(n)),s&&(this.ke=this.ke.insert(i,s))}removeTarget(n){this.Be.delete(n)}Ye(n){const i=this.Ge(n).ve();return this.Le.getRemoteKeysForTarget(n).size+i.addedDocuments.size-i.removedDocuments.size}xe(n){this.Ge(n).xe()}Ge(n){let i=this.Be.get(n);return i||(i=new qa,this.Be.set(n,i)),i}st(n){let i=this.qe.get(n);return i||(i=new At(Nt),this.qe=this.qe.insert(n,i)),i}ze(n){const i=null!==this.Je(n);return i||Qe("WatchChangeAggregator","Detected inactive target",n),i}Je(n){const i=this.Be.get(n);return i&&i.Se?null:this.Le.ot(n)}je(n){this.Be.set(n,new qa),this.Le.getRemoteKeysForTarget(n).forEach(i=>{this.Ue(n,i,null)})}it(n,i){return this.Le.getRemoteKeysForTarget(n).has(i)}}function ia(){return new Kn(lt.comparator)}function xr(){return new Kn(lt.comparator)}const Zi={asc:"ASCENDING",desc:"DESCENDING"},fc={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},js={and:"AND",or:"OR"};class Aa{constructor(n,i){this.databaseId=n,this.useProto3Json=i}}function pc(c,n){return c.useProto3Json||vr(n)?n:{value:n}}function So(c,n){return c.useProto3Json?`${new Date(1e3*n.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+n.nanoseconds).slice(-9)}Z`:{seconds:""+n.seconds,nanos:n.nanoseconds}}function gc(c,n){return c.useProto3Json?n.toBase64():n.toUint8Array()}function Ro(c,n){return So(c,n.toTimestamp())}function Rt(c){return Dt(!!c),Ct.fromTimestamp(function(i){const s=pi(i);return new Rn(s.seconds,s.nanos)}(c))}function Or(c,n){return Bs(c,n).canonicalString()}function Bs(c,n){const i=(u=c,new Yt(["projects",u.projectId,"databases",u.database])).child("documents");var u;return void 0===n?i:i.child(n)}function _o(c){const n=Yt.fromString(c);return Dt(pu(n)),n}function oa(c,n){return Or(c.databaseId,n.path)}function Ii(c,n){const i=_o(n);if(i.get(1)!==c.databaseId.projectId)throw new K(W.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+i.get(1)+" vs "+c.databaseId.projectId);if(i.get(3)!==c.databaseId.database)throw new K(W.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+i.get(3)+" vs "+c.databaseId.database);return new lt($i(i))}function hr(c,n){return Or(c.databaseId,n)}function ei(c){return new Yt(["projects",c.databaseId.projectId,"databases",c.databaseId.database]).canonicalString()}function $i(c){return Dt(c.length>4&&"documents"===c.get(4)),c.popFirst(5)}function Ka(c,n,i){return{name:oa(c,n),fields:i.value.mapValue.fields}}function Sa(c,n){return{documents:[hr(c,n.path)]}}function Lc(c,n){const i={structuredQuery:{}},s=n.path;let u;null!==n.collectionGroup?(u=s,i.structuredQuery.from=[{collectionId:n.collectionGroup,allDescendants:!0}]):(u=s.popLast(),i.structuredQuery.from=[{collectionId:s.lastSegment()}]),i.parent=hr(c,u);const h=function(B){if(0!==B.length)return Fh(Dn.create(B,"and"))}(n.filters);h&&(i.structuredQuery.where=h);const y=function(B){if(0!==B.length)return B.map(G=>{return{field:Xa((pe=G).field),direction:Jm(pe.dir)};var pe})}(n.orderBy);y&&(i.structuredQuery.orderBy=y);const D=pc(c,n.limit);return null!==D&&(i.structuredQuery.limit=D),n.startAt&&(i.structuredQuery.startAt={before:(B=n.startAt).inclusive,values:B.position}),n.endAt&&(i.structuredQuery.endAt=function(B){return{before:!B.inclusive,values:B.position}}(n.endAt)),{_t:i,parent:u};var B}function Uc(c){let n=function mc(c){const n=_o(c);return 4===n.length?Yt.emptyPath():$i(n)}(c.parent);const i=c.structuredQuery,s=i.from?i.from.length:0;let u=null;if(s>0){Dt(1===s);const G=i.from[0];G.allDescendants?u=G.collectionId:n=n.child(G.collectionId)}let h=[];i.where&&(h=function(te){const pe=kh(te);return pe instanceof Dn&&Vs(pe)?pe.getFilters():[pe]}(i.where));let y=[];i.orderBy&&(y=i.orderBy.map(pe=>{return new rs(jc((tt=pe).field),function(ht){switch(ht){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(tt.direction));var tt}));let D=null;i.limit&&(D=function(te){let pe;return pe="object"==typeof te?te.value:te,vr(pe)?null:pe}(i.limit));let x=null;var te;i.startAt&&(x=new Di((te=i.startAt).values||[],!!te.before));let B=null;return i.endAt&&(B=function(te){return new Di(te.values||[],!te.before)}(i.endAt)),function $a(c,n,i,s,u,h,y,D){return new bi(c,n,i,s,u,h,y,D)}(n,u,y,h,D,"F",x,B)}function kh(c){return void 0!==c.unaryFilter?function(i){switch(i.unaryFilter.op){case"IS_NAN":const s=jc(i.unaryFilter.field);return sn.create(s,"==",{doubleValue:NaN});case"IS_NULL":const u=jc(i.unaryFilter.field);return sn.create(u,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const h=jc(i.unaryFilter.field);return sn.create(h,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const y=jc(i.unaryFilter.field);return sn.create(y,"!=",{nullValue:"NULL_VALUE"});default:return yt()}}(c):void 0!==c.fieldFilter?sn.create(jc((i=c).fieldFilter.field),function(u){switch(u){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return yt()}}(i.fieldFilter.op),i.fieldFilter.value):void 0!==c.compositeFilter?function(i){return Dn.create(i.compositeFilter.filters.map(s=>kh(s)),function(u){switch(u){case"AND":return"and";case"OR":return"or";default:return yt()}}(i.compositeFilter.op))}(c):yt();var i}function Jm(c){return Zi[c]}function Gp(c){return fc[c]}function Wp(c){return js[c]}function Xa(c){return{fieldPath:c.canonicalString()}}function jc(c){return Pt.fromServerFormat(c.fieldPath)}function Fh(c){return c instanceof sn?function(i){if("=="===i.op){if(ks(i.value))return{unaryFilter:{field:Xa(i.field),op:"IS_NAN"}};if($o(i.value))return{unaryFilter:{field:Xa(i.field),op:"IS_NULL"}}}else if("!="===i.op){if(ks(i.value))return{unaryFilter:{field:Xa(i.field),op:"IS_NOT_NAN"}};if($o(i.value))return{unaryFilter:{field:Xa(i.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xa(i.field),op:Gp(i.op),value:i.value}}}(c):c instanceof Dn?function(i){const s=i.getFilters().map(u=>Fh(u));return 1===s.length?s[0]:{compositeFilter:{op:Wp(i.op),filters:s}}}(c):yt()}function qp(c){const n=[];return c.fields.forEach(i=>n.push(i.canonicalString())),{fieldPaths:n}}function pu(c){return c.length>=4&&"projects"===c.get(0)&&"databases"===c.get(2)}class Ra{constructor(n,i,s,u,h=Ct.min(),y=Ct.min(),D=Zn.EMPTY_BYTE_STRING,x=null){this.target=n,this.targetId=i,this.purpose=s,this.sequenceNumber=u,this.snapshotVersion=h,this.lastLimboFreeSnapshotVersion=y,this.resumeToken=D,this.expectedCount=x}withSequenceNumber(n){return new Ra(this.target,this.targetId,this.purpose,n,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(n,i){return new Ra(this.target,this.targetId,this.purpose,this.sequenceNumber,i,this.lastLimboFreeSnapshotVersion,n,null)}withExpectedCount(n){return new Ra(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,n)}withLastLimboFreeSnapshotVersion(n){return new Ra(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,n,this.resumeToken,this.expectedCount)}}class Vh{constructor(n){this.ct=n}}function I(c){const n=Uc({parent:c.parent,structuredQuery:c.structuredQuery});return"LAST"===c.limitType?nt(n,n.limit,"L"):n}class Lt{constructor(){}It(n,i){this.Tt(n,i),i.Et()}Tt(n,i){if("nullValue"in n)this.dt(i,5);else if("booleanValue"in n)this.dt(i,10),i.At(n.booleanValue?1:0);else if("integerValue"in n)this.dt(i,15),i.At(Ir(n.integerValue));else if("doubleValue"in n){const s=Ir(n.doubleValue);isNaN(s)?this.dt(i,13):(this.dt(i,15),Bn(s)?i.At(0):i.At(s))}else if("timestampValue"in n){let s=n.timestampValue;this.dt(i,20),"string"==typeof s&&(s=pi(s)),i.Rt(`${s.seconds||""}`),i.At(s.nanos||0)}else if("stringValue"in n)this.Vt(n.stringValue,i),this.ft(i);else if("bytesValue"in n)this.dt(i,30),i.gt(br(n.bytesValue)),this.ft(i);else if("referenceValue"in n)this.yt(n.referenceValue,i);else if("geoPointValue"in n){const s=n.geoPointValue;this.dt(i,45),i.At(s.latitude||0),i.At(s.longitude||0)}else"mapValue"in n?uo(n)?this.dt(i,Number.MAX_SAFE_INTEGER):ts(n)?this.wt(n.mapValue,i):(this.St(n.mapValue,i),this.ft(i)):"arrayValue"in n?(this.bt(n.arrayValue,i),this.ft(i)):yt()}Vt(n,i){this.dt(i,25),this.Dt(n,i)}Dt(n,i){i.Rt(n)}St(n,i){const s=n.fields||{};this.dt(i,55);for(const u of Object.keys(s))this.Vt(u,i),this.Tt(s[u],i)}wt(n,i){var s,u;const h=n.fields||{};this.dt(i,53);const y="value",D=(null===(u=null===(s=h[y].arrayValue)||void 0===s?void 0:s.values)||void 0===u?void 0:u.length)||0;this.dt(i,15),i.At(Ir(D)),this.Vt(y,i),this.Tt(h[y],i)}bt(n,i){const s=n.values||[];this.dt(i,50);for(const u of s)this.Tt(u,i)}yt(n,i){this.dt(i,37),lt.fromName(n).path.forEach(s=>{this.dt(i,60),this.Dt(s,i)})}dt(n,i){n.At(i)}ft(n){n.At(2)}}Lt.vt=new Lt;class Za{constructor(){this.un=new _u}addToCollectionParentIndex(n,i){return this.un.add(i),Z.resolve()}getCollectionParents(n,i){return Z.resolve(this.un.getEntries(i))}addFieldIndex(n,i){return Z.resolve()}deleteFieldIndex(n,i){return Z.resolve()}deleteAllFieldIndexes(n){return Z.resolve()}createTargetIndexes(n,i){return Z.resolve()}getDocumentsMatchingTarget(n,i){return Z.resolve(null)}getIndexType(n,i){return Z.resolve(0)}getFieldIndexes(n,i){return Z.resolve([])}getNextCollectionGroupToUpdate(n){return Z.resolve(null)}getMinOffset(n,i){return Z.resolve(gn.min())}getMinOffsetFromCollectionGroup(n,i){return Z.resolve(gn.min())}updateCollectionGroup(n,i,s){return Z.resolve()}updateIndexEntries(n,i){return Z.resolve()}}class _u{constructor(){this.index={}}add(n){const i=n.lastSegment(),s=n.popLast(),u=this.index[i]||new At(Yt.comparator),h=!u.has(s);return this.index[i]=u.add(s),h}has(n){const i=n.lastSegment(),s=n.popLast(),u=this.index[i];return u&&u.has(s)}getEntries(n){return(this.index[n]||new At(Yt.comparator)).toArray()}}new Uint8Array(0);class Mo{constructor(n,i,s){this.cacheSizeCollectionThreshold=n,this.percentileToCollect=i,this.maximumSequenceNumbersToCollect=s}static withCacheSize(n){return new Mo(n,Mo.DEFAULT_COLLECTION_PERCENTILE,Mo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}Mo.DEFAULT_COLLECTION_PERCENTILE=10,Mo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Mo.DEFAULT=new Mo(41943040,Mo.DEFAULT_COLLECTION_PERCENTILE,Mo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Mo.DISABLED=new Mo(-1,0,0);class He{constructor(n){this.Ln=n}next(){return this.Ln+=2,this.Ln}static Bn(){return new He(0)}static kn(){return new He(-1)}}class Kp{constructor(){this.changes=new Jn(n=>n.toString(),(n,i)=>n.isEqual(i)),this.changesApplied=!1}addEntry(n){this.assertNotApplied(),this.changes.set(n.key,n)}removeEntry(n,i){this.assertNotApplied(),this.changes.set(n,rr.newInvalidDocument(n).setReadTime(i))}getEntry(n,i){this.assertNotApplied();const s=this.changes.get(i);return void 0!==s?Z.resolve(s):this.getFromCache(n,i)}getEntries(n,i){return this.getAllFromCache(n,i)}apply(n){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(n)}assertNotApplied(){}}class Qp{constructor(n,i){this.overlayedDocument=n,this.mutatedFields=i}}class zc{constructor(n,i,s,u){this.remoteDocumentCache=n,this.mutationQueue=i,this.documentOverlayCache=s,this.indexManager=u}getDocument(n,i){let s=null;return this.documentOverlayCache.getOverlay(n,i).next(u=>(s=u,this.remoteDocumentCache.getEntry(n,i))).next(u=>(null!==s&&Ao(s.mutation,u,lr.empty(),Rn.now()),u))}getDocuments(n,i){return this.remoteDocumentCache.getEntries(n,i).next(s=>this.getLocalViewOfDocuments(n,s,bn()).next(()=>s))}getLocalViewOfDocuments(n,i,s=bn()){const u=Jr();return this.populateOverlays(n,u,i).next(()=>this.computeViews(n,i,u,s).next(h=>{let y=ji();return h.forEach((D,x)=>{y=y.insert(D,x.overlayedDocument)}),y}))}getOverlayedDocuments(n,i){const s=Jr();return this.populateOverlays(n,s,i).next(()=>this.computeViews(n,i,s,bn()))}populateOverlays(n,i,s){const u=[];return s.forEach(h=>{i.has(h)||u.push(h)}),this.documentOverlayCache.getOverlays(n,u).next(h=>{h.forEach((y,D)=>{i.set(y,D)})})}computeViews(n,i,s,u){let h=Mr();const y=po(),D=po();return i.forEach((x,B)=>{const G=s.get(B.key);u.has(B.key)&&(void 0===G||G.mutation instanceof S)?h=h.insert(B.key,B):void 0!==G?(y.set(B.key,G.mutation.getFieldMask()),Ao(G.mutation,B,G.mutation.getFieldMask(),Rn.now())):y.set(B.key,lr.empty())}),this.recalculateAndSaveOverlays(n,h).next(x=>(x.forEach((B,G)=>y.set(B,G)),i.forEach((B,G)=>{var te;return D.set(B,new Qp(G,null!==(te=y.get(B))&&void 0!==te?te:null))}),D))}recalculateAndSaveOverlays(n,i){const s=po();let u=new Kn((y,D)=>y-D),h=bn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(n,i).next(y=>{for(const D of y)D.keys().forEach(x=>{const B=i.get(x);if(null===B)return;let G=s.get(x)||lr.empty();G=D.applyToLocalView(B,G),s.set(x,G);const te=(u.get(D.batchId)||bn()).add(x);u=u.insert(D.batchId,te)})}).next(()=>{const y=[],D=u.getReverseIterator();for(;D.hasNext();){const x=D.getNext(),B=x.key,G=x.value,te=lc();G.forEach(pe=>{if(!h.has(pe)){const Ve=ba(i.get(pe),s.get(pe));null!==Ve&&te.set(pe,Ve),h=h.add(pe)}}),y.push(this.documentOverlayCache.saveOverlays(n,B,te))}return Z.waitFor(y)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(n,i){return this.remoteDocumentCache.getEntries(n,i).next(s=>this.recalculateAndSaveOverlays(n,s))}getDocumentsMatchingQuery(n,i,s,u){return lt.isDocumentKey((y=i).path)&&null===y.collectionGroup&&0===y.filters.length?this.getDocumentsMatchingDocumentQuery(n,i.path):as(i)?this.getDocumentsMatchingCollectionGroupQuery(n,i,s,u):this.getDocumentsMatchingCollectionQuery(n,i,s,u);var y}getNextDocuments(n,i,s,u){return this.remoteDocumentCache.getAllFromCollectionGroup(n,i,s,u).next(h=>{const y=u-h.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(n,i,s.largestBatchId,u-h.size):Z.resolve(Jr());let D=-1,x=h;return y.next(B=>Z.forEach(B,(G,te)=>(D<te.largestBatchId&&(D=te.largestBatchId),h.get(G)?Z.resolve():this.remoteDocumentCache.getEntry(n,G).next(pe=>{x=x.insert(G,pe)}))).next(()=>this.populateOverlays(n,B,h)).next(()=>this.computeViews(n,x,B,bn())).next(G=>({batchId:D,changes:Ia(G)})))})}getDocumentsMatchingDocumentQuery(n,i){return this.getDocument(n,new lt(i)).next(s=>{let u=ji();return s.isFoundDocument()&&(u=u.insert(s.key,s)),u})}getDocumentsMatchingCollectionGroupQuery(n,i,s,u){const h=i.collectionGroup;let y=ji();return this.indexManager.getCollectionParents(n,h).next(D=>Z.forEach(D,x=>{const B=(te=i,pe=x.child(h),new bi(pe,null,te.explicitOrderBy.slice(),te.filters.slice(),te.limit,te.limitType,te.startAt,te.endAt));var te,pe;return this.getDocumentsMatchingCollectionQuery(n,B,s,u).next(G=>{G.forEach((te,pe)=>{y=y.insert(te,pe)})})}).next(()=>y))}getDocumentsMatchingCollectionQuery(n,i,s,u){let h;return this.documentOverlayCache.getOverlaysForCollection(n,i.path,s.largestBatchId).next(y=>(h=y,this.remoteDocumentCache.getDocumentsMatchingQuery(n,i,s,h,u))).next(y=>{h.forEach((x,B)=>{const G=B.getKey();null===y.get(G)&&(y=y.insert(G,rr.newInvalidDocument(G)))});let D=ji();return y.forEach((x,B)=>{const G=h.get(x);void 0!==G&&Ao(G.mutation,B,lr.empty(),Rn.now()),Ui(i,B)&&(D=D.insert(x,B))}),D})}}class Xp{constructor(n){this.serializer=n,this.hr=new Map,this.Pr=new Map}getBundleMetadata(n,i){return Z.resolve(this.hr.get(i))}saveBundleMetadata(n,i){return this.hr.set(i.id,{id:(u=i).id,version:u.version,createTime:Rt(u.createTime)}),Z.resolve();var u}getNamedQuery(n,i){return Z.resolve(this.Pr.get(i))}saveNamedQuery(n,i){return this.Pr.set(i.name,{name:(u=i).name,query:I(u.bundledQuery),readTime:Rt(u.readTime)}),Z.resolve();var u}}class Yp{constructor(){this.overlays=new Kn(lt.comparator),this.Ir=new Map}getOverlay(n,i){return Z.resolve(this.overlays.get(i))}getOverlays(n,i){const s=Jr();return Z.forEach(i,u=>this.getOverlay(n,u).next(h=>{null!==h&&s.set(u,h)})).next(()=>s)}saveOverlays(n,i,s){return s.forEach((u,h)=>{this.ht(n,i,h)}),Z.resolve()}removeOverlaysForBatchId(n,i,s){const u=this.Ir.get(s);return void 0!==u&&(u.forEach(h=>this.overlays=this.overlays.remove(h)),this.Ir.delete(s)),Z.resolve()}getOverlaysForCollection(n,i,s){const u=Jr(),h=i.length+1,y=new lt(i.child("")),D=this.overlays.getIteratorFrom(y);for(;D.hasNext();){const x=D.getNext().value,B=x.getKey();if(!i.isPrefixOf(B.path))break;B.path.length===h&&x.largestBatchId>s&&u.set(x.getKey(),x)}return Z.resolve(u)}getOverlaysForCollectionGroup(n,i,s,u){let h=new Kn((B,G)=>B-G);const y=this.overlays.getIterator();for(;y.hasNext();){const B=y.getNext().value;if(B.getKey().getCollectionGroup()===i&&B.largestBatchId>s){let G=h.get(B.largestBatchId);null===G&&(G=Jr(),h=h.insert(B.largestBatchId,G)),G.set(B.getKey(),B)}}const D=Jr(),x=h.getIterator();for(;x.hasNext()&&(x.getNext().value.forEach((B,G)=>D.set(B,G)),!(D.size()>=u)););return Z.resolve(D)}ht(n,i,s){const u=this.overlays.get(s.key);if(null!==u){const y=this.Ir.get(u.largestBatchId).delete(s.key);this.Ir.set(u.largestBatchId,y)}this.overlays=this.overlays.insert(s.key,new Ke(i,s));let h=this.Ir.get(i);void 0===h&&(h=bn(),this.Ir.set(i,h)),this.Ir.set(i,h.add(s.key))}}class ud{constructor(){this.sessionToken=Zn.EMPTY_BYTE_STRING}getSessionToken(n){return Z.resolve(this.sessionToken)}setSessionToken(n,i){return this.sessionToken=i,Z.resolve()}}class Cu{constructor(){this.Tr=new At(Ci.Er),this.dr=new At(Ci.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(n,i){const s=new Ci(n,i);this.Tr=this.Tr.add(s),this.dr=this.dr.add(s)}Rr(n,i){n.forEach(s=>this.addReference(s,i))}removeReference(n,i){this.Vr(new Ci(n,i))}mr(n,i){n.forEach(s=>this.removeReference(s,i))}gr(n){const i=new lt(new Yt([])),s=new Ci(i,n),u=new Ci(i,n+1),h=[];return this.dr.forEachInRange([s,u],y=>{this.Vr(y),h.push(y.key)}),h}pr(){this.Tr.forEach(n=>this.Vr(n))}Vr(n){this.Tr=this.Tr.delete(n),this.dr=this.dr.delete(n)}yr(n){const i=new lt(new Yt([])),s=new Ci(i,n),u=new Ci(i,n+1);let h=bn();return this.dr.forEachInRange([s,u],y=>{h=h.add(y.key)}),h}containsKey(n){const i=new Ci(n,0),s=this.Tr.firstAfterOrEqual(i);return null!==s&&n.isEqual(s.key)}}class Ci{constructor(n,i){this.key=n,this.wr=i}static Er(n,i){return lt.comparator(n.key,i.key)||Nt(n.wr,i.wr)}static Ar(n,i){return Nt(n.wr,i.wr)||lt.comparator(n.key,i.key)}}class nl{constructor(n,i){this.indexManager=n,this.referenceDelegate=i,this.mutationQueue=[],this.Sr=1,this.br=new At(Ci.Er)}checkEmpty(n){return Z.resolve(0===this.mutationQueue.length)}addMutationBatch(n,i,s,u){const h=this.Sr;this.Sr++;const y=new ee(h,i,s,u);this.mutationQueue.push(y);for(const D of u)this.br=this.br.add(new Ci(D.key,h)),this.indexManager.addToCollectionParentIndex(n,D.key.path.popLast());return Z.resolve(y)}lookupMutationBatch(n,i){return Z.resolve(this.Dr(i))}getNextMutationBatchAfterBatchId(n,i){const u=this.vr(i+1),h=u<0?0:u;return Z.resolve(this.mutationQueue.length>h?this.mutationQueue[h]:null)}getHighestUnacknowledgedBatchId(){return Z.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(n){return Z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(n,i){const s=new Ci(i,0),u=new Ci(i,Number.POSITIVE_INFINITY),h=[];return this.br.forEachInRange([s,u],y=>{const D=this.Dr(y.wr);h.push(D)}),Z.resolve(h)}getAllMutationBatchesAffectingDocumentKeys(n,i){let s=new At(Nt);return i.forEach(u=>{const h=new Ci(u,0),y=new Ci(u,Number.POSITIVE_INFINITY);this.br.forEachInRange([h,y],D=>{s=s.add(D.wr)})}),Z.resolve(this.Cr(s))}getAllMutationBatchesAffectingQuery(n,i){const s=i.path,u=s.length+1;let h=s;lt.isDocumentKey(h)||(h=h.child(""));const y=new Ci(new lt(h),0);let D=new At(Nt);return this.br.forEachWhile(x=>{const B=x.key.path;return!!s.isPrefixOf(B)&&(B.length===u&&(D=D.add(x.wr)),!0)},y),Z.resolve(this.Cr(D))}Cr(n){const i=[];return n.forEach(s=>{const u=this.Dr(s);null!==u&&i.push(u)}),i}removeMutationBatch(n,i){Dt(0===this.Fr(i.batchId,"removed")),this.mutationQueue.shift();let s=this.br;return Z.forEach(i.mutations,u=>{const h=new Ci(u.key,i.batchId);return s=s.delete(h),this.referenceDelegate.markPotentiallyOrphaned(n,u.key)}).next(()=>{this.br=s})}On(n){}containsKey(n,i){const s=new Ci(i,0),u=this.br.firstAfterOrEqual(s);return Z.resolve(i.isEqual(u&&u.key))}performConsistencyCheck(n){return Z.resolve()}Fr(n,i){return this.vr(n)}vr(n){return 0===this.mutationQueue.length?0:n-this.mutationQueue[0].batchId}Dr(n){const i=this.vr(n);return i<0||i>=this.mutationQueue.length?null:this.mutationQueue[i]}}class Zp{constructor(n){this.Mr=n,this.docs=new Kn(lt.comparator),this.size=0}setIndexManager(n){this.indexManager=n}addEntry(n,i){const s=i.key,u=this.docs.get(s),h=u?u.size:0,y=this.Mr(i);return this.docs=this.docs.insert(s,{document:i.mutableCopy(),size:y}),this.size+=y-h,this.indexManager.addToCollectionParentIndex(n,s.path.popLast())}removeEntry(n){const i=this.docs.get(n);i&&(this.docs=this.docs.remove(n),this.size-=i.size)}getEntry(n,i){const s=this.docs.get(i);return Z.resolve(s?s.document.mutableCopy():rr.newInvalidDocument(i))}getEntries(n,i){let s=Mr();return i.forEach(u=>{const h=this.docs.get(u);s=s.insert(u,h?h.document.mutableCopy():rr.newInvalidDocument(u))}),Z.resolve(s)}getDocumentsMatchingQuery(n,i,s,u){let h=Mr();const y=i.path,D=new lt(y.child("")),x=this.docs.getIteratorFrom(D);for(;x.hasNext();){const{key:B,value:{document:G}}=x.getNext();if(!y.isPrefixOf(B.path))break;B.path.length>y.length+1||ni(new gn((c=G).readTime,c.key,-1),s)<=0||(u.has(G.key)||Ui(i,G))&&(h=h.insert(G.key,G.mutableCopy()))}var c;return Z.resolve(h)}getAllFromCollectionGroup(n,i,s,u){yt()}Or(n,i){return Z.forEach(this.docs,s=>i(s))}newChangeBuffer(n){return new $h(this)}getSize(n){return Z.resolve(this.size)}}class $h extends Kp{constructor(n){super(),this.cr=n}applyChanges(n){const i=[];return this.changes.forEach((s,u)=>{u.isValidDocument()?i.push(this.cr.addEntry(n,u)):this.cr.removeEntry(s)}),Z.waitFor(i)}getFromCache(n,i){return this.cr.getEntry(n,i)}getAllFromCache(n,i){return this.cr.getEntries(n,i)}}class wu{constructor(n){this.persistence=n,this.Nr=new Jn(i=>Go(i),va),this.lastRemoteSnapshotVersion=Ct.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Cu,this.targetCount=0,this.kr=He.Bn()}forEachTarget(n,i){return this.Nr.forEach((s,u)=>i(u)),Z.resolve()}getLastRemoteSnapshotVersion(n){return Z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(n){return Z.resolve(this.Lr)}allocateTargetId(n){return this.highestTargetId=this.kr.next(),Z.resolve(this.highestTargetId)}setTargetsMetadata(n,i,s){return s&&(this.lastRemoteSnapshotVersion=s),i>this.Lr&&(this.Lr=i),Z.resolve()}Kn(n){this.Nr.set(n.target,n);const i=n.targetId;i>this.highestTargetId&&(this.kr=new He(i),this.highestTargetId=i),n.sequenceNumber>this.Lr&&(this.Lr=n.sequenceNumber)}addTargetData(n,i){return this.Kn(i),this.targetCount+=1,Z.resolve()}updateTargetData(n,i){return this.Kn(i),Z.resolve()}removeTargetData(n,i){return this.Nr.delete(i.target),this.Br.gr(i.targetId),this.targetCount-=1,Z.resolve()}removeTargets(n,i,s){let u=0;const h=[];return this.Nr.forEach((y,D)=>{D.sequenceNumber<=i&&null===s.get(D.targetId)&&(this.Nr.delete(y),h.push(this.removeMatchingKeysForTargetId(n,D.targetId)),u++)}),Z.waitFor(h).next(()=>u)}getTargetCount(n){return Z.resolve(this.targetCount)}getTargetData(n,i){const s=this.Nr.get(i)||null;return Z.resolve(s)}addMatchingKeys(n,i,s){return this.Br.Rr(i,s),Z.resolve()}removeMatchingKeys(n,i,s){this.Br.mr(i,s);const u=this.persistence.referenceDelegate,h=[];return u&&i.forEach(y=>{h.push(u.markPotentiallyOrphaned(n,y))}),Z.waitFor(h)}removeMatchingKeysForTargetId(n,i){return this.Br.gr(i),Z.resolve()}getMatchingKeysForTargetId(n,i){const s=this.Br.yr(i);return Z.resolve(s)}containsKey(n,i){return Z.resolve(this.Br.containsKey(i))}}class rl{constructor(n,i){this.qr={},this.overlays={},this.Qr=new Nn(0),this.Kr=!1,this.Kr=!0,this.$r=new ud,this.referenceDelegate=n(this),this.Ur=new wu(this),this.indexManager=new Za,this.remoteDocumentCache=new Zp(s=>this.referenceDelegate.Wr(s)),this.serializer=new Vh(i),this.Gr=new Xp(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(n){return this.indexManager}getDocumentOverlayCache(n){let i=this.overlays[n.toKey()];return i||(i=new Yp,this.overlays[n.toKey()]=i),i}getMutationQueue(n,i){let s=this.qr[n.toKey()];return s||(s=new nl(i,this.referenceDelegate),this.qr[n.toKey()]=s),s}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(n,i,s){Qe("MemoryPersistence","Starting transaction:",n);const u=new Hh(this.Qr.next());return this.referenceDelegate.zr(),s(u).next(h=>this.referenceDelegate.jr(u).next(()=>h)).toPromise().then(h=>(u.raiseOnCommittedEvent(),h))}Hr(n,i){return Z.or(Object.values(this.qr).map(s=>()=>s.containsKey(n,i)))}}class Hh extends jr{constructor(n){super(),this.currentSequenceNumber=n}}class Tu{constructor(n){this.persistence=n,this.Jr=new Cu,this.Yr=null}static Zr(n){return new Tu(n)}get Xr(){if(this.Yr)return this.Yr;throw yt()}addReference(n,i,s){return this.Jr.addReference(s,i),this.Xr.delete(s.toString()),Z.resolve()}removeReference(n,i,s){return this.Jr.removeReference(s,i),this.Xr.add(s.toString()),Z.resolve()}markPotentiallyOrphaned(n,i){return this.Xr.add(i.toString()),Z.resolve()}removeTarget(n,i){this.Jr.gr(i.targetId).forEach(u=>this.Xr.add(u.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(n,i.targetId).next(u=>{u.forEach(h=>this.Xr.add(h.toString()))}).next(()=>s.removeTargetData(n,i))}zr(){this.Yr=new Set}jr(n){const i=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Z.forEach(this.Xr,s=>{const u=lt.fromPath(s);return this.ei(n,u).next(h=>{h||i.removeEntry(u,Ct.min())})}).next(()=>(this.Yr=null,i.apply(n)))}updateLimboDocument(n,i){return this.ei(n,i).next(s=>{s?this.Xr.delete(i.toString()):this.Xr.add(i.toString())})}Wr(n){return 0}ei(n,i){return Z.or([()=>Z.resolve(this.Jr.containsKey(i)),()=>this.persistence.getTargetCache().containsKey(n,i),()=>this.persistence.Hr(n,i)])}}class ol{constructor(n,i,s,u){this.targetId=n,this.fromCache=i,this.$i=s,this.Ui=u}static Wi(n,i){let s=bn(),u=bn();for(const h of i.docChanges)switch(h.type){case 0:s=s.add(h.doc.key);break;case 1:u=u.add(h.doc.key)}return new ol(n,i.fromCache,s,u)}}class fd{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(n){this._documentReadCount+=n}}class pd{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(0,he.nr)()?8:function Ce(c){const n=c.match(/Android ([\d.]+)/i),i=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(i)}((0,he.ZQ)())>0?6:4}initialize(n,i){this.Ji=n,this.indexManager=i,this.Gi=!0}getDocumentsMatchingQuery(n,i,s,u){const h={result:null};return this.Yi(n,i).next(y=>{h.result=y}).next(()=>{if(!h.result)return this.Zi(n,i,u,s).next(y=>{h.result=y})}).next(()=>{if(h.result)return;const y=new fd;return this.Xi(n,i,y).next(D=>{if(h.result=D,this.zi)return this.es(n,i,y,D.size)})}).next(()=>h.result)}es(n,i,s,u){return s.documentReadCount<this.ji?(fr()<=rt.$b.DEBUG&&Qe("QueryEngine","SDK will not create cache indexes for query:",yi(i),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Z.resolve()):(fr()<=rt.$b.DEBUG&&Qe("QueryEngine","Query:",yi(i),"scans",s.documentReadCount,"local documents and returns",u,"documents as results."),s.documentReadCount>this.Hi*u?(fr()<=rt.$b.DEBUG&&Qe("QueryEngine","The SDK decides to create cache indexes for query:",yi(i),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(n,Wr(i))):Z.resolve())}Yi(n,i){if(Ls(i))return Z.resolve(null);let s=Wr(i);return this.indexManager.getIndexType(n,s).next(u=>0===u?null:(null!==i.limit&&1===u&&(i=nt(i,null,"F"),s=Wr(i)),this.indexManager.getDocumentsMatchingTarget(n,s).next(h=>{const y=bn(...h);return this.Ji.getDocuments(n,y).next(D=>this.indexManager.getMinOffset(n,s).next(x=>{const B=this.ts(i,D);return this.ns(i,B,y,x.readTime)?this.Yi(n,nt(i,null,"F")):this.rs(n,B,i,x)}))})))}Zi(n,i,s,u){return Ls(i)||u.isEqual(Ct.min())?Z.resolve(null):this.Ji.getDocuments(n,s).next(h=>{const y=this.ts(i,h);return this.ns(i,y,s,u)?Z.resolve(null):(fr()<=rt.$b.DEBUG&&Qe("QueryEngine","Re-using previous result from %s to execute query: %s",u.toString(),yi(i)),this.rs(n,y,i,function _n(c,n){const i=c.toTimestamp().seconds,s=c.toTimestamp().nanoseconds+1,u=Ct.fromTimestamp(1e9===s?new Rn(i+1,0):new Rn(i,s));return new gn(u,lt.empty(),n)}(u,-1)).next(D=>D))})}ts(n,i){let s=new At(ta(n));return i.forEach((u,h)=>{Ui(n,h)&&(s=s.add(h))}),s}ns(n,i,s,u){if(null===n.limit)return!1;if(s.size!==i.size)return!0;const h="F"===n.limitType?i.last():i.first();return!!h&&(h.hasPendingWrites||h.version.compareTo(u)>0)}Xi(n,i,s){return fr()<=rt.$b.DEBUG&&Qe("QueryEngine","Using full collection scan to execute query:",yi(i)),this.Ji.getDocumentsMatchingQuery(n,i,gn.min(),s)}rs(n,i,s,u){return this.Ji.getDocumentsMatchingQuery(n,s,u).next(h=>(i.forEach(y=>{h=h.insert(y.key,y)}),h))}}class sl{constructor(n,i,s,u){this.persistence=n,this.ss=i,this.serializer=u,this.os=new Kn(Nt),this._s=new Jn(h=>Go(h),va),this.us=new Map,this.cs=n.getRemoteDocumentCache(),this.Ur=n.getTargetCache(),this.Gr=n.getBundleCache(),this.ls(s)}ls(n){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(n),this.indexManager=this.persistence.getIndexManager(n),this.mutationQueue=this.persistence.getMutationQueue(n,this.indexManager),this.localDocuments=new zc(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(n){return this.persistence.runTransaction("Collect garbage","readwrite-primary",i=>n.collect(i,this.os))}}function Gs(c,n){return al.apply(this,arguments)}function al(){return(al=(0,de.A)(function*(c,n){const i=ce(c);return yield i.persistence.runTransaction("Handle user change","readonly",s=>{let u;return i.mutationQueue.getAllMutationBatches(s).next(h=>(u=h,i.ls(n),i.mutationQueue.getAllMutationBatches(s))).next(h=>{const y=[],D=[];let x=bn();for(const B of u){y.push(B.batchId);for(const G of B.mutations)x=x.add(G.key)}for(const B of h){D.push(B.batchId);for(const G of B.mutations)x=x.add(G.key)}return i.localDocuments.getDocuments(s,x).next(B=>({hs:B,removedBatchIds:y,addedBatchIds:D}))})})})).apply(this,arguments)}function cl(c){const n=ce(c);return n.persistence.runTransaction("Get last remote snapshot version","readonly",i=>n.Ur.getLastRemoteSnapshotVersion(i))}function md(c,n){const i=ce(c);return i.persistence.runTransaction("Get next mutation batch","readonly",s=>(void 0===n&&(n=-1),i.mutationQueue.getNextMutationBatchAfterBatchId(s,n)))}function Tc(c,n,i){return xa.apply(this,arguments)}function xa(){return(xa=(0,de.A)(function*(c,n,i){const s=ce(c),u=s.os.get(n),h=i?"readwrite":"readwrite-primary";try{i||(yield s.persistence.runTransaction("Release target",h,y=>s.persistence.referenceDelegate.removeTarget(y,u)))}catch(y){if(!re(y))throw y;Qe("LocalStore",`Failed to update sequence numbers for target ${n}: ${y}`)}s.os=s.os.remove(n),s._s.delete(u.target)})).apply(this,arguments)}function Ja(c,n,i){const s=ce(c);let u=Ct.min(),h=bn();return s.persistence.runTransaction("Execute query","readwrite",y=>function(x,B,G){const te=ce(x),pe=te._s.get(G);return void 0!==pe?Z.resolve(te.os.get(pe)):te.Ur.getTargetData(B,G)}(s,y,Wr(n)).next(D=>{if(D)return u=D.lastLimboFreeSnapshotVersion,s.Ur.getMatchingKeysForTargetId(y,D.targetId).next(x=>{h=x})}).next(()=>s.ss.getDocumentsMatchingQuery(y,n,i?u:Ct.min(),i?h:bn())).next(D=>(function _d(c,n,i){let s=c.us.get(n)||Ct.min();i.forEach((u,h)=>{h.readTime.compareTo(s)>0&&(s=h.readTime)}),c.us.set(n,s)}(s,function Is(c){return c.collectionGroup||(c.path.length%2==1?c.path.lastSegment():c.path.get(c.path.length-2))}(n),D),{documents:D,Ts:h})))}class ve{constructor(){this.activeTargetIds=function na(){return Ea}()}fs(n){this.activeTargetIds=this.activeTargetIds.add(n)}gs(n){this.activeTargetIds=this.activeTargetIds.delete(n)}Vs(){const n={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(n)}}class et{constructor(){this.so=new ve,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(n){}updateMutationState(n,i,s){}addLocalQueryTarget(n,i=!0){return i&&this.so.fs(n),this.oo[n]||"not-current"}updateQueryState(n,i,s){this.oo[n]=i}removeLocalQueryTarget(n){this.so.gs(n)}isLocalQueryTarget(n){return this.so.activeTargetIds.has(n)}clearQueryState(n){delete this.oo[n]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(n){return this.so.activeTargetIds.has(n)}start(){return this.so=new ve,Promise.resolve()}handleUserChange(n,i,s){}setOnlineState(n){}shutdown(){}writeSequenceNumber(n){}notifyBundleLoaded(n){}}class Ht{_o(n){}shutdown(){}}class In{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(n){this.ho.push(n)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Qe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const n of this.ho)n(0)}lo(){Qe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const n of this.ho)n(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let mn=null;function Ar(){return null===mn?mn=268435456+Math.round(2147483648*Math.random()):mn++,"0x"+mn.toString(16)}const Mi={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class qc{constructor(n){this.Io=n.Io,this.To=n.To}Eo(n){this.Ao=n}Ro(n){this.Vo=n}mo(n){this.fo=n}onMessage(n){this.po=n}close(){this.To()}send(n){this.Io(n)}yo(){this.Ao()}wo(){this.Vo()}So(n){this.fo(n)}bo(n){this.po(n)}}const Qr="WebChannelConnection";class Au extends class{constructor(i){this.databaseInfo=i,this.databaseId=i.databaseId;const s=i.ssl?"https":"http",u=encodeURIComponent(this.databaseId.projectId),h=encodeURIComponent(this.databaseId.database);this.Do=s+"://"+i.host,this.vo=`projects/${u}/databases/${h}`,this.Co="(default)"===this.databaseId.database?`project_id=${u}`:`project_id=${u}&database_id=${h}`}get Fo(){return!1}Mo(i,s,u,h,y){const D=Ar(),x=this.xo(i,s.toUriEncodedString());Qe("RestConnection",`Sending RPC '${i}' ${D}:`,x,u);const B={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(B,h,y),this.No(i,x,B,u).then(G=>(Qe("RestConnection",`Received RPC '${i}' ${D}: `,G),G),G=>{throw cr("RestConnection",`RPC '${i}' ${D} failed with error: `,G,"url: ",x,"request:",u),G})}Lo(i,s,u,h,y,D){return this.Mo(i,s,u,h,y)}Oo(i,s,u){i["X-Goog-Api-Client"]="gl-js/ fire/"+rn,i["Content-Type"]="text/plain",this.databaseInfo.appId&&(i["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach((h,y)=>i[y]=h),u&&u.headers.forEach((h,y)=>i[y]=h)}xo(i,s){return`${this.Do}/v1/${s}:${Mi[i]}`}terminate(){}}{constructor(n){super(n),this.forceLongPolling=n.forceLongPolling,this.autoDetectLongPolling=n.autoDetectLongPolling,this.useFetchStreams=n.useFetchStreams,this.longPollingOptions=n.longPollingOptions}No(n,i,s,u){const h=Ar();return new Promise((y,D)=>{const x=new nn;x.setWithCredentials(!0),x.listenOnce(Xt.COMPLETE,()=>{try{switch(x.getLastErrorCode()){case ct.NO_ERROR:const G=x.getResponseJson();Qe(Qr,`XHR for RPC '${n}' ${h} received:`,JSON.stringify(G)),y(G);break;case ct.TIMEOUT:Qe(Qr,`RPC '${n}' ${h} timed out`),D(new K(W.DEADLINE_EXCEEDED,"Request time out"));break;case ct.HTTP_ERROR:const te=x.getStatus();if(Qe(Qr,`RPC '${n}' ${h} failed with status:`,te,"response text:",x.getResponseText()),te>0){let pe=x.getResponseJson();Array.isArray(pe)&&(pe=pe[0]);const Ve=pe?.error;if(Ve&&Ve.status&&Ve.message){const tt=function(ht){const zt=ht.toLowerCase().replace(/_/g,"-");return Object.values(W).indexOf(zt)>=0?zt:W.UNKNOWN}(Ve.status);D(new K(tt,Ve.message))}else D(new K(W.UNKNOWN,"Server responded with status "+x.getStatus()))}else D(new K(W.UNAVAILABLE,"Connection failed."));break;default:yt()}}finally{Qe(Qr,`RPC '${n}' ${h} completed.`)}});const B=JSON.stringify(u);Qe(Qr,`RPC '${n}' ${h} sending request:`,u),x.send(i,"POST",B,s,15)})}Bo(n,i,s){const u=Ar(),h=[this.Do,"/","google.firestore.v1.Firestore","/",n,"/channel"],y=Vt(),D=it(),x={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},B=this.longPollingOptions.timeoutSeconds;void 0!==B&&(x.longPollingTimeout=Math.round(1e3*B)),this.useFetchStreams&&(x.useFetchStreams=!0),this.Oo(x.initMessageHeaders,i,s),x.encodeInitMessageHeaders=!0;const G=h.join("");Qe(Qr,`Creating RPC '${n}' stream ${u}: ${G}`,x);const te=y.createWebChannel(G,x);let pe=!1,Ve=!1;const tt=new qc({Io:ht=>{Ve?Qe(Qr,`Not sending because RPC '${n}' stream ${u} is closed:`,ht):(pe||(Qe(Qr,`Opening RPC '${n}' stream ${u} transport.`),te.open(),pe=!0),Qe(Qr,`RPC '${n}' stream ${u} sending:`,ht),te.send(ht))},To:()=>te.close()}),gt=(ht,zt,tn)=>{ht.listen(zt,Kt=>{try{tn(Kt)}catch(kn){setTimeout(()=>{throw kn},0)}})};return gt(te,xn.EventType.OPEN,()=>{Ve||(Qe(Qr,`RPC '${n}' stream ${u} transport opened.`),tt.yo())}),gt(te,xn.EventType.CLOSE,()=>{Ve||(Ve=!0,Qe(Qr,`RPC '${n}' stream ${u} transport closed`),tt.So())}),gt(te,xn.EventType.ERROR,ht=>{Ve||(Ve=!0,cr(Qr,`RPC '${n}' stream ${u} transport errored:`,ht),tt.So(new K(W.UNAVAILABLE,"The operation could not be completed")))}),gt(te,xn.EventType.MESSAGE,ht=>{var zt;if(!Ve){const tn=ht.data[0];Dt(!!tn);const kn=tn.error||(null===(zt=tn[0])||void 0===zt?void 0:zt.error);if(kn){Qe(Qr,`RPC '${n}' stream ${u} received error:`,kn);const Dr=kn.status;let Yn=function(Ie){const Ae=dn[Ie];if(void 0!==Ae)return Er(Ae)}(Dr),we=kn.message;void 0===Yn&&(Yn=W.INTERNAL,we="Unknown error status: "+Dr+" with message "+kn.message),Ve=!0,tt.So(new K(Yn,we)),te.close()}else Qe(Qr,`RPC '${n}' stream ${u} received:`,tn),tt.bo(tn)}}),gt(D,dt.STAT_EVENT,ht=>{ht.stat===qe.PROXY?Qe(Qr,`RPC '${n}' stream ${u} detected buffering proxy`):ht.stat===qe.NOPROXY&&Qe(Qr,`RPC '${n}' stream ${u} detected no buffering proxy`)}),setTimeout(()=>{tt.wo()},0),tt}}function ec(){return typeof document<"u"?document:null}function Na(c){return new Aa(c,!0)}class hl{constructor(n,i,s=1e3,u=1.5,h=6e4){this.ui=n,this.timerId=i,this.ko=s,this.qo=u,this.Qo=h,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(n){this.cancel();const i=Math.floor(this.Ko+this.zo()),s=Math.max(0,Date.now()-this.Uo),u=Math.max(0,i-s);u>0&&Qe("ExponentialBackoff",`Backing off for ${u} ms (base delay: ${this.Ko} ms, delay with jitter: ${i} ms, last attempt: ${s} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,u,()=>(this.Uo=Date.now(),n())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class fl{constructor(n,i,s,u,h,y,D,x){this.ui=n,this.Ho=s,this.Jo=u,this.connection=h,this.authCredentialsProvider=y,this.appCheckCredentialsProvider=D,this.listener=x,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new hl(n,i)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}stop(){var n=this;return(0,de.A)(function*(){n.n_()&&(yield n.close(0))})()}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(n){this.u_(),this.stream.send(n)}__(){var n=this;return(0,de.A)(function*(){if(n.r_())return n.close(0)})()}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(n,i){var s=this;return(0,de.A)(function*(){s.u_(),s.c_(),s.t_.cancel(),s.Yo++,4!==n?s.t_.reset():i&&i.code===W.RESOURCE_EXHAUSTED?(pn(i.toString()),pn("Using maximum backoff delay to prevent overloading the backend."),s.t_.Wo()):i&&i.code===W.UNAUTHENTICATED&&3!==s.state&&(s.authCredentialsProvider.invalidateToken(),s.appCheckCredentialsProvider.invalidateToken()),null!==s.stream&&(s.l_(),s.stream.close(),s.stream=null),s.state=n,yield s.listener.mo(i)})()}l_(){}auth(){this.state=1;const n=this.h_(this.Yo),i=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,u])=>{this.Yo===i&&this.P_(s,u)},s=>{n(()=>{const u=new K(W.UNKNOWN,"Fetching auth token failed: "+s.message);return this.I_(u)})})}P_(n,i){const s=this.h_(this.Yo);this.stream=this.T_(n,i),this.stream.Eo(()=>{s(()=>this.listener.Eo())}),this.stream.Ro(()=>{s(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(u=>{s(()=>this.I_(u))}),this.stream.onMessage(u=>{s(()=>1==++this.e_?this.E_(u):this.onNext(u))})}i_(){var n=this;this.state=5,this.t_.Go((0,de.A)(function*(){n.state=0,n.start()}))}I_(n){return Qe("PersistentStream",`close with error: ${n}`),this.stream=null,this.close(4,n)}h_(n){return i=>{this.ui.enqueueAndForget(()=>this.Yo===n?i():(Qe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class pl extends fl{constructor(n,i,s,u,h,y){super(n,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",i,s,u,y),this.serializer=h}T_(n,i){return this.connection.Bo("Listen",n,i)}E_(n){return this.onNext(n)}onNext(n){this.t_.reset();const i=function Hi(c,n){let i;if("targetChange"in n){const s="NO_CHANGE"===(B=n.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===B?1:"REMOVE"===B?2:"CURRENT"===B?3:"RESET"===B?4:yt(),u=n.targetChange.targetIds||[],h=function(B,G){return B.useProto3Json?(Dt(void 0===G||"string"==typeof G),Zn.fromBase64String(G||"")):(Dt(void 0===G||G instanceof Buffer||G instanceof Uint8Array),Zn.fromUint8Array(G||new Uint8Array))}(c,n.targetChange.resumeToken),y=n.targetChange.cause,D=y&&function(B){const G=void 0===B.code?W.UNKNOWN:Er(B.code);return new K(G,B.message||"")}(y);i=new an(s,u,h,D||null)}else if("documentChange"in n){const s=n.documentChange,u=Ii(c,s.document.name),h=Rt(s.document.updateTime),y=s.document.createTime?Rt(s.document.createTime):Ct.min(),D=new Sn({mapValue:{fields:s.document.fields}}),x=rr.newFoundDocument(u,h,y,D);i=new wr(s.targetIds||[],s.removedTargetIds||[],x.key,x)}else if("documentDelete"in n){const s=n.documentDelete,u=Ii(c,s.document),h=s.readTime?Rt(s.readTime):Ct.min(),y=rr.newNoDocument(u,h);i=new wr([],s.removedTargetIds||[],y.key,y)}else if("documentRemove"in n){const s=n.documentRemove,u=Ii(c,s.document);i=new wr([],s.removedTargetIds||[],u,null)}else{if(!("filter"in n))return yt();{const s=n.filter,{count:u=0,unchangedNames:h}=s,y=new Qn(u,h);i=new Si(s.targetId,y)}}var B;return i}(this.serializer,n),s=function(h){if(!("targetChange"in h))return Ct.min();const y=h.targetChange;return y.targetIds&&y.targetIds.length?Ct.min():y.readTime?Rt(y.readTime):Ct.min()}(n);return this.listener.d_(i,s)}A_(n){const i={};i.database=ei(this.serializer),i.addTarget=function(h,y){let D;const x=y.target;if(D=Li(x)?{documents:Sa(h,x)}:{query:Lc(h,x)._t},D.targetId=y.targetId,y.resumeToken.approximateByteSize()>0){D.resumeToken=gc(h,y.resumeToken);const B=pc(h,y.expectedCount);null!==B&&(D.expectedCount=B)}else if(y.snapshotVersion.compareTo(Ct.min())>0){D.readTime=So(h,y.snapshotVersion.toTimestamp());const B=pc(h,y.expectedCount);null!==B&&(D.expectedCount=B)}return D}(this.serializer,n);const s=function zp(c,n){const i=function(u){switch(u){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return yt()}}(n.purpose);return null==i?null:{"goog-listen-tags":i}}(0,n);s&&(i.labels=s),this.a_(i)}R_(n){const i={};i.database=ei(this.serializer),i.removeTarget=n,this.a_(i)}}class yd extends fl{constructor(n,i,s,u,h,y){super(n,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",i,s,u,y),this.serializer=h}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(n,i){return this.connection.Bo("Write",n,i)}E_(n){return Dt(!!n.streamToken),this.lastStreamToken=n.streamToken,Dt(!n.writeResults||0===n.writeResults.length),this.listener.f_()}onNext(n){Dt(!!n.streamToken),this.lastStreamToken=n.streamToken,this.t_.reset();const i=function Yl(c,n){return c&&c.length>0?(Dt(void 0!==n),c.map(i=>function(u,h){let y=Rt(u.updateTime?u.updateTime:h);return y.isEqual(Ct.min())&&(y=Rt(h)),new hu(y,u.transformResults||[])}(i,n))):[]}(n.writeResults,n.commitTime),s=Rt(n.commitTime);return this.listener.g_(s,i)}p_(){const n={};n.database=ei(this.serializer),this.a_(n)}m_(n){const i={streamToken:this.lastStreamToken,writes:n.map(s=>function Hs(c,n){let i;if(n instanceof f)i={update:Ka(c,n.key,n.value)};else if(n instanceof M)i={delete:oa(c,n.key)};else if(n instanceof S)i={update:Ka(c,n.key,n.data),updateMask:qp(n.fieldMask)};else{if(!(n instanceof j))return yt();i={verify:oa(c,n.key)}}return n.fieldTransforms.length>0&&(i.updateTransforms=n.fieldTransforms.map(s=>function(h,y){const D=y.transform;if(D instanceof Us)return{fieldPath:y.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(D instanceof Xi)return{fieldPath:y.field.canonicalString(),appendMissingElements:{values:D.elements}};if(D instanceof Bi)return{fieldPath:y.field.canonicalString(),removeAllFromArray:{values:D.elements}};if(D instanceof mo)return{fieldPath:y.field.canonicalString(),increment:D.Pe};throw yt()}(0,s))),n.precondition.isNone||(i.currentDocument=void 0!==(h=n.precondition).updateTime?{updateTime:Ro(c,h.updateTime)}:void 0!==h.exists?{exists:h.exists}:yt()),i;var h}(this.serializer,s))};this.a_(i)}}class Wh extends class{}{constructor(n,i,s,u){super(),this.authCredentials=n,this.appCheckCredentials=i,this.connection=s,this.serializer=u,this.y_=!1}w_(){if(this.y_)throw new K(W.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(n,i,s,u){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,y])=>this.connection.Mo(n,Bs(i,s),u,h,y)).catch(h=>{throw"FirebaseError"===h.name?(h.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new K(W.UNKNOWN,h.toString())})}Lo(n,i,s,u,h){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([y,D])=>this.connection.Lo(n,Bs(i,s),u,y,D,h)).catch(y=>{throw"FirebaseError"===y.name?(y.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),y):new K(W.UNKNOWN,y.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class vd{constructor(n,i){this.asyncQueue=n,this.onlineStateHandler=i,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(n){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${n.toString()}`),this.C_("Offline")))}set(n){this.x_(),this.S_=0,"Online"===n&&(this.D_=!1),this.C_(n)}C_(n){n!==this.state&&(this.state=n,this.onlineStateHandler(n))}F_(n){const i=`Could not reach Cloud Firestore backend. ${n}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(pn(i),this.D_=!1):Qe("OnlineStateTracker",i)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class gl{constructor(n,i,s,u,h){var y=this;this.localStore=n,this.datastore=i,this.asyncQueue=s,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=h,this.k_._o(D=>{s.enqueueAndForget((0,de.A)(function*(){var x;Kc(y)&&(Qe("RemoteStore","Restarting streams for network reachability change."),yield(x=(0,de.A)(function*(G){const te=ce(G);te.L_.add(4),yield Su(te),te.q_.set("Unknown"),te.L_.delete(4),yield Oa(te)}),function B(G){return x.apply(this,arguments)})(y))}))}),this.q_=new vd(s,u)}}function Oa(c){return ng.apply(this,arguments)}function ng(){return(ng=(0,de.A)(function*(c){if(Kc(c))for(const n of c.B_)yield n(!0)})).apply(this,arguments)}function Su(c){return qh.apply(this,arguments)}function qh(){return(qh=(0,de.A)(function*(c){for(const n of c.B_)yield n(!1)})).apply(this,arguments)}function Dc(c,n){const i=ce(c);i.N_.has(n.targetId)||(i.N_.set(n.targetId,n),Id(i)?Kh(i):Cd(i).r_()&&Pi(i,n))}function ka(c,n){const i=ce(c),s=Cd(i);i.N_.delete(n),s.r_()&&t_(i,n),0===i.N_.size&&(s.r_()?s.o_():Kc(i)&&i.q_.set("Unknown"))}function Pi(c,n){if(c.Q_.xe(n.targetId),n.resumeToken.approximateByteSize()>0||n.snapshotVersion.compareTo(Ct.min())>0){const i=c.remoteSyncer.getRemoteKeysForTarget(n.targetId).size;n=n.withExpectedCount(i)}Cd(c).A_(n)}function t_(c,n){c.Q_.xe(n),Cd(c).R_(n)}function Kh(c){c.Q_=new hc({getRemoteKeysForTarget:n=>c.remoteSyncer.getRemoteKeysForTarget(n),ot:n=>c.N_.get(n)||null,tt:()=>c.datastore.serializer.databaseId}),Cd(c).start(),c.q_.v_()}function Id(c){return Kc(c)&&!Cd(c).n_()&&c.N_.size>0}function Kc(c){return 0===ce(c).L_.size}function rg(c){c.Q_=void 0}function Qh(c){return ig.apply(this,arguments)}function ig(){return(ig=(0,de.A)(function*(c){c.q_.set("Online")})).apply(this,arguments)}function n_(c){return Ed.apply(this,arguments)}function Ed(){return(Ed=(0,de.A)(function*(c){c.N_.forEach((n,i)=>{Pi(c,n)})})).apply(this,arguments)}function Xh(c,n){return Yh.apply(this,arguments)}function Yh(){return(Yh=(0,de.A)(function*(c,n){rg(c),Id(c)?(c.q_.M_(n),Kh(c)):c.q_.set("Unknown")})).apply(this,arguments)}function Vv(c,n,i){return og.apply(this,arguments)}function og(){return og=(0,de.A)(function*(c,n,i){if(c.q_.set("Online"),n instanceof an&&2===n.state&&n.cause)try{yield(s=(0,de.A)(function*(h,y){const D=y.cause;for(const x of y.targetIds)h.N_.has(x)&&(yield h.remoteSyncer.rejectListen(x,D),h.N_.delete(x),h.Q_.removeTarget(x))}),function u(h,y){return s.apply(this,arguments)})(c,n)}catch(s){Qe("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),s),yield Zh(c,s)}else if(n instanceof wr?c.Q_.Ke(n):n instanceof Si?c.Q_.He(n):c.Q_.We(n),!i.isEqual(Ct.min()))try{const s=yield cl(c.localStore);i.compareTo(s)>=0&&(yield function(h,y){const D=h.Q_.rt(y);return D.targetChanges.forEach((x,B)=>{if(x.resumeToken.approximateByteSize()>0){const G=h.N_.get(B);G&&h.N_.set(B,G.withResumeToken(x.resumeToken,y))}}),D.targetMismatches.forEach((x,B)=>{const G=h.N_.get(x);if(!G)return;h.N_.set(x,G.withResumeToken(Zn.EMPTY_BYTE_STRING,G.snapshotVersion)),t_(h,x);const te=new Ra(G.target,x,B,G.sequenceNumber);Pi(h,te)}),h.remoteSyncer.applyRemoteEvent(D)}(c,i))}catch(s){Qe("RemoteStore","Failed to raise snapshot:",s),yield Zh(c,s)}var s}),og.apply(this,arguments)}function Zh(c,n,i){return Jh.apply(this,arguments)}function Jh(){return(Jh=(0,de.A)(function*(c,n,i){if(!re(n))throw n;c.L_.add(1),yield Su(c),c.q_.set("Offline"),i||(i=()=>cl(c.localStore)),c.asyncQueue.enqueueRetryable((0,de.A)(function*(){Qe("RemoteStore","Retrying IndexedDB access"),yield i(),c.L_.delete(1),yield Oa(c)}))})).apply(this,arguments)}function r_(c,n){return n().catch(i=>Zh(c,i,n))}function Ru(c){return sg.apply(this,arguments)}function sg(){return(sg=(0,de.A)(function*(c){const n=ce(c),i=Qc(n);let s=n.O_.length>0?n.O_[n.O_.length-1].batchId:-1;for(;Lv(n);)try{const u=yield md(n.localStore,s);if(null===u){0===n.O_.length&&i.o_();break}s=u.batchId,V0(n,u)}catch(u){yield Zh(n,u)}ag(n)&&cg(n)})).apply(this,arguments)}function Lv(c){return Kc(c)&&c.O_.length<10}function V0(c,n){c.O_.push(n);const i=Qc(c);i.r_()&&i.V_&&i.m_(n.mutations)}function ag(c){return Kc(c)&&!Qc(c).n_()&&c.O_.length>0}function cg(c){Qc(c).start()}function Ko(c){return i_.apply(this,arguments)}function i_(){return(i_=(0,de.A)(function*(c){Qc(c).p_()})).apply(this,arguments)}function Uv(c){return o_.apply(this,arguments)}function o_(){return(o_=(0,de.A)(function*(c){const n=Qc(c);for(const i of c.O_)n.m_(i.mutations)})).apply(this,arguments)}function s_(c,n,i){return a_.apply(this,arguments)}function a_(){return(a_=(0,de.A)(function*(c,n,i){const s=c.O_.shift(),u=Re.from(s,n,i);yield r_(c,()=>c.remoteSyncer.applySuccessfulWrite(u)),yield Ru(c)})).apply(this,arguments)}function ug(c,n){return ef.apply(this,arguments)}function ef(){return ef=(0,de.A)(function*(c,n){var i;n&&Qc(c).V_&&(yield(i=(0,de.A)(function*(u,h){if(function Vn(c){switch(c){default:return yt();case W.CANCELLED:case W.UNKNOWN:case W.DEADLINE_EXCEEDED:case W.RESOURCE_EXHAUSTED:case W.INTERNAL:case W.UNAVAILABLE:case W.UNAUTHENTICATED:return!1;case W.INVALID_ARGUMENT:case W.NOT_FOUND:case W.ALREADY_EXISTS:case W.PERMISSION_DENIED:case W.FAILED_PRECONDITION:case W.ABORTED:case W.OUT_OF_RANGE:case W.UNIMPLEMENTED:case W.DATA_LOSS:return!0}}(D=h.code)&&D!==W.ABORTED){const y=u.O_.shift();Qc(u).s_(),yield r_(u,()=>u.remoteSyncer.rejectFailedWrite(y.batchId,h)),yield Ru(u)}var D}),function s(u,h){return i.apply(this,arguments)})(c,n)),ag(c)&&cg(c)}),ef.apply(this,arguments)}function ml(c,n){return lg.apply(this,arguments)}function lg(){return(lg=(0,de.A)(function*(c,n){const i=ce(c);i.asyncQueue.verifyOperationInProgress(),Qe("RemoteStore","RemoteStore received new credentials");const s=Kc(i);i.L_.add(3),yield Su(i),s&&i.q_.set("Unknown"),yield i.remoteSyncer.handleCredentialChange(n),i.L_.delete(3),yield Oa(i)})).apply(this,arguments)}function dg(c,n){return bc.apply(this,arguments)}function bc(){return(bc=(0,de.A)(function*(c,n){const i=ce(c);n?(i.L_.delete(2),yield Oa(i)):n||(i.L_.add(2),yield Su(i),i.q_.set("Unknown"))})).apply(this,arguments)}function Cd(c){return c.K_||(c.K_=function(i,s,u){const h=ce(i);return h.w_(),new pl(s,h.connection,h.authCredentials,h.appCheckCredentials,h.serializer,u)}(c.datastore,c.asyncQueue,{Eo:Qh.bind(null,c),Ro:n_.bind(null,c),mo:Xh.bind(null,c),d_:Vv.bind(null,c)}),c.B_.push(function(){var n=(0,de.A)(function*(i){i?(c.K_.s_(),Id(c)?Kh(c):c.q_.set("Unknown")):(yield c.K_.stop(),rg(c))});return function(i){return n.apply(this,arguments)}}())),c.K_}function Qc(c){return c.U_||(c.U_=function(i,s,u){const h=ce(i);return h.w_(),new yd(s,h.connection,h.authCredentials,h.appCheckCredentials,h.serializer,u)}(c.datastore,c.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Ko.bind(null,c),mo:ug.bind(null,c),f_:Uv.bind(null,c),g_:s_.bind(null,c)}),c.B_.push(function(){var n=(0,de.A)(function*(i){i?(c.U_.s_(),yield Ru(c)):(yield c.U_.stop(),c.O_.length>0&&(Qe("RemoteStore",`Stopping write stream with ${c.O_.length} pending writes`),c.O_=[]))});return function(i){return n.apply(this,arguments)}}())),c.U_}class ua{constructor(n,i,s,u,h){this.asyncQueue=n,this.timerId=i,this.targetTimeMs=s,this.op=u,this.removalCallback=h,this.deferred=new ye,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(y=>{})}get promise(){return this.deferred.promise}static createAndSchedule(n,i,s,u,h){const y=Date.now()+s,D=new ua(n,i,y,u,h);return D.start(s),D}start(n){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),n)}skipDelay(){return this.handleDelayElapsed()}cancel(n){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new K(W.CANCELLED,"Operation cancelled"+(n?": "+n:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(n=>this.deferred.resolve(n))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ac(c,n){if(pn("AsyncQueue",`${n}: ${c}`),re(c))return new K(W.UNAVAILABLE,`${n}: ${c}`);throw c}class Mu{constructor(n){this.comparator=n?(i,s)=>n(i,s)||lt.comparator(i.key,s.key):(i,s)=>lt.comparator(i.key,s.key),this.keyedMap=ji(),this.sortedSet=new Kn(this.comparator)}static emptySet(n){return new Mu(n.comparator)}has(n){return null!=this.keyedMap.get(n)}get(n){return this.keyedMap.get(n)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(n){const i=this.keyedMap.get(n);return i?this.sortedSet.indexOf(i):-1}get size(){return this.sortedSet.size}forEach(n){this.sortedSet.inorderTraversal((i,s)=>(n(i),!1))}add(n){const i=this.delete(n.key);return i.copy(i.keyedMap.insert(n.key,n),i.sortedSet.insert(n,null))}delete(n){const i=this.get(n);return i?this.copy(this.keyedMap.remove(n),this.sortedSet.remove(i)):this}isEqual(n){if(!(n instanceof Mu)||this.size!==n.size)return!1;const i=this.sortedSet.getIterator(),s=n.sortedSet.getIterator();for(;i.hasNext();){const u=i.getNext().key,h=s.getNext().key;if(!u.isEqual(h))return!1}return!0}toString(){const n=[];return this.forEach(i=>{n.push(i.toString())}),0===n.length?"DocumentSet ()":"DocumentSet (\n  "+n.join("  \n")+"\n)"}copy(n,i){const s=new Mu;return s.comparator=this.comparator,s.keyedMap=n,s.sortedSet=i,s}}class hg{constructor(){this.W_=new Kn(lt.comparator)}track(n){const i=n.doc.key,s=this.W_.get(i);s?0!==n.type&&3===s.type?this.W_=this.W_.insert(i,n):3===n.type&&1!==s.type?this.W_=this.W_.insert(i,{type:s.type,doc:n.doc}):2===n.type&&2===s.type?this.W_=this.W_.insert(i,{type:2,doc:n.doc}):2===n.type&&0===s.type?this.W_=this.W_.insert(i,{type:0,doc:n.doc}):1===n.type&&0===s.type?this.W_=this.W_.remove(i):1===n.type&&2===s.type?this.W_=this.W_.insert(i,{type:1,doc:s.doc}):0===n.type&&1===s.type?this.W_=this.W_.insert(i,{type:2,doc:n.doc}):yt():this.W_=this.W_.insert(i,n)}G_(){const n=[];return this.W_.inorderTraversal((i,s)=>{n.push(s)}),n}}class wd{constructor(n,i,s,u,h,y,D,x,B){this.query=n,this.docs=i,this.oldDocs=s,this.docChanges=u,this.mutatedKeys=h,this.fromCache=y,this.syncStateChanged=D,this.excludesMetadataChanges=x,this.hasCachedResults=B}static fromInitialDocuments(n,i,s,u,h){const y=[];return i.forEach(D=>{y.push({type:0,doc:D})}),new wd(n,i,Mu.emptySet(i),y,s,u,!0,!1,h)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(n){if(!(this.fromCache===n.fromCache&&this.hasCachedResults===n.hasCachedResults&&this.syncStateChanged===n.syncStateChanged&&this.mutatedKeys.isEqual(n.mutatedKeys)&&fo(this.query,n.query)&&this.docs.isEqual(n.docs)&&this.oldDocs.isEqual(n.oldDocs)))return!1;const i=this.docChanges,s=n.docChanges;if(i.length!==s.length)return!1;for(let u=0;u<i.length;u++)if(i[u].type!==s[u].type||!i[u].doc.isEqual(s[u].doc))return!1;return!0}}class fg{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(n=>n.J_())}}class tf{constructor(){this.queries=c_(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(i,s){const u=ce(i),h=u.queries;u.queries=c_(),h.forEach((y,D)=>{for(const x of D.j_)x.onError(s)})}(this,new K(W.ABORTED,"Firestore shutting down"))}}function c_(){return new Jn(c=>ls(c),fo)}function Xr(c,n){return pg.apply(this,arguments)}function pg(){return(pg=(0,de.A)(function*(c,n){const i=ce(c);let s=3;const u=n.query;let h=i.queries.get(u);h?!h.H_()&&n.J_()&&(s=2):(h=new fg,s=n.J_()?0:1);try{switch(s){case 0:h.z_=yield i.onListen(u,!0);break;case 1:h.z_=yield i.onListen(u,!1);break;case 2:yield i.onFirstRemoteStoreListen(u)}}catch(y){const D=Ac(y,`Initialization of query '${yi(n.query)}' failed`);return void n.onError(D)}i.queries.set(u,h),h.j_.push(n),n.Z_(i.onlineState),h.z_&&n.X_(h.z_)&&nf(i)})).apply(this,arguments)}function Td(c,n){return gg.apply(this,arguments)}function gg(){return(gg=(0,de.A)(function*(c,n){const i=ce(c),s=n.query;let u=3;const h=i.queries.get(s);if(h){const y=h.j_.indexOf(n);y>=0&&(h.j_.splice(y,1),0===h.j_.length?u=n.J_()?0:1:!h.H_()&&n.J_()&&(u=2))}switch(u){case 0:return i.queries.delete(s),i.onUnlisten(s,!0);case 1:return i.queries.delete(s),i.onUnlisten(s,!1);case 2:return i.onLastRemoteStoreUnlisten(s);default:return}})).apply(this,arguments)}function jv(c,n){const i=ce(c);let s=!1;for(const u of n){const y=i.queries.get(u.query);if(y){for(const D of y.j_)D.X_(u)&&(s=!0);y.z_=u}}s&&nf(i)}function mg(c,n,i){const s=ce(c),u=s.queries.get(n);if(u)for(const h of u.j_)h.onError(i);s.queries.delete(n)}function nf(c){c.Y_.forEach(n=>{n.next()})}var rf,sf;(sf=rf||(rf={})).ea="default",sf.Cache="cache";class _g{constructor(n,i,s){this.query=n,this.ta=i,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=s||{}}X_(n){if(!this.options.includeMetadataChanges){const s=[];for(const u of n.docChanges)3!==u.type&&s.push(u);n=new wd(n.query,n.docs,n.oldDocs,s,n.mutatedKeys,n.fromCache,n.syncStateChanged,!0,n.hasCachedResults)}let i=!1;return this.na?this.ia(n)&&(this.ta.next(n),i=!0):this.sa(n,this.onlineState)&&(this.oa(n),i=!0),this.ra=n,i}onError(n){this.ta.error(n)}Z_(n){this.onlineState=n;let i=!1;return this.ra&&!this.na&&this.sa(this.ra,n)&&(this.oa(this.ra),i=!0),i}sa(n,i){return!n.fromCache||!this.J_()||(!this.options._a||!("Offline"!==i))&&(!n.docs.isEmpty()||n.hasCachedResults||"Offline"===i)}ia(n){return n.docChanges.length>0||!!(n.syncStateChanged||this.ra&&this.ra.hasPendingWrites!==n.hasPendingWrites)&&!0===this.options.includeMetadataChanges}oa(n){n=wd.fromInitialDocuments(n.query,n.docs,n.mutatedKeys,n.fromCache,n.hasCachedResults),this.na=!0,this.ta.next(n)}J_(){return this.options.source!==rf.Cache}}class u_{constructor(n){this.key=n}}class vg{constructor(n){this.key=n}}class Hv{constructor(n,i){this.query=n,this.Ta=i,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=bn(),this.mutatedKeys=bn(),this.Aa=ta(n),this.Ra=new Mu(this.Aa)}get Va(){return this.Ta}ma(n,i){const s=i?i.fa:new hg,u=i?i.Ra:this.Ra;let h=i?i.mutatedKeys:this.mutatedKeys,y=u,D=!1;const x="F"===this.query.limitType&&u.size===this.query.limit?u.last():null,B="L"===this.query.limitType&&u.size===this.query.limit?u.first():null;if(n.inorderTraversal((G,te)=>{const pe=u.get(G),Ve=Ui(this.query,te)?te:null,tt=!!pe&&this.mutatedKeys.has(pe.key),gt=!!Ve&&(Ve.hasLocalMutations||this.mutatedKeys.has(Ve.key)&&Ve.hasCommittedMutations);let ht=!1;pe&&Ve?pe.data.isEqual(Ve.data)?tt!==gt&&(s.track({type:3,doc:Ve}),ht=!0):this.ga(pe,Ve)||(s.track({type:2,doc:Ve}),ht=!0,(x&&this.Aa(Ve,x)>0||B&&this.Aa(Ve,B)<0)&&(D=!0)):!pe&&Ve?(s.track({type:0,doc:Ve}),ht=!0):pe&&!Ve&&(s.track({type:1,doc:pe}),ht=!0,(x||B)&&(D=!0)),ht&&(Ve?(y=y.add(Ve),h=gt?h.add(G):h.delete(G)):(y=y.delete(G),h=h.delete(G)))}),null!==this.query.limit)for(;y.size>this.query.limit;){const G="F"===this.query.limitType?y.last():y.first();y=y.delete(G.key),h=h.delete(G.key),s.track({type:1,doc:G})}return{Ra:y,fa:s,ns:D,mutatedKeys:h}}ga(n,i){return n.hasLocalMutations&&i.hasCommittedMutations&&!i.hasLocalMutations}applyChanges(n,i,s,u){const h=this.Ra;this.Ra=n.Ra,this.mutatedKeys=n.mutatedKeys;const y=n.fa.G_();y.sort((G,te)=>function(Ve,tt){const gt=ht=>{switch(ht){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return yt()}};return gt(Ve)-gt(tt)}(G.type,te.type)||this.Aa(G.doc,te.doc)),this.pa(s),u=null!=u&&u;const D=i&&!u?this.ya():[],x=0===this.da.size&&this.current&&!u?1:0,B=x!==this.Ea;return this.Ea=x,0!==y.length||B?{snapshot:new wd(this.query,n.Ra,h,y,n.mutatedKeys,0===x,B,!1,!!s&&s.resumeToken.approximateByteSize()>0),wa:D}:{wa:D}}Z_(n){return this.current&&"Offline"===n?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new hg,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(n){return!this.Ta.has(n)&&!!this.Ra.has(n)&&!this.Ra.get(n).hasLocalMutations}pa(n){n&&(n.addedDocuments.forEach(i=>this.Ta=this.Ta.add(i)),n.modifiedDocuments.forEach(i=>{}),n.removedDocuments.forEach(i=>this.Ta=this.Ta.delete(i)),this.current=n.current)}ya(){if(!this.current)return[];const n=this.da;this.da=bn(),this.Ra.forEach(s=>{this.Sa(s.key)&&(this.da=this.da.add(s.key))});const i=[];return n.forEach(s=>{this.da.has(s)||i.push(new vg(s))}),this.da.forEach(s=>{n.has(s)||i.push(new u_(s))}),i}ba(n){this.Ta=n.Ts,this.da=bn();const i=this.ma(n.documents);return this.applyChanges(i,!0)}Da(){return wd.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class L0{constructor(n,i,s){this.query=n,this.targetId=i,this.view=s}}class U0{constructor(n){this.key=n,this.va=!1}}class j0{constructor(n,i,s,u,h,y){this.localStore=n,this.remoteStore=i,this.eventManager=s,this.sharedClientState=u,this.currentUser=h,this.maxConcurrentLimboResolutions=y,this.Ca={},this.Fa=new Jn(D=>ls(D),fo),this.Ma=new Map,this.xa=new Set,this.Oa=new Kn(lt.comparator),this.Na=new Map,this.La=new Cu,this.Ba={},this.ka=new Map,this.qa=He.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}function B0(c,n){return Ig.apply(this,arguments)}function Ig(){return(Ig=(0,de.A)(function*(c,n,i=!0){const s=Rd(c);let u;const h=s.Fa.get(n);return h?(s.sharedClientState.addLocalQueryTarget(h.targetId),u=h.view.Da()):u=yield Eg(s,n,i,!0),u})).apply(this,arguments)}function _l(c,n){return Pu.apply(this,arguments)}function Pu(){return(Pu=(0,de.A)(function*(c,n){const i=Rd(c);yield Eg(i,n,!0,!1)})).apply(this,arguments)}function Eg(c,n,i,s){return Cg.apply(this,arguments)}function Cg(){return(Cg=(0,de.A)(function*(c,n,i,s){const u=yield function ca(c,n){const i=ce(c);return i.persistence.runTransaction("Allocate target","readwrite",s=>{let u;return i.Ur.getTargetData(s,n).next(h=>h?(u=h,Z.resolve(u)):i.Ur.allocateTargetId(s).next(y=>(u=new Ra(n,y,"TargetPurposeListen",s.currentSequenceNumber),i.Ur.addTargetData(s,u).next(()=>u))))}).then(s=>{const u=i.os.get(s.targetId);return(null===u||s.snapshotVersion.compareTo(u.snapshotVersion)>0)&&(i.os=i.os.insert(s.targetId,s),i._s.set(n,s.targetId)),s})}(c.localStore,Wr(n)),h=u.targetId,y=c.sharedClientState.addLocalQueryTarget(h,i);let D;return s&&(D=yield function Dd(c,n,i,s,u){return xu.apply(this,arguments)}(c,n,h,"current"===y,u.resumeToken)),c.isPrimaryClient&&i&&Dc(c.remoteStore,u),D})).apply(this,arguments)}function xu(){return xu=(0,de.A)(function*(c,n,i,s,u){c.Ka=(te,pe,Ve)=>{return(tt=(0,de.A)(function*(ht,zt,tn,Kt){let kn=zt.view.ma(tn);kn.ns&&(kn=yield Ja(ht.localStore,zt.query,!1).then(({documents:ue})=>zt.view.ma(ue,kn)));const Dr=Kt&&Kt.targetChanges.get(zt.targetId),Yn=Kt&&null!=Kt.targetMismatches.get(zt.targetId),we=zt.view.applyChanges(kn,ht.isPrimaryClient,Dr,Yn);return lf(ht,zt.targetId,we.wa),we.snapshot}),function gt(ht,zt,tn,Kt){return tt.apply(this,arguments)})(c,te,pe,Ve);var tt};const h=yield Ja(c.localStore,n,!0),y=new Hv(n,h.Ts),D=y.ma(h.documents),x=$n.createSynthesizedTargetChangeForCurrentChange(i,s&&"Offline"!==c.onlineState,u),B=y.applyChanges(D,c.isPrimaryClient,x);lf(c,i,B.wa);const G=new L0(n,i,y);return c.Fa.set(n,G),c.Ma.has(i)?c.Ma.get(i).push(n):c.Ma.set(i,[n]),B.snapshot}),xu.apply(this,arguments)}function zv(c,n,i){return bd.apply(this,arguments)}function bd(){return(bd=(0,de.A)(function*(c,n,i){const s=ce(c),u=s.Fa.get(n),h=s.Ma.get(u.targetId);if(h.length>1)return s.Ma.set(u.targetId,h.filter(y=>!fo(y,n))),void s.Fa.delete(n);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(u.targetId),s.sharedClientState.isActiveQueryTarget(u.targetId)||(yield Tc(s.localStore,u.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(u.targetId),i&&ka(s.remoteStore,u.targetId),xi(s,u.targetId)}).catch(Hr))):(xi(s,u.targetId),yield Tc(s.localStore,u.targetId,!0))})).apply(this,arguments)}function l_(c,n){return Nu.apply(this,arguments)}function Nu(){return(Nu=(0,de.A)(function*(c,n){const i=ce(c),s=i.Fa.get(n),u=i.Ma.get(s.targetId);i.isPrimaryClient&&1===u.length&&(i.sharedClientState.removeLocalQueryTarget(s.targetId),ka(i.remoteStore,s.targetId))})).apply(this,arguments)}function af(){return(af=(0,de.A)(function*(c,n,i){const s=function E_(c){const n=ce(c);return n.remoteStore.remoteSyncer.applySuccessfulWrite=Tg.bind(null,n),n.remoteStore.remoteSyncer.rejectFailedWrite=Ss.bind(null,n),n}(c);try{const u=yield function(y,D){const x=ce(y),B=Rn.now(),G=D.reduce((Ve,tt)=>Ve.add(tt.key),bn());let te,pe;return x.persistence.runTransaction("Locally write mutations","readwrite",Ve=>{let tt=Mr(),gt=bn();return x.cs.getEntries(Ve,G).next(ht=>{tt=ht,tt.forEach((zt,tn)=>{tn.isValidDocument()||(gt=gt.add(zt))})}).next(()=>x.localDocuments.getOverlayedDocuments(Ve,tt)).next(ht=>{te=ht;const zt=[];for(const tn of D){const Kt=N(tn,te.get(tn.key).overlayedDocument);null!=Kt&&zt.push(new S(tn.key,Kt,lo(Kt.value.mapValue),dr.exists(!0)))}return x.mutationQueue.addMutationBatch(Ve,B,zt,D)}).next(ht=>{pe=ht;const zt=ht.applyToLocalDocumentSet(te,gt);return x.documentOverlayCache.saveOverlays(Ve,ht.batchId,zt)})}).then(()=>({batchId:pe.batchId,changes:Ia(te)}))}(s.localStore,n);s.sharedClientState.addPendingMutation(u.batchId),function(y,D,x){let B=y.Ba[y.currentUser.toKey()];B||(B=new Kn(Nt)),B=B.insert(D,x),y.Ba[y.currentUser.toKey()]=B}(s,u.batchId,i),yield nc(s,u.changes),yield Ru(s.remoteStore)}catch(u){const h=Ac(u,"Failed to persist write");i.reject(h)}})).apply(this,arguments)}function cf(c,n){return wg.apply(this,arguments)}function wg(){return(wg=(0,de.A)(function*(c,n){const i=ce(c);try{const s=yield function gd(c,n){const i=ce(c),s=n.snapshotVersion;let u=i.os;return i.persistence.runTransaction("Apply remote event","readwrite-primary",h=>{const y=i.cs.newChangeBuffer({trackRemovals:!0});u=i.os;const D=[];n.targetChanges.forEach((G,te)=>{const pe=u.get(te);if(!pe)return;D.push(i.Ur.removeMatchingKeys(h,G.removedDocuments,te).next(()=>i.Ur.addMatchingKeys(h,G.addedDocuments,te)));let Ve=pe.withSequenceNumber(h.currentSequenceNumber);var gt,ht,zt;null!==n.targetMismatches.get(te)?Ve=Ve.withResumeToken(Zn.EMPTY_BYTE_STRING,Ct.min()).withLastLimboFreeSnapshotVersion(Ct.min()):G.resumeToken.approximateByteSize()>0&&(Ve=Ve.withResumeToken(G.resumeToken,s)),u=u.insert(te,Ve),ht=Ve,zt=G,(0===(gt=pe).resumeToken.approximateByteSize()||ht.snapshotVersion.toMicroseconds()-gt.snapshotVersion.toMicroseconds()>=3e8||zt.addedDocuments.size+zt.modifiedDocuments.size+zt.removedDocuments.size>0)&&D.push(i.Ur.updateTargetData(h,Ve))});let x=Mr(),B=bn();if(n.documentUpdates.forEach(G=>{n.resolvedLimboDocuments.has(G)&&D.push(i.persistence.referenceDelegate.updateLimboDocument(h,G))}),D.push(function Wc(c,n,i){let s=bn(),u=bn();return i.forEach(h=>s=s.add(h)),n.getEntries(c,s).next(h=>{let y=Mr();return i.forEach((D,x)=>{const B=h.get(D);x.isFoundDocument()!==B.isFoundDocument()&&(u=u.add(D)),x.isNoDocument()&&x.version.isEqual(Ct.min())?(n.removeEntry(D,x.readTime),y=y.insert(D,x)):!B.isValidDocument()||x.version.compareTo(B.version)>0||0===x.version.compareTo(B.version)&&B.hasPendingWrites?(n.addEntry(x),y=y.insert(D,x)):Qe("LocalStore","Ignoring outdated watch update for ",D,". Current version:",B.version," Watch version:",x.version)}),{Ps:y,Is:u}})}(h,y,n.documentUpdates).next(G=>{x=G.Ps,B=G.Is})),!s.isEqual(Ct.min())){const G=i.Ur.getLastRemoteSnapshotVersion(h).next(te=>i.Ur.setTargetsMetadata(h,h.currentSequenceNumber,s));D.push(G)}return Z.waitFor(D).next(()=>y.apply(h)).next(()=>i.localDocuments.getLocalViewOfDocuments(h,x,B)).next(()=>x)}).then(h=>(i.os=u,h))}(i.localStore,n);n.targetChanges.forEach((u,h)=>{const y=i.Na.get(h);y&&(Dt(u.addedDocuments.size+u.modifiedDocuments.size+u.removedDocuments.size<=1),u.addedDocuments.size>0?y.va=!0:u.modifiedDocuments.size>0?Dt(y.va):u.removedDocuments.size>0&&(Dt(y.va),y.va=!1))}),yield nc(i,s,n)}catch(s){yield Hr(s)}})).apply(this,arguments)}function d_(c,n,i){const s=ce(c);if(s.isPrimaryClient&&0===i||!s.isPrimaryClient&&1===i){const u=[];s.Fa.forEach((h,y)=>{const D=y.view.Z_(n);D.snapshot&&u.push(D.snapshot)}),function(y,D){const x=ce(y);x.onlineState=D;let B=!1;x.queries.forEach((G,te)=>{for(const pe of te.j_)pe.Z_(D)&&(B=!0)}),B&&nf(x)}(s.eventManager,n),u.length&&s.Ca.d_(u),s.onlineState=n,s.isPrimaryClient&&s.sharedClientState.setOnlineState(n)}}function Gv(c,n,i){return uf.apply(this,arguments)}function uf(){return(uf=(0,de.A)(function*(c,n,i){const s=ce(c);s.sharedClientState.updateQueryState(n,"rejected",i);const u=s.Na.get(n),h=u&&u.key;if(h){let y=new Kn(lt.comparator);y=y.insert(h,rr.newNoDocument(h,Ct.min()));const D=bn().add(h),x=new vi(Ct.min(),new Map,new Kn(Nt),y,D);yield cf(s,x),s.Oa=s.Oa.remove(h),s.Na.delete(n),bg(s)}else yield Tc(s.localStore,n,!1).then(()=>xi(s,n,i)).catch(Hr)})).apply(this,arguments)}function Tg(c,n){return Dg.apply(this,arguments)}function Dg(){return(Dg=(0,de.A)(function*(c,n){const i=ce(c),s=n.batch.batchId;try{const u=yield function bu(c,n){const i=ce(c);return i.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const u=n.batch.keys(),h=i.cs.newChangeBuffer({trackRemovals:!0});return function(D,x,B,G){const te=B.batch,pe=te.keys();let Ve=Z.resolve();return pe.forEach(tt=>{Ve=Ve.next(()=>G.getEntry(x,tt)).next(gt=>{const ht=B.docVersions.get(tt);Dt(null!==ht),gt.version.compareTo(ht)<0&&(te.applyToRemoteDocument(gt,B),gt.isValidDocument()&&(gt.setReadTime(B.commitVersion),G.addEntry(gt)))})}),Ve.next(()=>D.mutationQueue.removeMutationBatch(x,te))}(i,s,n,h).next(()=>h.apply(s)).next(()=>i.mutationQueue.performConsistencyCheck(s)).next(()=>i.documentOverlayCache.removeOverlaysForBatchId(s,u,n.batch.batchId)).next(()=>i.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(D){let x=bn();for(let B=0;B<D.mutationResults.length;++B)D.mutationResults[B].transformResults.length>0&&(x=x.add(D.batch.mutations[B].key));return x}(n))).next(()=>i.localDocuments.getDocuments(s,u))})}(i.localStore,n);p_(i,s,null),f_(i,s),i.sharedClientState.updateMutationState(s,"acknowledged"),yield nc(i,u)}catch(u){yield Hr(u)}})).apply(this,arguments)}function Ss(c,n,i){return Sd.apply(this,arguments)}function Sd(){return(Sd=(0,de.A)(function*(c,n,i){const s=ce(c);try{const u=yield function(y,D){const x=ce(y);return x.persistence.runTransaction("Reject batch","readwrite-primary",B=>{let G;return x.mutationQueue.lookupMutationBatch(B,D).next(te=>(Dt(null!==te),G=te.keys(),x.mutationQueue.removeMutationBatch(B,te))).next(()=>x.mutationQueue.performConsistencyCheck(B)).next(()=>x.documentOverlayCache.removeOverlaysForBatchId(B,G,D)).next(()=>x.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(B,G)).next(()=>x.localDocuments.getDocuments(B,G))})}(s.localStore,n);p_(s,n,i),f_(s,n),s.sharedClientState.updateMutationState(n,"rejected",i),yield nc(s,u)}catch(u){yield Hr(u)}})).apply(this,arguments)}function f_(c,n){(c.ka.get(n)||[]).forEach(i=>{i.resolve()}),c.ka.delete(n)}function p_(c,n,i){const s=ce(c);let u=s.Ba[s.currentUser.toKey()];if(u){const h=u.get(n);h&&(i?h.reject(i):h.resolve(),u=u.remove(n)),s.Ba[s.currentUser.toKey()]=u}}function xi(c,n,i=null){c.sharedClientState.removeLocalQueryTarget(n);for(const s of c.Ma.get(n))c.Fa.delete(s),i&&c.Ca.$a(s,i);c.Ma.delete(n),c.isPrimaryClient&&c.La.gr(n).forEach(s=>{c.La.containsKey(s)||Ou(c,s)})}function Ou(c,n){c.xa.delete(n.path.canonicalString());const i=c.Oa.get(n);null!==i&&(ka(c.remoteStore,i),c.Oa=c.Oa.remove(n),c.Na.delete(i),bg(c))}function lf(c,n,i){for(const s of i)s instanceof u_?(c.La.addReference(s.key,n),g_(c,s)):s instanceof vg?(Qe("SyncEngine","Document no longer in limbo: "+s.key),c.La.removeReference(s.key,n),c.La.containsKey(s.key)||Ou(c,s.key)):yt()}function g_(c,n){const i=n.key,s=i.path.canonicalString();c.Oa.get(i)||c.xa.has(s)||(Qe("SyncEngine","New document in limbo: "+i),c.xa.add(s),bg(c))}function bg(c){for(;c.xa.size>0&&c.Oa.size<c.maxConcurrentLimboResolutions;){const n=c.xa.values().next().value;c.xa.delete(n);const i=new lt(Yt.fromString(n)),s=c.qa.next();c.Na.set(s,new U0(i)),c.Oa=c.Oa.insert(i,s),Dc(c.remoteStore,new Ra(Wr(vs(i.path)),s,"TargetPurposeLimboResolution",Nn.oe))}}function nc(c,n,i){return Ag.apply(this,arguments)}function Ag(){return Ag=(0,de.A)(function*(c,n,i){const s=ce(c),u=[],h=[],y=[];var D;s.Fa.isEmpty()||(s.Fa.forEach((D,x)=>{y.push(s.Ka(x,n,i).then(B=>{var G;if((B||i)&&s.isPrimaryClient){const te=B?!B.fromCache:null===(G=i?.targetChanges.get(x.targetId))||void 0===G?void 0:G.current;s.sharedClientState.updateQueryState(x.targetId,te?"current":"not-current")}if(B){u.push(B);const te=ol.Wi(x.targetId,B);h.push(te)}}))}),yield Promise.all(y),s.Ca.d_(u),yield(D=(0,de.A)(function*(B,G){const te=ce(B);try{yield te.persistence.runTransaction("notifyLocalViewChanges","readwrite",pe=>Z.forEach(G,Ve=>Z.forEach(Ve.$i,tt=>te.persistence.referenceDelegate.addReference(pe,Ve.targetId,tt)).next(()=>Z.forEach(Ve.Ui,tt=>te.persistence.referenceDelegate.removeReference(pe,Ve.targetId,tt)))))}catch(pe){if(!re(pe))throw pe;Qe("LocalStore","Failed to update sequence numbers: "+pe)}for(const pe of G){const Ve=pe.targetId;if(!pe.fromCache){const tt=te.os.get(Ve),ht=tt.withLastLimboFreeSnapshotVersion(tt.snapshotVersion);te.os=te.os.insert(Ve,ht)}}}),function x(B,G){return D.apply(this,arguments)})(s.localStore,h))}),Ag.apply(this,arguments)}function m_(c,n){return Sg.apply(this,arguments)}function Sg(){return(Sg=(0,de.A)(function*(c,n){const i=ce(c);if(!i.currentUser.isEqual(n)){Qe("SyncEngine","User change. New user:",n.toKey());const s=yield Gs(i.localStore,n);i.currentUser=n,(h=i).ka.forEach(D=>{D.forEach(x=>{x.reject(new K(W.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),h.ka.clear(),i.sharedClientState.handleUserChange(n,s.removedBatchIds,s.addedBatchIds),yield nc(i,s.hs)}var h})).apply(this,arguments)}function __(c,n){const i=ce(c),s=i.Na.get(n);if(s&&s.va)return bn().add(s.key);{let u=bn();const h=i.Ma.get(n);if(!h)return u;for(const y of h){const D=i.Fa.get(y);u=u.unionWith(D.view.Va)}return u}}function Rd(c){const n=ce(c);return n.remoteStore.remoteSyncer.applyRemoteEvent=cf.bind(null,n),n.remoteStore.remoteSyncer.getRemoteKeysForTarget=__.bind(null,n),n.remoteStore.remoteSyncer.rejectListen=Gv.bind(null,n),n.Ca.d_=jv.bind(null,n.eventManager),n.Ca.$a=mg.bind(null,n.eventManager),n}let Il=(()=>{class c{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(i){var s=this;return(0,de.A)(function*(){s.serializer=Na(i.databaseInfo.databaseId),s.sharedClientState=s.Wa(i),s.persistence=s.Ga(i),yield s.persistence.start(),s.localStore=s.za(i),s.gcScheduler=s.ja(i,s.localStore),s.indexBackfillerScheduler=s.Ha(i,s.localStore)})()}ja(i,s){return null}Ha(i,s){return null}za(i){return function Gc(c,n,i,s){return new sl(c,n,i,s)}(this.persistence,new pd,i.initialUser,this.serializer)}Ga(i){return new rl(Tu.Zr,this.serializer)}Wa(i){return new et}terminate(){var i=this;return(0,de.A)(function*(){var s,u;null===(s=i.gcScheduler)||void 0===s||s.stop(),null===(u=i.indexBackfillerScheduler)||void 0===u||u.stop(),i.sharedClientState.shutdown(),yield i.persistence.shutdown()})()}}return c.provider={build:()=>new c},c})(),ku=(()=>{class c{initialize(i,s){var u=this;return(0,de.A)(function*(){u.localStore||(u.localStore=i.localStore,u.sharedClientState=i.sharedClientState,u.datastore=u.createDatastore(s),u.remoteStore=u.createRemoteStore(s),u.eventManager=u.createEventManager(s),u.syncEngine=u.createSyncEngine(s,!i.synchronizeTabs),u.sharedClientState.onlineStateHandler=h=>d_(u.syncEngine,h,1),u.remoteStore.remoteSyncer.handleCredentialChange=m_.bind(null,u.syncEngine),yield dg(u.remoteStore,u.syncEngine.isPrimaryClient))})()}createEventManager(i){return new tf}createDatastore(i){const s=Na(i.databaseInfo.databaseId),u=new Au(i.databaseInfo);return new Wh(i.authCredentials,i.appCheckCredentials,u,s)}createRemoteStore(i){return u=this.localStore,h=this.datastore,y=i.asyncQueue,D=s=>d_(this.syncEngine,s,0),x=In.D()?new In:new Ht,new gl(u,h,y,D,x);var u,h,y,D,x}createSyncEngine(i,s){return function(h,y,D,x,B,G,te){const pe=new j0(h,y,D,x,B,G);return te&&(pe.Qa=!0),pe}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,i.initialUser,i.maxConcurrentLimboResolutions,s)}terminate(){var i=this;return(0,de.A)(function*(){var s,u,h;yield(h=(0,de.A)(function*(D){const x=ce(D);Qe("RemoteStore","RemoteStore shutting down."),x.L_.add(5),yield Su(x),x.k_.shutdown(),x.q_.set("Unknown")}),function y(D){return h.apply(this,arguments)})(i.remoteStore),null===(s=i.datastore)||void 0===s||s.terminate(),null===(u=i.eventManager)||void 0===u||u.terminate()})()}}return c.provider={build:()=>new c},c})();class pf{constructor(n){this.observer=n,this.muted=!1}next(n){this.muted||this.observer.next&&this.Ya(this.observer.next,n)}error(n){this.muted||(this.observer.error?this.Ya(this.observer.error,n):pn("Uncaught Error in snapshot listener:",n.toString()))}Za(){this.muted=!0}Ya(n,i){setTimeout(()=>{this.muted||n(i)},0)}}class D_{constructor(n,i,s,u,h){var y=this;this.authCredentials=n,this.appCheckCredentials=i,this.asyncQueue=s,this.databaseInfo=u,this.user=De.UNAUTHENTICATED,this.clientId=yr.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=h,this.authCredentials.start(s,function(){var D=(0,de.A)(function*(x){Qe("FirestoreClient","Received user=",x.uid),yield y.authCredentialListener(x),y.user=x});return function(x){return D.apply(this,arguments)}}()),this.appCheckCredentials.start(s,D=>(Qe("FirestoreClient","Received new app check token=",D),this.appCheckCredentialListener(D,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(n){this.authCredentialListener=n}setAppCheckTokenChangeListener(n){this.appCheckCredentialListener=n}terminate(){var n=this;this.asyncQueue.enterRestrictedMode();const i=new ye;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,de.A)(function*(){try{n._onlineComponents&&(yield n._onlineComponents.terminate()),n._offlineComponents&&(yield n._offlineComponents.terminate()),n.authCredentials.shutdown(),n.appCheckCredentials.shutdown(),i.resolve()}catch(s){const u=Ac(s,"Failed to shutdown persistence");i.reject(u)}})),i.promise}}function El(c,n){return b_.apply(this,arguments)}function b_(){return b_=(0,de.A)(function*(c,n){c.asyncQueue.verifyOperationInProgress(),Qe("FirestoreClient","Initializing OfflineComponentProvider");const i=c.configuration;yield n.initialize(i);let s=i.initialUser;c.setCredentialChangeListener(function(){var u=(0,de.A)(function*(h){s.isEqual(h)||(yield Gs(n.localStore,h),s=h)});return function(h){return u.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener(()=>c.terminate()),c._offlineComponents=n}),b_.apply(this,arguments)}function Zv(c,n){return kg.apply(this,arguments)}function kg(){return(kg=(0,de.A)(function*(c,n){c.asyncQueue.verifyOperationInProgress();const i=yield function Fg(c){return Vg.apply(this,arguments)}(c);Qe("FirestoreClient","Initializing OnlineComponentProvider"),yield n.initialize(i,c.configuration),c.setCredentialChangeListener(s=>ml(n.remoteStore,s)),c.setAppCheckTokenChangeListener((s,u)=>ml(n.remoteStore,u)),c._onlineComponents=n})).apply(this,arguments)}function Vg(){return(Vg=(0,de.A)(function*(c){if(!c._offlineComponents)if(c._uninitializedComponentsProvider){Qe("FirestoreClient","Using user provided OfflineComponentProvider");try{yield El(c,c._uninitializedComponentsProvider._offline)}catch(n){if(!("FirebaseError"===(u=n).name?u.code===W.FAILED_PRECONDITION||u.code===W.UNIMPLEMENTED:!(typeof DOMException<"u"&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw n;cr("Error using user provided cache. Falling back to memory cache: "+n),yield El(c,new Il)}}else Qe("FirestoreClient","Using default OfflineComponentProvider"),yield El(c,new Il);var u;return c._offlineComponents})).apply(this,arguments)}function Lg(c){return A_.apply(this,arguments)}function A_(){return(A_=(0,de.A)(function*(c){return c._onlineComponents||(c._uninitializedComponentsProvider?(Qe("FirestoreClient","Using user provided OnlineComponentProvider"),yield Zv(c,c._uninitializedComponentsProvider._online)):(Qe("FirestoreClient","Using default OnlineComponentProvider"),yield Zv(c,new ku))),c._onlineComponents})).apply(this,arguments)}function Sc(c){return xd.apply(this,arguments)}function xd(){return(xd=(0,de.A)(function*(c){const n=yield Lg(c),i=n.eventManager;return i.onListen=B0.bind(null,n.syncEngine),i.onUnlisten=zv.bind(null,n.syncEngine),i.onFirstRemoteStoreListen=_l.bind(null,n.syncEngine),i.onLastRemoteStoreUnlisten=l_.bind(null,n.syncEngine),i})).apply(this,arguments)}function R_(c){const n={};return void 0!==c.timeoutSeconds&&(n.timeoutSeconds=c.timeoutSeconds),n}const If=new Map;function Ef(c,n,i){if(!i)throw new K(W.INVALID_ARGUMENT,`Function ${c}() cannot be called with an empty ${n}.`)}function M_(c){if(!lt.isDocumentKey(c))throw new K(W.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${c} has ${c.length}.`)}function Dl(c){if(lt.isDocumentKey(c))throw new K(W.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${c} has ${c.length}.`)}function kd(c){if(void 0===c)return"undefined";if(null===c)return"null";if("string"==typeof c)return c.length>20&&(c=`${c.substring(0,20)}...`),JSON.stringify(c);if("number"==typeof c||"boolean"==typeof c)return""+c;if("object"==typeof c){if(c instanceof Array)return"an array";{const n=(s=c).constructor?s.constructor.name:null;return n?`a custom ${n} object`:"an object"}}var s;return"function"==typeof c?"a function":yt()}function tr(c,n){if("_delegate"in c&&(c=c._delegate),!(c instanceof n)){if(n.name===c.constructor.name)throw new K(W.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const i=kd(c);throw new K(W.INVALID_ARGUMENT,`Expected type '${n.name}', but it was: ${i}`)}}return c}class nI{constructor(n){var i,s;if(void 0===n.host){if(void 0!==n.ssl)throw new K(W.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=n.host,this.ssl=null===(i=n.ssl)||void 0===i||i;if(this.credentials=n.credentials,this.ignoreUndefinedProperties=!!n.ignoreUndefinedProperties,this.localCache=n.localCache,void 0===n.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==n.cacheSizeBytes&&n.cacheSizeBytes<1048576)throw new K(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=n.cacheSizeBytes}(function tI(c,n,i,s){if(!0===n&&!0===s)throw new K(W.INVALID_ARGUMENT,`${c} and ${i} cannot be used together.`)})("experimentalForceLongPolling",n.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",n.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!n.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==n.experimentalAutoDetectLongPolling&&!n.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=R_(null!==(s=n.experimentalLongPollingOptions)&&void 0!==s?s:{}),function(h){if(void 0!==h.timeoutSeconds){if(isNaN(h.timeoutSeconds))throw new K(W.INVALID_ARGUMENT,`invalid long polling timeout: ${h.timeoutSeconds} (must not be NaN)`);if(h.timeoutSeconds<5)throw new K(W.INVALID_ARGUMENT,`invalid long polling timeout: ${h.timeoutSeconds} (minimum allowed value is 5)`);if(h.timeoutSeconds>30)throw new K(W.INVALID_ARGUMENT,`invalid long polling timeout: ${h.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!n.useFetchStreams}isEqual(n){return this.host===n.host&&this.ssl===n.ssl&&this.credentials===n.credentials&&this.cacheSizeBytes===n.cacheSizeBytes&&this.experimentalForceLongPolling===n.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===n.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===n.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===n.ignoreUndefinedProperties&&this.useFetchStreams===n.useFetchStreams}}class Cf{constructor(n,i,s,u){this._authCredentials=n,this._appCheckCredentials=i,this._databaseId=s,this._app=u,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new nI({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new K(W.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(n){if(this._settingsFrozen)throw new K(W.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new nI(n),void 0!==n.credentials&&(this._authCredentials=function(s){if(!s)return new Et;switch(s.type){case"firstParty":return new un(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new K(W.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(n.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){var n=this;return(0,de.A)(function*(){"notTerminated"===n._terminateTask?yield n._terminate():n._terminateTask="notTerminated"})()}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(i){const s=If.get(i);s&&(Qe("ComponentProvider","Removing Datastore"),If.delete(i),s.terminate())}(this),Promise.resolve()}}class Po{constructor(n,i,s){this.converter=i,this._query=s,this.type="query",this.firestore=n}withConverter(n){return new Po(this.firestore,n,this._query)}}class ui{constructor(n,i,s){this.converter=i,this._key=s,this.type="document",this.firestore=n}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new la(this.firestore,this.converter,this._key.path.popLast())}withConverter(n){return new ui(this.firestore,n,this._key)}}class la extends Po{constructor(n,i,s){super(n,i,vs(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const n=this._path.popLast();return n.isEmpty()?null:new ui(this.firestore,null,new lt(n))}withConverter(n){return new la(this.firestore,n,this._path)}}function x_(c,n,...i){if(c=(0,he.Ku)(c),Ef("collection","path",n),c instanceof Cf){const s=Yt.fromString(n,...i);return Dl(s),new la(c,null,s)}{if(!(c instanceof ui||c instanceof la))throw new K(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=c._path.child(Yt.fromString(n,...i));return Dl(s),new la(c.firestore,null,s)}}function Bg(c,n,...i){if(c=(0,he.Ku)(c),1===arguments.length&&(n=yr.newId()),Ef("doc","path",n),c instanceof Cf){const s=Yt.fromString(n,...i);return M_(s),new ui(c,null,new lt(s))}{if(!(c instanceof ui||c instanceof la))throw new K(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=c._path.child(Yt.fromString(n,...i));return M_(s),new ui(c.firestore,c instanceof la?c.converter:null,new lt(s))}}class Yc{constructor(n=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new hl(this,"async_queue_retry"),this.Vu=()=>{const s=ec();s&&Qe("AsyncQueue","Visibility state changed to "+s.visibilityState),this.t_.jo()},this.mu=n;const i=ec();i&&"function"==typeof i.addEventListener&&i.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(n){this.enqueue(n)}enqueueAndForgetEvenWhileRestricted(n){this.fu(),this.gu(n)}enterRestrictedMode(n){if(!this.Iu){this.Iu=!0,this.Au=n||!1;const i=ec();i&&"function"==typeof i.removeEventListener&&i.removeEventListener("visibilitychange",this.Vu)}}enqueue(n){if(this.fu(),this.Iu)return new Promise(()=>{});const i=new ye;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(n().then(i.resolve,i.reject),i.promise)).then(()=>i.promise)}enqueueRetryable(n){this.enqueueAndForget(()=>(this.Pu.push(n),this.pu()))}pu(){var n=this;return(0,de.A)(function*(){if(0!==n.Pu.length){try{yield n.Pu[0](),n.Pu.shift(),n.t_.reset()}catch(i){if(!re(i))throw i;Qe("AsyncQueue","Operation failed with retryable error: "+i)}n.Pu.length>0&&n.t_.Go(()=>n.pu())}})()}gu(n){const i=this.mu.then(()=>(this.du=!0,n().catch(s=>{throw this.Eu=s,this.du=!1,pn("INTERNAL UNHANDLED ERROR: ",function(y){let D=y.message||"";return y.stack&&(D=y.stack.includes(y.message)?y.stack:y.message+"\n"+y.stack),D}(s)),s}).then(s=>(this.du=!1,s))));return this.mu=i,i}enqueueAfterDelay(n,i,s){this.fu(),this.Ru.indexOf(n)>-1&&(i=0);const u=ua.createAndSchedule(this,n,i,s,h=>this.yu(h));return this.Tu.push(u),u}fu(){this.Eu&&yt()}verifyOperationInProgress(){}wu(){var n=this;return(0,de.A)(function*(){let i;do{i=n.mu,yield i}while(i!==n.mu)})()}Su(n){for(const i of this.Tu)if(i.timerId===n)return!0;return!1}bu(n){return this.wu().then(()=>{this.Tu.sort((i,s)=>i.targetTimeMs-s.targetTimeMs);for(const i of this.Tu)if(i.skipDelay(),"all"!==n&&i.timerId===n)break;return this.wu()})}Du(n){this.Ru.push(n)}yu(n){const i=this.Tu.indexOf(n);this.Tu.splice(i,1)}}function wf(c){return function(i){if("object"!=typeof i||null===i)return!1;const u=i;for(const h of["next","error","complete"])if(h in u&&"function"==typeof u[h])return!0;return!1}(c)}class Fr extends Cf{constructor(n,i,s,u){super(n,i,s,u),this.type="firestore",this._queue=new Yc,this._persistenceKey=u?.name||"[DEFAULT]"}_terminate(){var n=this;return(0,de.A)(function*(){if(n._firestoreClient){const i=n._firestoreClient.terminate();n._queue=new Yc(i),n._firestoreClient=void 0,yield i}})()}}function Hg(c,n){const i="object"==typeof c?c:(0,$e.Sx)(),s="string"==typeof c?c:n||"(default)",u=(0,$e.j6)(i,"firestore").getImmediate({identifier:s});if(!u._initialized){const h=(0,he.yU)("firestore");h&&function Fd(c,n,i,s={}){var u;const h=(c=tr(c,Cf))._getSettings(),y=`${n}:${i}`;if("firestore.googleapis.com"!==h.host&&h.host!==y&&cr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),c._setSettings(Object.assign(Object.assign({},h),{host:y,ssl:!1})),s.mockUserToken){let D,x;if("string"==typeof s.mockUserToken)D=s.mockUserToken,x=De.MOCK_USER;else{D=(0,he.Fy)(s.mockUserToken,null===(u=c._app)||void 0===u?void 0:u.options.projectId);const B=s.mockUserToken.sub||s.mockUserToken.user_id;if(!B)throw new K(W.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");x=new De(B)}c._authCredentials=new kt(new Oe(D,x))}}(u,...h)}return u}function li(c){if(c._terminated)throw new K(W.FAILED_PRECONDITION,"The client has already been terminated.");return c._firestoreClient||function Vd(c){var n,i,s;const u=c._freezeSettings(),h=(x=(null===(n=c._app)||void 0===n?void 0:n.options.appId)||"",new Uo(c._databaseId,x,c._persistenceKey,(G=u).host,G.ssl,G.experimentalForceLongPolling,G.experimentalAutoDetectLongPolling,R_(G.experimentalLongPollingOptions),G.useFetchStreams));var x,G;c._componentsProvider||!(null===(i=u.localCache)||void 0===i)&&i._offlineComponentProvider&&!(null===(s=u.localCache)||void 0===s)&&s._onlineComponentProvider&&(c._componentsProvider={_offline:u.localCache._offlineComponentProvider,_online:u.localCache._onlineComponentProvider}),c._firestoreClient=new D_(c._authCredentials,c._appCheckCredentials,c._queue,h,c._componentsProvider&&function(D){const x=D?._online.build();return{_offline:D?._offline.build(x),_online:x}}(c._componentsProvider))}(c),c._firestoreClient}class Vu{constructor(n){this._byteString=n}static fromBase64String(n){try{return new Vu(Zn.fromBase64String(n))}catch(i){throw new K(W.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+i)}}static fromUint8Array(n){return new Vu(Zn.fromUint8Array(n))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(n){return this._byteString.isEqual(n._byteString)}}class Lu{constructor(...n){for(let i=0;i<n.length;++i)if(0===n[i].length)throw new K(W.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Pt(n)}isEqual(n){return this._internalPath.isEqual(n._internalPath)}}class Rs{constructor(n){this._methodName=n}}class Uu{constructor(n,i){if(!isFinite(n)||n<-90||n>90)throw new K(W.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+n);if(!isFinite(i)||i<-180||i>180)throw new K(W.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+i);this._lat=n,this._long=i}get latitude(){return this._lat}get longitude(){return this._long}isEqual(n){return this._lat===n._lat&&this._long===n._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(n){return Nt(this._lat,n._lat)||Nt(this._long,n._long)}}class Df{constructor(n){this._values=(n||[]).map(i=>i)}toArray(){return this._values.map(n=>n)}isEqual(n){return function(s,u){if(s.length!==u.length)return!1;for(let h=0;h<s.length;++h)if(s[h]!==u[h])return!1;return!0}(this._values,n._values)}}const G0=/^__.*__$/;class W0{constructor(n,i,s){this.data=n,this.fieldMask=i,this.fieldTransforms=s}toMutation(n,i){return null!==this.fieldMask?new S(n,this.data,this.fieldMask,i,this.fieldTransforms):new f(n,this.data,i,this.fieldTransforms)}}class lI{constructor(n,i,s){this.data=n,this.fieldMask=i,this.fieldTransforms=s}toMutation(n,i){return new S(n,this.data,this.fieldMask,i,this.fieldTransforms)}}function dI(c){switch(c){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw yt()}}class Wg{constructor(n,i,s,u,h,y){this.settings=n,this.databaseId=i,this.serializer=s,this.ignoreUndefinedProperties=u,void 0===h&&this.vu(),this.fieldTransforms=h||[],this.fieldMask=y||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(n){return new Wg(Object.assign(Object.assign({},this.settings),n),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(n){var i;const s=null===(i=this.path)||void 0===i?void 0:i.child(n),u=this.Fu({path:s,xu:!1});return u.Ou(n),u}Nu(n){var i;const s=null===(i=this.path)||void 0===i?void 0:i.child(n),u=this.Fu({path:s,xu:!1});return u.vu(),u}Lu(n){return this.Fu({path:void 0,xu:!0})}Bu(n){return xf(n,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(n){return void 0!==this.fieldMask.find(i=>n.isPrefixOf(i))||void 0!==this.fieldTransforms.find(i=>n.isPrefixOf(i.field))}vu(){if(this.path)for(let n=0;n<this.path.length;n++)this.Ou(this.path.get(n))}Ou(n){if(0===n.length)throw this.Bu("Document fields must not be empty");if(dI(this.Cu)&&G0.test(n))throw this.Bu('Document fields cannot begin and end with "__"')}}class V_{constructor(n,i,s){this.databaseId=n,this.ignoreUndefinedProperties=i,this.serializer=s||Na(n)}Qu(n,i,s,u=!1){return new Wg({Cu:n,methodName:i,qu:s,path:Pt.emptyPath(),xu:!1,ku:u},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ju(c){const n=c._freezeSettings(),i=Na(c._databaseId);return new V_(c._databaseId,!!n.ignoreUndefinedProperties,i)}function bf(c,n,i,s,u,h={}){const y=c.Qu(h.merge||h.mergeFields?2:0,n,i,u);$d("Data must be an object, but it was:",y,s);const D=fI(s,y);let x,B;if(h.merge)x=new lr(y.fieldMask),B=y.fieldTransforms;else if(h.mergeFields){const G=[];for(const te of h.mergeFields){const pe=Pf(n,te,i);if(!y.contains(pe))throw new K(W.INVALID_ARGUMENT,`Field '${pe}' is specified in your field mask but missing from your input data.`);U_(G,pe)||G.push(pe)}x=new lr(G),B=y.fieldTransforms.filter(te=>x.covers(te.field))}else x=null,B=y.fieldTransforms;return new W0(new Sn(D),x,B)}class jd extends Rs{_toFieldTransform(n){if(2!==n.Cu)throw n.Bu(1===n.Cu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return n.fieldMask.push(n.path),null}isEqual(n){return n instanceof jd}}class Bd extends Rs{_toFieldTransform(n){return new Es(n.path,new Us)}isEqual(n){return n instanceof Bd}}function bl(c,n){if(Mf(c=(0,he.Ku)(c)))return $d("Unsupported field value:",n,c),fI(c,n);if(c instanceof Rs)return function(s,u){if(!dI(u.Cu))throw u.Bu(`${s._methodName}() can only be used with update() and set()`);if(!u.path)throw u.Bu(`${s._methodName}() is not currently supported inside arrays`);const h=s._toFieldTransform(u);h&&u.fieldTransforms.push(h)}(c,n),null;if(void 0===c&&n.ignoreUndefinedProperties)return null;if(n.path&&n.fieldMask.push(n.path),c instanceof Array){if(n.settings.xu&&4!==n.Cu)throw n.Bu("Nested arrays are not supported");return function(s,u){const h=[];let y=0;for(const D of s){let x=bl(D,u.Lu(y));null==x&&(x={nullValue:"NULL_VALUE"}),h.push(x),y++}return{arrayValue:{values:h}}}(c,n)}return function(s,u){if(null===(s=(0,he.Ku)(s)))return{nullValue:"NULL_VALUE"};if("number"==typeof s)return Vc(u.serializer,s);if("boolean"==typeof s)return{booleanValue:s};if("string"==typeof s)return{stringValue:s};if(s instanceof Date){const h=Rn.fromDate(s);return{timestampValue:So(u.serializer,h)}}if(s instanceof Rn){const h=new Rn(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:So(u.serializer,h)}}if(s instanceof Uu)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Vu)return{bytesValue:gc(u.serializer,s._byteString)};if(s instanceof ui){const h=u.databaseId,y=s.firestore._databaseId;if(!y.isEqual(h))throw u.Bu(`Document reference is for database ${y.projectId}/${y.database} but should be for database ${h.projectId}/${h.database}`);return{referenceValue:Or(s.firestore._databaseId||u.databaseId,s._key.path)}}if(s instanceof Df)return D=u,{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(x=>{if("number"!=typeof x)throw D.Bu("VectorValues must only contain numeric values.");return Ca(D.serializer,x)})}}}}};var D;throw u.Bu(`Unsupported field value: ${kd(s)}`)}(c,n)}function fI(c,n){const i={};return Ti(c)?n.path&&n.path.length>0&&n.fieldMask.push(n.path):fi(c,(s,u)=>{const h=bl(u,n.Mu(s));null!=h&&(i[s]=h)}),{mapValue:{fields:i}}}function Mf(c){return!("object"!=typeof c||null===c||c instanceof Array||c instanceof Date||c instanceof Rn||c instanceof Uu||c instanceof Vu||c instanceof ui||c instanceof Rs||c instanceof Df)}function $d(c,n,i){if(!Mf(i)||"object"!=typeof(u=i)||null===u||Object.getPrototypeOf(u)!==Object.prototype&&null!==Object.getPrototypeOf(u)){const s=kd(i);throw n.Bu("an object"===s?c+" a custom object":c+" "+s)}var u}function Pf(c,n,i){if((n=(0,he.Ku)(n))instanceof Lu)return n._internalPath;if("string"==typeof n)return Hd(c,n);throw xf("Field path arguments must be of type string or ",c,!1,void 0,i)}const q0=new RegExp("[~\\*/\\[\\]]");function Hd(c,n,i){if(n.search(q0)>=0)throw xf(`Invalid field path (${n}). Paths must not contain '~', '*', '/', '[', or ']'`,c,!1,void 0,i);try{return new Lu(...n.split("."))._internalPath}catch{throw xf(`Invalid field path (${n}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,c,!1,void 0,i)}}function xf(c,n,i,s,u){const h=s&&!s.isEmpty(),y=void 0!==u;let D=`Function ${n}() called with invalid data`;i&&(D+=" (via `toFirestore()`)"),D+=". ";let x="";return(h||y)&&(x+=" (found",h&&(x+=` in field ${s}`),y&&(x+=` in document ${u}`),x+=")"),new K(W.INVALID_ARGUMENT,D+c+x)}function U_(c,n){return c.some(i=>i.isEqual(n))}class zd{constructor(n,i,s,u,h){this._firestore=n,this._userDataWriter=i,this._key=s,this._document=u,this._converter=h}get id(){return this._key.path.lastSegment()}get ref(){return new ui(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const n=new pI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(n)}return this._userDataWriter.convertValue(this._document.data.value)}}get(n){if(this._document){const i=this._document.data.field(Nf("DocumentSnapshot.get",n));if(null!==i)return this._userDataWriter.convertValue(i)}}}class pI extends zd{data(){return super.data()}}function Nf(c,n){return"string"==typeof n?Hd(c,n):n instanceof Lu?n._internalPath:n._delegate._internalPath}function qg(c){if("L"===c.limitType&&0===c.explicitOrderBy.length)throw new K(W.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Of{}class Gd extends Of{}function gI(c,n,...i){let s=[];n instanceof Of&&s.push(n),s=s.concat(i),function(h){const y=h.filter(x=>x instanceof Sl).length,D=h.filter(x=>x instanceof Al).length;if(y>1||y>0&&D>0)throw new K(W.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const u of s)c=u._apply(c);return c}class Al extends Gd{constructor(n,i,s){super(),this._field=n,this._op=i,this._value=s,this.type="where"}static _create(n,i,s){return new Al(n,i,s)}_apply(n){const i=this._parse(n);return $_(n._query,i),new Po(n.firestore,n.converter,Ha(n._query,i))}_parse(n){const i=ju(n.firestore);return function(h,y,D,x,B,G,te){let pe;if(B.isKeyField()){if("array-contains"===G||"array-contains-any"===G)throw new K(W.INVALID_ARGUMENT,`Invalid Query. You can't perform '${G}' queries on documentId().`);if("in"===G||"not-in"===G){B_(te,G);const Ve=[];for(const tt of te)Ve.push(Rl(x,h,tt));pe={arrayValue:{values:Ve}}}else pe=Rl(x,h,te)}else"in"!==G&&"not-in"!==G&&"array-contains-any"!==G||B_(te,G),pe=function hI(c,n,i,s=!1){return bl(i,c.Qu(s?4:3,n))}(D,"where",te,"in"===G||"not-in"===G);return sn.create(B,G,pe)}(n._query,0,i,n.firestore._databaseId,this._field,this._op,this._value)}}function kf(c,n,i){const s=n,u=Nf("where",c);return Al._create(u,s,i)}class Sl extends Of{constructor(n,i){super(),this.type=n,this._queryConstraints=i}static _create(n,i){return new Sl(n,i)}_parse(n){const i=this._queryConstraints.map(s=>s._parse(n)).filter(s=>s.getFilters().length>0);return 1===i.length?i[0]:Dn.create(i,this._getOperator())}_apply(n){const i=this._parse(n);return 0===i.getFilters().length?n:(function(u,h){let y=u;const D=h.getFlattenedFilters();for(const x of D)$_(y,x),y=Ha(y,x)}(n._query,i),new Po(n.firestore,n.converter,Ha(n._query,i)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Zc extends Gd{constructor(n,i){super(),this._field=n,this._direction=i,this.type="orderBy"}static _create(n,i){return new Zc(n,i)}_apply(n){const i=function(u,h,y){if(null!==u.startAt)throw new K(W.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==u.endAt)throw new K(W.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new rs(h,y)}(n._query,this._field,this._direction);return new Po(n.firestore,n.converter,function(u,h){const y=u.explicitOrderBy.concat([h]);return new bi(u.path,u.collectionGroup,y,u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)}(n._query,i))}}function mI(c,n="asc"){const i=n,s=Nf("orderBy",c);return Zc._create(s,i)}function Rl(c,n,i){if("string"==typeof(i=(0,he.Ku)(i))){if(""===i)throw new K(W.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!as(n)&&-1!==i.indexOf("/"))throw new K(W.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${i}' contains a '/' character.`);const s=n.path.child(Yt.fromString(i));if(!lt.isDocumentKey(s))throw new K(W.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return jt(c,new lt(s))}if(i instanceof ui)return jt(c,i._key);throw new K(W.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${kd(i)}.`)}function B_(c,n){if(!Array.isArray(c)||0===c.length)throw new K(W.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${n.toString()}' filters.`)}function $_(c,n){const i=function(u,h){for(const y of u)for(const D of y.getFlattenedFilters())if(h.indexOf(D.op)>=0)return D.op;return null}(c.filters,function(u){switch(u){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(n.op));if(null!==i)throw new K(W.INVALID_ARGUMENT,i===n.op?`Invalid query. You cannot use more than one '${n.op.toString()}' filter.`:`Invalid query. You cannot use '${n.op.toString()}' filters with '${i.toString()}' filters.`)}class Kg{convertValue(n,i="none"){switch(ao(n)){case 0:return null;case 1:return n.booleanValue;case 2:return Ir(n.integerValue||n.doubleValue);case 3:return this.convertTimestamp(n.timestampValue);case 4:return this.convertServerTimestamp(n,i);case 5:return n.stringValue;case 6:return this.convertBytes(br(n.bytesValue));case 7:return this.convertReference(n.referenceValue);case 8:return this.convertGeoPoint(n.geoPointValue);case 9:return this.convertArray(n.arrayValue,i);case 11:return this.convertObject(n.mapValue,i);case 10:return this.convertVectorValue(n.mapValue);default:throw yt()}}convertObject(n,i){return this.convertObjectMap(n.fields,i)}convertObjectMap(n,i="none"){const s={};return fi(n,(u,h)=>{s[u]=this.convertValue(h,i)}),s}convertVectorValue(n){var i,s,u;const h=null===(u=null===(s=null===(i=n.fields)||void 0===i?void 0:i.value.arrayValue)||void 0===s?void 0:s.values)||void 0===u?void 0:u.map(y=>Ir(y.doubleValue));return new Df(h)}convertGeoPoint(n){return new Uu(Ir(n.latitude),Ir(n.longitude))}convertArray(n,i){return(n.values||[]).map(s=>this.convertValue(s,i))}convertServerTimestamp(n,i){switch(i){case"previous":const s=Xs(n);return null==s?null:this.convertValue(s,i);case"estimate":return this.convertTimestamp(Ys(n));default:return null}}convertTimestamp(n){const i=pi(n);return new Rn(i.seconds,i.nanos)}convertDocumentKey(n,i){const s=Yt.fromString(n);Dt(pu(s));const u=new wo(s.get(1),s.get(3)),h=new lt(s.popFirst(5));return u.isEqual(i)||pn(`Document ${h} contains a document reference within a different database (${u.projectId}/${u.database}) which is not supported. It will be treated as a reference in the current database (${i.projectId}/${i.database}) instead.`),h}}function Uf(c,n,i){let s;return s=c?i&&(i.merge||i.mergeFields)?c.toFirestore(n,i):c.toFirestore(n):n,s}class Ml{constructor(n,i){this.hasPendingWrites=n,this.fromCache=i}isEqual(n){return this.hasPendingWrites===n.hasPendingWrites&&this.fromCache===n.fromCache}}class Wd extends zd{constructor(n,i,s,u,h,y){super(n,i,s,u,y),this._firestore=n,this._firestoreImpl=n,this.metadata=h}exists(){return super.exists()}data(n={}){if(this._document){if(this._converter){const i=new Pl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(i,n)}return this._userDataWriter.convertValue(this._document.data.value,n.serverTimestamps)}}get(n,i={}){if(this._document){const s=this._document.data.field(Nf("DocumentSnapshot.get",n));if(null!==s)return this._userDataWriter.convertValue(s,i.serverTimestamps)}}}class Pl extends Wd{data(n={}){return super.data(n)}}class qd{constructor(n,i,s,u){this._firestore=n,this._userDataWriter=i,this._snapshot=u,this.metadata=new Ml(u.hasPendingWrites,u.fromCache),this.query=s}get docs(){const n=[];return this.forEach(i=>n.push(i)),n}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(n,i){this._snapshot.docs.forEach(s=>{n.call(i,new Pl(this._firestore,this._userDataWriter,s.key,s,new Ml(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(n={}){const i=!!n.includeMetadataChanges;if(i&&this._snapshot.excludesMetadataChanges)throw new K(W.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===i||(this._cachedChanges=function(u,h){if(u._snapshot.oldDocs.isEmpty()){let y=0;return u._snapshot.docChanges.map(D=>({type:"added",doc:new Pl(u._firestore,u._userDataWriter,D.doc.key,D.doc,new Ml(u._snapshot.mutatedKeys.has(D.doc.key),u._snapshot.fromCache),u.query.converter),oldIndex:-1,newIndex:y++}))}{let y=u._snapshot.oldDocs;return u._snapshot.docChanges.filter(D=>h||3!==D.type).map(D=>{const x=new Pl(u._firestore,u._userDataWriter,D.doc.key,D.doc,new Ml(u._snapshot.mutatedKeys.has(D.doc.key),u._snapshot.fromCache),u.query.converter);let B=-1,G=-1;return 0!==D.type&&(B=y.indexOf(D.doc.key),y=y.delete(D.doc.key)),1!==D.type&&(y=y.add(D.doc),G=y.indexOf(D.doc.key)),{type:eC(D.type),doc:x,oldIndex:B,newIndex:G}})}}(this,i),this._cachedChangesIncludeMetadataChanges=i),this._cachedChanges}}function eC(c){switch(c){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return yt()}}function tC(c){c=tr(c,ui);const n=tr(c.firestore,Fr);return function yf(c,n,i={}){const s=new ye;return c.asyncQueue.enqueueAndForget((0,de.A)(function*(){return function(h,y,D,x,B){const G=new pf({next:pe=>{G.Za(),y.enqueueAndForget(()=>Td(h,te));const Ve=pe.docs.has(D);!Ve&&pe.fromCache?B.reject(new K(W.UNAVAILABLE,"Failed to get document because the client is offline.")):Ve&&pe.fromCache&&x&&"server"===x.source?B.reject(new K(W.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):B.resolve(pe)},error:pe=>B.reject(pe)}),te=new _g(vs(D.path),G,{includeMetadataChanges:!0,_a:!0});return Xr(h,te)}(yield Sc(c),c.asyncQueue,n,i,s)})),s.promise}(li(n),c._key).then(i=>Bf(n,c,i))}class $u extends Kg{constructor(n){super(),this.firestore=n}convertBytes(n){return new Vu(n)}convertReference(n){const i=this.convertDocumentKey(n,this.firestore._databaseId);return new ui(this.firestore,null,i)}}function jf(c){c=tr(c,Po);const n=tr(c.firestore,Fr),i=li(n),s=new $u(n);return qg(c._query),function Tl(c,n,i={}){const s=new ye;return c.asyncQueue.enqueueAndForget((0,de.A)(function*(){return function(h,y,D,x,B){const G=new pf({next:pe=>{G.Za(),y.enqueueAndForget(()=>Td(h,te)),pe.fromCache&&"server"===x.source?B.reject(new K(W.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):B.resolve(pe)},error:pe=>B.reject(pe)}),te=new _g(D,G,{includeMetadataChanges:!0,_a:!0});return Xr(h,te)}(yield Sc(c),c.asyncQueue,n,i,s)})),s.promise}(i,c._query).then(u=>new qd(n,s,c,u))}function G_(c,n,i){c=tr(c,ui);const s=tr(c.firestore,Fr),u=Uf(c.converter,n,i);return xo(s,[bf(ju(s),"setDoc",c._key,u,null!==c.converter,i).toMutation(c._key,dr.none())])}function DI(c,n,i,...s){c=tr(c,ui);const u=tr(c.firestore,Fr),h=ju(u);let y;return y="string"==typeof(n=(0,he.Ku)(n))||n instanceof Lu?function Rf(c,n,i,s,u,h){const y=c.Qu(1,n,i),D=[Pf(n,s,i)],x=[u];if(h.length%2!=0)throw new K(W.INVALID_ARGUMENT,`Function ${n}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let pe=0;pe<h.length;pe+=2)D.push(Pf(n,h[pe])),x.push(h[pe+1]);const B=[],G=Sn.empty();for(let pe=D.length-1;pe>=0;--pe)if(!U_(B,D[pe])){const Ve=D[pe];let tt=x[pe];tt=(0,he.Ku)(tt);const gt=y.Nu(Ve);if(tt instanceof jd)B.push(Ve);else{const ht=bl(tt,gt);null!=ht&&(B.push(Ve),G.set(Ve,ht))}}const te=new lr(B);return new lI(G,te,y.fieldTransforms)}(h,"updateDoc",c._key,n,i,s):function Sf(c,n,i,s){const u=c.Qu(1,n,i);$d("Data must be an object, but it was:",u,s);const h=[],y=Sn.empty();fi(s,(x,B)=>{const G=Hd(n,x,i);B=(0,he.Ku)(B);const te=u.Nu(G);if(B instanceof jd)h.push(G);else{const pe=bl(B,te);null!=pe&&(h.push(G),y.set(G,pe))}});const D=new lr(h);return new lI(y,D,u.fieldTransforms)}(h,"updateDoc",c._key,n),xo(u,[y.toMutation(c._key,dr.exists(!0))])}function bI(c){return xo(tr(c.firestore,Fr),[new M(c._key,dr.none())])}function W_(c,n){const i=tr(c.firestore,Fr),s=Bg(c),u=Uf(c.converter,n);return xo(i,[bf(ju(c.firestore),"addDoc",s._key,u,null!==c.converter,{}).toMutation(s._key,dr.exists(!1))]).then(()=>s)}function xl(c,...n){var i,s,u;c=(0,he.Ku)(c);let h={includeMetadataChanges:!1,source:"default"},y=0;"object"!=typeof n[y]||wf(n[y])||(h=n[y],y++);const D={includeMetadataChanges:h.includeMetadataChanges,source:h.source};if(wf(n[y])){const te=n[y];n[y]=null===(i=te.next)||void 0===i?void 0:i.bind(te),n[y+1]=null===(s=te.error)||void 0===s?void 0:s.bind(te),n[y+2]=null===(u=te.complete)||void 0===u?void 0:u.bind(te)}let x,B,G;if(c instanceof ui)B=tr(c.firestore,Fr),G=vs(c._key.path),x={next:te=>{n[y]&&n[y](Bf(B,c,te))},error:n[y+1],complete:n[y+2]};else{const te=tr(c,Po);B=tr(te.firestore,Fr),G=te._query;const pe=new $u(B);x={next:Ve=>{n[y]&&n[y](new qd(B,pe,te,Ve))},error:n[y+1],complete:n[y+2]},qg(c._query)}return function(pe,Ve,tt,gt){const ht=new pf(gt),zt=new _g(Ve,ht,tt);return pe.asyncQueue.enqueueAndForget((0,de.A)(function*(){return Xr(yield Sc(pe),zt)})),()=>{ht.Za(),pe.asyncQueue.enqueueAndForget((0,de.A)(function*(){return Td(yield Sc(pe),zt)}))}}(li(B),G,D,x)}function xo(c,n){return function(s,u){const h=new ye;return s.asyncQueue.enqueueAndForget((0,de.A)(function*(){return function Ad(c,n,i){return af.apply(this,arguments)}(yield function Pd(c){return Lg(c).then(n=>n.syncEngine)}(s),u,h)})),h.promise}(li(c),n)}function Bf(c,n,i){const s=i.docs.get(n._key),u=new $u(c);return new Wd(c,u,n._key,s,new Ml(i.hasPendingWrites,i.fromCache),n.converter)}function xI(){return new Bd("serverTimestamp")}!function(n,i=!0){rn=$e.MF,(0,$e.om)(new It.uA("firestore",(s,{instanceIdentifier:u,options:h})=>{const y=s.getProvider("app").getImmediate(),D=new Fr(new En(s.getProvider("auth-internal")),new Ur(s.getProvider("app-check-internal")),function(B,G){if(!Object.prototype.hasOwnProperty.apply(B.options,["projectId"]))throw new K(W.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new wo(B.options.projectId,G)}(y,u),y);return h=Object.assign({useFetchStreams:i},h),D._setSettings(h),D},"PUBLIC").setMultipleInstances(!0)),(0,$e.KO)(Qt,"4.7.3",n),(0,$e.KO)(Qt,"4.7.3","esm2017")}();class Hu{constructor(n){return n}}const eu="firestore",zu=new J.nKC("angularfire2.firestore-instances");function tm(c){return(n,i)=>{const s=n.runOutsideAngular(()=>c(i));return new Hu(s)}}const Gf={provide:class ty{constructor(){return(0,R.CA)(eu)}},deps:[[new J.Xx1,zu]]},jI={provide:Hu,useFactory:function ry(c,n){const i=(0,R.lR)(eu,c,n);return i&&new Hu(i)},deps:[[new J.Xx1,zu],Se.XU]};function $I(c,...n){return(0,Le.KO)("angularfire",R.xv.full,"fst"),(0,J.EmA)([jI,Gf,{provide:zu,useFactory:tm(c),multi:!0,deps:[J.SKi,J.zZn,R.u0,Se.gL,[new J.Xx1,p.DF],[new J.Xx1,R.Jv],...n]}])}const Wf=(0,R.S3)(W_,!0),cy=(0,R.S3)(x_,!0),ly=(0,R.S3)(bI,!0),QI=(0,R.S3)(Bg,!0),hy=(0,R.S3)(tC,!0),ZI=(0,R.S3)(jf,!0),eE=(0,R.S3)(Hg,!0),gy=(0,R.S3)(xl,!0),rm=(0,R.S3)(mI,!0),my=(0,R.S3)(gI,!0),iE=(0,R.S3)(xI,!0),oE=(0,R.S3)(G_,!0),Jd=(0,R.S3)(DI,!0),Iy=(0,R.S3)(kf,!0)},3586:(hn,at,ie)=>{ie.d(at,{xv:()=>ct,u0:()=>fr,Jv:()=>Vt,CA:()=>it,lR:()=>dt,S3:()=>ce});var R=ie(4438),J=ie(2214),Se=ie(8359);class p extends Se.yU{constructor(K,ye){super()}schedule(K,ye=0){return this}}const Le={setInterval(W,K,...ye){const{delegate:Oe}=Le;return Oe?.setInterval?Oe.setInterval(W,K,...ye):setInterval(W,K,...ye)},clearInterval(W){const{delegate:K}=Le;return(K?.clearInterval||clearInterval)(W)},delegate:void 0};var de=ie(7908);class $e extends p{constructor(K,ye){super(K,ye),this.scheduler=K,this.work=ye,this.pending=!1}schedule(K,ye=0){var Oe;if(this.closed)return this;this.state=K;const Et=this.id,kt=this.scheduler;return null!=Et&&(this.id=this.recycleAsyncId(kt,Et,ye)),this.pending=!0,this.delay=ye,this.id=null!==(Oe=this.id)&&void 0!==Oe?Oe:this.requestAsyncId(kt,this.id,ye),this}requestAsyncId(K,ye,Oe=0){return Le.setInterval(K.flush.bind(K,this),Oe)}recycleAsyncId(K,ye,Oe=0){if(null!=Oe&&this.delay===Oe&&!1===this.pending)return ye;null!=ye&&Le.clearInterval(ye)}execute(K,ye){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Oe=this._execute(K,ye);if(Oe)return Oe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(K,ye){let Et,Oe=!1;try{this.work(K)}catch(kt){Oe=!0,Et=kt||new Error("Scheduled action threw falsy error")}if(Oe)return this.unsubscribe(),Et}unsubscribe(){if(!this.closed){const{id:K,scheduler:ye}=this,{actions:Oe}=ye;this.work=this.state=this.scheduler=null,this.pending=!1,(0,de.o)(Oe,this),null!=K&&(this.id=this.recycleAsyncId(ye,K,null)),this.delay=null,super.unsubscribe()}}}const rt={now:()=>(rt.delegate||Date).now(),delegate:void 0};class he{constructor(K,ye=he.now){this.schedulerActionCtor=K,this.now=ye}schedule(K,ye=0,Oe){return new this.schedulerActionCtor(this,K).schedule(Oe,ye)}}he.now=rt.now;class _e extends he{constructor(K,ye=he.now){super(K,ye),this.actions=[],this._active=!1}flush(K){const{actions:ye}=this;if(this._active)return void ye.push(K);let Oe;this._active=!0;do{if(Oe=K.execute(K.state,K.delay))break}while(K=ye.shift());if(this._active=!1,Oe){for(;K=ye.shift();)K.unsubscribe();throw Oe}}}const _t=new class Ge extends _e{}(class It extends $e{constructor(K,ye){super(K,ye),this.scheduler=K,this.work=ye}schedule(K,ye=0){return ye>0?super.schedule(K,ye):(this.delay=ye,this.state=K,this.scheduler.flush(this),this)}execute(K,ye){return ye>0||this.closed?super.execute(K,ye):this._execute(K,ye)}requestAsyncId(K,ye,Oe=0){return null!=Oe&&Oe>0||null==Oe&&this.delay>0?super.requestAsyncId(K,ye,Oe):(K.flush(this),0)}}),Tt=new _e($e);var nn=ie(1985),Bt=ie(8141),xn=ie(6745),Xt=ie(941);const ct=new R.RxE("ANGULARFIRE2_VERSION");function dt(W,K,ye){if(K){if(1===K.length)return K[0];const kt=K.filter(En=>En.app===ye);if(1===kt.length)return kt[0]}return ye.container.getProvider(W).getImmediate({optional:!0})}const it=(W,K)=>{const ye=K?[K]:(0,J.Dk)(),Oe=[];return ye.forEach(Et=>{Et.container.getProvider(W).instances.forEach(En=>{Oe.includes(En)||Oe.push(En)})}),Oe};class Vt{constructor(){return it(Qt)}}const Qt="app-check";function De(){}class rn{zone;delegate;constructor(K,ye=_t){this.zone=K,this.delegate=ye}now(){return this.delegate.now()}schedule(K,ye,Oe){const Et=this.zone;return this.delegate.schedule(function(En){Et.runGuarded(()=>{K.apply(this,[En])})},ye,Oe)}}class on{zone;task=null;constructor(K){this.zone=K}call(K,ye){const Oe=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",De,{},De,De)),ye.pipe((0,Bt.M)({next:Oe,complete:Oe,error:Oe})).subscribe(K).add(Oe)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let fr=(()=>{class W{ngZone;outsideAngular;insideAngular;constructor(ye){this.ngZone=ye,this.outsideAngular=ye.runOutsideAngular(()=>new rn(Zone.current)),this.insideAngular=ye.run(()=>new rn(Zone.current,Tt)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(Oe){return new(Oe||W)(R.KVO(R.SKi))};static \u0275prov=R.jDH({token:W,factory:W.\u0275fac,providedIn:"root"})}return W})();function Hn(){const W=globalThis.\u0275AngularFireScheduler;if(!W)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return W}function pn(W){return Hn().ngZone.run(()=>W())}function yt(W){return function Dt(W){return function(ye){return(ye=ye.lift(new on(W.ngZone))).pipe((0,xn._)(W.outsideAngular),(0,Xt.Q)(W.insideAngular))}}(Hn())(W)}const Ne=(W,K)=>function(){const Oe=arguments;return K&&setTimeout(()=>{"scheduled"===K.state&&K.invoke()},10),pn(()=>W.apply(void 0,Oe))},ce=(W,K)=>function(){let ye;const Oe=arguments;for(let kt=0;kt<arguments.length;kt++)"function"==typeof Oe[kt]&&(K&&(ye||=pn(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",De,{},De,De))),Oe[kt]=Ne(Oe[kt],ye));const Et=function Qe(W){return Hn().ngZone.runOutsideAngular(()=>W())}(()=>W.apply(this,Oe));if(!K){if(Et instanceof nn.c){const kt=Hn();return Et.pipe((0,xn._)(kt.outsideAngular),(0,Xt.Q)(kt.insideAngular))}return pn(()=>Et)}return Et instanceof nn.c?Et.pipe(yt):Et instanceof Promise?pn(()=>new Promise((kt,En)=>Et.then(Gt=>pn(()=>kt(Gt)),Gt=>pn(()=>En(Gt))))):"function"==typeof Et&&ye?function(){return setTimeout(()=>{ye&&"scheduled"===ye.state&&ye.invoke()},10),Et.apply(this,arguments)}:pn(()=>Et)}},345:(hn,at,ie)=>{ie.d(at,{B8:()=>Ne,hE:()=>yr});var R=ie(177),J=ie(4438);class Se extends R.VF{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class p extends Se{static makeCurrent(){(0,R.ZD)(new p)}onAndCancel(le,se,Ce){return le.addEventListener(se,Ce),()=>{le.removeEventListener(se,Ce)}}dispatchEvent(le,se){le.dispatchEvent(se)}remove(le){le.remove()}createElement(le,se){return(se=se||this.getDefaultDocument()).createElement(le)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(le){return le.nodeType===Node.ELEMENT_NODE}isShadowRoot(le){return le instanceof DocumentFragment}getGlobalEventTarget(le,se){return"window"===se?window:"document"===se?le:"body"===se?le.body:null}getBaseHref(le){const se=function de(){return Le=Le||document.querySelector("base"),Le?Le.getAttribute("href"):null}();return null==se?null:function $e(Z){return new URL(Z,document.baseURI).pathname}(se)}resetBaseElement(){Le=null}getUserAgent(){return window.navigator.userAgent}getCookie(le){return(0,R._b)(document.cookie,le)}}let Le=null,rt=(()=>{class Z{build(){return new XMLHttpRequest}static{this.\u0275fac=function(Ce){return new(Ce||Z)}}static{this.\u0275prov=J.jDH({token:Z,factory:Z.\u0275fac})}}return Z})();const he=new J.nKC("");let _e=(()=>{class Z{constructor(se,Ce){this._zone=Ce,this._eventNameToPlugin=new Map,se.forEach(Xe=>{Xe.manager=this}),this._plugins=se.slice().reverse()}addEventListener(se,Ce,Xe){return this._findPluginFor(Ce).addEventListener(se,Ce,Xe)}getZone(){return this._zone}_findPluginFor(se){let Ce=this._eventNameToPlugin.get(se);if(Ce)return Ce;if(Ce=this._plugins.find(bt=>bt.supports(se)),!Ce)throw new J.wOt(5101,!1);return this._eventNameToPlugin.set(se,Ce),Ce}static{this.\u0275fac=function(Ce){return new(Ce||Z)(J.KVO(he),J.KVO(J.SKi))}}static{this.\u0275prov=J.jDH({token:Z,factory:Z.\u0275fac})}}return Z})();class Ge{constructor(le){this._doc=le}}const _t="ng-app-id";let ft=(()=>{class Z{constructor(se,Ce,Xe,bt={}){this.doc=se,this.appId=Ce,this.nonce=Xe,this.platformId=bt,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=(0,R.Vy)(bt),this.resetHostNodes()}addStyles(se){for(const Ce of se)1===this.changeUsageCount(Ce,1)&&this.onStyleAdded(Ce)}removeStyles(se){for(const Ce of se)this.changeUsageCount(Ce,-1)<=0&&this.onStyleRemoved(Ce)}ngOnDestroy(){const se=this.styleNodesInDOM;se&&(se.forEach(Ce=>Ce.remove()),se.clear());for(const Ce of this.getAllStyles())this.onStyleRemoved(Ce);this.resetHostNodes()}addHost(se){this.hostNodes.add(se);for(const Ce of this.getAllStyles())this.addStyleToHost(se,Ce)}removeHost(se){this.hostNodes.delete(se)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(se){for(const Ce of this.hostNodes)this.addStyleToHost(Ce,se)}onStyleRemoved(se){const Ce=this.styleRef;Ce.get(se)?.elements?.forEach(Xe=>Xe.remove()),Ce.delete(se)}collectServerRenderedStyles(){const se=this.doc.head?.querySelectorAll(`style[${_t}="${this.appId}"]`);if(se?.length){const Ce=new Map;return se.forEach(Xe=>{null!=Xe.textContent&&Ce.set(Xe.textContent,Xe)}),Ce}return null}changeUsageCount(se,Ce){const Xe=this.styleRef;if(Xe.has(se)){const bt=Xe.get(se);return bt.usage+=Ce,bt.usage}return Xe.set(se,{usage:Ce,elements:[]}),Ce}getStyleElement(se,Ce){const Xe=this.styleNodesInDOM,bt=Xe?.get(Ce);if(bt?.parentNode===se)return Xe.delete(Ce),bt.removeAttribute(_t),bt;{const re=this.doc.createElement("style");return this.nonce&&re.setAttribute("nonce",this.nonce),re.textContent=Ce,this.platformIsServer&&re.setAttribute(_t,this.appId),se.appendChild(re),re}}addStyleToHost(se,Ce){const Xe=this.getStyleElement(se,Ce),bt=this.styleRef,re=bt.get(Ce)?.elements;re?re.push(Xe):bt.set(Ce,{elements:[Xe],usage:1})}resetHostNodes(){const se=this.hostNodes;se.clear(),se.add(this.doc.head)}static{this.\u0275fac=function(Ce){return new(Ce||Z)(J.KVO(R.qQ),J.KVO(J.sZ2),J.KVO(J.BIS,8),J.KVO(J.Agw))}}static{this.\u0275prov=J.jDH({token:Z,factory:Z.\u0275fac})}}return Z})();const Tt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},fn=/%COMP%/g,ct=new J.nKC("",{providedIn:"root",factory:()=>!0});function it(Z,le){return le.map(se=>se.replace(fn,Z))}let Vt=(()=>{class Z{constructor(se,Ce,Xe,bt,re,ne,fe,Be=null){this.eventManager=se,this.sharedStylesHost=Ce,this.appId=Xe,this.removeStylesOnCompDestroy=bt,this.doc=re,this.platformId=ne,this.ngZone=fe,this.nonce=Be,this.rendererByCompId=new Map,this.platformIsServer=(0,R.Vy)(ne),this.defaultRenderer=new Qt(se,re,fe,this.platformIsServer)}createRenderer(se,Ce){if(!se||!Ce)return this.defaultRenderer;this.platformIsServer&&Ce.encapsulation===J.gXe.ShadowDom&&(Ce={...Ce,encapsulation:J.gXe.Emulated});const Xe=this.getOrCreateRenderer(se,Ce);return Xe instanceof Qe?Xe.applyToHost(se):Xe instanceof Hn&&Xe.applyStyles(),Xe}getOrCreateRenderer(se,Ce){const Xe=this.rendererByCompId;let bt=Xe.get(Ce.id);if(!bt){const re=this.doc,ne=this.ngZone,fe=this.eventManager,Be=this.sharedStylesHost,Me=this.removeStylesOnCompDestroy,mt=this.platformIsServer;switch(Ce.encapsulation){case J.gXe.Emulated:bt=new Qe(fe,Be,Ce,this.appId,Me,re,ne,mt);break;case J.gXe.ShadowDom:return new fr(fe,Be,se,Ce,re,ne,this.nonce,mt);default:bt=new Hn(fe,Be,Ce,Me,re,ne,mt)}Xe.set(Ce.id,bt)}return bt}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(Ce){return new(Ce||Z)(J.KVO(_e),J.KVO(ft),J.KVO(J.sZ2),J.KVO(ct),J.KVO(R.qQ),J.KVO(J.Agw),J.KVO(J.SKi),J.KVO(J.BIS))}}static{this.\u0275prov=J.jDH({token:Z,factory:Z.\u0275fac})}}return Z})();class Qt{constructor(le,se,Ce,Xe){this.eventManager=le,this.doc=se,this.ngZone=Ce,this.platformIsServer=Xe,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(le,se){return se?this.doc.createElementNS(Tt[se]||se,le):this.doc.createElement(le)}createComment(le){return this.doc.createComment(le)}createText(le){return this.doc.createTextNode(le)}appendChild(le,se){(on(le)?le.content:le).appendChild(se)}insertBefore(le,se,Ce){le&&(on(le)?le.content:le).insertBefore(se,Ce)}removeChild(le,se){se.remove()}selectRootElement(le,se){let Ce="string"==typeof le?this.doc.querySelector(le):le;if(!Ce)throw new J.wOt(-5104,!1);return se||(Ce.textContent=""),Ce}parentNode(le){return le.parentNode}nextSibling(le){return le.nextSibling}setAttribute(le,se,Ce,Xe){if(Xe){se=Xe+":"+se;const bt=Tt[Xe];bt?le.setAttributeNS(bt,se,Ce):le.setAttribute(se,Ce)}else le.setAttribute(se,Ce)}removeAttribute(le,se,Ce){if(Ce){const Xe=Tt[Ce];Xe?le.removeAttributeNS(Xe,se):le.removeAttribute(`${Ce}:${se}`)}else le.removeAttribute(se)}addClass(le,se){le.classList.add(se)}removeClass(le,se){le.classList.remove(se)}setStyle(le,se,Ce,Xe){Xe&(J.czy.DashCase|J.czy.Important)?le.style.setProperty(se,Ce,Xe&J.czy.Important?"important":""):le.style[se]=Ce}removeStyle(le,se,Ce){Ce&J.czy.DashCase?le.style.removeProperty(se):le.style[se]=""}setProperty(le,se,Ce){null!=le&&(le[se]=Ce)}setValue(le,se){le.nodeValue=se}listen(le,se,Ce){if("string"==typeof le&&!(le=(0,R.QT)().getGlobalEventTarget(this.doc,le)))throw new Error(`Unsupported event target ${le} for event ${se}`);return this.eventManager.addEventListener(le,se,this.decoratePreventDefault(Ce))}decoratePreventDefault(le){return se=>{if("__ngUnwrap__"===se)return le;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>le(se)):le(se))&&se.preventDefault()}}}function on(Z){return"TEMPLATE"===Z.tagName&&void 0!==Z.content}class fr extends Qt{constructor(le,se,Ce,Xe,bt,re,ne,fe){super(le,bt,re,fe),this.sharedStylesHost=se,this.hostEl=Ce,this.shadowRoot=Ce.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Be=it(Xe.id,Xe.styles);for(const Me of Be){const mt=document.createElement("style");ne&&mt.setAttribute("nonce",ne),mt.textContent=Me,this.shadowRoot.appendChild(mt)}}nodeOrShadowRoot(le){return le===this.hostEl?this.shadowRoot:le}appendChild(le,se){return super.appendChild(this.nodeOrShadowRoot(le),se)}insertBefore(le,se,Ce){return super.insertBefore(this.nodeOrShadowRoot(le),se,Ce)}removeChild(le,se){return super.removeChild(null,se)}parentNode(le){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(le)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Hn extends Qt{constructor(le,se,Ce,Xe,bt,re,ne,fe){super(le,bt,re,ne),this.sharedStylesHost=se,this.removeStylesOnCompDestroy=Xe,this.styles=fe?it(fe,Ce.styles):Ce.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class Qe extends Hn{constructor(le,se,Ce,Xe,bt,re,ne,fe){const Be=Xe+"-"+Ce.id;super(le,se,Ce,bt,re,ne,fe,Be),this.contentAttr=function qe(Z){return"_ngcontent-%COMP%".replace(fn,Z)}(Be),this.hostAttr=function dt(Z){return"_nghost-%COMP%".replace(fn,Z)}(Be)}applyToHost(le){this.applyStyles(),this.setAttribute(le,this.hostAttr,"")}createElement(le,se){const Ce=super.createElement(le,se);return super.setAttribute(Ce,this.contentAttr,""),Ce}}let pn=(()=>{class Z extends Ge{constructor(se){super(se)}supports(se){return!0}addEventListener(se,Ce,Xe){return se.addEventListener(Ce,Xe,!1),()=>this.removeEventListener(se,Ce,Xe)}removeEventListener(se,Ce,Xe){return se.removeEventListener(Ce,Xe)}static{this.\u0275fac=function(Ce){return new(Ce||Z)(J.KVO(R.qQ))}}static{this.\u0275prov=J.jDH({token:Z,factory:Z.\u0275fac})}}return Z})();const cr=["alt","control","meta","shift"],Lr={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},yt={alt:Z=>Z.altKey,control:Z=>Z.ctrlKey,meta:Z=>Z.metaKey,shift:Z=>Z.shiftKey};let Dt=(()=>{class Z extends Ge{constructor(se){super(se)}supports(se){return null!=Z.parseEventName(se)}addEventListener(se,Ce,Xe){const bt=Z.parseEventName(Ce),re=Z.eventCallback(bt.fullKey,Xe,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,R.QT)().onAndCancel(se,bt.domEventName,re))}static parseEventName(se){const Ce=se.toLowerCase().split("."),Xe=Ce.shift();if(0===Ce.length||"keydown"!==Xe&&"keyup"!==Xe)return null;const bt=Z._normalizeKey(Ce.pop());let re="",ne=Ce.indexOf("code");if(ne>-1&&(Ce.splice(ne,1),re="code."),cr.forEach(Be=>{const Me=Ce.indexOf(Be);Me>-1&&(Ce.splice(Me,1),re+=Be+".")}),re+=bt,0!=Ce.length||0===bt.length)return null;const fe={};return fe.domEventName=Xe,fe.fullKey=re,fe}static matchEventFullKeyCode(se,Ce){let Xe=Lr[se.key]||se.key,bt="";return Ce.indexOf("code.")>-1&&(Xe=se.code,bt="code."),!(null==Xe||!Xe)&&(Xe=Xe.toLowerCase()," "===Xe?Xe="space":"."===Xe&&(Xe="dot"),cr.forEach(re=>{re!==Xe&&(0,yt[re])(se)&&(bt+=re+".")}),bt+=Xe,bt===Ce)}static eventCallback(se,Ce,Xe){return bt=>{Z.matchEventFullKeyCode(bt,se)&&Xe.runGuarded(()=>Ce(bt))}}static _normalizeKey(se){return"esc"===se?"escape":se}static{this.\u0275fac=function(Ce){return new(Ce||Z)(J.KVO(R.qQ))}}static{this.\u0275prov=J.jDH({token:Z,factory:Z.\u0275fac})}}return Z})();function Ne(Z,le){return(0,J.TL3)({rootComponent:Z,...W(le)})}function W(Z){return{appProviders:[...qn,...Z?.providers??[]],platformProviders:kt}}const kt=[{provide:J.Agw,useValue:R.AJ},{provide:J.PLl,useValue:function ye(){p.makeCurrent()},multi:!0},{provide:R.qQ,useFactory:function Et(){return(0,J.TL$)(document),document},deps:[]}],qn=[{provide:J.H8p,useValue:"root"},{provide:J.zcH,useFactory:function Oe(){return new J.zcH},deps:[]},{provide:he,useClass:pn,multi:!0,deps:[R.qQ,J.SKi,J.Agw]},{provide:he,useClass:Dt,multi:!0,deps:[R.qQ]},Vt,ft,_e,{provide:J._9s,useExisting:Vt},{provide:R.N0,useClass:rt,deps:[]},[]];let yr=(()=>{class Z{constructor(se){this._doc=se}getTitle(){return this._doc.title}setTitle(se){this._doc.title=se||""}static{this.\u0275fac=function(Ce){return new(Ce||Z)(J.KVO(R.qQ))}}static{this.\u0275prov=J.jDH({token:Z,factory:Z.\u0275fac,providedIn:"root"})}}return Z})()},9712:(hn,at,ie)=>{ie.d(at,{nX:()=>si,wF:()=>ii,Ix:()=>Zi,lh:()=>oa});var R=ie(4438),J=ie(1985),Se=ie(8071),Le=ie(8455),de=ie(3794);function $e(...I){const A=(0,de.lI)(I);return(0,Le.H)(I,A)}var It=ie(4412);const he=(0,ie(1853).L)(I=>function(){I(this),this.name="EmptyError",this.message="no elements in sequence"});var _e=ie(3073),Ge=ie(3669),_t=ie(6450),ft=ie(8496),Tt=ie(4360),fn=ie(5225);function nn(...I){const A=(0,de.lI)(I),C=(0,de.ms)(I),{args:P,keys:U}=(0,_e.D)(I);if(0===P.length)return(0,Le.H)([],A);const q=new J.c(function Bt(I,A,C=Ge.D){return P=>{xn(A,()=>{const{length:U}=I,q=new Array(U);let oe=U,ke=U;for(let Ee=0;Ee<U;Ee++)xn(A,()=>{const st=(0,Le.H)(I[Ee],A);let Lt=!1;st.subscribe((0,Tt._)(P,cn=>{q[Ee]=cn,Lt||(Lt=!0,ke--),ke||P.next(C(q.slice()))},()=>{--oe||P.complete()}))},P)},P)}}(P,A,U?oe=>(0,ft.e)(U,oe):Ge.D));return C?q.pipe((0,_t.I)(C)):q}function xn(I,A,C){I?(0,fn.N)(C,I,A):A()}var Xt=ie(6354),ct=ie(8750),qe=ie(9974);function it(I,A,C=1/0){return(0,Se.T)(A)?it((P,U)=>(0,Xt.T)((q,oe)=>A(P,q,U,oe))((0,ct.Tg)(I(P,U))),C):("number"==typeof A&&(C=A),(0,qe.N)((P,U)=>function dt(I,A,C,P,U,q,oe,ke){const Ee=[];let st=0,Lt=0,cn=!1;const Wt=()=>{cn&&!Ee.length&&!st&&A.complete()},yo=pr=>st<P?mr(pr):Ee.push(pr),mr=pr=>{q&&A.next(pr),st++;let Ei=!1;(0,ct.Tg)(C(pr,Lt++)).subscribe((0,Tt._)(A,kr=>{U?.(kr),q?yo(kr):A.next(kr)},()=>{Ei=!0},void 0,()=>{if(Ei)try{for(st--;Ee.length&&st<P;){const kr=Ee.shift();oe?(0,fn.N)(A,oe,()=>mr(kr)):mr(kr)}Wt()}catch(kr){A.error(kr)}}))};return I.subscribe((0,Tt._)(A,yo,()=>{cn=!0,Wt()})),()=>{ke?.()}}(P,U,I,C)))}function De(...I){return function Qt(){return function Vt(I=1/0){return it(Ge.D,I)}(1)}()((0,Le.H)(I,(0,de.lI)(I)))}function rn(I){return new J.c(A=>{(0,ct.Tg)(I()).subscribe(A)})}var on=ie(1203);function fr(I,A){const C=(0,Se.T)(I)?I:()=>I,P=U=>U.error(C());return new J.c(A?U=>A.schedule(P,0,U):P)}const Hn=new J.c(I=>I.complete());var cr=ie(8359);function Lr(){return(0,qe.N)((I,A)=>{let C=null;I._refCount++;const P=(0,Tt._)(A,void 0,void 0,void 0,()=>{if(!I||I._refCount<=0||0<--I._refCount)return void(C=null);const U=I._connection,q=C;C=null,U&&(!q||U===q)&&U.unsubscribe(),A.unsubscribe()});I.subscribe(P),P.closed||(C=I.connect())})}class yt extends J.c{constructor(A,C){super(),this.source=A,this.subjectFactory=C,this._subject=null,this._refCount=0,this._connection=null,(0,qe.S)(A)&&(this.lift=A.lift)}_subscribe(A){return this.getSubject().subscribe(A)}getSubject(){const A=this._subject;return(!A||A.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:A}=this;this._subject=this._connection=null,A?.unsubscribe()}connect(){let A=this._connection;if(!A){A=this._connection=new cr.yU;const C=this.getSubject();A.add(this.source.subscribe((0,Tt._)(C,void 0,()=>{this._teardown(),C.complete()},P=>{this._teardown(),C.error(P)},()=>this._teardown()))),A.closed&&(this._connection=null,A=cr.yU.EMPTY)}return A}refCount(){return Lr()(this)}}var Dt=ie(1413),Ne=ie(177);function ce(I,A){return(0,qe.N)((C,P)=>{let U=null,q=0,oe=!1;const ke=()=>oe&&!U&&P.complete();C.subscribe((0,Tt._)(P,Ee=>{U?.unsubscribe();let st=0;const Lt=q++;(0,ct.Tg)(I(Ee,Lt)).subscribe(U=(0,Tt._)(P,cn=>P.next(A?A(Ee,cn,Lt,st++):cn),()=>{U=null,ke()}))},()=>{oe=!0,ke()}))})}function W(I){return I<=0?()=>Hn:(0,qe.N)((A,C)=>{let P=0;A.subscribe((0,Tt._)(C,U=>{++P<=I&&(C.next(U),I<=P&&C.complete())}))})}function ye(I,A){return(0,qe.N)((C,P)=>{let U=0;C.subscribe((0,Tt._)(P,q=>I.call(A,q,U++)&&P.next(q)))})}function Oe(I){return(0,qe.N)((A,C)=>{let P=!1;A.subscribe((0,Tt._)(C,U=>{P=!0,C.next(U)},()=>{P||C.next(I),C.complete()}))})}function Et(I=kt){return(0,qe.N)((A,C)=>{let P=!1;A.subscribe((0,Tt._)(C,U=>{P=!0,C.next(U)},()=>P?C.complete():C.error(I())))})}function kt(){return new he}function En(I,A){const C=arguments.length>=2;return P=>P.pipe(I?ye((U,q)=>I(U,q,P)):Ge.D,W(1),C?Oe(A):Et(()=>new he))}function Gt(I,A){return(0,Se.T)(A)?it(I,A,1):it(I,1)}var un=ie(8141);function qn(I){return(0,qe.N)((A,C)=>{let q,P=null,U=!1;P=A.subscribe((0,Tt._)(C,void 0,void 0,oe=>{q=(0,ct.Tg)(I(oe,qn(I)(A))),P?(P.unsubscribe(),P=null,q.subscribe(C)):U=!0})),U&&(P.unsubscribe(),P=null,q.subscribe(C))})}function Un(I){return I<=0?()=>Hn:(0,qe.N)((A,C)=>{let P=[];A.subscribe((0,Tt._)(C,U=>{P.push(U),I<P.length&&P.shift()},()=>{for(const U of P)C.next(U);C.complete()},void 0,()=>{P=null}))})}function ut(I){return(0,qe.N)((A,C)=>{try{A.subscribe(C)}finally{C.add(I)}})}var di=ie(5343),Ct=ie(345);const qt="primary",Yt=Symbol("RouteTitle");class Cn{constructor(A){this.params=A||{}}has(A){return Object.prototype.hasOwnProperty.call(this.params,A)}get(A){if(this.has(A)){const C=this.params[A];return Array.isArray(C)?C[0]:C}return null}getAll(A){if(this.has(A)){const C=this.params[A];return Array.isArray(C)?C:[C]}return[]}get keys(){return Object.keys(this.params)}}function Pt(I){return new Cn(I)}function lt(I,A,C){const P=C.path.split("/");if(P.length>I.length||"full"===C.pathMatch&&(A.hasChildren()||P.length<I.length))return null;const U={};for(let q=0;q<P.length;q++){const oe=P[q],ke=I[q];if(":"===oe[0])U[oe.substring(1)]=ke;else if(oe!==ke.path)return null}return{consumed:I.slice(0,P.length),posParams:U}}function Fn(I,A){const C=I?Sr(I):void 0,P=A?Sr(A):void 0;if(!C||!P||C.length!=P.length)return!1;let U;for(let q=0;q<C.length;q++)if(U=C[q],!Pr(I[U],A[U]))return!1;return!0}function Sr(I){return[...Object.keys(I),...Object.getOwnPropertySymbols(I)]}function Pr(I,A){if(Array.isArray(I)&&Array.isArray(A)){if(I.length!==A.length)return!1;const C=[...I].sort(),P=[...A].sort();return C.every((U,q)=>P[q]===U)}return I===A}function sr(I){return I.length>0?I[I.length-1]:null}function jn(I){return function p(I){return!!I&&(I instanceof J.c||(0,Se.T)(I.lift)&&(0,Se.T)(I.subscribe))}(I)?I:(0,R.jNT)(I)?(0,Le.H)(Promise.resolve(I)):$e(I)}const Mn={exact:function ni(I,A,C){if(!Xe(I.segments,A.segments)||!wi(I.segments,A.segments,C)||I.numberOfChildren!==A.numberOfChildren)return!1;for(const P in A.children)if(!I.children[P]||!ni(I.children[P],A.children[P],C))return!1;return!0},subset:jr},_n={exact:function gn(I,A){return Fn(I,A)},subset:function ln(I,A){return Object.keys(A).length<=Object.keys(I).length&&Object.keys(A).every(C=>Pr(I[C],A[C]))},ignored:()=>!0};function Fo(I,A,C){return Mn[C.paths](I.root,A.root,C.matrixParams)&&_n[C.queryParams](I.queryParams,A.queryParams)&&!("exact"===C.fragment&&I.fragment!==A.fragment)}function jr(I,A,C){return Hr(I,A,A.segments,C)}function Hr(I,A,C,P){if(I.segments.length>C.length){const U=I.segments.slice(0,C.length);return!(!Xe(U,C)||A.hasChildren()||!wi(U,C,P))}if(I.segments.length===C.length){if(!Xe(I.segments,C)||!wi(I.segments,C,P))return!1;for(const U in A.children)if(!I.children[U]||!jr(I.children[U],A.children[U],P))return!1;return!0}{const U=C.slice(0,I.segments.length),q=C.slice(I.segments.length);return!!(Xe(I.segments,U)&&wi(I.segments,U,P)&&I.children[qt])&&Hr(I.children[qt],A,q,P)}}function wi(I,A,C){return A.every((P,U)=>_n[C](I[U].parameters,P.parameters))}class Z{constructor(A=new le([],{}),C={},P=null){this.root=A,this.queryParams=C,this.fragment=P}get queryParamMap(){return this._queryParamMap??=Pt(this.queryParams),this._queryParamMap}toString(){return fe.serialize(this)}}class le{constructor(A,C){this.segments=A,this.children=C,this.parent=null,Object.values(C).forEach(P=>P.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Be(this)}}class se{constructor(A,C){this.path=A,this.parameters=C}get parameterMap(){return this._parameterMap??=Pt(this.parameters),this._parameterMap}toString(){return ot(this)}}function Xe(I,A){return I.length===A.length&&I.every((C,P)=>C.path===A[P].path)}let re=(()=>{class I{static{this.\u0275fac=function(P){return new(P||I)}}static{this.\u0275prov=R.jDH({token:I,factory:()=>new ne,providedIn:"root"})}}return I})();class ne{parse(A){const C=new be(A);return new Z(C.parseRootSegment(),C.parseQueryParams(),C.parseFragment())}serialize(A){const C=`/${Me(A.root,!0)}`,P=function Ni(I){const A=Object.entries(I).map(([C,P])=>Array.isArray(P)?P.map(U=>`${Zt(C)}=${Zt(U)}`).join("&"):`${Zt(C)}=${Zt(P)}`).filter(C=>C);return A.length?`?${A.join("&")}`:""}(A.queryParams);return`${C}${P}${"string"==typeof A.fragment?`#${function Nn(I){return encodeURI(I)}(A.fragment)}`:""}`}}const fe=new ne;function Be(I){return I.segments.map(A=>ot(A)).join("/")}function Me(I,A){if(!I.hasChildren())return Be(I);if(A){const C=I.children[qt]?Me(I.children[qt],!1):"",P=[];return Object.entries(I.children).forEach(([U,q])=>{U!==qt&&P.push(`${U}:${Me(q,!1)}`)}),P.length>0?`${C}(${P.join("//")})`:C}{const C=function bt(I,A){let C=[];return Object.entries(I.children).forEach(([P,U])=>{P===qt&&(C=C.concat(A(U,P)))}),Object.entries(I.children).forEach(([P,U])=>{P!==qt&&(C=C.concat(A(U,P)))}),C}(I,(P,U)=>U===qt?[Me(I.children[qt],!1)]:[`${U}:${Me(P,!1)}`]);return 1===Object.keys(I.children).length&&null!=I.children[qt]?`${Be(I)}/${C[0]}`:`${Be(I)}/(${C.join("//")})`}}function mt(I){return encodeURIComponent(I).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Zt(I){return mt(I).replace(/%3B/gi,";")}function vr(I){return mt(I).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Bn(I){return decodeURIComponent(I)}function nr(I){return Bn(I.replace(/\+/g,"%20"))}function ot(I){return`${vr(I.path)}${function ri(I){return Object.entries(I).map(([A,C])=>`;${vr(A)}=${vr(C)}`).join("")}(I.parameters)}`}const hi=/^[^\/()?;#]+/;function Yo(I){const A=I.match(hi);return A?A[0]:""}const zi=/^[^\/()?;=#]+/,pa=/^[^=?&#]+/,Zo=/^[^&#]+/;class be{constructor(A){this.url=A,this.remaining=A}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new le([],{}):new le([],this.parseChildren())}parseQueryParams(){const A={};if(this.consumeOptional("?"))do{this.parseQueryParam(A)}while(this.consumeOptional("&"));return A}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const A=[];for(this.peekStartsWith("(")||A.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),A.push(this.parseSegment());let C={};this.peekStartsWith("/(")&&(this.capture("/"),C=this.parseParens(!0));let P={};return this.peekStartsWith("(")&&(P=this.parseParens(!1)),(A.length>0||Object.keys(C).length>0)&&(P[qt]=new le(A,C)),P}parseSegment(){const A=Yo(this.remaining);if(""===A&&this.peekStartsWith(";"))throw new R.wOt(4009,!1);return this.capture(A),new se(Bn(A),this.parseMatrixParams())}parseMatrixParams(){const A={};for(;this.consumeOptional(";");)this.parseParam(A);return A}parseParam(A){const C=function Gn(I){const A=I.match(zi);return A?A[0]:""}(this.remaining);if(!C)return;this.capture(C);let P="";if(this.consumeOptional("=")){const U=Yo(this.remaining);U&&(P=U,this.capture(P))}A[Bn(C)]=Bn(P)}parseQueryParam(A){const C=function Ps(I){const A=I.match(pa);return A?A[0]:""}(this.remaining);if(!C)return;this.capture(C);let P="";if(this.consumeOptional("=")){const oe=function je(I){const A=I.match(Zo);return A?A[0]:""}(this.remaining);oe&&(P=oe,this.capture(P))}const U=nr(C),q=nr(P);if(A.hasOwnProperty(U)){let oe=A[U];Array.isArray(oe)||(oe=[oe],A[U]=oe),oe.push(q)}else A[U]=q}parseParens(A){const C={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const P=Yo(this.remaining),U=this.remaining[P.length];if("/"!==U&&")"!==U&&";"!==U)throw new R.wOt(4010,!1);let q;P.indexOf(":")>-1?(q=P.slice(0,P.indexOf(":")),this.capture(q),this.capture(":")):A&&(q=qt);const oe=this.parseChildren();C[q]=1===Object.keys(oe).length?oe[qt]:new le([],oe),this.consumeOptional("//")}return C}peekStartsWith(A){return this.remaining.startsWith(A)}consumeOptional(A){return!!this.peekStartsWith(A)&&(this.remaining=this.remaining.substring(A.length),!0)}capture(A){if(!this.consumeOptional(A))throw new R.wOt(4011,!1)}}function We(I){return I.segments.length>0?new le([],{[qt]:I}):I}function wt(I){const A={};for(const[P,U]of Object.entries(I.children)){const q=wt(U);if(P===qt&&0===q.segments.length&&q.hasChildren())for(const[oe,ke]of Object.entries(q.children))A[oe]=ke;else(q.segments.length>0||q.hasChildren())&&(A[P]=q)}return function Jt(I){if(1===I.numberOfChildren&&I.children[qt]){const A=I.children[qt];return new le(I.segments.concat(A.segments),A.children)}return I}(new le(I.segments,A))}function $t(I){return I instanceof Z}function ar(I){let A;const U=We(function C(q){const oe={};for(const Ee of q.children){const st=C(Ee);oe[Ee.outlet]=st}const ke=new le(q.url,oe);return q===I&&(A=ke),ke}(I.root));return A??U}function Ot(I,A,C,P){let U=I;for(;U.parent;)U=U.parent;if(0===A.length)return Gi(U,U,U,C,P);const q=function xs(I){if("string"==typeof I[0]&&1===I.length&&"/"===I[0])return new Ks(!0,0,I);let A=0,C=!1;const P=I.reduce((U,q,oe)=>{if("object"==typeof q&&null!=q){if(q.outlets){const ke={};return Object.entries(q.outlets).forEach(([Ee,st])=>{ke[Ee]="string"==typeof st?st.split("/"):st}),[...U,{outlets:ke}]}if(q.segmentPath)return[...U,q.segmentPath]}return"string"!=typeof q?[...U,q]:0===oe?(q.split("/").forEach((ke,Ee)=>{0==Ee&&"."===ke||(0==Ee&&""===ke?C=!0:".."===ke?A++:""!=ke&&U.push(ke))}),U):[...U,q]},[]);return new Ks(C,A,P)}(A);if(q.toRoot())return Gi(U,U,new le([],{}),C,P);const oe=function ga(I,A,C){if(I.isAbsolute)return new Ns(A,!0,0);if(!C)return new Ns(A,!1,NaN);if(null===C.parent)return new Ns(C,!0,0);const P=Tn(I.commands[0])?0:1;return function La(I,A,C){let P=I,U=A,q=C;for(;q>U;){if(q-=U,P=P.parent,!P)throw new R.wOt(4005,!1);U=P.segments.length}return new Ns(P,!1,U-q)}(C,C.segments.length-1+P,I.numberOfDoubleDots)}(q,U,I),ke=oe.processChildren?ur(oe.segmentGroup,oe.index,q.commands):Vo(oe.segmentGroup,oe.index,q.commands);return Gi(U,oe.segmentGroup,ke,C,P)}function Tn(I){return"object"==typeof I&&null!=I&&!I.outlets&&!I.segmentPath}function Zr(I){return"object"==typeof I&&null!=I&&I.outlets}function Gi(I,A,C,P,U){let oe,q={};P&&Object.entries(P).forEach(([Ee,st])=>{q[Ee]=Array.isArray(st)?st.map(Lt=>`${Lt}`):`${st}`}),oe=I===A?C:ps(I,A,C);const ke=We(wt(oe));return new Z(ke,q,U)}function ps(I,A,C){const P={};return Object.entries(I.children).forEach(([U,q])=>{P[U]=q===A?C:ps(q,A,C)}),new le(I.segments,P)}class Ks{constructor(A,C,P){if(this.isAbsolute=A,this.numberOfDoubleDots=C,this.commands=P,A&&P.length>0&&Tn(P[0]))throw new R.wOt(4003,!1);const U=P.find(Zr);if(U&&U!==sr(P))throw new R.wOt(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ns{constructor(A,C,P){this.segmentGroup=A,this.processChildren=C,this.index=P}}function Vo(I,A,C){if(I??=new le([],{}),0===I.segments.length&&I.hasChildren())return ur(I,A,C);const P=function ma(I,A,C){let P=0,U=A;const q={match:!1,pathIndex:0,commandIndex:0};for(;U<I.segments.length;){if(P>=C.length)return q;const oe=I.segments[U],ke=C[P];if(Zr(ke))break;const Ee=`${ke}`,st=P<C.length-1?C[P+1]:null;if(U>0&&void 0===Ee)break;if(Ee&&st&&"object"==typeof st&&void 0===st.outlets){if(!Kn(Ee,st,oe))return q;P+=2}else{if(!Kn(Ee,{},oe))return q;P++}U++}return{match:!0,pathIndex:U,commandIndex:P}}(I,A,C),U=C.slice(P.commandIndex);if(P.match&&P.pathIndex<I.segments.length){const q=new le(I.segments.slice(0,P.pathIndex),{});return q.children[qt]=new le(I.segments.slice(P.pathIndex),I.children),ur(q,0,U)}return P.match&&0===U.length?new le(I.segments,{}):P.match&&!I.hasChildren()?fi(I,A,C):P.match?ur(I,0,U):fi(I,A,C)}function ur(I,A,C){if(0===C.length)return new le(I.segments,{});{const P=function Ua(I){return Zr(I[0])?I[0].outlets:{[qt]:I}}(C),U={};if(Object.keys(P).some(q=>q!==qt)&&I.children[qt]&&1===I.numberOfChildren&&0===I.children[qt].segments.length){const q=ur(I.children[qt],A,C);return new le(I.segments,q.children)}return Object.entries(P).forEach(([q,oe])=>{"string"==typeof oe&&(oe=[oe]),null!==oe&&(U[q]=Vo(I.children[q],A,oe))}),Object.entries(I.children).forEach(([q,oe])=>{void 0===P[q]&&(U[q]=oe)}),new le(I.segments,U)}}function fi(I,A,C){const P=I.segments.slice(0,A);let U=0;for(;U<C.length;){const q=C[U];if(Zr(q)){const Ee=Lo(q.outlets);return new le(P,Ee)}if(0===U&&Tn(C[0])){P.push(new se(I.segments[A].path,Ti(C[0]))),U++;continue}const oe=Zr(q)?q.outlets[qt]:`${q}`,ke=U<C.length-1?C[U+1]:null;oe&&ke&&Tn(ke)?(P.push(new se(oe,Ti(ke))),U+=2):(P.push(new se(oe,{})),U++)}return new le(P,{})}function Lo(I){const A={};return Object.entries(I).forEach(([C,P])=>{"string"==typeof P&&(P=[P]),null!==P&&(A[C]=fi(new le([],{}),0,P))}),A}function Ti(I){const A={};return Object.entries(I).forEach(([C,P])=>A[C]=`${P}`),A}function Kn(I,A,C){return I==C.path&&Fn(A,C.parameters)}const so="imperative";var pt=function(I){return I[I.NavigationStart=0]="NavigationStart",I[I.NavigationEnd=1]="NavigationEnd",I[I.NavigationCancel=2]="NavigationCancel",I[I.NavigationError=3]="NavigationError",I[I.RoutesRecognized=4]="RoutesRecognized",I[I.ResolveStart=5]="ResolveStart",I[I.ResolveEnd=6]="ResolveEnd",I[I.GuardsCheckStart=7]="GuardsCheckStart",I[I.GuardsCheckEnd=8]="GuardsCheckEnd",I[I.RouteConfigLoadStart=9]="RouteConfigLoadStart",I[I.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",I[I.ChildActivationStart=11]="ChildActivationStart",I[I.ChildActivationEnd=12]="ChildActivationEnd",I[I.ActivationStart=13]="ActivationStart",I[I.ActivationEnd=14]="ActivationEnd",I[I.Scroll=15]="Scroll",I[I.NavigationSkipped=16]="NavigationSkipped",I}(pt||{});class At{constructor(A,C){this.id=A,this.url=C}}class Jo extends At{constructor(A,C,P="imperative",U=null){super(A,C),this.type=pt.NavigationStart,this.navigationTrigger=P,this.restoredState=U}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ii extends At{constructor(A,C,P){super(A,C),this.urlAfterRedirects=P,this.type=pt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}var lr=function(I){return I[I.Redirect=0]="Redirect",I[I.SupersededByNewNavigation=1]="SupersededByNewNavigation",I[I.NoDataFromResolver=2]="NoDataFromResolver",I[I.GuardRejected=3]="GuardRejected",I}(lr||{}),Os=function(I){return I[I.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",I[I.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",I}(Os||{});class es extends At{constructor(A,C,P,U){super(A,C),this.reason=P,this.code=U,this.type=pt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Zn extends At{constructor(A,C,P,U){super(A,C),this.reason=P,this.code=U,this.type=pt.NavigationSkipped}}class An extends At{constructor(A,C,P,U){super(A,C),this.error=P,this.target=U,this.type=pt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class pi extends At{constructor(A,C,P,U){super(A,C),this.urlAfterRedirects=P,this.state=U,this.type=pt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ir extends At{constructor(A,C,P,U){super(A,C),this.urlAfterRedirects=P,this.state=U,this.type=pt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class br extends At{constructor(A,C,P,U,q){super(A,C),this.urlAfterRedirects=P,this.state=U,this.shouldActivate=q,this.type=pt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Qs extends At{constructor(A,C,P,U){super(A,C),this.urlAfterRedirects=P,this.state=U,this.type=pt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Xs extends At{constructor(A,C,P,U){super(A,C),this.urlAfterRedirects=P,this.state=U,this.type=pt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ys{constructor(A){this.route=A,this.type=pt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Uo{constructor(A){this.route=A,this.type=pt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class wo{constructor(A){this.snapshot=A,this.type=pt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _i{constructor(A){this.snapshot=A,this.type=pt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Wi{constructor(A){this.snapshot=A,this.type=pt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ao{constructor(A){this.snapshot=A,this.type=pt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Oi{}class oi{constructor(A,C){this.url=A,this.navigationBehaviorOptions=C}}function Rr(I){return I.outlet||qt}function Ho(I){if(!I)return null;if(I.routeConfig?._injector)return I.routeConfig._injector;for(let A=I.parent;A;A=A.parent){const C=A.routeConfig;if(C?._loadedInjector)return C._loadedInjector;if(C?._injector)return C._injector}return null}class uo{get injector(){return Ho(this.route?.snapshot)??this.rootInjector}set injector(A){}constructor(A){this.rootInjector=A,this.outlet=null,this.route=null,this.children=new ns(this.rootInjector),this.attachRef=null}}let ns=(()=>{class I{constructor(C){this.rootInjector=C,this.contexts=new Map}onChildOutletCreated(C,P){const U=this.getOrCreateContext(C);U.outlet=P,this.contexts.set(C,U)}onChildOutletDestroyed(C){const P=this.getContext(C);P&&(P.outlet=null,P.attachRef=null)}onOutletDeactivated(){const C=this.contexts;return this.contexts=new Map,C}onOutletReAttached(C){this.contexts=C}getOrCreateContext(C){let P=this.getContext(C);return P||(P=new uo(this.rootInjector),this.contexts.set(C,P)),P}getContext(C){return this.contexts.get(C)||null}static{this.\u0275fac=function(P){return new(P||I)(R.KVO(R.uvJ))}}static{this.\u0275prov=R.jDH({token:I,factory:I.\u0275fac,providedIn:"root"})}}return I})();class Fs{constructor(A){this._root=A}get root(){return this._root.value}parent(A){const C=this.pathFromRoot(A);return C.length>1?C[C.length-2]:null}children(A){const C=Zs(A,this._root);return C?C.children.map(P=>P.value):[]}firstChild(A){const C=Zs(A,this._root);return C&&C.children.length>0?C.children[0].value:null}siblings(A){const C=gi(A,this._root);return C.length<2?[]:C[C.length-2].children.map(U=>U.value).filter(U=>U!==A)}pathFromRoot(A){return gi(A,this._root).map(C=>C.value)}}function Zs(I,A){if(I===A.value)return A;for(const C of A.children){const P=Zs(I,C);if(P)return P}return null}function gi(I,A){if(I===A.value)return[A];for(const C of A.children){const P=gi(I,C);if(P.length)return P.unshift(A),P}return[]}class ki{constructor(A,C){this.value=A,this.children=C}toString(){return`TreeNode(${this.value})`}}function Sn(I){const A={};return I&&I.children.forEach(C=>A[C.value.outlet]=C),A}class lo extends Fs{constructor(A,C){super(A),this.snapshot=C,_a(this,A)}toString(){return this.snapshot.toString()}}function rr(I){const A=function Di(I){const q=new rs([],{},{},"",{},qt,I,null,{});return new is("",new ki(q,[]))}(I),C=new It.t([new se("",{})]),P=new It.t({}),U=new It.t({}),q=new It.t({}),oe=new It.t(""),ke=new si(C,P,q,oe,U,qt,I,A.root);return ke.snapshot=A.root,new lo(new ki(ke,[]),A)}class si{constructor(A,C,P,U,q,oe,ke,Ee){this.urlSubject=A,this.paramsSubject=C,this.queryParamsSubject=P,this.fragmentSubject=U,this.dataSubject=q,this.outlet=oe,this.component=ke,this._futureSnapshot=Ee,this.title=this.dataSubject?.pipe((0,Xt.T)(st=>st[Yt]))??$e(void 0),this.url=A,this.params=C,this.queryParams=P,this.fragment=U,this.data=q}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe((0,Xt.T)(A=>Pt(A))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe((0,Xt.T)(A=>Pt(A))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function qi(I,A,C="emptyOnly"){let P;const{routeConfig:U}=I;return P=null===A||"always"!==C&&""!==U?.path&&(A.component||A.routeConfig?.loadComponent)?{params:{...I.params},data:{...I.data},resolve:{...I.data,...I._resolvedData??{}}}:{params:{...A.params,...I.params},data:{...A.data,...I.data},resolve:{...I.data,...A.data,...U?.data,...I._resolvedData}},U&&ms(U)&&(P.resolve[Yt]=U.title),P}class rs{get title(){return this.data?.[Yt]}constructor(A,C,P,U,q,oe,ke,Ee,st){this.url=A,this.params=C,this.queryParams=P,this.fragment=U,this.data=q,this.outlet=oe,this.component=ke,this.routeConfig=Ee,this._resolve=st}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Pt(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Pt(this.queryParams),this._queryParamMap}toString(){return`Route(url:'${this.url.map(P=>P.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class is extends Fs{constructor(A,C){super(C),this.url=A,_a(this,C)}toString(){return sn(this._root)}}function _a(I,A){A.value._routerState=I,A.children.forEach(C=>_a(I,C))}function sn(I){const A=I.children.length>0?` { ${I.children.map(sn).join(", ")} } `:"";return`${I.value}${A}`}function Dn(I){if(I.snapshot){const A=I.snapshot,C=I._futureSnapshot;I.snapshot=C,Fn(A.queryParams,C.queryParams)||I.queryParamsSubject.next(C.queryParams),A.fragment!==C.fragment&&I.fragmentSubject.next(C.fragment),Fn(A.params,C.params)||I.paramsSubject.next(C.params),function or(I,A){if(I.length!==A.length)return!1;for(let C=0;C<I.length;++C)if(!Fn(I[C],A[C]))return!1;return!0}(A.url,C.url)||I.urlSubject.next(C.url),Fn(A.data,C.data)||I.dataSubject.next(C.data)}else I.snapshot=I._futureSnapshot,I.dataSubject.next(I._futureSnapshot.data)}function zr(I,A){const C=Fn(I.params,A.params)&&function Ce(I,A){return Xe(I,A)&&I.every((C,P)=>Fn(C.parameters,A[P].parameters))}(I.url,A.url);return C&&!(!I.parent!=!A.parent)&&(!I.parent||zr(I.parent,A.parent))}function ms(I){return"string"==typeof I.title||null===I.title}let Vs=(()=>{class I{constructor(){this.activated=null,this._activatedRoute=null,this.name=qt,this.activateEvents=new R.bkB,this.deactivateEvents=new R.bkB,this.attachEvents=new R.bkB,this.detachEvents=new R.bkB,this.parentContexts=(0,R.WQX)(ns),this.location=(0,R.WQX)(R.c1b),this.changeDetector=(0,R.WQX)(R.gRc),this.inputBinder=(0,R.WQX)(On,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(C){if(C.name){const{firstChange:P,previousValue:U}=C.name;if(P)return;this.isTrackedInParentContexts(U)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(U)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(C){return this.parentContexts.getContext(C)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const C=this.parentContexts.getContext(this.name);C?.route&&(C.attachRef?this.attach(C.attachRef,C.route):this.activateWith(C.route,C.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new R.wOt(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new R.wOt(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new R.wOt(4012,!1);this.location.detach();const C=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(C.instance),C}attach(C,P){this.activated=C,this._activatedRoute=P,this.location.insert(C.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(C.instance)}deactivate(){if(this.activated){const C=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(C)}}activateWith(C,P){if(this.isActivated)throw new R.wOt(4013,!1);this._activatedRoute=C;const U=this.location,oe=C.snapshot.component,ke=this.parentContexts.getOrCreateContext(this.name).children,Ee=new Fi(C,ke,U.injector);this.activated=U.createComponent(oe,{index:U.length,injector:Ee,environmentInjector:P}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(P){return new(P||I)}}static{this.\u0275dir=R.FsC({type:I,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[R.OA$]})}}return I})();class Fi{__ngOutletInjector(A){return new Fi(this.route,this.childContexts,A)}constructor(A,C,P){this.route=A,this.childContexts=C,this.parent=P}get(A,C){return A===si?this.route:A===ns?this.childContexts:this.parent.get(A,C)}}const On=new R.nKC("");function ho(I,A,C){if(C&&I.shouldReuseRoute(A.value,C.value.snapshot)){const P=C.value;P._futureSnapshot=A.value;const U=function ss(I,A,C){return A.children.map(P=>{for(const U of C.children)if(I.shouldReuseRoute(P.value,U.value.snapshot))return ho(I,P,U);return ho(I,P)})}(I,A,C);return new ki(P,U)}{if(I.shouldAttach(A.value)){const q=I.retrieve(A.value);if(null!==q){const oe=q.route;return oe.value._futureSnapshot=A.value,oe.children=A.children.map(ke=>ho(I,ke)),oe}}const P=function Ba(I){return new si(new It.t(I.url),new It.t(I.params),new It.t(I.queryParams),new It.t(I.fragment),new It.t(I.data),I.outlet,I.component,I)}(A.value),U=A.children.map(q=>ho(I,q));return new ki(P,U)}}class Qi{constructor(A,C){this.redirectTo=A,this.navigationBehaviorOptions=C}}const Vi="ngNavigationCancelingError";function ai(I,A){const{redirectTo:C,navigationBehaviorOptions:P}=$t(A)?{redirectTo:A,navigationBehaviorOptions:void 0}:A,U=_s(!1,lr.Redirect);return U.url=C,U.navigationBehaviorOptions=P,U}function _s(I,A){const C=new Error(`NavigationCancelingError: ${I||""}`);return C[Vi]=!0,C.cancellationCode=A,C}function Js(I){return!!I&&I[Vi]}class Go{constructor(A,C,P,U,q){this.routeReuseStrategy=A,this.futureState=C,this.currState=P,this.forwardEvent=U,this.inputBindingEnabled=q}activate(A){const C=this.futureState._root,P=this.currState?this.currState._root:null;this.deactivateChildRoutes(C,P,A),Dn(this.futureState.root),this.activateChildRoutes(C,P,A)}deactivateChildRoutes(A,C,P){const U=Sn(C);A.children.forEach(q=>{const oe=q.value.outlet;this.deactivateRoutes(q,U[oe],P),delete U[oe]}),Object.values(U).forEach(q=>{this.deactivateRouteAndItsChildren(q,P)})}deactivateRoutes(A,C,P){const U=A.value,q=C?C.value:null;if(U===q)if(U.component){const oe=P.getContext(U.outlet);oe&&this.deactivateChildRoutes(A,C,oe.children)}else this.deactivateChildRoutes(A,C,P);else q&&this.deactivateRouteAndItsChildren(C,P)}deactivateRouteAndItsChildren(A,C){A.value.component&&this.routeReuseStrategy.shouldDetach(A.value.snapshot)?this.detachAndStoreRouteSubtree(A,C):this.deactivateRouteAndOutlet(A,C)}detachAndStoreRouteSubtree(A,C){const P=C.getContext(A.value.outlet),U=P&&A.value.component?P.children:C,q=Sn(A);for(const oe of Object.values(q))this.deactivateRouteAndItsChildren(oe,U);if(P&&P.outlet){const oe=P.outlet.detach(),ke=P.children.onOutletDeactivated();this.routeReuseStrategy.store(A.value.snapshot,{componentRef:oe,route:A,contexts:ke})}}deactivateRouteAndOutlet(A,C){const P=C.getContext(A.value.outlet),U=P&&A.value.component?P.children:C,q=Sn(A);for(const oe of Object.values(q))this.deactivateRouteAndItsChildren(oe,U);P&&(P.outlet&&(P.outlet.deactivate(),P.children.onOutletDeactivated()),P.attachRef=null,P.route=null)}activateChildRoutes(A,C,P){const U=Sn(C);A.children.forEach(q=>{this.activateRoutes(q,U[q.value.outlet],P),this.forwardEvent(new ao(q.value.snapshot))}),A.children.length&&this.forwardEvent(new _i(A.value.snapshot))}activateRoutes(A,C,P){const U=A.value,q=C?C.value:null;if(Dn(U),U===q)if(U.component){const oe=P.getOrCreateContext(U.outlet);this.activateChildRoutes(A,C,oe.children)}else this.activateChildRoutes(A,C,P);else if(U.component){const oe=P.getOrCreateContext(U.outlet);if(this.routeReuseStrategy.shouldAttach(U.snapshot)){const ke=this.routeReuseStrategy.retrieve(U.snapshot);this.routeReuseStrategy.store(U.snapshot,null),oe.children.onOutletReAttached(ke.contexts),oe.attachRef=ke.componentRef,oe.route=ke.route.value,oe.outlet&&oe.outlet.attach(ke.componentRef,ke.route.value),Dn(ke.route.value),this.activateChildRoutes(A,null,oe.children)}else oe.attachRef=null,oe.route=U,oe.outlet&&oe.outlet.activateWith(U,oe.injector),this.activateChildRoutes(A,null,oe.children)}else this.activateChildRoutes(A,null,P)}}class va{constructor(A){this.path=A,this.route=this.path[this.path.length-1]}}class Li{constructor(A,C){this.component=A,this.route=C}}function ys(I,A,C){const P=I._root;return bi(P,A?A._root:null,C,[P.value])}function Gr(I,A){const C=Symbol(),P=A.get(I,C);return P===C?"function"!=typeof I||(0,R.LfX)(I)?A.get(I):I:P}function bi(I,A,C,P,U={canDeactivateChecks:[],canActivateChecks:[]}){const q=Sn(A);return I.children.forEach(oe=>{(function $a(I,A,C,P,U={canDeactivateChecks:[],canActivateChecks:[]}){const q=I.value,oe=A?A.value:null,ke=C?C.getContext(I.value.outlet):null;if(oe&&q.routeConfig===oe.routeConfig){const Ee=function vs(I,A,C){if("function"==typeof C)return C(I,A);switch(C){case"pathParamsChange":return!Xe(I.url,A.url);case"pathParamsOrQueryParamsChange":return!Xe(I.url,A.url)||!Fn(I.queryParams,A.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!zr(I,A)||!Fn(I.queryParams,A.queryParams);default:return!zr(I,A)}}(oe,q,q.routeConfig.runGuardsAndResolvers);Ee?U.canActivateChecks.push(new va(P)):(q.data=oe.data,q._resolvedData=oe._resolvedData),bi(I,A,q.component?ke?ke.children:null:C,P,U),Ee&&ke&&ke.outlet&&ke.outlet.isActivated&&U.canDeactivateChecks.push(new Li(ke.outlet.component,oe))}else oe&&Ls(A,ke,U),U.canActivateChecks.push(new va(P)),bi(I,null,q.component?ke?ke.children:null:C,P,U)})(oe,q[oe.value.outlet],C,P.concat([oe.value]),U),delete q[oe.value.outlet]}),Object.entries(q).forEach(([oe,ke])=>Ls(ke,C.getContext(oe),U)),U}function Ls(I,A,C){const P=Sn(I),U=I.value;Object.entries(P).forEach(([q,oe])=>{Ls(oe,U.component?A?A.children.getContext(q):null:A,C)}),C.canDeactivateChecks.push(new Li(U.component&&A&&A.outlet&&A.outlet.isActivated?A.outlet.component:null,U))}function as(I){return"function"==typeof I}function fo(I){return I instanceof he||"EmptyError"===I?.name}const ls=Symbol("INITIAL_VALUE");function yi(){return ce(I=>nn(I.map(A=>A.pipe(W(1),function K(...I){const A=(0,de.lI)(I);return(0,qe.N)((C,P)=>{(A?De(I,C,A):De(I,C)).subscribe(P)})}(ls)))).pipe((0,Xt.T)(A=>{for(const C of A)if(!0!==C){if(C===ls)return ls;if(!1===C||Ui(C))return C}return!0}),ye(A=>A!==ls),W(1)))}function Ui(I){return $t(I)||I instanceof Qi}function Jr(I){return(0,on.F)((0,un.M)(A=>{if("boolean"!=typeof A)throw ai(0,A)}),(0,Xt.T)(A=>!0===A))}class po{constructor(A){this.segmentGroup=A||null}}class Ai extends Error{constructor(A){super(),this.urlTree=A}}function ds(I){return fr(new po(I))}class Ca{constructor(A,C){this.urlSerializer=A,this.urlTree=C}lineralizeSegments(A,C){let P=[],U=C.root;for(;;){if(P=P.concat(U.segments),0===U.numberOfChildren)return $e(P);if(U.numberOfChildren>1||!U.children[qt])return fr(new R.wOt(4e3,!1));U=U.children[qt]}}applyRedirectCommands(A,C,P,U,q){if("string"!=typeof C){const ke=C,{queryParams:Ee,fragment:st,routeConfig:Lt,url:cn,outlet:Wt,params:yo,data:mr,title:pr}=U,Ei=(0,R.N4e)(q,()=>ke({params:yo,data:mr,queryParams:Ee,fragment:st,routeConfig:Lt,url:cn,outlet:Wt,title:pr}));if(Ei instanceof Z)throw new Ai(Ei);C=Ei}const oe=this.applyRedirectCreateUrlTree(C,this.urlSerializer.parse(C),A,P);if("/"===C[0])throw new Ai(oe);return oe}applyRedirectCreateUrlTree(A,C,P,U){const q=this.createSegmentGroup(A,C.root,P,U);return new Z(q,this.createQueryParams(C.queryParams,this.urlTree.queryParams),C.fragment)}createQueryParams(A,C){const P={};return Object.entries(A).forEach(([U,q])=>{if("string"==typeof q&&":"===q[0]){const ke=q.substring(1);P[U]=C[ke]}else P[U]=q}),P}createSegmentGroup(A,C,P,U){const q=this.createSegments(A,C.segments,P,U);let oe={};return Object.entries(C.children).forEach(([ke,Ee])=>{oe[ke]=this.createSegmentGroup(A,Ee,P,U)}),new le(q,oe)}createSegments(A,C,P,U){return C.map(q=>":"===q.path[0]?this.findPosParam(A,q,U):this.findOrReturn(q,P))}findPosParam(A,C,P){const U=P[C.path.substring(1)];if(!U)throw new R.wOt(4001,!1);return U}findOrReturn(A,C){let P=0;for(const U of C){if(U.path===A.path)return C.splice(P),U;P++}return A}}const ra={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Vc(I,A,C,P,U){const q=Wo(I,A,C);return q.matched?(P=function Do(I,A){return I.providers&&!I._injector&&(I._injector=(0,R.Ol2)(I.providers,A,`Route: ${I.path}`)),I._injector??A}(A,P),function lc(I,A,C,P){const U=A.canMatch;return U&&0!==U.length?$e(U.map(oe=>{const ke=Gr(oe,I);return jn(function nt(I){return I&&as(I.canMatch)}(ke)?ke.canMatch(A,C):(0,R.N4e)(I,()=>ke(A,C)))})).pipe(yi(),Jr()):$e(!0)}(P,A,C).pipe((0,Xt.T)(oe=>!0===oe?q:{...ra}))):$e(q)}function Wo(I,A,C){if("**"===A.path)return function dc(I){return{matched:!0,parameters:I.length>0?sr(I).parameters:{},consumedSegments:I,remainingSegments:[],positionalParamSegments:{}}}(C);if(""===A.path)return"full"===A.pathMatch&&(I.hasChildren()||C.length>0)?{...ra}:{matched:!0,consumedSegments:[],remainingSegments:C,parameters:{},positionalParamSegments:{}};const U=(A.matcher||lt)(C,I,A);if(!U)return{...ra};const q={};Object.entries(U.posParams??{}).forEach(([ke,Ee])=>{q[ke]=Ee.path});const oe=U.consumed.length>0?{...q,...U.consumed[U.consumed.length-1].parameters}:q;return{matched:!0,consumedSegments:U.consumed,remainingSegments:C.slice(U.consumed.length),parameters:oe,positionalParamSegments:U.posParams??{}}}function za(I,A,C,P){return C.length>0&&function Xi(I,A,C){return C.some(P=>Bi(I,A,P)&&Rr(P)!==qt)}(I,C,P)?{segmentGroup:new le(A,Us(P,new le(C,I.children))),slicedSegments:[]}:0===C.length&&function wa(I,A,C){return C.some(P=>Bi(I,A,P))}(I,C,P)?{segmentGroup:new le(I.segments,go(I,C,P,I.children)),slicedSegments:C}:{segmentGroup:new le(I.segments,I.children),slicedSegments:C}}function go(I,A,C,P){const U={};for(const q of C)if(Bi(I,A,q)&&!P[Rr(q)]){const oe=new le([],{});U[Rr(q)]=oe}return{...P,...U}}function Us(I,A){const C={};C[qt]=A;for(const P of I)if(""===P.path&&Rr(P)!==qt){const U=new le([],{});C[Rr(P)]=U}return C}function Bi(I,A,C){return(!(I.hasChildren()||A.length>0)||"full"!==C.pathMatch)&&""===C.path}class mo{}class Es{constructor(A,C,P,U,q,oe,ke){this.injector=A,this.configLoader=C,this.rootComponentType=P,this.config=U,this.urlTree=q,this.paramsInheritanceStrategy=oe,this.urlSerializer=ke,this.applyRedirects=new Ca(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(A){return new R.wOt(4002,`'${A.segmentGroup}'`)}recognize(){const A=za(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(A).pipe((0,Xt.T)(({children:C,rootSnapshot:P})=>{const U=new ki(P,C),q=new is("",U),oe=function yn(I,A,C=null,P=null){return Ot(ar(I),A,C,P)}(P,[],this.urlTree.queryParams,this.urlTree.fragment);return oe.queryParams=this.urlTree.queryParams,q.url=this.urlSerializer.serialize(oe),{state:q,tree:oe}}))}match(A){const C=new rs([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Object.freeze({}),qt,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,A,qt,C).pipe((0,Xt.T)(P=>({children:P,rootSnapshot:C})),qn(P=>{if(P instanceof Ai)return this.urlTree=P.urlTree,this.match(P.urlTree.root);throw P instanceof po?this.noMatchError(P):P}))}processSegmentGroup(A,C,P,U,q){return 0===P.segments.length&&P.hasChildren()?this.processChildren(A,C,P,q):this.processSegment(A,C,P,P.segments,U,!0,q).pipe((0,Xt.T)(oe=>oe instanceof ki?[oe]:[]))}processChildren(A,C,P,U){const q=[];for(const oe of Object.keys(P.children))"primary"===oe?q.unshift(oe):q.push(oe);return(0,Le.H)(q).pipe(Gt(oe=>{const ke=P.children[oe],Ee=function ts(I,A){const C=I.filter(P=>Rr(P)===A);return C.push(...I.filter(P=>Rr(P)!==A)),C}(C,oe);return this.processSegmentGroup(A,Ee,ke,oe,U)}),function zn(I,A){return(0,qe.N)(function Ur(I,A,C,P,U){return(q,oe)=>{let ke=C,Ee=A,st=0;q.subscribe((0,Tt._)(oe,Lt=>{const cn=st++;Ee=ke?I(Ee,Lt,cn):(ke=!0,Lt),P&&oe.next(Ee)},U&&(()=>{ke&&oe.next(Ee),oe.complete()})))}}(I,A,arguments.length>=2,!0))}((oe,ke)=>(oe.push(...ke),oe)),Oe(null),function yr(I,A){const C=arguments.length>=2;return P=>P.pipe(I?ye((U,q)=>I(U,q,P)):Ge.D,Un(1),C?Oe(A):Et(()=>new he))}(),it(oe=>{if(null===oe)return ds(P);const ke=dr(oe);return function Ga(I){I.sort((A,C)=>A.value.outlet===qt?-1:C.value.outlet===qt?1:A.value.outlet.localeCompare(C.value.outlet))}(ke),$e(ke)}))}processSegment(A,C,P,U,q,oe,ke){return(0,Le.H)(C).pipe(Gt(Ee=>this.processSegmentAgainstRoute(Ee._injector??A,C,Ee,P,U,q,oe,ke).pipe(qn(st=>{if(st instanceof po)return $e(null);throw st}))),En(Ee=>!!Ee),qn(Ee=>{if(fo(Ee))return function Ta(I,A,C){return 0===A.length&&!I.children[C]}(P,U,q)?$e(new mo):ds(P);throw Ee}))}processSegmentAgainstRoute(A,C,P,U,q,oe,ke,Ee){return Rr(P)===oe||oe!==qt&&Bi(U,q,P)?void 0===P.redirectTo?this.matchSegmentAgainstRoute(A,U,P,q,oe,Ee):this.allowRedirects&&ke?this.expandSegmentAgainstRouteUsingRedirect(A,U,C,P,q,oe,Ee):ds(U):ds(U)}expandSegmentAgainstRouteUsingRedirect(A,C,P,U,q,oe,ke){const{matched:Ee,parameters:st,consumedSegments:Lt,positionalParamSegments:cn,remainingSegments:Wt}=Wo(C,U,q);if(!Ee)return ds(C);"string"==typeof U.redirectTo&&"/"===U.redirectTo[0]&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const yo=new rs(q,st,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Da(U),Rr(U),U.component??U._loadedComponent??null,U,ba(U)),mr=qi(yo,ke,this.paramsInheritanceStrategy);yo.params=Object.freeze(mr.params),yo.data=Object.freeze(mr.data);const pr=this.applyRedirects.applyRedirectCommands(Lt,U.redirectTo,cn,yo,A);return this.applyRedirects.lineralizeSegments(U,pr).pipe(it(Ei=>this.processSegment(A,P,C,Ei.concat(Wt),oe,!1,ke)))}matchSegmentAgainstRoute(A,C,P,U,q,oe){const ke=Vc(C,P,U,A);return"**"===P.path&&(C.children={}),ke.pipe(ce(Ee=>Ee.matched?this.getChildConfig(A=P._injector??A,P,U).pipe(ce(({routes:st})=>{const Lt=P._loadedInjector??A,{parameters:cn,consumedSegments:Wt,remainingSegments:yo}=Ee,mr=new rs(Wt,cn,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Da(P),Rr(P),P.component??P._loadedComponent??null,P,ba(P)),pr=qi(mr,oe,this.paramsInheritanceStrategy);mr.params=Object.freeze(pr.params),mr.data=Object.freeze(pr.data);const{segmentGroup:Ei,slicedSegments:kr}=za(C,Wt,yo,st);if(0===kr.length&&Ei.hasChildren())return this.processChildren(Lt,st,Ei,mr).pipe((0,Xt.T)(mi=>new ki(mr,mi)));if(0===st.length&&0===kr.length)return $e(new ki(mr,[]));const vo=Rr(P)===q;return this.processSegment(Lt,st,Ei,kr,vo?qt:q,!0,mr).pipe((0,Xt.T)(mi=>new ki(mr,mi instanceof ki?[mi]:[])))})):ds(C)))}getChildConfig(A,C,P){return C.children?$e({routes:C.children,injector:A}):C.loadChildren?void 0!==C._loadedRoutes?$e({routes:C._loadedRoutes,injector:C._loadedInjector}):function Ia(I,A,C,P){const U=A.canLoad;return void 0===U||0===U.length?$e(!0):$e(U.map(oe=>{const ke=Gr(oe,I);return jn(function Wr(I){return I&&as(I.canLoad)}(ke)?ke.canLoad(A,C):(0,R.N4e)(I,()=>ke(A,C)))})).pipe(yi(),Jr())}(A,C,P).pipe(it(U=>U?this.configLoader.loadChildren(A,C).pipe((0,un.M)(q=>{C._loadedRoutes=q.routes,C._loadedInjector=q.injector})):function na(){return fr(_s(!1,lr.GuardRejected))}())):$e({routes:[],injector:A})}}function hu(I){const A=I.value.routeConfig;return A&&""===A.path}function dr(I){const A=[],C=new Set;for(const P of I){if(!hu(P)){A.push(P);continue}const U=A.find(q=>P.value.routeConfig===q.value.routeConfig);void 0!==U?(U.children.push(...P.children),C.add(U)):A.push(P)}for(const P of C){const U=dr(P.children);A.push(new ki(P.value,U))}return A.filter(P=>!C.has(P))}function Da(I){return I.data||{}}function ba(I){return I.resolve||{}}function N(I){const A=I.children.map(C=>N(C)).flat();return[I,...A]}function F(I){return ce(A=>{const C=I(A);return C?(0,Le.H)(C).pipe((0,Xt.T)(()=>A)):$e(A)})}let v=(()=>{class I{buildTitle(C){let P,U=C.root;for(;void 0!==U;)P=this.getResolvedTitleForRoute(U)??P,U=U.children.find(q=>q.outlet===qt);return P}getResolvedTitleForRoute(C){return C.data[Yt]}static{this.\u0275fac=function(P){return new(P||I)}}static{this.\u0275prov=R.jDH({token:I,factory:()=>(0,R.WQX)(k),providedIn:"root"})}}return I})(),k=(()=>{class I extends v{constructor(C){super(),this.title=C}updateTitle(C){const P=this.buildTitle(C);void 0!==P&&this.title.setTitle(P)}static{this.\u0275fac=function(P){return new(P||I)(R.KVO(Ct.hE))}}static{this.\u0275prov=R.jDH({token:I,factory:I.\u0275fac,providedIn:"root"})}}return I})();const M=new R.nKC("",{providedIn:"root",factory:()=>({})});let j=(()=>{class I{static{this.\u0275fac=function(P){return new(P||I)}}static{this.\u0275cmp=R.VBU({type:I,selectors:[["ng-component"]],standalone:!0,features:[R.aNF],decls:1,vars:0,template:function(P,U){1&P&&R.nrm(0,"router-outlet")},dependencies:[Vs],encapsulation:2})}}return I})();function ee(I){const A=I.children&&I.children.map(ee),C=A?{...I,children:A}:{...I};return!C.component&&!C.loadComponent&&(A||C.loadChildren)&&C.outlet&&C.outlet!==qt&&(C.component=j),C}const Re=new R.nKC("");let Ke=(()=>{class I{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,R.WQX)(R.Ql9)}loadComponent(C){if(this.componentLoaders.get(C))return this.componentLoaders.get(C);if(C._loadedComponent)return $e(C._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(C);const P=jn(C.loadComponent()).pipe((0,Xt.T)(dn),(0,un.M)(q=>{this.onLoadEndListener&&this.onLoadEndListener(C),C._loadedComponent=q}),ut(()=>{this.componentLoaders.delete(C)})),U=new yt(P,()=>new Dt.B).pipe(Lr());return this.componentLoaders.set(C,U),U}loadChildren(C,P){if(this.childrenLoaders.get(P))return this.childrenLoaders.get(P);if(P._loadedRoutes)return $e({routes:P._loadedRoutes,injector:P._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(P);const q=function xt(I,A,C,P){return jn(I.loadChildren()).pipe((0,Xt.T)(dn),it(U=>U instanceof R.Co$||Array.isArray(U)?$e(U):(0,Le.H)(A.compileModuleAsync(U))),(0,Xt.T)(U=>{P&&P(I);let q,oe,ke=!1;return Array.isArray(U)?(oe=U,!0):(q=U.create(C).injector,oe=q.get(Re,[],{optional:!0,self:!0}).flat()),{routes:oe.map(ee),injector:q}}))}(P,this.compiler,C,this.onLoadEndListener).pipe(ut(()=>{this.childrenLoaders.delete(P)})),oe=new yt(q,()=>new Dt.B).pipe(Lr());return this.childrenLoaders.set(P,oe),oe}static{this.\u0275fac=function(P){return new(P||I)}}static{this.\u0275prov=R.jDH({token:I,factory:I.\u0275fac,providedIn:"root"})}}return I})();function dn(I){return function Qn(I){return I&&"object"==typeof I&&"default"in I}(I)?I.default:I}let Ut=(()=>{class I{static{this.\u0275fac=function(P){return new(P||I)}}static{this.\u0275prov=R.jDH({token:I,factory:()=>(0,R.WQX)(Vn),providedIn:"root"})}}return I})(),Vn=(()=>{class I{shouldProcessUrl(C){return!0}extract(C){return C}merge(C,P){return C}static{this.\u0275fac=function(P){return new(P||I)}}static{this.\u0275prov=R.jDH({token:I,factory:I.\u0275fac,providedIn:"root"})}}return I})();const Er=new R.nKC(""),er=new R.nKC("");let Kr=(()=>{class I{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Dt.B,this.transitionAbortSubject=new Dt.B,this.configLoader=(0,R.WQX)(Ke),this.environmentInjector=(0,R.WQX)(R.uvJ),this.urlSerializer=(0,R.WQX)(re),this.rootContexts=(0,R.WQX)(ns),this.location=(0,R.WQX)(Ne.aZ),this.inputBindingEnabled=null!==(0,R.WQX)(On,{optional:!0}),this.titleStrategy=(0,R.WQX)(v),this.options=(0,R.WQX)(M,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=(0,R.WQX)(Ut),this.createViewTransition=(0,R.WQX)(Er,{optional:!0}),this.navigationErrorHandler=(0,R.WQX)(er,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>$e(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=U=>this.events.next(new Uo(U)),this.configLoader.onLoadStartListener=U=>this.events.next(new Ys(U))}complete(){this.transitions?.complete()}handleNavigationRequest(C){const P=++this.navigationId;this.transitions?.next({...this.transitions.value,...C,id:P})}setupNavigations(C,P,U){return this.transitions=new It.t({id:0,currentUrlTree:P,currentRawUrl:P,extractedUrl:this.urlHandlingStrategy.extract(P),urlAfterRedirects:this.urlHandlingStrategy.extract(P),rawUrl:P,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:so,restoredState:null,currentSnapshot:U.snapshot,targetSnapshot:null,currentRouterState:U,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ye(q=>0!==q.id),(0,Xt.T)(q=>({...q,extractedUrl:this.urlHandlingStrategy.extract(q.rawUrl)})),ce(q=>{let oe=!1,ke=!1;return $e(q).pipe(ce(Ee=>{if(this.navigationId>q.id)return this.cancelNavigationTransition(q,"",lr.SupersededByNewNavigation),Hn;this.currentTransition=q,this.currentNavigation={id:Ee.id,initialUrl:Ee.rawUrl,extractedUrl:Ee.extractedUrl,targetBrowserUrl:"string"==typeof Ee.extras.browserUrl?this.urlSerializer.parse(Ee.extras.browserUrl):Ee.extras.browserUrl,trigger:Ee.source,extras:Ee.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null};const st=!C.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl();if(!st&&"reload"!==(Ee.extras.onSameUrlNavigation??C.onSameUrlNavigation)){const cn="";return this.events.next(new Zn(Ee.id,this.urlSerializer.serialize(Ee.rawUrl),cn,Os.IgnoredSameUrlNavigation)),Ee.resolve(!1),Hn}if(this.urlHandlingStrategy.shouldProcessUrl(Ee.rawUrl))return $e(Ee).pipe(ce(cn=>{const Wt=this.transitions?.getValue();return this.events.next(new Jo(cn.id,this.urlSerializer.serialize(cn.extractedUrl),cn.source,cn.restoredState)),Wt!==this.transitions?.getValue()?Hn:Promise.resolve(cn)}),function Wa(I,A,C,P,U,q){return it(oe=>function Yi(I,A,C,P,U,q,oe="emptyOnly"){return new Es(I,A,C,P,U,oe,q).recognize()}(I,A,C,P,oe.extractedUrl,U,q).pipe((0,Xt.T)(({state:ke,tree:Ee})=>({...oe,targetSnapshot:ke,urlAfterRedirects:Ee}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,C.config,this.urlSerializer,this.paramsInheritanceStrategy),(0,un.M)(cn=>{q.targetSnapshot=cn.targetSnapshot,q.urlAfterRedirects=cn.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:cn.urlAfterRedirects};const Wt=new pi(cn.id,this.urlSerializer.serialize(cn.extractedUrl),this.urlSerializer.serialize(cn.urlAfterRedirects),cn.targetSnapshot);this.events.next(Wt)}));if(st&&this.urlHandlingStrategy.shouldProcessUrl(Ee.currentRawUrl)){const{id:cn,extractedUrl:Wt,source:yo,restoredState:mr,extras:pr}=Ee,Ei=new Jo(cn,this.urlSerializer.serialize(Wt),yo,mr);this.events.next(Ei);const kr=rr(this.rootComponentType).snapshot;return this.currentTransition=q={...Ee,targetSnapshot:kr,urlAfterRedirects:Wt,extras:{...pr,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.finalUrl=Wt,$e(q)}{const cn="";return this.events.next(new Zn(Ee.id,this.urlSerializer.serialize(Ee.extractedUrl),cn,Os.IgnoredByUrlHandlingStrategy)),Ee.resolve(!1),Hn}}),(0,un.M)(Ee=>{const st=new Ir(Ee.id,this.urlSerializer.serialize(Ee.extractedUrl),this.urlSerializer.serialize(Ee.urlAfterRedirects),Ee.targetSnapshot);this.events.next(st)}),(0,Xt.T)(Ee=>(this.currentTransition=q={...Ee,guards:ys(Ee.targetSnapshot,Ee.currentSnapshot,this.rootContexts)},q)),function Is(I,A){return it(C=>{const{targetSnapshot:P,currentSnapshot:U,guards:{canActivateChecks:q,canDeactivateChecks:oe}}=C;return 0===oe.length&&0===q.length?$e({...C,guardsResult:!0}):function ta(I,A,C,P){return(0,Le.H)(I).pipe(it(U=>function ji(I,A,C,P,U){const q=A&&A.routeConfig?A.routeConfig.canDeactivate:null;return q&&0!==q.length?$e(q.map(ke=>{const Ee=Ho(A)??U,st=Gr(ke,Ee);return jn(function Ha(I){return I&&as(I.canDeactivate)}(st)?st.canDeactivate(I,A,C,P):(0,R.N4e)(Ee,()=>st(I,A,C,P))).pipe(En())})).pipe(yi()):$e(!0)}(U.component,U.route,C,A,P)),En(U=>!0!==U,!0))}(oe,P,U,I).pipe(it(ke=>ke&&function bo(I){return"boolean"==typeof I}(ke)?function wn(I,A,C,P){return(0,Le.H)(A).pipe(Gt(U=>De(function qr(I,A){return null!==I&&A&&A(new wo(I)),$e(!0)}(U.route.parent,P),function Jn(I,A){return null!==I&&A&&A(new Wi(I)),$e(!0)}(U.route,P),function ci(I,A,C){const P=A[A.length-1],q=A.slice(0,A.length-1).reverse().map(oe=>function ir(I){const A=I.routeConfig?I.routeConfig.canActivateChild:null;return A&&0!==A.length?{node:I,guards:A}:null}(oe)).filter(oe=>null!==oe).map(oe=>rn(()=>$e(oe.guards.map(Ee=>{const st=Ho(oe.node)??C,Lt=Gr(Ee,st);return jn(function us(I){return I&&as(I.canActivateChild)}(Lt)?Lt.canActivateChild(P,I):(0,R.N4e)(st,()=>Lt(P,I))).pipe(En())})).pipe(yi())));return $e(q).pipe(yi())}(I,U.path,C),function Mr(I,A,C){const P=A.routeConfig?A.routeConfig.canActivate:null;if(!P||0===P.length)return $e(!0);const U=P.map(q=>rn(()=>{const oe=Ho(A)??C,ke=Gr(q,oe);return jn(function cs(I){return I&&as(I.canActivate)}(ke)?ke.canActivate(A,I):(0,R.N4e)(oe,()=>ke(A,I))).pipe(En())}));return $e(U).pipe(yi())}(I,U.route,C))),En(U=>!0!==U,!0))}(P,q,I,A):$e(ke)),(0,Xt.T)(ke=>({...C,guardsResult:ke})))})}(this.environmentInjector,Ee=>this.events.next(Ee)),(0,un.M)(Ee=>{if(q.guardsResult=Ee.guardsResult,Ee.guardsResult&&"boolean"!=typeof Ee.guardsResult)throw ai(0,Ee.guardsResult);const st=new br(Ee.id,this.urlSerializer.serialize(Ee.extractedUrl),this.urlSerializer.serialize(Ee.urlAfterRedirects),Ee.targetSnapshot,!!Ee.guardsResult);this.events.next(st)}),ye(Ee=>!!Ee.guardsResult||(this.cancelNavigationTransition(Ee,"",lr.GuardRejected),!1)),F(Ee=>{if(Ee.guards.canActivateChecks.length)return $e(Ee).pipe((0,un.M)(st=>{const Lt=new Qs(st.id,this.urlSerializer.serialize(st.extractedUrl),this.urlSerializer.serialize(st.urlAfterRedirects),st.targetSnapshot);this.events.next(Lt)}),ce(st=>{let Lt=!1;return $e(st).pipe(function Ao(I,A){return it(C=>{const{targetSnapshot:P,guards:{canActivateChecks:U}}=C;if(!U.length)return $e(C);const q=new Set(U.map(Ee=>Ee.route)),oe=new Set;for(const Ee of q)if(!oe.has(Ee))for(const st of N(Ee))oe.add(st);let ke=0;return(0,Le.H)(oe).pipe(Gt(Ee=>q.has(Ee)?function L(I,A,C,P){const U=I.routeConfig,q=I._resolve;return void 0!==U?.title&&!ms(U)&&(q[Yt]=U.title),function f(I,A,C,P){const U=Sr(I);if(0===U.length)return $e({});const q={};return(0,Le.H)(U).pipe(it(oe=>function S(I,A,C,P){const U=Ho(A)??P,q=Gr(I,U);return jn(q.resolve?q.resolve(A,C):(0,R.N4e)(U,()=>q(A,C)))}(I[oe],A,C,P).pipe(En(),(0,un.M)(ke=>{if(ke instanceof Qi)throw ai(new ne,ke);q[oe]=ke}))),Un(1),function Nt(I){return(0,Xt.T)(()=>I)}(q),qn(oe=>fo(oe)?Hn:fr(oe)))}(q,I,A,P).pipe((0,Xt.T)(oe=>(I._resolvedData=oe,I.data=qi(I,I.parent,C).resolve,null)))}(Ee,P,I,A):(Ee.data=qi(Ee,Ee.parent,I).resolve,$e(void 0))),(0,un.M)(()=>ke++),Un(1),it(Ee=>ke===oe.size?$e(C):Hn))})}(this.paramsInheritanceStrategy,this.environmentInjector),(0,un.M)({next:()=>Lt=!0,complete:()=>{Lt||this.cancelNavigationTransition(st,"",lr.NoDataFromResolver)}}))}),(0,un.M)(st=>{const Lt=new Xs(st.id,this.urlSerializer.serialize(st.extractedUrl),this.urlSerializer.serialize(st.urlAfterRedirects),st.targetSnapshot);this.events.next(Lt)}))}),F(Ee=>{const st=Lt=>{const cn=[];Lt.routeConfig?.loadComponent&&!Lt.routeConfig._loadedComponent&&cn.push(this.configLoader.loadComponent(Lt.routeConfig).pipe((0,un.M)(Wt=>{Lt.component=Wt}),(0,Xt.T)(()=>{})));for(const Wt of Lt.children)cn.push(...st(Wt));return cn};return nn(st(Ee.targetSnapshot.root)).pipe(Oe(null),W(1))}),F(()=>this.afterPreactivation()),ce(()=>{const{currentSnapshot:Ee,targetSnapshot:st}=q,Lt=this.createViewTransition?.(this.environmentInjector,Ee.root,st.root);return Lt?(0,Le.H)(Lt).pipe((0,Xt.T)(()=>q)):$e(q)}),(0,Xt.T)(Ee=>{const st=function os(I,A,C){const P=ho(I,A._root,C?C._root:void 0);return new lo(P,A)}(C.routeReuseStrategy,Ee.targetSnapshot,Ee.currentRouterState);return this.currentTransition=q={...Ee,targetRouterState:st},this.currentNavigation.targetRouterState=st,q}),(0,un.M)(()=>{this.events.next(new Oi)}),((I,A,C,P)=>(0,Xt.T)(U=>(new Go(A,U.targetRouterState,U.currentRouterState,C,P).activate(I),U)))(this.rootContexts,C.routeReuseStrategy,Ee=>this.events.next(Ee),this.inputBindingEnabled),W(1),(0,un.M)({next:Ee=>{oe=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new ii(Ee.id,this.urlSerializer.serialize(Ee.extractedUrl),this.urlSerializer.serialize(Ee.urlAfterRedirects))),this.titleStrategy?.updateTitle(Ee.targetRouterState.snapshot),Ee.resolve(!0)},complete:()=>{oe=!0}}),function Rn(I){return(0,qe.N)((A,C)=>{(0,ct.Tg)(I).subscribe((0,Tt._)(C,()=>C.complete(),di.l)),!C.closed&&A.subscribe(C)})}(this.transitionAbortSubject.pipe((0,un.M)(Ee=>{throw Ee}))),ut(()=>{!oe&&!ke&&this.cancelNavigationTransition(q,"",lr.SupersededByNewNavigation),this.currentTransition?.id===q.id&&(this.currentNavigation=null,this.currentTransition=null)}),qn(Ee=>{if(ke=!0,Js(Ee))this.events.next(new es(q.id,this.urlSerializer.serialize(q.extractedUrl),Ee.message,Ee.cancellationCode)),function ya(I){return Js(I)&&$t(I.url)}(Ee)?this.events.next(new oi(Ee.url,Ee.navigationBehaviorOptions)):q.resolve(!1);else{const st=new An(q.id,this.urlSerializer.serialize(q.extractedUrl),Ee,q.targetSnapshot??void 0);try{const Lt=(0,R.N4e)(this.environmentInjector,()=>this.navigationErrorHandler?.(st));if(Lt instanceof Qi){const{message:cn,cancellationCode:Wt}=ai(0,Lt);this.events.next(new es(q.id,this.urlSerializer.serialize(q.extractedUrl),cn,Wt)),this.events.next(new oi(Lt.redirectTo,Lt.navigationBehaviorOptions))}else{this.events.next(st);const cn=C.errorHandler(Ee);q.resolve(!!cn)}}catch(Lt){this.options.resolveNavigationPromiseOnError?q.resolve(!1):q.reject(Lt)}}return Hn}))}))}cancelNavigationTransition(C,P,U){const q=new es(C.id,this.urlSerializer.serialize(C.extractedUrl),P,U);this.events.next(q),C.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){const C=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),P=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return C.toString()!==P?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(P){return new(P||I)}}static{this.\u0275prov=R.jDH({token:I,factory:I.\u0275fac,providedIn:"root"})}}return I})();function Cr(I){return I!==so}let Nr=(()=>{class I{static{this.\u0275fac=function(P){return new(P||I)}}static{this.\u0275prov=R.jDH({token:I,factory:()=>(0,R.WQX)($n),providedIn:"root"})}}return I})();class vi{shouldDetach(A){return!1}store(A,C){}shouldAttach(A){return!1}retrieve(A){return null}shouldReuseRoute(A,C){return A.routeConfig===C.routeConfig}}let $n=(()=>{class I extends vi{static{this.\u0275fac=(()=>{let C;return function(U){return(C||(C=R.xGo(I)))(U||I)}})()}static{this.\u0275prov=R.jDH({token:I,factory:I.\u0275fac,providedIn:"root"})}}return I})(),wr=(()=>{class I{static{this.\u0275fac=function(P){return new(P||I)}}static{this.\u0275prov=R.jDH({token:I,factory:()=>(0,R.WQX)(Si),providedIn:"root"})}}return I})(),Si=(()=>{class I extends wr{constructor(){super(...arguments),this.location=(0,R.WQX)(Ne.aZ),this.urlSerializer=(0,R.WQX)(re),this.options=(0,R.WQX)(M,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=(0,R.WQX)(Ut),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Z,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=rr(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(C){return this.location.subscribe(P=>{"popstate"===P.type&&C(P.url,P.state)})}handleRouterEvent(C,P){if(C instanceof Jo)this.stateMemento=this.createStateMemento();else if(C instanceof Zn)this.rawUrlTree=P.initialUrl;else if(C instanceof pi){if("eager"===this.urlUpdateStrategy&&!P.extras.skipLocationChange){const U=this.urlHandlingStrategy.merge(P.finalUrl,P.initialUrl);this.setBrowserUrl(P.targetBrowserUrl??U,P)}}else C instanceof Oi?(this.currentUrlTree=P.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(P.finalUrl,P.initialUrl),this.routerState=P.targetRouterState,"deferred"===this.urlUpdateStrategy&&!P.extras.skipLocationChange&&this.setBrowserUrl(P.targetBrowserUrl??this.rawUrlTree,P)):C instanceof es&&(C.code===lr.GuardRejected||C.code===lr.NoDataFromResolver)?this.restoreHistory(P):C instanceof An?this.restoreHistory(P,!0):C instanceof ii&&(this.lastSuccessfulId=C.id,this.currentPageId=this.browserPageId)}setBrowserUrl(C,P){const U=C instanceof Z?this.urlSerializer.serialize(C):C;if(this.location.isCurrentPathEqualTo(U)||P.extras.replaceUrl){const oe={...P.extras.state,...this.generateNgRouterState(P.id,this.browserPageId)};this.location.replaceState(U,"",oe)}else{const q={...P.extras.state,...this.generateNgRouterState(P.id,this.browserPageId+1)};this.location.go(U,"",q)}}restoreHistory(C,P=!1){if("computed"===this.canceledNavigationResolution){const q=this.currentPageId-this.browserPageId;0!==q?this.location.historyGo(q):this.currentUrlTree===C.finalUrl&&0===q&&(this.resetState(C),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(P&&this.resetState(C),this.resetUrlToCurrentUrlTree())}resetState(C){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,C.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(C,P){return"computed"===this.canceledNavigationResolution?{navigationId:C,\u0275routerPageId:P}:{navigationId:C}}static{this.\u0275fac=(()=>{let C;return function(U){return(C||(C=R.xGo(I)))(U||I)}})()}static{this.\u0275prov=R.jDH({token:I,factory:I.\u0275fac,providedIn:"root"})}}return I})();var an=function(I){return I[I.COMPLETE=0]="COMPLETE",I[I.FAILED=1]="FAILED",I[I.REDIRECTING=2]="REDIRECTING",I}(an||{});function hc(I){throw I}const ia={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},xr={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Zi=(()=>{class I{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=(0,R.WQX)(R.H3F),this.stateManager=(0,R.WQX)(wr),this.options=(0,R.WQX)(M,{optional:!0})||{},this.pendingTasks=(0,R.WQX)(R.TgB),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=(0,R.WQX)(Kr),this.urlSerializer=(0,R.WQX)(re),this.location=(0,R.WQX)(Ne.aZ),this.urlHandlingStrategy=(0,R.WQX)(Ut),this._events=new Dt.B,this.errorHandler=this.options.errorHandler||hc,this.navigated=!1,this.routeReuseStrategy=(0,R.WQX)(Nr),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=(0,R.WQX)(Re,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!(0,R.WQX)(On,{optional:!0}),this.eventsSubscription=new cr.yU,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:C=>{this.console.warn(C)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const C=this.navigationTransitions.events.subscribe(P=>{try{const U=this.navigationTransitions.currentTransition,q=this.navigationTransitions.currentNavigation;if(null!==U&&null!==q)if(this.stateManager.handleRouterEvent(P,q),P instanceof es&&P.code!==lr.Redirect&&P.code!==lr.SupersededByNewNavigation)this.navigated=!0;else if(P instanceof ii)this.navigated=!0;else if(P instanceof oi){const oe=P.navigationBehaviorOptions,ke=this.urlHandlingStrategy.merge(P.url,U.currentRawUrl),Ee={browserUrl:U.extras.browserUrl,info:U.extras.info,skipLocationChange:U.extras.skipLocationChange,replaceUrl:U.extras.replaceUrl||"eager"===this.urlUpdateStrategy||Cr(U.source),...oe};this.scheduleNavigation(ke,so,null,Ee,{resolve:U.resolve,reject:U.reject,promise:U.promise})}(function js(I){return!(I instanceof Oi||I instanceof oi)})(P)&&this._events.next(P)}catch(U){this.navigationTransitions.transitionAbortSubject.next(U)}});this.eventsSubscription.add(C)}resetRootComponentType(C){this.routerState.root.component=C,this.navigationTransitions.rootComponentType=C}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),so,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((C,P)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(C,"popstate",P)},0)})}navigateToSyncWithBrowser(C,P,U){const q={replaceUrl:!0},oe=U?.navigationId?U:null;if(U){const Ee={...U};delete Ee.navigationId,delete Ee.\u0275routerPageId,0!==Object.keys(Ee).length&&(q.state=Ee)}const ke=this.parseUrl(C);this.scheduleNavigation(ke,P,oe,q)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(C){this.config=C.map(ee),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(C,P={}){const{relativeTo:U,queryParams:q,fragment:oe,queryParamsHandling:ke,preserveFragment:Ee}=P,st=Ee?this.currentUrlTree.fragment:oe;let cn,Lt=null;switch(ke??this.options.defaultQueryParamsHandling){case"merge":Lt={...this.currentUrlTree.queryParams,...q};break;case"preserve":Lt=this.currentUrlTree.queryParams;break;default:Lt=q||null}null!==Lt&&(Lt=this.removeEmptyProps(Lt));try{cn=ar(U?U.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof C[0]||"/"!==C[0][0])&&(C=[]),cn=this.currentUrlTree.root}return Ot(cn,C,Lt,st??null)}navigateByUrl(C,P={skipLocationChange:!1}){const U=$t(C)?C:this.parseUrl(C),q=this.urlHandlingStrategy.merge(U,this.rawUrlTree);return this.scheduleNavigation(q,so,null,P)}navigate(C,P={skipLocationChange:!1}){return function fc(I){for(let A=0;A<I.length;A++)if(null==I[A])throw new R.wOt(4008,!1)}(C),this.navigateByUrl(this.createUrlTree(C,P),P)}serializeUrl(C){return this.urlSerializer.serialize(C)}parseUrl(C){try{return this.urlSerializer.parse(C)}catch{return this.urlSerializer.parse("/")}}isActive(C,P){let U;if(U=!0===P?{...ia}:!1===P?{...xr}:P,$t(C))return Fo(this.currentUrlTree,C,U);const q=this.parseUrl(C);return Fo(this.currentUrlTree,q,U)}removeEmptyProps(C){return Object.entries(C).reduce((P,[U,q])=>(null!=q&&(P[U]=q),P),{})}scheduleNavigation(C,P,U,q,oe){if(this.disposed)return Promise.resolve(!1);let ke,Ee,st;oe?(ke=oe.resolve,Ee=oe.reject,st=oe.promise):st=new Promise((cn,Wt)=>{ke=cn,Ee=Wt});const Lt=this.pendingTasks.add();return function qa(I,A){I.events.pipe(ye(C=>C instanceof ii||C instanceof es||C instanceof An||C instanceof Zn),(0,Xt.T)(C=>C instanceof ii||C instanceof Zn?an.COMPLETE:C instanceof es&&(C.code===lr.Redirect||C.code===lr.SupersededByNewNavigation)?an.REDIRECTING:an.FAILED),ye(C=>C!==an.REDIRECTING),W(1)).subscribe(()=>{A()})}(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(Lt))}),this.navigationTransitions.handleNavigationRequest({source:P,restoredState:U,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:C,extras:q,resolve:ke,reject:Ee,promise:st,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),st.catch(cn=>Promise.reject(cn))}static{this.\u0275fac=function(P){return new(P||I)}}static{this.\u0275prov=R.jDH({token:I,factory:I.\u0275fac,providedIn:"root"})}}return I})();const Bs=new R.nKC("");function oa(I,...A){return(0,R.EmA)([{provide:Re,multi:!0,useValue:I},[],{provide:si,useFactory:Ii,deps:[Zi]},{provide:R.iLQ,multi:!0,useFactory:ws},A.map(C=>C.\u0275providers)])}function Ii(I){return I.routerState.root}function ws(){const I=(0,R.WQX)(R.zZn);return A=>{const C=I.get(R.o8S);if(A!==C.components[0])return;const P=I.get(Zi),U=I.get($s);1===I.get(Hi)&&P.initialNavigation(),I.get(Sa,null,R.$GK.Optional)?.setUpPreloading(),I.get(Bs,null,R.$GK.Optional)?.init(),P.resetRootComponentType(C.componentTypes[0]),U.closed||(U.next(),U.complete(),U.unsubscribe())}}const $s=new R.nKC("",{factory:()=>new Dt.B}),Hi=new R.nKC("",{providedIn:"root",factory:()=>1}),Sa=new R.nKC("")},7852:(hn,at,ie)=>{ie.d(at,{MF:()=>wi,j6:()=>jn,xZ:()=>Fo,om:()=>sr,Sx:()=>se,Dk:()=>Ce,Wp:()=>Z,KO:()=>re});var R=ie(467),J=ie(1362),Se=ie(8041),p=ie(1076);const Le=(je,be)=>be.some(We=>je instanceof We);let de,$e;const he=new WeakMap,_e=new WeakMap,Ge=new WeakMap,_t=new WeakMap,ft=new WeakMap;let nn={get(je,be,We){if(je instanceof IDBTransaction){if("done"===be)return _e.get(je);if("objectStoreNames"===be)return je.objectStoreNames||Ge.get(je);if("store"===be)return We.objectStoreNames[1]?void 0:We.objectStore(We.objectStoreNames[0])}return ct(je[be])},set:(je,be,We)=>(je[be]=We,!0),has:(je,be)=>je instanceof IDBTransaction&&("done"===be||"store"===be)||be in je};function Xt(je){return"function"==typeof je?function xn(je){return je!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function rt(){return $e||($e=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(je)?function(...be){return je.apply(qe(this),be),ct(he.get(this))}:function(...be){return ct(je.apply(qe(this),be))}:function(be,...We){const wt=je.call(qe(this),be,...We);return Ge.set(wt,be.sort?be.sort():[be]),ct(wt)}}(je):(je instanceof IDBTransaction&&function fn(je){if(_e.has(je))return;const be=new Promise((We,wt)=>{const Jt=()=>{je.removeEventListener("complete",$t),je.removeEventListener("error",yn),je.removeEventListener("abort",yn)},$t=()=>{We(),Jt()},yn=()=>{wt(je.error||new DOMException("AbortError","AbortError")),Jt()};je.addEventListener("complete",$t),je.addEventListener("error",yn),je.addEventListener("abort",yn)});_e.set(je,be)}(je),Le(je,function It(){return de||(de=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(je,nn):je)}function ct(je){if(je instanceof IDBRequest)return function Tt(je){const be=new Promise((We,wt)=>{const Jt=()=>{je.removeEventListener("success",$t),je.removeEventListener("error",yn)},$t=()=>{We(ct(je.result)),Jt()},yn=()=>{wt(je.error),Jt()};je.addEventListener("success",$t),je.addEventListener("error",yn)});return be.then(We=>{We instanceof IDBCursor&&he.set(We,je)}).catch(()=>{}),ft.set(be,je),be}(je);if(_t.has(je))return _t.get(je);const be=Xt(je);return be!==je&&(_t.set(je,be),ft.set(be,je)),be}const qe=je=>ft.get(je),Vt=["get","getKey","getAll","getAllKeys","count"],Qt=["put","add","delete","clear"],De=new Map;function rn(je,be){if(!(je instanceof IDBDatabase)||be in je||"string"!=typeof be)return;if(De.get(be))return De.get(be);const We=be.replace(/FromIndex$/,""),wt=be!==We,Jt=Qt.includes(We);if(!(We in(wt?IDBIndex:IDBObjectStore).prototype)||!Jt&&!Vt.includes(We))return;const $t=function(){var yn=(0,R.A)(function*(ar,...Ot){const Tn=this.transaction(ar,Jt?"readwrite":"readonly");let Zr=Tn.store;return wt&&(Zr=Zr.index(Ot.shift())),(yield Promise.all([Zr[We](...Ot),Jt&&Tn.done]))[0]});return function(Ot){return yn.apply(this,arguments)}}();return De.set(be,$t),$t}!function Bt(je){nn=je(nn)}(je=>({...je,get:(be,We,wt)=>rn(be,We)||je.get(be,We,wt),has:(be,We)=>!!rn(be,We)||je.has(be,We)}));class on{constructor(be){this.container=be}getPlatformInfoString(){return this.container.getProviders().map(We=>{if(function fr(je){const be=je.getComponent();return"VERSION"===be?.type}(We)){const wt=We.getImmediate();return`${wt.library}/${wt.version}`}return null}).filter(We=>We).join(" ")}}const Hn="@firebase/app",Qe="0.10.13",pn=new Se.Vy("@firebase/app"),cr="@firebase/app-compat",Lr="@firebase/analytics-compat",yt="@firebase/analytics",Dt="@firebase/app-check-compat",Ne="@firebase/app-check",ce="@firebase/auth",W="@firebase/auth-compat",K="@firebase/database",ye="@firebase/data-connect",Oe="@firebase/database-compat",Et="@firebase/functions",kt="@firebase/functions-compat",En="@firebase/installations",Gt="@firebase/installations-compat",un="@firebase/messaging",qn="@firebase/messaging-compat",Ur="@firebase/performance",zn="@firebase/performance-compat",Un="@firebase/remote-config",yr="@firebase/remote-config-compat",Nt="@firebase/storage",ut="@firebase/storage-compat",di="@firebase/firestore",Rn="@firebase/vertexai-preview",Ct="@firebase/firestore-compat",qt="firebase",Cn="[DEFAULT]",Pt={[Hn]:"fire-core",[cr]:"fire-core-compat",[yt]:"fire-analytics",[Lr]:"fire-analytics-compat",[Ne]:"fire-app-check",[Dt]:"fire-app-check-compat",[ce]:"fire-auth",[W]:"fire-auth-compat",[K]:"fire-rtdb",[ye]:"fire-data-connect",[Oe]:"fire-rtdb-compat",[Et]:"fire-fn",[kt]:"fire-fn-compat",[En]:"fire-iid",[Gt]:"fire-iid-compat",[un]:"fire-fcm",[qn]:"fire-fcm-compat",[Ur]:"fire-perf",[zn]:"fire-perf-compat",[Un]:"fire-rc",[yr]:"fire-rc-compat",[Nt]:"fire-gcs",[ut]:"fire-gcs-compat",[di]:"fire-fst",[Ct]:"fire-fst-compat",[Rn]:"fire-vertex","fire-js":"fire-js",[qt]:"fire-js-all"},lt=new Map,or=new Map,Fn=new Map;function Sr(je,be){try{je.container.addComponent(be)}catch(We){pn.debug(`Component ${be.name} failed to register with FirebaseApp ${je.name}`,We)}}function sr(je){const be=je.name;if(Fn.has(be))return pn.debug(`There were multiple attempts to register component ${be}.`),!1;Fn.set(be,je);for(const We of lt.values())Sr(We,je);for(const We of or.values())Sr(We,je);return!0}function jn(je,be){const We=je.container.getProvider("heartbeat").getImmediate({optional:!0});return We&&We.triggerHeartbeat(),je.container.getProvider(be)}function Fo(je){return void 0!==je.settings}const ln=new p.FA("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class jr{constructor(be,We,wt){this._isDeleted=!1,this._options=Object.assign({},be),this._config=Object.assign({},We),this._name=We.name,this._automaticDataCollectionEnabled=We.automaticDataCollectionEnabled,this._container=wt,this.container.addComponent(new J.uA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(be){this.checkDestroyed(),this._automaticDataCollectionEnabled=be}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(be){this._isDeleted=be}checkDestroyed(){if(this.isDeleted)throw ln.create("app-deleted",{appName:this._name})}}const wi="10.14.1";function Z(je,be={}){let We=je;"object"!=typeof be&&(be={name:be});const wt=Object.assign({name:Cn,automaticDataCollectionEnabled:!1},be),Jt=wt.name;if("string"!=typeof Jt||!Jt)throw ln.create("bad-app-name",{appName:String(Jt)});if(We||(We=(0,p.T9)()),!We)throw ln.create("no-options");const $t=lt.get(Jt);if($t){if((0,p.bD)(We,$t.options)&&(0,p.bD)(wt,$t.config))return $t;throw ln.create("duplicate-app",{appName:Jt})}const yn=new J.h1(Jt);for(const Ot of Fn.values())yn.addComponent(Ot);const ar=new jr(We,wt,yn);return lt.set(Jt,ar),ar}function se(je=Cn){const be=lt.get(je);if(!be&&je===Cn&&(0,p.T9)())return Z();if(!be)throw ln.create("no-app",{appName:je});return be}function Ce(){return Array.from(lt.values())}function re(je,be,We){var wt;let Jt=null!==(wt=Pt[je])&&void 0!==wt?wt:je;We&&(Jt+=`-${We}`);const $t=Jt.match(/\s|\//),yn=be.match(/\s|\//);if($t||yn){const ar=[`Unable to register library "${Jt}" with version "${be}":`];return $t&&ar.push(`library name "${Jt}" contains illegal characters (whitespace or "/")`),$t&&yn&&ar.push("and"),yn&&ar.push(`version name "${be}" contains illegal characters (whitespace or "/")`),void pn.warn(ar.join(" "))}sr(new J.uA(`${Jt}-version`,()=>({library:Jt,version:be}),"VERSION"))}const Be="firebase-heartbeat-database",Me=1,mt="firebase-heartbeat-store";let Zt=null;function Nn(){return Zt||(Zt=function dt(je,be,{blocked:We,upgrade:wt,blocking:Jt,terminated:$t}={}){const yn=indexedDB.open(je,be),ar=ct(yn);return wt&&yn.addEventListener("upgradeneeded",Ot=>{wt(ct(yn.result),Ot.oldVersion,Ot.newVersion,ct(yn.transaction),Ot)}),We&&yn.addEventListener("blocked",Ot=>We(Ot.oldVersion,Ot.newVersion,Ot)),ar.then(Ot=>{$t&&Ot.addEventListener("close",()=>$t()),Jt&&Ot.addEventListener("versionchange",Tn=>Jt(Tn.oldVersion,Tn.newVersion,Tn))}).catch(()=>{}),ar}(Be,Me,{upgrade:(je,be)=>{if(0===be)try{je.createObjectStore(mt)}catch(We){console.warn(We)}}}).catch(je=>{throw ln.create("idb-open",{originalErrorMessage:je.message})})),Zt}function Bn(){return(Bn=(0,R.A)(function*(je){try{const We=(yield Nn()).transaction(mt),wt=yield We.objectStore(mt).get(ri(je));return yield We.done,wt}catch(be){if(be instanceof p.g)pn.warn(be.message);else{const We=ln.create("idb-get",{originalErrorMessage:be?.message});pn.warn(We.message)}}})).apply(this,arguments)}function nr(je,be){return ot.apply(this,arguments)}function ot(){return(ot=(0,R.A)(function*(je,be){try{const wt=(yield Nn()).transaction(mt,"readwrite");yield wt.objectStore(mt).put(be,ri(je)),yield wt.done}catch(We){if(We instanceof p.g)pn.warn(We.message);else{const wt=ln.create("idb-set",{originalErrorMessage:We?.message});pn.warn(wt.message)}}})).apply(this,arguments)}function ri(je){return`${je.name}!${je.options.appId}`}class Yo{constructor(be){this.container=be,this._heartbeatsCache=null;const We=this.container.getProvider("app").getImmediate();this._storage=new pa(We),this._heartbeatsCachePromise=this._storage.read().then(wt=>(this._heartbeatsCache=wt,wt))}triggerHeartbeat(){var be=this;return(0,R.A)(function*(){var We,wt;try{const $t=be.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),yn=zi();return null==(null===(We=be._heartbeatsCache)||void 0===We?void 0:We.heartbeats)&&(be._heartbeatsCache=yield be._heartbeatsCachePromise,null==(null===(wt=be._heartbeatsCache)||void 0===wt?void 0:wt.heartbeats))||be._heartbeatsCache.lastSentHeartbeatDate===yn||be._heartbeatsCache.heartbeats.some(ar=>ar.date===yn)?void 0:(be._heartbeatsCache.heartbeats.push({date:yn,agent:$t}),be._heartbeatsCache.heartbeats=be._heartbeatsCache.heartbeats.filter(ar=>{const Ot=new Date(ar.date).valueOf();return Date.now()-Ot<=2592e6}),be._storage.overwrite(be._heartbeatsCache))}catch(Jt){pn.warn(Jt)}})()}getHeartbeatsHeader(){var be=this;return(0,R.A)(function*(){var We;try{if(null===be._heartbeatsCache&&(yield be._heartbeatsCachePromise),null==(null===(We=be._heartbeatsCache)||void 0===We?void 0:We.heartbeats)||0===be._heartbeatsCache.heartbeats.length)return"";const wt=zi(),{heartbeatsToSend:Jt,unsentEntries:$t}=function Gn(je,be=1024){const We=[];let wt=je.slice();for(const Jt of je){const $t=We.find(yn=>yn.agent===Jt.agent);if($t){if($t.dates.push(Jt.date),Ps(We)>be){$t.dates.pop();break}}else if(We.push({agent:Jt.agent,dates:[Jt.date]}),Ps(We)>be){We.pop();break}wt=wt.slice(1)}return{heartbeatsToSend:We,unsentEntries:wt}}(be._heartbeatsCache.heartbeats),yn=(0,p.Uj)(JSON.stringify({version:2,heartbeats:Jt}));return be._heartbeatsCache.lastSentHeartbeatDate=wt,$t.length>0?(be._heartbeatsCache.heartbeats=$t,yield be._storage.overwrite(be._heartbeatsCache)):(be._heartbeatsCache.heartbeats=[],be._storage.overwrite(be._heartbeatsCache)),yn}catch(wt){return pn.warn(wt),""}})()}}function zi(){return(new Date).toISOString().substring(0,10)}class pa{constructor(be){this.app=be,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,R.A)(function*(){return!!(0,p.zW)()&&(0,p.eX)().then(()=>!0).catch(()=>!1)})()}read(){var be=this;return(0,R.A)(function*(){if(yield be._canUseIndexedDBPromise){const wt=yield function vr(je){return Bn.apply(this,arguments)}(be.app);return wt?.heartbeats?wt:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(be){var We=this;return(0,R.A)(function*(){var wt;if(yield We._canUseIndexedDBPromise){const $t=yield We.read();return nr(We.app,{lastSentHeartbeatDate:null!==(wt=be.lastSentHeartbeatDate)&&void 0!==wt?wt:$t.lastSentHeartbeatDate,heartbeats:be.heartbeats})}})()}add(be){var We=this;return(0,R.A)(function*(){var wt;if(yield We._canUseIndexedDBPromise){const $t=yield We.read();return nr(We.app,{lastSentHeartbeatDate:null!==(wt=be.lastSentHeartbeatDate)&&void 0!==wt?wt:$t.lastSentHeartbeatDate,heartbeats:[...$t.heartbeats,...be.heartbeats]})}})()}}function Ps(je){return(0,p.Uj)(JSON.stringify({version:2,heartbeats:je})).length}!function Zo(je){sr(new J.uA("platform-logger",be=>new on(be),"PRIVATE")),sr(new J.uA("heartbeat",be=>new Yo(be),"PRIVATE")),re(Hn,Qe,je),re(Hn,Qe,"esm2017"),re("fire-js","")}("")},1362:(hn,at,ie)=>{ie.d(at,{h1:()=>It,uA:()=>Se});var R=ie(467),J=ie(1076);class Se{constructor(he,_e,Ge){this.name=he,this.instanceFactory=_e,this.type=Ge,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(he){return this.instantiationMode=he,this}setMultipleInstances(he){return this.multipleInstances=he,this}setServiceProps(he){return this.serviceProps=he,this}setInstanceCreatedCallback(he){return this.onInstanceCreated=he,this}}const p="[DEFAULT]";class Le{constructor(he,_e){this.name=he,this.container=_e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(he){const _e=this.normalizeInstanceIdentifier(he);if(!this.instancesDeferred.has(_e)){const Ge=new J.cY;if(this.instancesDeferred.set(_e,Ge),this.isInitialized(_e)||this.shouldAutoInitialize())try{const _t=this.getOrInitializeService({instanceIdentifier:_e});_t&&Ge.resolve(_t)}catch{}}return this.instancesDeferred.get(_e).promise}getImmediate(he){var _e;const Ge=this.normalizeInstanceIdentifier(he?.identifier),_t=null!==(_e=he?.optional)&&void 0!==_e&&_e;if(!this.isInitialized(Ge)&&!this.shouldAutoInitialize()){if(_t)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Ge})}catch(ft){if(_t)return null;throw ft}}getComponent(){return this.component}setComponent(he){if(he.name!==this.name)throw Error(`Mismatching Component ${he.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=he,this.shouldAutoInitialize()){if(function $e(rt){return"EAGER"===rt.instantiationMode}(he))try{this.getOrInitializeService({instanceIdentifier:p})}catch{}for(const[_e,Ge]of this.instancesDeferred.entries()){const _t=this.normalizeInstanceIdentifier(_e);try{const ft=this.getOrInitializeService({instanceIdentifier:_t});Ge.resolve(ft)}catch{}}}}clearInstance(he=p){this.instancesDeferred.delete(he),this.instancesOptions.delete(he),this.instances.delete(he)}delete(){var he=this;return(0,R.A)(function*(){const _e=Array.from(he.instances.values());yield Promise.all([..._e.filter(Ge=>"INTERNAL"in Ge).map(Ge=>Ge.INTERNAL.delete()),..._e.filter(Ge=>"_delete"in Ge).map(Ge=>Ge._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(he=p){return this.instances.has(he)}getOptions(he=p){return this.instancesOptions.get(he)||{}}initialize(he={}){const{options:_e={}}=he,Ge=this.normalizeInstanceIdentifier(he.instanceIdentifier);if(this.isInitialized(Ge))throw Error(`${this.name}(${Ge}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const _t=this.getOrInitializeService({instanceIdentifier:Ge,options:_e});for(const[ft,Tt]of this.instancesDeferred.entries())Ge===this.normalizeInstanceIdentifier(ft)&&Tt.resolve(_t);return _t}onInit(he,_e){var Ge;const _t=this.normalizeInstanceIdentifier(_e),ft=null!==(Ge=this.onInitCallbacks.get(_t))&&void 0!==Ge?Ge:new Set;ft.add(he),this.onInitCallbacks.set(_t,ft);const Tt=this.instances.get(_t);return Tt&&he(Tt,_t),()=>{ft.delete(he)}}invokeOnInitCallbacks(he,_e){const Ge=this.onInitCallbacks.get(_e);if(Ge)for(const _t of Ge)try{_t(he,_e)}catch{}}getOrInitializeService({instanceIdentifier:he,options:_e={}}){let Ge=this.instances.get(he);if(!Ge&&this.component&&(Ge=this.component.instanceFactory(this.container,{instanceIdentifier:(rt=he,rt===p?void 0:rt),options:_e}),this.instances.set(he,Ge),this.instancesOptions.set(he,_e),this.invokeOnInitCallbacks(Ge,he),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,he,Ge)}catch{}var rt;return Ge||null}normalizeInstanceIdentifier(he=p){return this.component?this.component.multipleInstances?he:p:he}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class It{constructor(he){this.name=he,this.providers=new Map}addComponent(he){const _e=this.getProvider(he.name);if(_e.isComponentSet())throw new Error(`Component ${he.name} has already been registered with ${this.name}`);_e.setComponent(he)}addOrOverwriteComponent(he){this.getProvider(he.name).isComponentSet()&&this.providers.delete(he.name),this.addComponent(he)}getProvider(he){if(this.providers.has(he))return this.providers.get(he);const _e=new Le(he,this);return this.providers.set(he,_e),_e}getProviders(){return Array.from(this.providers.values())}}},8041:(hn,at,ie)=>{ie.d(at,{$b:()=>J,Vy:()=>$e});const R=[];var J=function(he){return he[he.DEBUG=0]="DEBUG",he[he.VERBOSE=1]="VERBOSE",he[he.INFO=2]="INFO",he[he.WARN=3]="WARN",he[he.ERROR=4]="ERROR",he[he.SILENT=5]="SILENT",he}(J||{});const Se={debug:J.DEBUG,verbose:J.VERBOSE,info:J.INFO,warn:J.WARN,error:J.ERROR,silent:J.SILENT},p=J.INFO,Le={[J.DEBUG]:"log",[J.VERBOSE]:"log",[J.INFO]:"info",[J.WARN]:"warn",[J.ERROR]:"error"},de=(he,_e,...Ge)=>{if(_e<he.logLevel)return;const _t=(new Date).toISOString(),ft=Le[_e];if(!ft)throw new Error(`Attempted to log a message with an invalid logType (value: ${_e})`);console[ft](`[${_t}]  ${he.name}:`,...Ge)};class $e{constructor(_e){this.name=_e,this._logLevel=p,this._logHandler=de,this._userLogHandler=null,R.push(this)}get logLevel(){return this._logLevel}set logLevel(_e){if(!(_e in J))throw new TypeError(`Invalid value "${_e}" assigned to \`logLevel\``);this._logLevel=_e}setLogLevel(_e){this._logLevel="string"==typeof _e?Se[_e]:_e}get logHandler(){return this._logHandler}set logHandler(_e){if("function"!=typeof _e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=_e}get userLogHandler(){return this._userLogHandler}set userLogHandler(_e){this._userLogHandler=_e}debug(..._e){this._userLogHandler&&this._userLogHandler(this,J.DEBUG,..._e),this._logHandler(this,J.DEBUG,..._e)}log(..._e){this._userLogHandler&&this._userLogHandler(this,J.VERBOSE,..._e),this._logHandler(this,J.VERBOSE,..._e)}info(..._e){this._userLogHandler&&this._userLogHandler(this,J.INFO,..._e),this._logHandler(this,J.INFO,..._e)}warn(..._e){this._userLogHandler&&this._userLogHandler(this,J.WARN,..._e),this._logHandler(this,J.WARN,..._e)}error(..._e){this._userLogHandler&&this._userLogHandler(this,J.ERROR,..._e),this._logHandler(this,J.ERROR,..._e)}}},2214:(hn,at,ie)=>{ie.d(at,{Dk:()=>R.Dk,KO:()=>R.KO,Sx:()=>R.Sx,Wp:()=>R.Wp});var R=ie(7852);(0,R.KO)("firebase","10.14.1","app")},9579:(hn,at,ie)=>{ie.d(at,{kT:()=>I,xI:()=>Gh,hg:()=>Qn,ik:()=>P,CI:()=>Vn});var R=ie(467),J=ie(7852),Se=ie(1076),p=ie(8041),Le=ie(1635),de=ie(1362);const Tt=function _t(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},fn=new Se.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Bt=new p.Vy("@firebase/auth");function Xt(w,...d){Bt.logLevel<=p.$b.ERROR&&Bt.error(`Auth (${J.MF}): ${w}`,...d)}function ct(w,...d){throw Qt(w,...d)}function qe(w,...d){return Qt(w,...d)}function dt(w,d,_){const b=Object.assign(Object.assign({},Tt()),{[d]:_});return new Se.FA("auth","Firebase",b).create(d,{appName:w.name})}function it(w){return dt(w,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Qt(w,...d){if("string"!=typeof w){const _=d[0],b=[...d.slice(1)];return b[0]&&(b[0].appName=w.name),w._errorFactory.create(_,...b)}return fn.create(w,...d)}function De(w,d,..._){if(!w)throw Qt(d,..._)}function rn(w){const d="INTERNAL ASSERTION FAILED: "+w;throw Xt(d),new Error(d)}function on(w,d){w||rn(d)}function fr(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.href)||""}function Hn(){return"http:"===Qe()||"https:"===Qe()}function Qe(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.protocol)||null}class Lr{constructor(d,_){this.shortDelay=d,this.longDelay=_,on(_>d,"Short delay should be less than long delay!"),this.isMobile=(0,Se.jZ)()||(0,Se.lV)()}get(){return function pn(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Hn()||(0,Se.sr)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function yt(w,d){on(w.emulator,"Emulator should always be set here");const{url:_}=w.emulator;return d?`${_}${d.startsWith("/")?d.slice(1):d}`:_}class Dt{static initialize(d,_,b){this.fetchImpl=d,_&&(this.headersImpl=_),b&&(this.responseImpl=b)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void rn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void rn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void rn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ne={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},ce=new Lr(3e4,6e4);function W(w,d){return w.tenantId&&!d.tenantId?Object.assign(Object.assign({},d),{tenantId:w.tenantId}):d}function K(w,d,_,b){return ye.apply(this,arguments)}function ye(){return(ye=(0,R.A)(function*(w,d,_,b,z={}){return Oe(w,z,(0,R.A)(function*(){let Q={},ve={};b&&("GET"===d?ve=b:Q={body:JSON.stringify(b)});const Fe=(0,Se.Am)(Object.assign({key:w.config.apiKey},ve)).slice(1),et=yield w._getAdditionalHeaders();et["Content-Type"]="application/json",w.languageCode&&(et["X-Firebase-Locale"]=w.languageCode);const Ht=Object.assign({method:d,headers:et},Q);return(0,Se.c1)()||(Ht.referrerPolicy="no-referrer"),Dt.fetch()(Gt(w,w.config.apiHost,_,Fe),Ht)}))})).apply(this,arguments)}function Oe(w,d,_){return Et.apply(this,arguments)}function Et(){return(Et=(0,R.A)(function*(w,d,_){w._canInitEmulator=!1;const b=Object.assign(Object.assign({},Ne),d);try{const z=new qn(w),Q=yield Promise.race([_(),z.promise]);z.clearNetworkTimeout();const ve=yield Q.json();if("needConfirmation"in ve)throw Ur(w,"account-exists-with-different-credential",ve);if(Q.ok&&!("errorMessage"in ve))return ve;{const Fe=Q.ok?ve.errorMessage:ve.error.message,[et,Ht]=Fe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===et)throw Ur(w,"credential-already-in-use",ve);if("EMAIL_EXISTS"===et)throw Ur(w,"email-already-in-use",ve);if("USER_DISABLED"===et)throw Ur(w,"user-disabled",ve);const In=b[et]||et.toLowerCase().replace(/[_\s]+/g,"-");if(Ht)throw dt(w,In,Ht);ct(w,In)}}catch(z){if(z instanceof Se.g)throw z;ct(w,"network-request-failed",{message:String(z)})}})).apply(this,arguments)}function kt(w,d,_,b){return En.apply(this,arguments)}function En(){return(En=(0,R.A)(function*(w,d,_,b,z={}){const Q=yield K(w,d,_,b,z);return"mfaPendingCredential"in Q&&ct(w,"multi-factor-auth-required",{_serverResponse:Q}),Q})).apply(this,arguments)}function Gt(w,d,_,b){const z=`${d}${_}?${b}`;return w.config.emulator?yt(w.config,z):`${w.config.apiScheme}://${z}`}class qn{constructor(d){this.auth=d,this.timer=null,this.promise=new Promise((_,b)=>{this.timer=setTimeout(()=>b(qe(this.auth,"network-request-failed")),ce.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ur(w,d,_){const b={appName:w.name};_.email&&(b.email=_.email),_.phoneNumber&&(b.phoneNumber=_.phoneNumber);const z=qe(w,d,b);return z.customData._tokenResponse=_,z}function zn(w){return void 0!==w&&void 0!==w.getResponse}function ut(){return(ut=(0,R.A)(function*(w){return(yield K(w,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function qt(){return(qt=(0,R.A)(function*(w,d){return K(w,"POST","/v1/accounts:delete",d)})).apply(this,arguments)}function Pt(w,d){return lt.apply(this,arguments)}function lt(){return(lt=(0,R.A)(function*(w,d){return K(w,"POST","/v1/accounts:lookup",d)})).apply(this,arguments)}function or(w){if(w)try{const d=new Date(Number(w));if(!isNaN(d.getTime()))return d.toUTCString()}catch{}}function Pr(){return(Pr=(0,R.A)(function*(w,d=!1){const _=(0,Se.Ku)(w),b=yield _.getIdToken(d),z=jn(b);De(z&&z.exp&&z.auth_time&&z.iat,_.auth,"internal-error");const Q="object"==typeof z.firebase?z.firebase:void 0,ve=Q?.sign_in_provider;return{claims:z,token:b,authTime:or(sr(z.auth_time)),issuedAtTime:or(sr(z.iat)),expirationTime:or(sr(z.exp)),signInProvider:ve||null,signInSecondFactor:Q?.sign_in_second_factor||null}})).apply(this,arguments)}function sr(w){return 1e3*Number(w)}function jn(w){const[d,_,b]=w.split(".");if(void 0===d||void 0===_||void 0===b)return Xt("JWT malformed, contained fewer than 3 sections"),null;try{const z=(0,Se.u)(_);return z?JSON.parse(z):(Xt("Failed to decode base64 JWT payload"),null)}catch(z){return Xt("Caught error parsing JWT payload as JSON",z?.toString()),null}}function Mn(w){const d=jn(w);return De(d,"internal-error"),De(typeof d.exp<"u","internal-error"),De(typeof d.iat<"u","internal-error"),Number(d.exp)-Number(d.iat)}function _n(w,d){return Fo.apply(this,arguments)}function Fo(){return(Fo=(0,R.A)(function*(w,d,_=!1){if(_)return d;try{return yield d}catch(b){throw b instanceof Se.g&&function gn({code:w}){return"auth/user-disabled"===w||"auth/user-token-expired"===w}(b)&&w.auth.currentUser===w&&(yield w.auth.signOut()),b}})).apply(this,arguments)}class ni{constructor(d){this.user=d,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(d){var _;if(d){const b=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),b}{this.errorBackoff=3e4;const z=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,z)}}schedule(d=!1){var _=this;if(!this.isRunning)return;const b=this.getInterval(d);this.timerId=setTimeout((0,R.A)(function*(){yield _.iteration()}),b)}iteration(){var d=this;return(0,R.A)(function*(){try{yield d.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===_?.code&&d.schedule(!0))}d.schedule()})()}}class ln{constructor(d,_){this.createdAt=d,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=or(this.lastLoginAt),this.creationTime=or(this.createdAt)}_copy(d){this.createdAt=d.createdAt,this.lastLoginAt=d.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function jr(w){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,R.A)(function*(w){var d;const _=w.auth,b=yield w.getIdToken(),z=yield _n(w,Pt(_,{idToken:b}));De(z?.users.length,_,"internal-error");const Q=z.users[0];w._notifyReloadListener(Q);const ve=null!==(d=Q.providerUserInfo)&&void 0!==d&&d.length?se(Q.providerUserInfo):[],Fe=function le(w,d){return[...w.filter(b=>!d.some(z=>z.providerId===b.providerId)),...d]}(w.providerData,ve),In=!!w.isAnonymous&&!(w.email&&Q.passwordHash||Fe?.length),mn={uid:Q.localId,displayName:Q.displayName||null,photoURL:Q.photoUrl||null,email:Q.email||null,emailVerified:Q.emailVerified||!1,phoneNumber:Q.phoneNumber||null,tenantId:Q.tenantId||null,providerData:Fe,metadata:new ln(Q.createdAt,Q.lastLoginAt),isAnonymous:In};Object.assign(w,mn)})).apply(this,arguments)}function Z(){return(Z=(0,R.A)(function*(w){const d=(0,Se.Ku)(w);yield jr(d),yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)})).apply(this,arguments)}function se(w){return w.map(d=>{var{providerId:_}=d,b=(0,Le.Tt)(d,["providerId"]);return{providerId:_,uid:b.rawId||"",displayName:b.displayName||null,email:b.email||null,phoneNumber:b.phoneNumber||null,photoURL:b.photoUrl||null}})}function Xe(){return(Xe=(0,R.A)(function*(w,d){const _=yield Oe(w,{},(0,R.A)(function*(){const b=(0,Se.Am)({grant_type:"refresh_token",refresh_token:d}).slice(1),{tokenApiHost:z,apiKey:Q}=w.config,ve=Gt(w,z,"/v1/token",`key=${Q}`),Fe=yield w._getAdditionalHeaders();return Fe["Content-Type"]="application/x-www-form-urlencoded",Dt.fetch()(ve,{method:"POST",headers:Fe,body:b})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}function re(){return(re=(0,R.A)(function*(w,d){return K(w,"POST","/v2/accounts:revokeToken",W(w,d))})).apply(this,arguments)}class ne{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(d){De(d.idToken,"internal-error"),De(typeof d.idToken<"u","internal-error"),De(typeof d.refreshToken<"u","internal-error");const _="expiresIn"in d&&typeof d.expiresIn<"u"?Number(d.expiresIn):Mn(d.idToken);this.updateTokensAndExpiration(d.idToken,d.refreshToken,_)}updateFromIdToken(d){De(0!==d.length,"internal-error");const _=Mn(d);this.updateTokensAndExpiration(d,null,_)}getToken(d){var _=this;return(0,R.A)(function*(b,z=!1){return z||!_.accessToken||_.isExpired?(De(_.refreshToken,b,"user-token-expired"),_.refreshToken?(yield _.refresh(b,_.refreshToken),_.accessToken):null):_.accessToken}).apply(this,arguments)}clearRefreshToken(){this.refreshToken=null}refresh(d,_){var b=this;return(0,R.A)(function*(){const{accessToken:z,refreshToken:Q,expiresIn:ve}=yield function Ce(w,d){return Xe.apply(this,arguments)}(d,_);b.updateTokensAndExpiration(z,Q,Number(ve))})()}updateTokensAndExpiration(d,_,b){this.refreshToken=_||null,this.accessToken=d||null,this.expirationTime=Date.now()+1e3*b}static fromJSON(d,_){const{refreshToken:b,accessToken:z,expirationTime:Q}=_,ve=new ne;return b&&(De("string"==typeof b,"internal-error",{appName:d}),ve.refreshToken=b),z&&(De("string"==typeof z,"internal-error",{appName:d}),ve.accessToken=z),Q&&(De("number"==typeof Q,"internal-error",{appName:d}),ve.expirationTime=Q),ve}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(d){this.accessToken=d.accessToken,this.refreshToken=d.refreshToken,this.expirationTime=d.expirationTime}_clone(){return Object.assign(new ne,this.toJSON())}_performRefresh(){return rn("not implemented")}}function fe(w,d){De("string"==typeof w||typeof w>"u","internal-error",{appName:d})}class Be{constructor(d){var{uid:_,auth:b,stsTokenManager:z}=d,Q=(0,Le.Tt)(d,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ni(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=b,this.stsTokenManager=z,this.accessToken=z.accessToken,this.displayName=Q.displayName||null,this.email=Q.email||null,this.emailVerified=Q.emailVerified||!1,this.phoneNumber=Q.phoneNumber||null,this.photoURL=Q.photoURL||null,this.isAnonymous=Q.isAnonymous||!1,this.tenantId=Q.tenantId||null,this.providerData=Q.providerData?[...Q.providerData]:[],this.metadata=new ln(Q.createdAt||void 0,Q.lastLoginAt||void 0)}getIdToken(d){var _=this;return(0,R.A)(function*(){const b=yield _n(_,_.stsTokenManager.getToken(_.auth,d));return De(b,_.auth,"internal-error"),_.accessToken!==b&&(_.accessToken=b,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),b})()}getIdTokenResult(d){return function Sr(w){return Pr.apply(this,arguments)}(this,d)}reload(){return function wi(w){return Z.apply(this,arguments)}(this)}_assign(d){this!==d&&(De(this.uid===d.uid,this.auth,"internal-error"),this.displayName=d.displayName,this.photoURL=d.photoURL,this.email=d.email,this.emailVerified=d.emailVerified,this.phoneNumber=d.phoneNumber,this.isAnonymous=d.isAnonymous,this.tenantId=d.tenantId,this.providerData=d.providerData.map(_=>Object.assign({},_)),this.metadata._copy(d.metadata),this.stsTokenManager._assign(d.stsTokenManager))}_clone(d){const _=new Be(Object.assign(Object.assign({},this),{auth:d,stsTokenManager:this.stsTokenManager._clone()}));return _.metadata._copy(this.metadata),_}_onReload(d){De(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=d,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(d){this.reloadListener?this.reloadListener(d):this.reloadUserInfo=d}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(d){var _=this;return(0,R.A)(function*(b,z=!1){let Q=!1;b.idToken&&b.idToken!==_.stsTokenManager.accessToken&&(_.stsTokenManager.updateFromServerResponse(b),Q=!0),z&&(yield jr(_)),yield _.auth._persistUserIfCurrent(_),Q&&_.auth._notifyListenersIfCurrent(_)}).apply(this,arguments)}delete(){var d=this;return(0,R.A)(function*(){if((0,J.xZ)(d.auth.app))return Promise.reject(it(d.auth));const _=yield d.getIdToken();return yield _n(d,function Ct(w,d){return qt.apply(this,arguments)}(d.auth,{idToken:_})),d.stsTokenManager.clearRefreshToken(),d.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(d=>Object.assign({},d)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(d,_){var b,z,Q,ve,Fe,et,Ht,In;const mn=null!==(b=_.displayName)&&void 0!==b?b:void 0,Ar=null!==(z=_.email)&&void 0!==z?z:void 0,Mi=null!==(Q=_.phoneNumber)&&void 0!==Q?Q:void 0,qc=null!==(ve=_.photoURL)&&void 0!==ve?ve:void 0,Qr=null!==(Fe=_.tenantId)&&void 0!==Fe?Fe:void 0,Au=null!==(et=_._redirectEventId)&&void 0!==et?et:void 0,dl=null!==(Ht=_.createdAt)&&void 0!==Ht?Ht:void 0,ec=null!==(In=_.lastLoginAt)&&void 0!==In?In:void 0,{uid:Na,emailVerified:hl,isAnonymous:fl,providerData:pl,stsTokenManager:yd}=_;De(Na&&yd,d,"internal-error");const Wh=ne.fromJSON(this.name,yd);De("string"==typeof Na,d,"internal-error"),fe(mn,d.name),fe(Ar,d.name),De("boolean"==typeof hl,d,"internal-error"),De("boolean"==typeof fl,d,"internal-error"),fe(Mi,d.name),fe(qc,d.name),fe(Qr,d.name),fe(Au,d.name),fe(dl,d.name),fe(ec,d.name);const vd=new Be({uid:Na,auth:d,email:Ar,emailVerified:hl,displayName:mn,isAnonymous:fl,photoURL:qc,phoneNumber:Mi,tenantId:Qr,stsTokenManager:Wh,createdAt:dl,lastLoginAt:ec});return pl&&Array.isArray(pl)&&(vd.providerData=pl.map(gl=>Object.assign({},gl))),Au&&(vd._redirectEventId=Au),vd}static _fromIdTokenResponse(d,_){return(0,R.A)(function*(b,z,Q=!1){const ve=new ne;ve.updateFromServerResponse(z);const Fe=new Be({uid:z.localId,auth:b,stsTokenManager:ve,isAnonymous:Q});return yield jr(Fe),Fe}).apply(this,arguments)}static _fromGetAccountInfoResponse(d,_,b){return(0,R.A)(function*(){const z=_.users[0];De(void 0!==z.localId,"internal-error");const Q=void 0!==z.providerUserInfo?se(z.providerUserInfo):[],ve=!(z.email&&z.passwordHash||Q?.length),Fe=new ne;Fe.updateFromIdToken(b);const et=new Be({uid:z.localId,auth:d,stsTokenManager:Fe,isAnonymous:ve}),Ht={uid:z.localId,displayName:z.displayName||null,photoURL:z.photoUrl||null,email:z.email||null,emailVerified:z.emailVerified||!1,phoneNumber:z.phoneNumber||null,tenantId:z.tenantId||null,providerData:Q,metadata:new ln(z.createdAt,z.lastLoginAt),isAnonymous:!(z.email&&z.passwordHash||Q?.length)};return Object.assign(et,Ht),et})()}}const Me=new Map;function mt(w){on(w instanceof Function,"Expected a class definition");let d=Me.get(w);return d?(on(d instanceof w,"Instance stored in cache mismatched with class"),d):(d=new w,Me.set(w,d),d)}const Nn=(()=>{class w{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,R.A)(function*(){return!0})()}_set(_,b){var z=this;return(0,R.A)(function*(){z.storage[_]=b})()}_get(_){var b=this;return(0,R.A)(function*(){const z=b.storage[_];return void 0===z?null:z})()}_remove(_){var b=this;return(0,R.A)(function*(){delete b.storage[_]})()}_addListener(_,b){}_removeListener(_,b){}}return w.type="NONE",w})();function vr(w,d,_){return`firebase:${w}:${d}:${_}`}class Bn{constructor(d,_,b){this.persistence=d,this.auth=_,this.userKey=b;const{config:z,name:Q}=this.auth;this.fullUserKey=vr(this.userKey,z.apiKey,Q),this.fullPersistenceKey=vr("persistence",z.apiKey,Q),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(d){return this.persistence._set(this.fullUserKey,d.toJSON())}getCurrentUser(){var d=this;return(0,R.A)(function*(){const _=yield d.persistence._get(d.fullUserKey);return _?Be._fromJSON(d.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(d){var _=this;return(0,R.A)(function*(){if(_.persistence===d)return;const b=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=d,b?_.setCurrentUser(b):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(d,_){return(0,R.A)(function*(b,z,Q="authUser"){if(!z.length)return new Bn(mt(Nn),b,Q);const ve=(yield Promise.all(z.map(function(){var mn=(0,R.A)(function*(Ar){if(yield Ar._isAvailable())return Ar});return function(Ar){return mn.apply(this,arguments)}}()))).filter(mn=>mn);let Fe=ve[0]||mt(Nn);const et=vr(Q,b.config.apiKey,b.name);let Ht=null;for(const mn of z)try{const Ar=yield mn._get(et);if(Ar){const Mi=Be._fromJSON(b,Ar);mn!==Fe&&(Ht=Mi),Fe=mn;break}}catch{}const In=ve.filter(mn=>mn._shouldAllowMigration);return Fe._shouldAllowMigration&&In.length?(Fe=In[0],Ht&&(yield Fe._set(et,Ht.toJSON())),yield Promise.all(z.map(function(){var mn=(0,R.A)(function*(Ar){if(Ar!==Fe)try{yield Ar._remove(et)}catch{}});return function(Ar){return mn.apply(this,arguments)}}())),new Bn(Fe,b,Q)):new Bn(Fe,b,Q)}).apply(this,arguments)}}function nr(w){const d=w.toLowerCase();if(d.includes("opera/")||d.includes("opr/")||d.includes("opios/"))return"Opera";if(hi(d))return"IEMobile";if(d.includes("msie")||d.includes("trident/"))return"IE";if(d.includes("edge/"))return"Edge";if(ot(d))return"Firefox";if(d.includes("silk/"))return"Silk";if(zi(d))return"Blackberry";if(Gn(d))return"Webos";if(ri(d))return"Safari";if((d.includes("chrome/")||Ni(d))&&!d.includes("edge/"))return"Chrome";if(Yo(d))return"Android";{const b=w.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===b?.length)return b[1]}return"Other"}function ot(w=(0,Se.ZQ)()){return/firefox\//i.test(w)}function ri(w=(0,Se.ZQ)()){const d=w.toLowerCase();return d.includes("safari/")&&!d.includes("chrome/")&&!d.includes("crios/")&&!d.includes("android")}function Ni(w=(0,Se.ZQ)()){return/crios\//i.test(w)}function hi(w=(0,Se.ZQ)()){return/iemobile/i.test(w)}function Yo(w=(0,Se.ZQ)()){return/android/i.test(w)}function zi(w=(0,Se.ZQ)()){return/blackberry/i.test(w)}function Gn(w=(0,Se.ZQ)()){return/webos/i.test(w)}function pa(w=(0,Se.ZQ)()){return/iphone|ipad|ipod/i.test(w)||/macintosh/i.test(w)&&/mobile/i.test(w)}function be(w=(0,Se.ZQ)()){return pa(w)||Yo(w)||Gn(w)||zi(w)||/windows phone/i.test(w)||hi(w)}function We(w,d=[]){let _;switch(w){case"Browser":_=nr((0,Se.ZQ)());break;case"Worker":_=`${nr((0,Se.ZQ)())}-${w}`;break;default:_=w}const b=d.length?d.join(","):"FirebaseCore-web";return`${_}/JsCore/${J.MF}/${b}`}class wt{constructor(d){this.auth=d,this.queue=[]}pushCallback(d,_){const b=Q=>new Promise((ve,Fe)=>{try{ve(d(Q))}catch(et){Fe(et)}});b.onAbort=_,this.queue.push(b);const z=this.queue.length-1;return()=>{this.queue[z]=()=>Promise.resolve()}}runMiddleware(d){var _=this;return(0,R.A)(function*(){if(_.auth.currentUser===d)return;const b=[];try{for(const z of _.queue)yield z(d),z.onAbort&&b.push(z.onAbort)}catch(z){b.reverse();for(const Q of b)try{Q()}catch{}throw _.auth._errorFactory.create("login-blocked",{originalMessage:z?.message})}})()}}function $t(){return($t=(0,R.A)(function*(w,d={}){return K(w,"GET","/v2/passwordPolicy",W(w,d))})).apply(this,arguments)}class ar{constructor(d){var _,b,z,Q;const ve=d.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(_=ve.minPasswordLength)&&void 0!==_?_:6,ve.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=ve.maxPasswordLength),void 0!==ve.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=ve.containsLowercaseCharacter),void 0!==ve.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=ve.containsUppercaseCharacter),void 0!==ve.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=ve.containsNumericCharacter),void 0!==ve.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=ve.containsNonAlphanumericCharacter),this.enforcementState=d.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(z=null===(b=d.allowedNonAlphanumericCharacters)||void 0===b?void 0:b.join(""))&&void 0!==z?z:"",this.forceUpgradeOnSignin=null!==(Q=d.forceUpgradeOnSignin)&&void 0!==Q&&Q,this.schemaVersion=d.schemaVersion}validatePassword(d){var _,b,z,Q,ve,Fe;const et={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(d,et),this.validatePasswordCharacterOptions(d,et),et.isValid&&(et.isValid=null===(_=et.meetsMinPasswordLength)||void 0===_||_),et.isValid&&(et.isValid=null===(b=et.meetsMaxPasswordLength)||void 0===b||b),et.isValid&&(et.isValid=null===(z=et.containsLowercaseLetter)||void 0===z||z),et.isValid&&(et.isValid=null===(Q=et.containsUppercaseLetter)||void 0===Q||Q),et.isValid&&(et.isValid=null===(ve=et.containsNumericCharacter)||void 0===ve||ve),et.isValid&&(et.isValid=null===(Fe=et.containsNonAlphanumericCharacter)||void 0===Fe||Fe),et}validatePasswordLengthOptions(d,_){const b=this.customStrengthOptions.minPasswordLength,z=this.customStrengthOptions.maxPasswordLength;b&&(_.meetsMinPasswordLength=d.length>=b),z&&(_.meetsMaxPasswordLength=d.length<=z)}validatePasswordCharacterOptions(d,_){let b;this.updatePasswordCharacterOptionsStatuses(_,!1,!1,!1,!1);for(let z=0;z<d.length;z++)b=d.charAt(z),this.updatePasswordCharacterOptionsStatuses(_,b>="a"&&b<="z",b>="A"&&b<="Z",b>="0"&&b<="9",this.allowedNonAlphanumericCharacters.includes(b))}updatePasswordCharacterOptionsStatuses(d,_,b,z,Q){this.customStrengthOptions.containsLowercaseLetter&&(d.containsLowercaseLetter||(d.containsLowercaseLetter=_)),this.customStrengthOptions.containsUppercaseLetter&&(d.containsUppercaseLetter||(d.containsUppercaseLetter=b)),this.customStrengthOptions.containsNumericCharacter&&(d.containsNumericCharacter||(d.containsNumericCharacter=z)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(d.containsNonAlphanumericCharacter||(d.containsNonAlphanumericCharacter=Q))}}class Ot{constructor(d,_,b,z){this.app=d,this.heartbeatServiceProvider=_,this.appCheckServiceProvider=b,this.config=z,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Zr(this),this.idTokenSubscription=new Zr(this),this.beforeStateQueue=new wt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=fn,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=d.name,this.clientVersion=z.sdkClientVersion}_initializeWithPersistence(d,_){var b=this;return _&&(this._popupRedirectResolver=mt(_)),this._initializationPromise=this.queue((0,R.A)(function*(){var z,Q;if(!b._deleted&&(b.persistenceManager=yield Bn.create(b,d),!b._deleted)){if(null!==(z=b._popupRedirectResolver)&&void 0!==z&&z._shouldInitProactively)try{yield b._popupRedirectResolver._initialize(b)}catch{}yield b.initializeCurrentUser(_),b.lastNotifiedUid=(null===(Q=b.currentUser)||void 0===Q?void 0:Q.uid)||null,!b._deleted&&(b._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var d=this;return(0,R.A)(function*(){if(d._deleted)return;const _=yield d.assertedPersistence.getCurrentUser();if(d.currentUser||_){if(d.currentUser&&_&&d.currentUser.uid===_.uid)return d._currentUser._assign(_),void(yield d.currentUser.getIdToken());yield d._updateCurrentUser(_,!0)}})()}initializeCurrentUserFromIdToken(d){var _=this;return(0,R.A)(function*(){try{const b=yield Pt(_,{idToken:d}),z=yield Be._fromGetAccountInfoResponse(_,b,d);yield _.directlySetCurrentUser(z)}catch(b){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",b),yield _.directlySetCurrentUser(null)}})()}initializeCurrentUser(d){var _=this;return(0,R.A)(function*(){var b;if((0,J.xZ)(_.app)){const Fe=_.app.settings.authIdToken;return Fe?new Promise(et=>{setTimeout(()=>_.initializeCurrentUserFromIdToken(Fe).then(et,et))}):_.directlySetCurrentUser(null)}const z=yield _.assertedPersistence.getCurrentUser();let Q=z,ve=!1;if(d&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const Fe=null===(b=_.redirectUser)||void 0===b?void 0:b._redirectEventId,et=Q?._redirectEventId,Ht=yield _.tryRedirectSignIn(d);(!Fe||Fe===et)&&Ht?.user&&(Q=Ht.user,ve=!0)}if(!Q)return _.directlySetCurrentUser(null);if(!Q._redirectEventId){if(ve)try{yield _.beforeStateQueue.runMiddleware(Q)}catch(Fe){Q=z,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(Fe))}return Q?_.reloadAndSetCurrentUserOrClear(Q):_.directlySetCurrentUser(null)}return De(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===Q._redirectEventId?_.directlySetCurrentUser(Q):_.reloadAndSetCurrentUserOrClear(Q)})()}tryRedirectSignIn(d){var _=this;return(0,R.A)(function*(){let b=null;try{b=yield _._popupRedirectResolver._completeRedirectFn(_,d,!0)}catch{yield _._setRedirectUser(null)}return b})()}reloadAndSetCurrentUserOrClear(d){var _=this;return(0,R.A)(function*(){try{yield jr(d)}catch(b){if("auth/network-request-failed"!==b?.code)return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(d)})()}useDeviceLanguage(){this.languageCode=function cr(){if(typeof navigator>"u")return null;const w=navigator;return w.languages&&w.languages[0]||w.language||null}()}_delete(){var d=this;return(0,R.A)(function*(){d._deleted=!0})()}updateCurrentUser(d){var _=this;return(0,R.A)(function*(){if((0,J.xZ)(_.app))return Promise.reject(it(_));const b=d?(0,Se.Ku)(d):null;return b&&De(b.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(b&&b._clone(_))})()}_updateCurrentUser(d){var _=this;return(0,R.A)(function*(b,z=!1){if(!_._deleted)return b&&De(_.tenantId===b.tenantId,_,"tenant-id-mismatch"),z||(yield _.beforeStateQueue.runMiddleware(b)),_.queue((0,R.A)(function*(){yield _.directlySetCurrentUser(b),_.notifyAuthListeners()}))}).apply(this,arguments)}signOut(){var d=this;return(0,R.A)(function*(){return(0,J.xZ)(d.app)?Promise.reject(it(d)):(yield d.beforeStateQueue.runMiddleware(null),(d.redirectPersistenceManager||d._popupRedirectResolver)&&(yield d._setRedirectUser(null)),d._updateCurrentUser(null,!0))})()}setPersistence(d){var _=this;return(0,J.xZ)(this.app)?Promise.reject(it(this)):this.queue((0,R.A)(function*(){yield _.assertedPersistence.setPersistence(mt(d))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(d){var _=this;return(0,R.A)(function*(){_._getPasswordPolicyInternal()||(yield _._updatePasswordPolicy());const b=_._getPasswordPolicyInternal();return b.schemaVersion!==_.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(_._errorFactory.create("unsupported-password-policy-schema-version",{})):b.validatePassword(d)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var d=this;return(0,R.A)(function*(){const _=yield function Jt(w){return $t.apply(this,arguments)}(d),b=new ar(_);null===d.tenantId?d._projectPasswordPolicy=b:d._tenantPasswordPolicies[d.tenantId]=b})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(d){this._errorFactory=new Se.FA("auth","Firebase",d())}onAuthStateChanged(d,_,b){return this.registerStateListener(this.authStateSubscription,d,_,b)}beforeAuthStateChanged(d,_){return this.beforeStateQueue.pushCallback(d,_)}onIdTokenChanged(d,_,b){return this.registerStateListener(this.idTokenSubscription,d,_,b)}authStateReady(){return new Promise((d,_)=>{if(this.currentUser)d();else{const b=this.onAuthStateChanged(()=>{b(),d()},_)}})}revokeAccessToken(d){var _=this;return(0,R.A)(function*(){if(_.currentUser){const b=yield _.currentUser.getIdToken(),z={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:d,idToken:b};null!=_.tenantId&&(z.tenantId=_.tenantId),yield function bt(w,d){return re.apply(this,arguments)}(_,z)}})()}toJSON(){var d;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(d=this._currentUser)||void 0===d?void 0:d.toJSON()}}_setRedirectUser(d,_){var b=this;return(0,R.A)(function*(){const z=yield b.getOrInitRedirectPersistenceManager(_);return null===d?z.removeCurrentUser():z.setCurrentUser(d)})()}getOrInitRedirectPersistenceManager(d){var _=this;return(0,R.A)(function*(){if(!_.redirectPersistenceManager){const b=d&&mt(d)||_._popupRedirectResolver;De(b,_,"argument-error"),_.redirectPersistenceManager=yield Bn.create(_,[mt(b._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(d){var _=this;return(0,R.A)(function*(){var b,z;return _._isInitialized&&(yield _.queue((0,R.A)(function*(){}))),(null===(b=_._currentUser)||void 0===b?void 0:b._redirectEventId)===d?_._currentUser:(null===(z=_.redirectUser)||void 0===z?void 0:z._redirectEventId)===d?_.redirectUser:null})()}_persistUserIfCurrent(d){var _=this;return(0,R.A)(function*(){if(d===_.currentUser)return _.queue((0,R.A)(function*(){return _.directlySetCurrentUser(d)}))})()}_notifyListenersIfCurrent(d){d===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var d,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const b=null!==(_=null===(d=this.currentUser)||void 0===d?void 0:d.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==b&&(this.lastNotifiedUid=b,this.authStateSubscription.next(this.currentUser))}registerStateListener(d,_,b,z){if(this._deleted)return()=>{};const Q="function"==typeof _?_:_.next.bind(_);let ve=!1;const Fe=this._isInitialized?Promise.resolve():this._initializationPromise;if(De(Fe,this,"internal-error"),Fe.then(()=>{ve||Q(this.currentUser)}),"function"==typeof _){const et=d.addObserver(_,b,z);return()=>{ve=!0,et()}}{const et=d.addObserver(_);return()=>{ve=!0,et()}}}directlySetCurrentUser(d){var _=this;return(0,R.A)(function*(){_.currentUser&&_.currentUser!==d&&_._currentUser._stopProactiveRefresh(),d&&_.isProactiveRefreshEnabled&&d._startProactiveRefresh(),_.currentUser=d,d?yield _.assertedPersistence.setCurrentUser(d):yield _.assertedPersistence.removeCurrentUser()})()}queue(d){return this.operations=this.operations.then(d,d),this.operations}get assertedPersistence(){return De(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(d){!d||this.frameworks.includes(d)||(this.frameworks.push(d),this.frameworks.sort(),this.clientVersion=We(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var d=this;return(0,R.A)(function*(){var _;const b={"X-Client-Version":d.clientVersion};d.app.options.appId&&(b["X-Firebase-gmpid"]=d.app.options.appId);const z=yield null===(_=d.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();z&&(b["X-Firebase-Client"]=z);const Q=yield d._getAppCheckToken();return Q&&(b["X-Firebase-AppCheck"]=Q),b})()}_getAppCheckToken(){var d=this;return(0,R.A)(function*(){var _;const b=yield null===(_=d.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getToken();return b?.error&&function xn(w,...d){Bt.logLevel<=p.$b.WARN&&Bt.warn(`Auth (${J.MF}): ${w}`,...d)}(`Error while retrieving App Check token: ${b.error}`),b?.token})()}}function Tn(w){return(0,Se.Ku)(w)}class Zr{constructor(d){this.auth=d,this.observer=null,this.addObserver=(0,Se.tD)(_=>this.observer=_)}get next(){return De(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Gi={loadJS:()=>(0,R.A)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Ks(w){return Gi.loadJS(w)}function La(w){return`__${w}${Math.floor(1e6*Math.random())}`}function ii(w){const d=w.indexOf(":");return d<0?"":w.substr(0,d+1)}function Os(w){if(!w)return null;const d=Number(w);return isNaN(d)?null:d}class Zn{constructor(d,_){this.providerId=d,this.signInMethod=_}toJSON(){return rn("not implemented")}_getIdTokenResponse(d){return rn("not implemented")}_linkToIdToken(d,_){return rn("not implemented")}_getReauthenticationResolver(d){return rn("not implemented")}}function Rr(w,d){return ts.apply(this,arguments)}function ts(){return(ts=(0,R.A)(function*(w,d){return kt(w,"POST","/v1/accounts:signInWithIdp",W(w,d))})).apply(this,arguments)}function Fs(){return(Fs=(0,R.A)(function*(w,d){return K(w,"POST","/v1/accounts:sendVerificationCode",W(w,d))})).apply(this,arguments)}function gi(){return(gi=(0,R.A)(function*(w,d){return kt(w,"POST","/v1/accounts:signInWithPhoneNumber",W(w,d))})).apply(this,arguments)}function Sn(){return(Sn=(0,R.A)(function*(w,d){const _=yield kt(w,"POST","/v1/accounts:signInWithPhoneNumber",W(w,d));if(_.temporaryProof)throw Ur(w,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const lo={USER_NOT_FOUND:"user-not-found"};function Di(){return(Di=(0,R.A)(function*(w,d){return kt(w,"POST","/v1/accounts:signInWithPhoneNumber",W(w,Object.assign(Object.assign({},d),{operation:"REAUTH"})),lo)})).apply(this,arguments)}class si extends Zn{constructor(d){super("phone","phone"),this.params=d}static _fromVerification(d,_){return new si({verificationId:d,verificationCode:_})}static _fromTokenResponse(d,_){return new si({phoneNumber:d,temporaryProof:_})}_getIdTokenResponse(d){return function Zs(w,d){return gi.apply(this,arguments)}(d,this._makeVerificationRequest())}_linkToIdToken(d,_){return function ki(w,d){return Sn.apply(this,arguments)}(d,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(d){return function rr(w,d){return Di.apply(this,arguments)}(d,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:d,phoneNumber:_,verificationId:b,verificationCode:z}=this.params;return d&&_?{temporaryProof:d,phoneNumber:_}:{sessionInfo:b,code:z}}toJSON(){const d={providerId:this.providerId};return this.params.phoneNumber&&(d.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(d.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(d.verificationCode=this.params.verificationCode),this.params.verificationId&&(d.verificationId=this.params.verificationId),d}static fromJSON(d){"string"==typeof d&&(d=JSON.parse(d));const{verificationId:_,verificationCode:b,phoneNumber:z,temporaryProof:Q}=d;return b||_||z||Q?new si({verificationId:_,verificationCode:b,phoneNumber:z,temporaryProof:Q}):null}}class Dn{constructor(d){this.providerId=d,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(d){this.defaultLanguageCode=d}setCustomParameters(d){return this.customParameters=d,this}getCustomParameters(){return this.customParameters}}class zr extends Dn{constructor(){super(...arguments),this.scopes=[]}addScope(d){return this.scopes.includes(d)||this.scopes.push(d),this}getScopes(){return[...this.scopes]}}class ai{constructor(d){this.user=d.user,this.providerId=d.providerId,this._tokenResponse=d._tokenResponse,this.operationType=d.operationType}static _fromIdTokenResponse(d,_,b){return(0,R.A)(function*(z,Q,ve,Fe=!1){const et=yield Be._fromIdTokenResponse(z,ve,Fe),Ht=_s(ve);return new ai({user:et,providerId:Ht,_tokenResponse:ve,operationType:Q})}).apply(this,arguments)}static _forOperation(d,_,b){return(0,R.A)(function*(){yield d._updateTokensIfNecessary(b,!0);const z=_s(b);return new ai({user:d,providerId:z,_tokenResponse:b,operationType:_})})()}}function _s(w){return w.providerId?w.providerId:"phoneNumber"in w?"phone":null}class zo extends Se.g{constructor(d,_,b,z){var Q;super(_.code,_.message),this.operationType=b,this.user=z,Object.setPrototypeOf(this,zo.prototype),this.customData={appName:d.name,tenantId:null!==(Q=d.tenantId)&&void 0!==Q?Q:void 0,_serverResponse:_.customData._serverResponse,operationType:b}}static _fromErrorAndOperation(d,_,b,z){return new zo(d,_,b,z)}}function ea(w,d,_,b){return("reauthenticate"===d?_._getReauthenticationResolver(w):_._getIdTokenResponse(w)).catch(Q=>{throw"auth/multi-factor-auth-required"===Q.code?zo._fromErrorAndOperation(w,Q,d,b):Q})}function ir(){return(ir=(0,R.A)(function*(w,d,_=!1){const b=yield _n(w,d._linkToIdToken(w.auth,yield w.getIdToken()),_);return ai._forOperation(w,"link",b)})).apply(this,arguments)}function vs(){return(vs=(0,R.A)(function*(w,d,_=!1){const{auth:b}=w;if((0,J.xZ)(b.app))return Promise.reject(it(b));const z="reauthenticate";try{const Q=yield _n(w,ea(b,z,d,w),_);De(Q.idToken,b,"internal-error");const ve=jn(Q.idToken);De(ve,b,"internal-error");const{sub:Fe}=ve;return De(w.uid===Fe,b,"user-mismatch"),ai._forOperation(w,z,Q)}catch(Q){throw"auth/user-not-found"===Q?.code&&ct(b,"user-mismatch"),Q}})).apply(this,arguments)}function Ls(w,d){return as.apply(this,arguments)}function as(){return(as=(0,R.A)(function*(w,d,_=!1){if((0,J.xZ)(w.app))return Promise.reject(it(w));const b="signIn",z=yield ea(w,b,d),Q=yield ai._fromIdTokenResponse(w,b,z);return _||(yield w._updateCurrentUser(Q.user)),Q})).apply(this,arguments)}function Wr(){return(Wr=(0,R.A)(function*(w,d){return Ls(Tn(w),d)})).apply(this,arguments)}function Qn(w,d,_,b){return(0,Se.Ku)(w).onAuthStateChanged(d,_,b)}function Vn(w){return(0,Se.Ku)(w).signOut()}const hc="__sak";class ia{constructor(d,_){this.storageRetriever=d,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(hc,"1"),this.storage.removeItem(hc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(d,_){return this.storage.setItem(d,JSON.stringify(_)),Promise.resolve()}_get(d){const _=this.storage.getItem(d);return Promise.resolve(_?JSON.parse(_):null)}_remove(d){return this.storage.removeItem(d),Promise.resolve()}get storage(){return this.storageRetriever()}}const js=(()=>{class w extends ia{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,b)=>this.onStorageEvent(_,b),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=be(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const b of Object.keys(this.listeners)){const z=this.storage.getItem(b),Q=this.localCache[b];z!==Q&&_(b,Q,z)}}onStorageEvent(_,b=!1){if(!_.key)return void this.forAllChangedKeys((Fe,et,Ht)=>{this.notifyListeners(Fe,Ht)});const z=_.key;b?this.detachListener():this.stopPolling();const Q=()=>{const Fe=this.storage.getItem(z);!b&&this.localCache[z]===Fe||this.notifyListeners(z,Fe)},ve=this.storage.getItem(z);!function je(){return(0,Se.lT)()&&10===document.documentMode}()||ve===_.newValue||_.newValue===_.oldValue?Q():setTimeout(Q,10)}notifyListeners(_,b){this.localCache[_]=b;const z=this.listeners[_];if(z)for(const Q of Array.from(z))Q(b&&JSON.parse(b))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,b,z)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:b,newValue:z}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,b){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(b)}_removeListener(_,b){this.listeners[_]&&(this.listeners[_].delete(b),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,b){var z=()=>super._set,Q=this;return(0,R.A)(function*(){yield z().call(Q,_,b),Q.localCache[_]=JSON.stringify(b)})()}_get(_){var b=()=>super._get,z=this;return(0,R.A)(function*(){const Q=yield b().call(z,_);return z.localCache[_]=JSON.stringify(Q),Q})()}_remove(_){var b=()=>super._remove,z=this;return(0,R.A)(function*(){yield b().call(z,_),delete z.localCache[_]})()}}return w.type="LOCAL",w})(),pc=(()=>{class w extends ia{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,b){}_removeListener(_,b){}}return w.type="SESSION",w})();let gc=(()=>{class w{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const b=this.receivers.find(Q=>Q.isListeningto(_));if(b)return b;const z=new w(_);return this.receivers.push(z),z}isListeningto(_){return this.eventTarget===_}handleEvent(_){var b=this;return(0,R.A)(function*(){const z=_,{eventId:Q,eventType:ve,data:Fe}=z.data,et=b.handlersMap[ve];if(!et?.size)return;z.ports[0].postMessage({status:"ack",eventId:Q,eventType:ve});const Ht=Array.from(et).map(function(){var mn=(0,R.A)(function*(Ar){return Ar(z.origin,Fe)});return function(Ar){return mn.apply(this,arguments)}}()),In=yield function So(w){return Promise.all(w.map(function(){var d=(0,R.A)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(b){return{fulfilled:!1,reason:b}}});return function(_){return d.apply(this,arguments)}}()))}(Ht);z.ports[0].postMessage({status:"done",eventId:Q,eventType:ve,response:In})})()}_subscribe(_,b){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(b)}_unsubscribe(_,b){this.handlersMap[_]&&b&&this.handlersMap[_].delete(b),(!b||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return w.receivers=[],w})();function Ro(w="",d=10){let _="";for(let b=0;b<d;b++)_+=Math.floor(10*Math.random());return w+_}class Rt{constructor(d){this.target=d,this.handlers=new Set}removeMessageHandler(d){d.messageChannel&&(d.messageChannel.port1.removeEventListener("message",d.onMessage),d.messageChannel.port1.close()),this.handlers.delete(d)}_send(d,_){var b=this;return(0,R.A)(function*(z,Q,ve=50){const Fe=typeof MessageChannel<"u"?new MessageChannel:null;if(!Fe)throw new Error("connection_unavailable");let et,Ht;return new Promise((In,mn)=>{const Ar=Ro("",20);Fe.port1.start();const Mi=setTimeout(()=>{mn(new Error("unsupported_event"))},ve);Ht={messageChannel:Fe,onMessage(qc){const Qr=qc;if(Qr.data.eventId===Ar)switch(Qr.data.status){case"ack":clearTimeout(Mi),et=setTimeout(()=>{mn(new Error("timeout"))},3e3);break;case"done":clearTimeout(et),In(Qr.data.response);break;default:clearTimeout(Mi),clearTimeout(et),mn(new Error("invalid_response"))}}},b.handlers.add(Ht),Fe.port1.addEventListener("message",Ht.onMessage),b.target.postMessage({eventType:z,eventId:Ar,data:Q},[Fe.port2])}).finally(()=>{Ht&&b.removeMessageHandler(Ht)})}).apply(this,arguments)}}function Or(){return window}function _o(){return typeof Or().WorkerGlobalScope<"u"&&"function"==typeof Or().importScripts}function Ii(){return(Ii=(0,R.A)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const ei="firebaseLocalStorageDb",Ka="firebaseLocalStorage",ws="fbase_key";class $s{constructor(d){this.request=d}toPromise(){return new Promise((d,_)=>{this.request.addEventListener("success",()=>{d(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function Hi(w,d){return w.transaction([Ka],d?"readwrite":"readonly").objectStore(Ka)}function Qa(){const w=indexedDB.open(ei,1);return new Promise((d,_)=>{w.addEventListener("error",()=>{_(w.error)}),w.addEventListener("upgradeneeded",()=>{const b=w.result;try{b.createObjectStore(Ka,{keyPath:ws})}catch(z){_(z)}}),w.addEventListener("success",(0,R.A)(function*(){const b=w.result;b.objectStoreNames.contains(Ka)?d(b):(b.close(),yield function Hs(){const w=indexedDB.deleteDatabase(ei);return new $s(w).toPromise()}(),d(yield Qa()))}))})}function Yl(w,d,_){return Sa.apply(this,arguments)}function Sa(){return(Sa=(0,R.A)(function*(w,d,_){const b=Hi(w,!0).put({[ws]:d,value:_});return new $s(b).toPromise()})).apply(this,arguments)}function fu(){return(fu=(0,R.A)(function*(w,d){const _=Hi(w,!1).get(d),b=yield new $s(_).toPromise();return void 0===b?null:b.value})).apply(this,arguments)}function Uc(w,d){const _=Hi(w,!0).delete(d);return new $s(_).toPromise()}const Gp=(()=>{class w{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,R.A)(function*(){return _.db||(_.db=yield Qa()),_.db})()}_withRetries(_){var b=this;return(0,R.A)(function*(){let z=0;for(;;)try{const Q=yield b._openDb();return yield _(Q)}catch(Q){if(z++>3)throw Q;b.db&&(b.db.close(),b.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,R.A)(function*(){return _o()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,R.A)(function*(){_.receiver=gc._getInstance(function mc(){return _o()?self:null}()),_.receiver._subscribe("keyChanged",function(){var b=(0,R.A)(function*(z,Q){return{keyProcessed:(yield _._poll()).includes(Q.key)}});return function(z,Q){return b.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var b=(0,R.A)(function*(z,Q){return["keyChanged"]});return function(z,Q){return b.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,R.A)(function*(){var b,z;if(_.activeServiceWorker=yield function oa(){return Ii.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new Rt(_.activeServiceWorker);const Q=yield _.sender._send("ping",{},800);Q&&null!==(b=Q[0])&&void 0!==b&&b.fulfilled&&null!==(z=Q[0])&&void 0!==z&&z.value.includes("keyChanged")&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var b=this;return(0,R.A)(function*(){if(b.sender&&b.activeServiceWorker&&function hr(){var w;return(null===(w=navigator?.serviceWorker)||void 0===w?void 0:w.controller)||null}()===b.activeServiceWorker)try{yield b.sender._send("keyChanged",{key:_},b.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,R.A)(function*(){try{if(!indexedDB)return!1;const _=yield Qa();return yield Yl(_,hc,"1"),yield Uc(_,hc),!0}catch{}return!1})()}_withPendingWrite(_){var b=this;return(0,R.A)(function*(){b.pendingWrites++;try{yield _()}finally{b.pendingWrites--}})()}_set(_,b){var z=this;return(0,R.A)(function*(){return z._withPendingWrite((0,R.A)(function*(){return yield z._withRetries(Q=>Yl(Q,_,b)),z.localCache[_]=b,z.notifyServiceWorker(_)}))})()}_get(_){var b=this;return(0,R.A)(function*(){const z=yield b._withRetries(Q=>function Lc(w,d){return fu.apply(this,arguments)}(Q,_));return b.localCache[_]=z,z})()}_remove(_){var b=this;return(0,R.A)(function*(){return b._withPendingWrite((0,R.A)(function*(){return yield b._withRetries(z=>Uc(z,_)),delete b.localCache[_],b.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,R.A)(function*(){const b=yield _._withRetries(ve=>{const Fe=Hi(ve,!1).getAll();return new $s(Fe).toPromise()});if(!b)return[];if(0!==_.pendingWrites)return[];const z=[],Q=new Set;if(0!==b.length)for(const{fbase_key:ve,value:Fe}of b)Q.add(ve),JSON.stringify(_.localCache[ve])!==JSON.stringify(Fe)&&(_.notifyListeners(ve,Fe),z.push(ve));for(const ve of Object.keys(_.localCache))_.localCache[ve]&&!Q.has(ve)&&(_.notifyListeners(ve,null),z.push(ve));return z})()}notifyListeners(_,b){this.localCache[_]=b;const z=this.listeners[_];if(z)for(const Q of Array.from(z))Q(b)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,R.A)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,b){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(b)}_removeListener(_,b){this.listeners[_]&&(this.listeners[_].delete(b),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return w.type="LOCAL",w})(),pu=1e12;class Ra{constructor(d){this.auth=d,this.counter=pu,this._widgets=new Map}render(d,_){const b=this.counter;return this._widgets.set(b,new Vh(d,this.auth.name,_||{})),this.counter++,b}reset(d){var _;const b=d||pu;null===(_=this._widgets.get(b))||void 0===_||_.delete(),this._widgets.delete(b)}getResponse(d){var _;return(null===(_=this._widgets.get(d||pu))||void 0===_?void 0:_.getResponse())||""}execute(d){var _=this;return(0,R.A)(function*(){var b;return null===(b=_._widgets.get(d||pu))||void 0===b||b.execute(),""})()}}class Vh{constructor(d,_,b){this.params=b,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const z="string"==typeof d?document.getElementById(d):d;De(z,"argument-error",{appName:_}),this.container=z,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function gu(w){const d=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let b=0;b<w;b++)d.push(_.charAt(Math.floor(62*Math.random())));return d.join("")}(50);const{callback:d,"expired-callback":_}=this.params;if(d)try{d(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Bc=La("rcb"),Yu=new Lr(3e4,6e4);class _c{constructor(){var d;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(d=Or().grecaptcha)||void 0===d||!d.render)}load(d,_=""){return De(function yc(w){return w.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(w)}(_),d,"argument-error"),this.shouldResolveImmediately(_)&&zn(Or().grecaptcha)?Promise.resolve(Or().grecaptcha):new Promise((b,z)=>{const Q=Or().setTimeout(()=>{z(qe(d,"network-request-failed"))},Yu.get());Or()[Bc]=()=>{Or().clearTimeout(Q),delete Or()[Bc];const Fe=Or().grecaptcha;if(!Fe||!zn(Fe))return void z(qe(d,"internal-error"));const et=Fe.render;Fe.render=(Ht,In)=>{const mn=et(Ht,In);return this.counter++,mn},this.hostLanguage=_,b(Fe)},Ks(`${function xs(){return Gi.recaptchaV2Script}()}?${(0,Se.Am)({onload:Bc,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(Q),z(qe(d,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(d){var _;return!(null===(_=Or().grecaptcha)||void 0===_||!_.render)&&(d===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class vc{load(d){return(0,R.A)(function*(){return new Ra(d)})()}clearedOneInstance(){}}const Ic="recaptcha",Zu={theme:"light",type:"image"};class I{constructor(d,_,b=Object.assign({},Zu)){this.parameters=b,this.type=Ic,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Tn(d),this.isInvisible="invisible"===this.parameters.size,De(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const z="string"==typeof _?document.getElementById(_):_;De(z,this.auth,"argument-error"),this.container=z,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new vc:new _c,this.validateStartingState()}verify(){var d=this;return(0,R.A)(function*(){d.assertNotDestroyed();const _=yield d.render(),b=d.getAssertedRecaptcha();return b.getResponse(_)||new Promise(Q=>{const ve=Fe=>{Fe&&(d.tokenChangeListeners.delete(ve),Q(Fe))};d.tokenChangeListeners.add(ve),d.isInvisible&&b.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(d){return Promise.reject(d)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(d=>{throw this.renderPromise=null,d})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(d=>{this.container.removeChild(d)})}validateStartingState(){De(!this.parameters.sitekey,this.auth,"argument-error"),De(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),De(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(d){return _=>{if(this.tokenChangeListeners.forEach(b=>b(_)),"function"==typeof d)d(_);else if("string"==typeof d){const b=Or()[d];"function"==typeof b&&b(_)}}}assertNotDestroyed(){De(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var d=this;return(0,R.A)(function*(){if(yield d.init(),!d.widgetId){let _=d.container;if(!d.isInvisible){const b=document.createElement("div");_.appendChild(b),_=b}d.widgetId=d.getAssertedRecaptcha().render(_,d.parameters)}return d.widgetId})()}init(){var d=this;return(0,R.A)(function*(){De(Hn()&&!_o(),d.auth,"internal-error"),yield function A(){let w=null;return new Promise(d=>{"complete"!==document.readyState?(w=()=>d(),window.addEventListener("load",w)):d()}).catch(d=>{throw w&&window.removeEventListener("load",w),d})}(),d.recaptcha=yield d._recaptchaLoader.load(d.auth,d.auth.languageCode||void 0);const _=yield function Nt(w){return ut.apply(this,arguments)}(d.auth);De(_,d.auth,"internal-error"),d.parameters.sitekey=_})()}getAssertedRecaptcha(){return De(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class C{constructor(d,_){this.verificationId=d,this.onConfirmation=_}confirm(d){const _=si._fromVerification(this.verificationId,d);return this.onConfirmation(_)}}function P(w,d,_){return U.apply(this,arguments)}function U(){return(U=(0,R.A)(function*(w,d,_){if((0,J.xZ)(w.app))return Promise.reject(it(w));const b=Tn(w),z=yield function st(w,d,_){return Lt.apply(this,arguments)}(b,d,(0,Se.Ku)(_));return new C(z,Q=>function bo(w,d){return Wr.apply(this,arguments)}(b,Q))})).apply(this,arguments)}function Lt(){return Lt=(0,R.A)(function*(w,d,_){var b;const z=yield _.verify();try{let Q;if(De("string"==typeof z,w,"argument-error"),De(_.type===Ic,w,"argument-error"),Q="string"==typeof d?{phoneNumber:d}:d,"session"in Q){const ve=Q.session;if("phoneNumber"in Q)return De("enroll"===ve.type,w,"internal-error"),(yield function Cr(w,d){return K(w,"POST","/v2/accounts/mfaEnrollment:start",W(w,d))}(w,{idToken:ve.credential,phoneEnrollmentInfo:{phoneNumber:Q.phoneNumber,recaptchaToken:z}})).phoneSessionInfo.sessionInfo;{De("signin"===ve.type,w,"internal-error");const Fe=(null===(b=Q.multiFactorHint)||void 0===b?void 0:b.uid)||Q.multiFactorUid;return De(Fe,w,"missing-multi-factor-info"),(yield function Wp(w,d){return K(w,"POST","/v2/accounts/mfaSignIn:start",W(w,d))}(w,{mfaPendingCredential:ve.credential,mfaEnrollmentId:Fe,phoneSignInInfo:{recaptchaToken:z}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ve}=yield function ns(w,d){return Fs.apply(this,arguments)}(w,{phoneNumber:Q.phoneNumber,recaptchaToken:z});return ve}}finally{_._reset()}}),Lt.apply(this,arguments)}class pr extends Zn{constructor(d){super("custom","custom"),this.params=d}_getIdTokenResponse(d){return Rr(d,this._buildIdpRequest())}_linkToIdToken(d,_){return Rr(d,this._buildIdpRequest(_))}_getReauthenticationResolver(d){return Rr(d,this._buildIdpRequest())}_buildIdpRequest(d){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return d&&(_.idToken=d),_}}function Ei(w){return Ls(w.auth,new pr(w),w.bypassAuthState)}function kr(w){const{auth:d,user:_}=w;return De(_,d,"internal-error"),function $a(w,d){return vs.apply(this,arguments)}(_,new pr(w),w.bypassAuthState)}function vo(w){return mi.apply(this,arguments)}function mi(){return(mi=(0,R.A)(function*(w){const{auth:d,user:_}=w;return De(_,d,"internal-error"),function ys(w,d){return ir.apply(this,arguments)}(_,new pr(w),w.bypassAuthState)})).apply(this,arguments)}class Lh{constructor(d,_,b,z,Q=!1){this.auth=d,this.resolver=b,this.user=z,this.bypassAuthState=Q,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var d=this;return new Promise(function(){var _=(0,R.A)(function*(b,z){d.pendingPromise={resolve:b,reject:z};try{d.eventManager=yield d.resolver._initialize(d.auth),yield d.onExecution(),d.eventManager.registerConsumer(d)}catch(Q){d.reject(Q)}});return function(b,z){return _.apply(this,arguments)}}())}onAuthEvent(d){var _=this;return(0,R.A)(function*(){const{urlResponse:b,sessionId:z,postBody:Q,tenantId:ve,error:Fe,type:et}=d;if(Fe)return void _.reject(Fe);const Ht={auth:_.auth,requestUri:b,sessionId:z,tenantId:ve||void 0,postBody:Q||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(et)(Ht))}catch(In){_.reject(In)}})()}onError(d){this.reject(d)}getIdpTask(d){switch(d){case"signInViaPopup":case"signInViaRedirect":return Ei;case"linkViaPopup":case"linkViaRedirect":return vo;case"reauthViaPopup":case"reauthViaRedirect":return kr;default:ct(this.auth,"internal-error")}}resolve(d){on(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(d),this.unregisterAndCleanUp()}reject(d){on(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(d),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}new Lr(2e3,1e4);const Ec="pendingRedirect",Za=new Map;class _u extends Lh{constructor(d,_,b=!1){super(d,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,b),this.eventId=null}execute(){var d=()=>super.execute,_=this;return(0,R.A)(function*(){let b=Za.get(_.auth._key());if(!b){try{const Q=(yield function Ts(w,d){return vn.apply(this,arguments)}(_.resolver,_.auth))?yield d().call(_):null;b=()=>Promise.resolve(Q)}catch(z){b=()=>Promise.reject(z)}Za.set(_.auth._key(),b)}return _.bypassAuthState||Za.set(_.auth._key(),()=>Promise.resolve(null)),b()})()}onAuthEvent(d){var _=()=>super.onAuthEvent,b=this;return(0,R.A)(function*(){if("signInViaRedirect"===d.type)return _().call(b,d);if("unknown"!==d.type){if(d.eventId){const z=yield b.auth._redirectUserForId(d.eventId);if(z)return b.user=z,_().call(b,d);b.resolve(null)}}else b.resolve(null)})()}onExecution(){return(0,R.A)(function*(){})()}cleanUp(){}}function vn(){return(vn=(0,R.A)(function*(w,d){const _=function nd(w){return vr(Ec,w.config.apiKey,w.name)}(d),b=function td(w){return mt(w._redirectPersistence)}(w);if(!(yield b._isAvailable()))return!1;const z="true"===(yield b._get(_));return yield b._remove(_),z})).apply(this,arguments)}function vu(w,d){Za.set(w._key(),d)}function Ju(w,d){return Xn.apply(this,arguments)}function Xn(){return(Xn=(0,R.A)(function*(w,d,_=!1){if((0,J.xZ)(w.app))return Promise.reject(it(w));const b=Tn(w),z=function mr(w,d){return d?mt(d):(De(w._popupRedirectResolver,w,"argument-error"),w._popupRedirectResolver)}(b,d),ve=yield new _u(b,z,_).execute();return ve&&!_&&(delete ve.user._redirectEventId,yield b._persistUserIfCurrent(ve.user),yield b._setRedirectUser(null,d)),ve})).apply(this,arguments)}class od{constructor(d){this.auth=d,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(d){this.consumers.add(d),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,d)&&(this.sendToConsumer(this.queuedRedirectEvent,d),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(d){this.consumers.delete(d)}onEvent(d){if(this.hasEventBeenHandled(d))return!1;let _=!1;return this.consumers.forEach(b=>{this.isEventForConsumer(d,b)&&(_=!0,this.sendToConsumer(d,b),this.saveEventToCache(d))}),this.hasHandledPotentialRedirect||!function ad(w){switch(w.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return sd(w);default:return!1}}(d)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=d,_=!0)),_}sendToConsumer(d,_){var b;if(d.error&&!sd(d)){const z=(null===(b=d.error.code)||void 0===b?void 0:b.split("auth/")[1])||"internal-error";_.onError(qe(this.auth,z))}else _.onAuthEvent(d)}isEventForConsumer(d,_){const b=null===_.eventId||!!d.eventId&&d.eventId===_.eventId;return _.filter.includes(d.type)&&b}hasEventBeenHandled(d){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Eu(d))}saveEventToCache(d){this.cachedEventUids.add(Eu(d)),this.lastProcessedEventTime=Date.now()}}function Eu(w){return[w.type,w.eventId,w.sessionId,w.tenantId].filter(d=>d).join("-")}function sd({type:w,error:d}){return"unknown"===w&&"auth/no-auth-event"===d?.code}function tl(){return(tl=(0,R.A)(function*(w,d={}){return K(w,"GET","/v1/projects",d)})).apply(this,arguments)}const cd=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Bh=/^https?/;function Ji(){return Ji=(0,R.A)(function*(w){if(w.config.emulator)return;const{authorizedDomains:d}=yield function Kp(w){return tl.apply(this,arguments)}(w);for(const _ of d)try{if(Hc(_))return}catch{}ct(w,"unauthorized-domain")}),Ji.apply(this,arguments)}function Hc(w){const d=fr(),{protocol:_,hostname:b}=new URL(d);if(w.startsWith("chrome-extension://")){const ve=new URL(w);return""===ve.hostname&&""===b?"chrome-extension:"===_&&w.replace("chrome-extension://","")===d.replace("chrome-extension://",""):"chrome-extension:"===_&&ve.hostname===b}if(!Bh.test(_))return!1;if(cd.test(w))return b===w;const z=w.replace(/\./g,"\\.");return new RegExp("^(.+\\."+z+"|"+z+")$","i").test(b)}const As=new Lr(3e4,6e4);function zs(){const w=Or().___jsl;if(w?.H)for(const d of Object.keys(w.H))if(w.H[d].r=w.H[d].r||[],w.H[d].L=w.H[d].L||[],w.H[d].r=[...w.H[d].L],w.CP)for(let _=0;_<w.CP.length;_++)w.CP[_]=null}let zc=null;const Yp=new Lr(5e3,15e3),ud="__/auth/iframe",Cu="emulator/auth/iframe",Ci={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},nl=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Zp(w){const d=w.config;De(d.authDomain,w,"auth-domain-config-required");const _=d.emulator?yt(d,Cu):`https://${w.config.authDomain}/${ud}`,b={apiKey:d.apiKey,appName:w.name,v:J.MF},z=nl.get(w.config.apiHost);z&&(b.eid=z);const Q=w._getFrameworks();return Q.length&&(b.fw=Q.join(",")),`${_}?${(0,Se.Am)(b).slice(1)}`}function wu(){return wu=(0,R.A)(function*(w){const d=yield function Xp(w){return zc=zc||function Qp(w){return new Promise((d,_)=>{var b,z,Q;function ve(){zs(),gapi.load("gapi.iframes",{callback:()=>{d(gapi.iframes.getContext())},ontimeout:()=>{zs(),_(qe(w,"network-request-failed"))},timeout:As.get()})}if(null!==(z=null===(b=Or().gapi)||void 0===b?void 0:b.iframes)&&void 0!==z&&z.Iframe)d(gapi.iframes.getContext());else{if(null===(Q=Or().gapi)||void 0===Q||!Q.load){const Fe=La("iframefcb");return Or()[Fe]=()=>{gapi.load?ve():_(qe(w,"network-request-failed"))},Ks(`${function ga(){return Gi.gapiScript}()}?onload=${Fe}`).catch(et=>_(et))}ve()}}).catch(d=>{throw zc=null,d})}(w),zc}(w),_=Or().gapi;return De(_,w,"internal-error"),d.open({where:document.body,url:Zp(w),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ci,dontclear:!0},b=>new Promise(function(){var z=(0,R.A)(function*(Q,ve){yield b.restyle({setHideOnLeave:!1});const Fe=qe(w,"network-request-failed"),et=Or().setTimeout(()=>{ve(Fe)},Yp.get());function Ht(){Or().clearTimeout(et),Q(b)}b.ping(Ht).then(Ht,()=>{ve(Fe)})});return function(Q,ve){return z.apply(this,arguments)}}()))}),wu.apply(this,arguments)}const rl={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class dd{constructor(d){this.window=d,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Tr="__/auth/handler",il="emulator/auth/handler",hd=encodeURIComponent("fac");function ol(w,d,_,b,z,Q){return fd.apply(this,arguments)}function fd(){return(fd=(0,R.A)(function*(w,d,_,b,z,Q){De(w.config.authDomain,w,"auth-domain-config-required"),De(w.config.apiKey,w,"invalid-api-key");const ve={apiKey:w.config.apiKey,appName:w.name,authType:_,redirectUrl:b,v:J.MF,eventId:z};if(d instanceof Dn){d.setDefaultLanguage(w.languageCode),ve.providerId=d.providerId||"",(0,Se.Im)(d.getCustomParameters())||(ve.customParameters=JSON.stringify(d.getCustomParameters()));for(const[In,mn]of Object.entries(Q||{}))ve[In]=mn}if(d instanceof zr){const In=d.getScopes().filter(mn=>""!==mn);In.length>0&&(ve.scopes=In.join(","))}w.tenantId&&(ve.tid=w.tenantId);const Fe=ve;for(const In of Object.keys(Fe))void 0===Fe[In]&&delete Fe[In];const et=yield w._getAppCheckToken(),Ht=et?`#${hd}=${encodeURIComponent(et)}`:"";return`${function pd({config:w}){return w.emulator?yt(w,il):`https://${w.authDomain}/${Tr}`}(w)}?${(0,Se.Am)(Fe).slice(1)}${Ht}`})).apply(this,arguments)}const sl="webStorageSupport",Gs=class Gc{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=pc,this._completeRedirectFn=Ju,this._overrideRedirectResult=vu}_openPopup(d,_,b,z){var Q=this;return(0,R.A)(function*(){var ve;on(null===(ve=Q.eventManagers[d._key()])||void 0===ve?void 0:ve.manager,"_initialize() not called before _openPopup()");const Fe=yield ol(d,_,b,fr(),z);return function Ri(w,d,_,b=500,z=600){const Q=Math.max((window.screen.availHeight-z)/2,0).toString(),ve=Math.max((window.screen.availWidth-b)/2,0).toString();let Fe="";const et=Object.assign(Object.assign({},rl),{width:b.toString(),height:z.toString(),top:Q,left:ve}),Ht=(0,Se.ZQ)().toLowerCase();_&&(Fe=Ni(Ht)?"_blank":_),ot(Ht)&&(d=d||"http://localhost",et.scrollbars="yes");const In=Object.entries(et).reduce((Ar,[Mi,qc])=>`${Ar}${Mi}=${qc},`,"");if(function Zo(w=(0,Se.ZQ)()){var d;return pa(w)&&!(null===(d=window.navigator)||void 0===d||!d.standalone)}(Ht)&&"_self"!==Fe)return function Pa(w,d){const _=document.createElement("a");_.href=w,_.target=d;const b=document.createEvent("MouseEvent");b.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(b)}(d||"",Fe),new dd(null);const mn=window.open(d||"",Fe,In);De(mn,w,"popup-blocked");try{mn.focus()}catch{}return new dd(mn)}(d,Fe,Ro())})()}_openRedirect(d,_,b,z){var Q=this;return(0,R.A)(function*(){return yield Q._originValidation(d),function Bs(w){Or().location.href=w}(yield ol(d,_,b,fr(),z)),new Promise(()=>{})})()}_initialize(d){const _=d._key();if(this.eventManagers[_]){const{manager:z,promise:Q}=this.eventManagers[_];return z?Promise.resolve(z):(on(Q,"If manager is not set, promise should be"),Q)}const b=this.initAndGetManager(d);return this.eventManagers[_]={promise:b},b.catch(()=>{delete this.eventManagers[_]}),b}initAndGetManager(d){var _=this;return(0,R.A)(function*(){const b=yield function $h(w){return wu.apply(this,arguments)}(d),z=new od(d);return b.register("authEvent",Q=>(De(Q?.authEvent,d,"invalid-auth-event"),{status:z.onEvent(Q.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[d._key()]={manager:z},_.iframes[d._key()]=b,z})()}_isIframeWebStorageSupported(d,_){this.iframes[d._key()].send(sl,{type:sl},z=>{var Q;const ve=null===(Q=z?.[0])||void 0===Q?void 0:Q[sl];void 0!==ve&&_(!!ve),ct(d,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(d){const _=d._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function Eo(w){return Ji.apply(this,arguments)}(d)),this.originValidationPromises[_]}get _shouldInitProactively(){return be()||ri()||pa()}};var Tc="@firebase/auth";class Ja{constructor(d){this.auth=d,this.internalListeners=new Map}getUid(){var d;return this.assertAuthConfigured(),(null===(d=this.auth.currentUser)||void 0===d?void 0:d.uid)||null}getToken(d){var _=this;return(0,R.A)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(d)}:null})()}addAuthTokenListener(d){if(this.assertAuthConfigured(),this.internalListeners.has(d))return;const _=this.auth.onIdTokenChanged(b=>{d(b?.stsTokenManager.accessToken||null)});this.internalListeners.set(d,_),this.updateProactiveRefresh()}removeAuthTokenListener(d){this.assertAuthConfigured();const _=this.internalListeners.get(d);_&&(this.internalListeners.delete(d),_(),this.updateProactiveRefresh())}assertAuthConfigured(){De(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Jp=(0,Se.XA)("authIdTokenMaxAge")||300;let ll=null;const eg=w=>function(){var d=(0,R.A)(function*(_){const b=_&&(yield _.getIdTokenResult()),z=b&&((new Date).getTime()-Date.parse(b.issuedAtTime))/1e3;if(z&&z>Jp)return;const Q=b?.token;ll!==Q&&(ll=Q,yield fetch(w,{method:Q?"POST":"DELETE",headers:Q?{Authorization:`Bearer ${Q}`}:{}}))});return function(_){return d.apply(this,arguments)}}();function Gh(w=(0,J.Sx)()){const d=(0,J.j6)(w,"auth");if(d.isInitialized())return d.getImmediate();const _=function pt(w,d){const _=(0,J.j6)(w,"auth");if(_.isInitialized()){const z=_.getImmediate(),Q=_.getOptions();if((0,Se.bD)(Q,d??{}))return z;ct(z,"already-initialized")}return _.initialize({options:d})}(w,{popupRedirectResolver:Gs,persistence:[Gp,js,pc]}),b=(0,Se.XA)("authTokenSyncURL");if(b&&"boolean"==typeof isSecureContext&&isSecureContext){const Q=new URL(b,location.origin);if(location.origin===Q.origin){const ve=eg(Q.toString());(function xt(w,d,_){(0,Se.Ku)(w).beforeAuthStateChanged(d,_)})(_,ve,()=>ve(_.currentUser)),function Ke(w,d,_,b){(0,Se.Ku)(w).onIdTokenChanged(d,_,b)}(_,Fe=>ve(Fe))}}const z=(0,Se.Tj)("auth");return z&&function Jo(w,d,_){const b=Tn(w);De(b._canInitEmulator,b,"emulator-config-failed"),De(/^https?:\/\//.test(d),b,"invalid-emulator-scheme");const z=!!_?.disableWarnings,Q=ii(d),{host:ve,port:Fe}=function lr(w){const d=ii(w),_=/(\/\/)?([^?#/]+)/.exec(w.substr(d.length));if(!_)return{host:"",port:null};const b=_[2].split("@").pop()||"",z=/^(\[[^\]]+\])(:|$)/.exec(b);if(z){const Q=z[1];return{host:Q,port:Os(b.substr(Q.length+1))}}{const[Q,ve]=b.split(":");return{host:Q,port:Os(ve)}}}(d);b.config.emulator={url:`${Q}//${ve}${null===Fe?"":`:${Fe}`}/`},b.settings.appVerificationDisabledForTesting=!0,b.emulatorConfig=Object.freeze({host:ve,port:Fe,protocol:Q.replace(":",""),options:Object.freeze({disableWarnings:z})}),z||function es(){function w(){const d=document.createElement("p"),_=d.style;d.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",d.classList.add("firebase-emulator-warning"),document.body.appendChild(d)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",w):w())}()}(_,`http://${z}`),_}(function ps(w){Gi=w})({loadJS:w=>new Promise((d,_)=>{const b=document.createElement("script");b.setAttribute("src",w),b.onload=d,b.onerror=z=>{const Q=qe("internal-error");Q.customData=z,_(Q)},b.type="text/javascript",b.charset="UTF-8",function tg(){var w,d;return null!==(d=null===(w=document.getElementsByTagName("head"))||void 0===w?void 0:w[0])&&void 0!==d?d:document}().appendChild(b)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function ul(w){(0,J.om)(new de.uA("auth",(d,{options:_})=>{const b=d.getProvider("app").getImmediate(),z=d.getProvider("heartbeat"),Q=d.getProvider("app-check-internal"),{apiKey:ve,authDomain:Fe}=b.options;De(ve&&!ve.includes(":"),"invalid-api-key",{appName:b.name});const et={apiKey:ve,authDomain:Fe,clientPlatform:w,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:We(w)},Ht=new Ot(b,z,Q,et);return function At(w,d){const _=d?.persistence||[],b=(Array.isArray(_)?_:[_]).map(mt);d?.errorMap&&w._updateErrorMap(d.errorMap),w._initializeWithPersistence(b,d?.popupRedirectResolver)}(Ht,_),Ht},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((d,_,b)=>{d.getProvider("auth-internal").initialize()})),(0,J.om)(new de.uA("auth-internal",d=>{const _=Tn(d.getProvider("auth").getImmediate());return new Ja(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,J.KO)(Tc,"1.7.9",function zh(w){switch(w){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(w)),(0,J.KO)(Tc,"1.7.9","esm2017")}("Browser")},467:(hn,at,ie)=>{function R(Se,p,Le,de,$e,It,rt){try{var he=Se[It](rt),_e=he.value}catch(Ge){return void Le(Ge)}he.done?p(_e):Promise.resolve(_e).then(de,$e)}function J(Se){return function(){var p=this,Le=arguments;return new Promise(function(de,$e){var It=Se.apply(p,Le);function rt(_e){R(It,de,$e,rt,he,"next",_e)}function he(_e){R(It,de,$e,rt,he,"throw",_e)}rt(void 0)})}}ie.d(at,{A:()=>J})},1635:(hn,at,ie)=>{function p(Ne,ce){var W={};for(var K in Ne)Object.prototype.hasOwnProperty.call(Ne,K)&&ce.indexOf(K)<0&&(W[K]=Ne[K]);if(null!=Ne&&"function"==typeof Object.getOwnPropertySymbols){var ye=0;for(K=Object.getOwnPropertySymbols(Ne);ye<K.length;ye++)ce.indexOf(K[ye])<0&&Object.prototype.propertyIsEnumerable.call(Ne,K[ye])&&(W[K[ye]]=Ne[K[ye]])}return W}function Ge(Ne,ce,W,K){return new(W||(W=Promise))(function(Oe,Et){function kt(un){try{Gt(K.next(un))}catch(qn){Et(qn)}}function En(un){try{Gt(K.throw(un))}catch(qn){Et(qn)}}function Gt(un){un.done?Oe(un.value):function ye(Oe){return Oe instanceof W?Oe:new W(function(Et){Et(Oe)})}(un.value).then(kt,En)}Gt((K=K.apply(Ne,ce||[])).next())})}function ct(Ne){return this instanceof ct?(this.v=Ne,this):new ct(Ne)}function qe(Ne,ce,W){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ye,K=W.apply(Ne,ce||[]),Oe=[];return ye=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),kt("next"),kt("throw"),kt("return",function Et(zn){return function(Un){return Promise.resolve(Un).then(zn,qn)}}),ye[Symbol.asyncIterator]=function(){return this},ye;function kt(zn,Un){K[zn]&&(ye[zn]=function(yr){return new Promise(function(Nt,ut){Oe.push([zn,yr,Nt,ut])>1||En(zn,yr)})},Un&&(ye[zn]=Un(ye[zn])))}function En(zn,Un){try{!function Gt(zn){zn.value instanceof ct?Promise.resolve(zn.value.v).then(un,qn):Ur(Oe[0][2],zn)}(K[zn](Un))}catch(yr){Ur(Oe[0][3],yr)}}function un(zn){En("next",zn)}function qn(zn){En("throw",zn)}function Ur(zn,Un){zn(Un),Oe.shift(),Oe.length&&En(Oe[0][0],Oe[0][1])}}function it(Ne){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var W,ce=Ne[Symbol.asyncIterator];return ce?ce.call(Ne):(Ne=function fn(Ne){var ce="function"==typeof Symbol&&Symbol.iterator,W=ce&&Ne[ce],K=0;if(W)return W.call(Ne);if(Ne&&"number"==typeof Ne.length)return{next:function(){return Ne&&K>=Ne.length&&(Ne=void 0),{value:Ne&&Ne[K++],done:!Ne}}};throw new TypeError(ce?"Object is not iterable.":"Symbol.iterator is not defined.")}(Ne),W={},K("next"),K("throw"),K("return"),W[Symbol.asyncIterator]=function(){return this},W);function K(Oe){W[Oe]=Ne[Oe]&&function(Et){return new Promise(function(kt,En){!function ye(Oe,Et,kt,En){Promise.resolve(En).then(function(Gt){Oe({value:Gt,done:kt})},Et)}(kt,En,(Et=Ne[Oe](Et)).done,Et.value)})}}}ie.d(at,{AQ:()=>qe,N3:()=>ct,Tt:()=>p,sH:()=>Ge,xN:()=>it}),"function"==typeof SuppressedError&&SuppressedError}},hn=>{hn(hn.s=9451)}]);